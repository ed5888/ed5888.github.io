/*! For license information please see 26.6d66a162.chunk.js.LICENSE.txt */
(this["webpackJsonp@elamp/main-app"]=this["webpackJsonp@elamp/main-app"]||[]).push([[26,5],{1001:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var r,a=n(0),o=n(14),i=n(17),l=n(285),s=n(10),c=n(1),d={callbacks:{onChangePeriod:function(){return null},onChangeView:function(){return null},onChangeDisplayMode:function(){return null},onChangeFilters:function(){return null},onExport:function(){return null}}},u=Object(a.createContext)(d),p=function(e){var t=e.children,n=e.callbacks;return Object(c.jsx)(u.Provider,{value:{callbacks:n},children:t})},f=n(187),m=n(821),g=n(818),h=function(e){var t=e.value,n=e.onChange,r=Object(o.useSwitch)(!1),l=r.active,d=r.on,u=r.off,p=Object(o.useTranslate)(),h=Object(a.useMemo)((function(){return[{label:p(g.PeriodType.DAY),value:g.PeriodType.DAY},{label:p(g.PeriodType.WEEK),value:g.PeriodType.WEEK},{label:p(g.PeriodType.MONTH),value:g.PeriodType.MONTH}]}),[p]),b=Object(a.useMemo)((function(){return h.reduce((function(e,t){return Object(i.a)(Object(i.a)({},e),{},Object(f.a)({},t.value,t))}),{})}),[h]);return Object(c.jsxs)(o.MenuSelect.Target,{children:[Object(c.jsx)(s.SelectedFilterButton,{text:b[t].label,onClick:d,icon:m.a,isActive:l}),Object(c.jsx)(o.MenuSelect,{onClose:u,isOpened:l,children:Object(c.jsx)(s.SelectFilterList,{title:p("periodType"),value:t,onChange:function(e){n(e),u()},options:h})})]})},b=["startDate","endDate","periodType"],v=function(e){var t=e.startDate,n=e.endDate,r=e.periodType,d=Object(l.a)(e,b),p=Object(o.useTranslate)(),f=Object(a.useContext)(u).callbacks.onChangePeriod;return Object(c.jsxs)(o.Line,Object(i.a)(Object(i.a)({},d),{},{children:[Object(c.jsx)(s.DatePickerFilter,{onSubmit:function(e){f(e.set("hours",12).toDate(),n,r)},value:t.toISOString(),textPrefix:p("from"),mr:1}),Object(c.jsx)(s.DatePickerFilter,{min:t.toISOString(),onSubmit:function(e){f(t,e.set("hours",12).toDate(),r)},value:n.toISOString(),textPrefix:p("to"),mr:1}),Object(c.jsx)(h,{value:r,onChange:function(e){return f(t,n,e)}})]}))},x=n(104),y=n(101),j=["value","onChange"],O=function(e){var t=e.value,n=e.onChange,r=Object(l.a)(e,j),d=Object(o.useSwitch)(!1),u=d.active,p=d.on,m=d.off,g=Object(o.useTranslate)(),h=Object(a.useMemo)((function(){return[{icon:x.a,label:g("planningView"),value:"planning"},{icon:y.a,label:g("allocationRatesView"),value:"allocationRate"}]}),[g]),b=Object(a.useMemo)((function(){return h.reduce((function(e,t){return Object(i.a)(Object(i.a)({},e),{},Object(f.a)({},t.value,t))}),{})}),[h]);return Object(c.jsxs)(o.MenuSelect.Target,{children:[Object(c.jsx)(s.SelectedFilterButton,Object(i.a)({text:b[t].label,onClick:p,icon:b[t].icon,isActive:u},r)),Object(c.jsx)(o.MenuSelect,{onClose:m,isOpened:u,children:Object(c.jsx)(s.SelectFilterList,{title:g("viewType"),value:t,onChange:function(e){n(e),m()},options:h})})]})},_=n(833),C=["title","titleId"];function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function D(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function S(e,t){var n=e.title,o=e.titleId,i=D(e,C);return a.createElement("svg",w({viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":o},i),n?a.createElement("title",{id:o},n):null,r||(r=a.createElement("path",{d:"M3.44657 6.31234C2.66965 6.31234 2.00099 6.03214 1.4406 5.47174C0.880197 4.91134 0.599998 4.23632 0.599998 3.44666C0.599998 2.66975 0.880197 2.00109 1.4406 1.44069C2.00099 0.880297 2.67602 0.600098 3.46567 0.600098C4.24259 0.600098 4.91124 0.880297 5.47164 1.44069C6.03204 2.00109 6.31224 2.67612 6.31224 3.46577C6.31224 4.24268 6.03204 4.91134 5.47164 5.47174C4.91124 6.03214 4.23622 6.31234 3.44657 6.31234ZM3.46567 4.57383C3.77134 4.57383 4.03244 4.46557 4.24895 4.24905C4.46547 4.03254 4.57373 3.76507 4.57373 3.44666C4.57373 3.14099 4.46547 2.8799 4.24895 2.66338C4.03244 2.44686 3.76497 2.33861 3.44657 2.33861C3.14089 2.33861 2.8798 2.44686 2.66328 2.66338C2.44676 2.8799 2.33851 3.14736 2.33851 3.46577C2.33851 3.77144 2.44676 4.03254 2.66328 4.24905C2.8798 4.46557 3.14726 4.57383 3.46567 4.57383ZM10.5343 13.4001C9.75741 13.4001 9.08875 13.1199 8.52836 12.5595C7.96796 11.9991 7.68776 11.3241 7.68776 10.5344C7.68776 9.75751 7.96796 9.08885 8.52836 8.52846C9.08875 7.96806 9.76378 7.68786 10.5534 7.68786C11.3303 7.68786 11.999 7.96806 12.5594 8.52846C13.1198 9.08885 13.4 9.76388 13.4 10.5535C13.4 11.3304 13.1198 11.9991 12.5594 12.5595C11.999 13.1199 11.324 13.4001 10.5343 13.4001ZM10.5534 11.6616C10.8591 11.6616 11.1202 11.5533 11.3367 11.3368C11.5532 11.1203 11.6615 10.8528 11.6615 10.5344C11.6615 10.2288 11.5532 9.96766 11.3367 9.75114C11.1202 9.53463 10.8527 9.42637 10.5343 9.42637C10.2287 9.42637 9.96756 9.53463 9.75104 9.75114C9.53453 9.96766 9.42627 10.2351 9.42627 10.5535C9.42627 10.8592 9.53453 11.1203 9.75104 11.3368C9.96756 11.5533 10.235 11.6616 10.5534 11.6616ZM1.95642 13.2664L0.73373 12.0437L12.0436 0.733829L13.2663 1.95652L1.95642 13.2664Z"})))}var P=a.forwardRef(S),T=(n.p,["value","onChange"]),E=function(e){var t=e.value,n=e.onChange,r=Object(l.a)(e,T),s=Object(o.useTranslate)({capitalize:!0}),d=Object(a.useMemo)((function(){return[{type:"icon",icon:P,value:"percentage"},{type:"icon",icon:_.a,value:"number_of_resources"}]}),[s]),u=Object(a.useMemo)((function(){return"undefined"===typeof t||!0===t?"percentage":"number_of_resources"}),[t]);return Object(c.jsx)(o.ButtonSwitch,Object(i.a)({value:u,onChange:function(e){n("percentage"===e)},options:d},r))},k=n(61),A=n(1145),N=k.default.div({padding:0,margin:0,border:0,width:0},(function(e){return{borderLeft:"1px solid ".concat(e.theme.colors.grey[4])}}),A.b,A.a),I=function(e){var t=e.callbacks,n=e.view,r=e.planningType,i=e.isPercentage,l=e.periodType,d=e.startDate,u=e.endDate,f=e.quickFilters,m=e.advancedFilters,g=e.advancedFiltersSchema,h=e.standardFilters,b=e.standardFiltersSchema,x=e.selectedFilter,y=e.onSelectFilter,j=e.onNewFilter,_=e.onUpdateFilter,C=e.onDeleteFilter,w=e.canExport,D=Object(o.useTranslate)({capitalize:!0}),S=Object(a.useMemo)((function(){if(f)return f.filter((function(e){return!0===e.isSelected})).map((function(e){return e.id}))}),[f]);return Object(c.jsx)(p,{callbacks:t,children:Object(c.jsxs)(o.Line,{justifyContent:"space-between",pb:0,children:[Object(c.jsxs)(o.Line,{alignItems:"center",children:[Object(c.jsx)(O,{value:n,onChange:t.onChangeView,mr:1}),Object(c.jsx)(v,{periodType:l,startDate:d,endDate:u}),"project"===r&&Object(c.jsx)(E,{value:i,onChange:t.onChangeDisplayMode,ml:1}),f.length>0&&"undefined"!==typeof S&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(N,{ml:1,mr:1,alignSelf:"stretch"}),Object(c.jsx)(s.TableToolboxQuickFiltersGroup,{quickFilters:f,ml:"-2.5px",minHeight:"30px"})]})]}),Object(c.jsxs)(o.Line,{pr:1,children:["undefined"!==typeof m&&Object(c.jsx)(s.TableToolboxAdvancedFilters,{advancedFilters:m,advancedFiltersSchema:g,standardFilters:h,standardFiltersSchema:b,onSelectFilter:y,onNewFilter:j,onUpdateFilter:_,onDeleteFilter:C,selectedFilter:x}),Object(c.jsx)(s.TableToolboxActionsMenu,{actions:[{title:D("export_action"),onClick:t.onExport,disabled:!w}]})]})]})})}},1004:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return v})),n.d(t,"d",(function(){return y})),n.d(t,"c",(function(){return O}));var r,a=n(53),o=n(0),i=n(14),l=n(415),s=n(37),c=n(45),d=n(65),u=n(818);!function(e){e.Overstaffed="overstaffed",e.Unstaffed="unstaffed",e.PartiallyStaffed="partiallyStaffed",e.Staffed="staffed"}(r||(r={}));var p={simulation:"simulated",provision:"provisional",approved:"confirmed"},f=[u.AllocationType.ABSENT,u.AllocationType.VACANCY,u.AllocationType.TRAINING,u.AllocationType.WORK],m=function(){var e=Object(d.h)(),t=Object(i.useTranslate)(),n={overstaffed:{fill:{type:"pattern",pattern:"solid",fgColor:{argb:e.colors.error[0].replace("#","FF")}},font:{color:{argb:e.colors.error[3].replace("#","FF")}}},unstaffed:{fill:{type:"pattern",pattern:"solid",fgColor:{argb:e.colors.error[0].replace("#","FF")}}},partiallyStaffed:{fill:{type:"pattern",pattern:"solid",fgColor:{argb:e.colors.alert[0].replace("#","FF")}}},staffed:{fill:{type:"pattern",pattern:"solid",fgColor:{argb:e.colors.success[0].replace("#","FF")}}}},a=function(e,n){var r;return"work"===e.type?"".concat((null===(r=e.project)||void 0===r?void 0:r.name)||""," - ").concat((null===n||void 0===n?void 0:n.name)||""," - ").concat(e.rate,"%").concat(p[e.status]?" - ".concat(t(p[e.status])):""):"".concat(e.projectAndNeedName||""," - ").concat(e.rate,"%")};return{formatAllocationCell:function(e,t){if(void 0===e||null===e)return"";switch(t){case"percentage":return"".concat(Math.round(10*e.rate)/10,"%");case"headcount":return"".concat(e.min,"/").concat(e.max);case"manDays":return"".concat(e.staffedManDays||"","/").concat(e.totalManDays||"");default:return""}},formatAssignmentLabel:a,formatNextAvailability:function(n){var r=Object(s.localeMoment)(n);return r.isSameOrBefore(Object(s.localeMoment)(),"d")?{cellContent:t("available"),cellStyle:{fill:{type:"pattern",pattern:"solid",fgColor:{argb:e.colors.success[0].replace("#","FF")}}}}:{cellContent:r.toDate(),cellStyle:{fill:{type:"pattern",pattern:"solid",fgColor:{argb:e.colors.error[0].replace("#","FF")}}}}},getAllocationStyle:function(e){return"number"!==typeof e?[]:e>100?n[r.Overstaffed]:100===e?n[r.Staffed]:0===e?n[r.Unstaffed]:n[r.PartiallyStaffed]},getAssignmentCellColor:function(t){var n;return t.some((function(e){return e.type===u.AllocationType.ABSENT||e.type===u.AllocationType.VACANCY||e.type===u.AllocationType.TRAINING}))?e.colors.grey[2]:(null===(n=t[0].project)||void 0===n?void 0:n.colorHex)||e.colors.grey[1]},getAssignmentsOnThisPeriodCellContent:function(e,t){return e.sort((function(e,t){return f.indexOf(e.type)-f.indexOf(t.type)})).map((function(e){return a(e,t)})).join("\n")},getResourceName:function(e){if("EXTERNAL_RESOURCE"===e.id){var n=t("externalResource");return"externalResource"!==e.displayName&&(n="".concat(e.displayName," (").concat(t("external_resource_shortcut"),")")),n}return"".concat((null===e||void 0===e?void 0:e.familyName)||""," ").concat((null===e||void 0===e?void 0:e.givenName)||"")},getScheduleColumns:function(e,t,n){return Object(u.generatePlanningHeaders)(e,t,n).reduce((function(e,t){return t.squares.forEach((function(t){void 0===e.find((function(e){return e.startDate.getTime()===t.startDate.getTime()}))&&e.push(t)})),e}),[])}}},g=n(10),h=function(e){var t=e.columns,n=e.title,r=Object(d.h)(),o=Object(g.useAppContext)().user,i=function(e){switch(e){case"header":return{fill:{type:"pattern",pattern:"solid",fgColor:{argb:r.colors.grey[4].replace("#","FF")}},font:{bold:!0}};case"project":return{border:{top:{style:"thin",color:{argb:r.colors.black[2].replace("#","FF")}}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:r.colors.grey[3].replace("#","FF")}},font:{bold:!0}};case"projectNeed":return{border:{top:{style:"thin",color:{argb:r.colors.grey[5].replace("#","FF")}}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:r.colors.grey[1].replace("#","FF")}}};case"totals":return{border:{top:{style:"thin",color:{argb:r.colors.black[2].replace("#","FF")}},bottom:{style:"thin",color:{argb:r.colors.black[2].replace("#","FF")}}},font:{bold:!0}};case"userAssignments":case"userAllocation":default:return{}}},s=new Map,c=t.map((function(e){return{header:e.headerTitle,key:e.dataKey,width:void 0!==e.columnWidth?e.columnWidth/10.41:void 0,xlsCellWithStyleRenderer:e.xlsCellWithStyleRenderer||function(e){return null}}}));c.forEach((function(e){s.set(e.key,e)}));var u=n,p=Object(l.generateXLSWorkbook)({currentUser:{id:o.id,givenName:o.givenName||"",familyName:o.familyName||""},worksheetName:u});return{workbook:p,addRowToXLS:function(e,t){var n=function(e,t){return e.kind=t,Array.from(s.entries()).reduce((function(t,n,r){var o=Object(a.a)(n,2),i=o[0],l=o[1];if(l.xlsCellWithStyleRenderer&&l.xlsCellWithStyleRenderer({node:e})){var s=l.xlsCellWithStyleRenderer({node:e}),c=s.cellContent,d=s.cellStyle;t.content[i]=c,d&&t.styles.push({properties:d,columnIndex:r})}return t}),{content:{},styles:[]})}(e,t),r=n.content,o=n.styles,l=p.sheet.addRow(r);return Object.assign(l,i(t)),(null===o||void 0===o?void 0:o.length)>0&&o.forEach((function(e){Object.assign(l.getCell(e.columnIndex+1),e.properties)})),l},initWorksheet:function(){p.sheet&&p.workbook.removeWorksheet(p.sheet.id),p.sheet=p.workbook.addWorksheet(u,{properties:{}}),p.sheet.properties.defaultRowHeight=30,p.sheet.columns=c,Object.assign(p.sheet.getRow(1),i("header"))}}},b=function(e){var t=e.planningData,n=e.allocationsMode,r=Object(i.useTranslate)({capitalize:!0}),d=Object(i.useAlert)(),u=Object(o.useState)(!1),p=Object(a.a)(u,2),f=p[0];p[1];Object(o.useEffect)((function(){f&&d.show(r("export_toaster_info"),{timeout:0,type:"info"})}),[f]);var g=m(),b=g.getAllocationStyle,v=g.getAssignmentCellColor,x=g.getAssignmentsOnThisPeriodCellContent,y=g.getResourceName,j=g.formatAllocationCell,O=g.getScheduleColumns,_=[{dataKey:"project",headerTitle:r("projects"),columnWidth:Object(c.b)("large"),xlsCellWithStyleRenderer:function(e){var t;return{cellContent:(null===(t=e.node.project)||void 0===t?void 0:t.name)||""}}},{dataKey:"projectNeed",headerTitle:r("needs"),columnWidth:Object(c.b)("large"),xlsCellWithStyleRenderer:function(e){var t;return{cellContent:(null===(t=e.node.projectNeed)||void 0===t?void 0:t.name)||""}}},{dataKey:"user",headerTitle:r("users"),columnWidth:Object(c.b)("large"),xlsCellWithStyleRenderer:function(e){var t=e.node;return{cellContent:"userAssignments"===t.kind?y(t.person):""}}},{dataKey:"allocationRate",headerTitle:r("allocation_rate_table_header"),columnWidth:Object(c.b)("small"),xlsCellWithStyleRenderer:function(e){var t=e.node;return"userAssignments"!==t.kind?{cellContent:j({min:t.minAssignees,max:t.maxHeadCount,rate:t.total},n),cellStyle:b(t.total)}:{cellContent:""}}}],C=O(t.periodType,t.startDate,t.endDate),w=_.concat(C.map((function(e,t){return{dataKey:"period".concat(t),headerTitle:e.startDate,columnWidth:Object(c.b)("small"),xlsCellWithStyleRenderer:function(r){var a=r.node;if("projectNeed"===a.kind)return{cellContent:a.byPeriod?j(a.byPeriod[t],n):"",cellStyle:a.byPeriod&&a.byPeriod[t]?b(a.byPeriod[t].rate):null};if("userAssignments"!==a.kind)return{cellContent:""};var o=a.assignments.filter((function(t){return t.startDate<=e.startDate&&t.endDate>e.startDate||t.startDate>e.startDate&&t.startDate<e.endDate})).sort((function(e,t){return e.rate-t.rate}));return o.length>0?{cellContent:x(o,a.projectNeed),cellStyle:{fill:{type:"pattern",pattern:"solid",fgColor:{argb:v(o).replace("#","FF")}}}}:void 0}}}))),D=h({title:r("projects_planning"),columns:w}),S=D.workbook,P=D.addRowToXLS,T=D.initWorksheet;return[f,function(){return function(){var e;T(),t&&(null===t||void 0===t||null===(e=t.projects)||void 0===e||e.forEach((function(e){var t;P(e,"project"),null===(t=e.needs)||void 0===t||t.forEach((function(t){var n;t.project=e.project,P(t,"projectNeed"),(null===(n=t.allocations)||void 0===n?void 0:n.reduce((function(e,t){return"EXTERNAL_RESOURCE"!==t.person.id&&void 0!==e.find((function(e){var n,r;return(null===(n=e.person)||void 0===n?void 0:n.id)===(null===(r=t.person)||void 0===r?void 0:r.id)}))||e.push(t),e}),[])).forEach((function(n){n.project=e.project,n.projectNeed=t.projectNeed,P(n,"userAssignments")}))}))})))}(),d.success(r("export_toast_success")),Object(l.exportXLSWorkbook)({workbook:S.workbook,filename:"".concat(r("project_planning"),"_").concat(Object(s.localeMoment)().format("YYYY-MM-DD_HHmm"))})}]};function v(e){var t=e.allocationData,n=e.allocationsMode,r=Object(i.useTranslate)({capitalize:!0}),d=Object(i.useAlert)(),u=Object(o.useState)(!1),p=Object(a.a)(u,2),f=p[0];p[1];Object(o.useEffect)((function(){f&&d.show(r("export_toaster_info"),{timeout:0,type:"info"})}),[f]);var g=m(),b=g.getAllocationStyle,v=g.formatAllocationCell,x=g.getScheduleColumns,y=[{dataKey:"project",headerTitle:r("projects"),columnWidth:Object(c.b)("large"),xlsCellWithStyleRenderer:function(e){var t,n=e.node;return{cellContent:"totals"===n.kind?n.nbProjects:(null===(t=n.project)||void 0===t?void 0:t.name)||""}}},{dataKey:"projectNeed",headerTitle:r("needs"),columnWidth:Object(c.b)("large"),xlsCellWithStyleRenderer:function(e){var t,n=e.node;return{cellContent:"totals"===n.kind?n.nbNeeds:(null===(t=n.need)||void 0===t?void 0:t.name)||""}}},{dataKey:"allocationRate",headerTitle:r("allocation_rate_table_header"),columnWidth:Object(c.b)("small"),xlsCellWithStyleRenderer:function(e){var t=e.node;return{cellContent:v({min:t.minAssignees,max:t.maxHeadCount,rate:"totals"===t.kind?t.allocationRate:t.total},n),cellStyle:b("totals"===t.kind?t.allocationRate:t.total)}}}],j=x(t.periodType,t.startDate,t.endDate),O=y.concat(j.map((function(e,t){return{dataKey:"period".concat(t),headerTitle:e.startDate,columnWidth:Object(c.b)("small"),xlsCellWithStyleRenderer:function(e){var r=e.node;return{cellContent:r.byPeriod?v(r.byPeriod[t],n):"",cellStyle:r.byPeriod&&r.byPeriod[t]?b(r.byPeriod[t].rate):null}}}}))),_=h({title:r("projects_planning"),columns:O}),C=_.workbook,w=_.addRowToXLS,D=_.initWorksheet;return[f,function(){return D(),t&&(w(t.totals,"totals"),t.projectAllocations.forEach((function(e){var t;w(e,"project"),null===(t=e.needs)||void 0===t||t.forEach((function(t){t.project=e.project,w(t,"projectNeed")}))}))),d.success(r("export_toast_success")),Object(l.exportXLSWorkbook)({workbook:C.workbook,filename:"".concat(r("project_planning"),"_").concat(Object(s.localeMoment)().format("YYYY-MM-DD_HHmm"))})}]}var x=n(871),y=function(e){var t=e.planningData,n=e.fetchRowsPromise,r=e.totalCount,d=Object(i.useTranslate)({capitalize:!0}),u=Object(i.useAlert)(),p=Object(o.useState)(!1),f=Object(a.a)(p,2),g=f[0],b=f[1];Object(o.useEffect)((function(){g&&u.show(d("export_toaster_info"),{timeout:0,type:"info"})}),[g]);var v=m(),y=v.getAssignmentCellColor,j=v.getAssignmentsOnThisPeriodCellContent,O=v.getScheduleColumns,_=v.formatNextAvailability,C=[{dataKey:"user",headerTitle:d("users"),columnWidth:Object(c.b)("large"),xlsCellWithStyleRenderer:function(e){var t,n,r=e.node;return{cellContent:"userAssignments"===r.kind?"".concat((null===(t=r.person)||void 0===t?void 0:t.familyName)||""," ").concat((null===(n=r.person)||void 0===n?void 0:n.givenName)||""):""}}},{dataKey:"userTitle",headerTitle:d("user_title"),columnWidth:Object(c.b)("large"),xlsCellWithStyleRenderer:function(e){var t,n=e.node;return{cellContent:"userAssignments"===n.kind?null===(t=n.person)||void 0===t?void 0:t.title:""}}},{dataKey:"userLocation",headerTitle:d("location"),columnWidth:Object(c.b)("large"),xlsCellWithStyleRenderer:function(e){var t,n,r=e.node;return{cellContent:"userAssignments"===r.kind?null===(t=r.person)||void 0===t||null===(n=t.place)||void 0===n?void 0:n.label:""}}},{dataKey:"userGroups",headerTitle:d("groups_title"),columnWidth:Object(c.b)("large"),xlsCellWithStyleRenderer:function(e){var t,n,r=e.node;return"userAssignments"===r.kind?{cellContent:((null===(t=r.person)||void 0===t||null===(n=t.groups)||void 0===n?void 0:n.nodes)||[]).map((function(e){return e.name})).join(",")}:{cellContent:""}}},{dataKey:"allocationRate",headerTitle:d("allocation_rate_table_header"),columnWidth:Object(c.b)("small"),xlsCellWithStyleRenderer:function(e){var t=e.node;return t.assignmentEnd?_(t.assignmentEnd):{cellContent:""}}}],w=O(t.periodType,t.startDate,t.endDate),D=C.concat(w.map((function(e,t){return{dataKey:"period".concat(t),headerTitle:e.startDate,columnWidth:Object(c.b)("small"),xlsCellWithStyleRenderer:function(t){var n,r=t.node;if((null===(n=r.allocations)||void 0===n?void 0:n.length)>0){var a=r.allocations.filter((function(t){return t.startDate<=e.startDate&&t.endDate>e.startDate||t.startDate>e.startDate&&t.startDate<e.endDate})).sort((function(e,t){return e.rate-t.rate}));return a.length>0?{cellContent:j(a,r.projectNeed),cellStyle:{fill:{type:"pattern",pattern:"solid",fgColor:{argb:y(a).replace("#","FF")}}}}:{cellContent:""}}return{cellContent:""}}}}))),S=h({title:d("resources_planning"),columns:D}),P=S.workbook,T=S.addRowToXLS,E=S.initWorksheet;return[g,function(){var e=0;E(),b(!0);for(var a=n({variables:{after:String(e),first:300}}),o=function(){var o=e+=300;a=a.then((function(e){var a,i;e&&Object(x.b)({startDate:t.startDate,endDate:t.endDate,periodType:t.periodType},r||0,(null===(a=e.data)||void 0===a||null===(i=a.users)||void 0===i?void 0:i.nodes)||[]).data.persons.forEach((function(e){T(e,"userAssignments")}));return n({variables:{after:String(o),first:300}})}))};e<=(r||0);)o();return a.then((function(){return b(!1),u.removeAll(),u.success(d("export_toast_success")),Object(l.exportXLSWorkbook)({workbook:P.workbook,filename:"".concat(d("project_planning"),"_").concat(Object(s.localeMoment)().format("YYYY-MM-DD_HHmm"))})})).catch((function(e){u.removeAll(),u.error(d("export_toast_error")),b(!1),console.error("Export failed !!",e)}))}]},j=n(188);function O(e){var t=e.allocationData,n=e.allocationsMode,r=e.fetchRowsPromise,d=e.totalCount,u=Object(i.useTranslate)({capitalize:!0}),p=Object(i.useAlert)(),f=Object(o.useState)(!1),g=Object(a.a)(f,2),b=g[0],v=g[1];Object(o.useEffect)((function(){b&&p.show(u("export_toaster_info"),{timeout:0,type:"info"})}),[b]);var y=m(),O=y.getAllocationStyle,_=y.formatAllocationCell,C=y.getScheduleColumns,w=[{dataKey:"user",headerTitle:u("users"),columnWidth:Object(c.b)("large"),xlsCellWithStyleRenderer:function(e){var t,n,r,a=e.node;return{cellContent:"totals"===a.kind?a.nbPersons:"EXTERNAL_RESOURCE"===(null===(t=a.person)||void 0===t?void 0:t.id)?u("externalResource"):"".concat((null===(n=a.person)||void 0===n?void 0:n.familyName)||""," ").concat((null===(r=a.person)||void 0===r?void 0:r.givenName)||"")}}},{dataKey:"allocationRate",headerTitle:u("allocation_rate_table_header"),columnWidth:Object(c.b)("small"),xlsCellWithStyleRenderer:function(e){var t=e.node;return{cellContent:_({rate:"totals"===t.kind?t.allocationRate:t.total},n),cellStyle:O("totals"===t.kind?t.allocationRate:t.total)}}}],D=C(t.periodType,t.startDate,t.endDate),S=w.concat(D.map((function(e,t){return{dataKey:"period".concat(t),headerTitle:e.startDate,columnWidth:Object(c.b)("small"),xlsCellWithStyleRenderer:function(e){var r=e.node;return{cellContent:r.byPeriod?_(r.byPeriod[t],n):"",cellStyle:r.byPeriod&&r.byPeriod[t]?O(r.byPeriod[t].rate):null}}}}))),P=h({title:u("resources_planning"),columns:S}),T=P.workbook,E=P.addRowToXLS,k=P.initWorksheet;return[b,function(){var e=[],n=0;k(),v(!0);for(var a=r({variables:{after:String(n),first:300}}),o=function(){var t=n+=300;a=a.then((function(n){var a,o;n&&e.push.apply(e,Object(j.a)((null===(a=n.data)||void 0===a||null===(o=a.users)||void 0===o?void 0:o.nodes)||[]));return r({variables:{after:String(t),first:300}})}))};n<=(d||0);)o();return a.then((function(){k();var n=Object(x.a)({startDate:t.startDate,endDate:t.endDate,periodType:t.periodType},e,d);return E(n.totals,"totals"),null===n||void 0===n||n.allocations.forEach((function(e){E(e,"userAllocation")})),v(!1),p.removeAll(),p.success(u("export_toast_success")),Object(l.exportXLSWorkbook)({workbook:T.workbook,filename:"".concat(u("project_planning"),"_").concat(Object(s.localeMoment)().format("YYYY-MM-DD_HHmm"))})})).catch((function(e){p.removeAll(),p.error(u("export_toast_error")),v(!1),console.error("Export failed !!",e)}))}]}},1569:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return I}));var r,a=n(139),o=n.n(a),i=n(286),l=n(187),s=n(188),c=n(53),d=n(17),u=n(0),p=n(14),f=n(37),m=(n(995),n(818)),g=n(414),h=n(19),b=n(10),v=n(1001),x=n(742),y=n(189),j=n(65),O=n(1),_=function(e){var t=Object.assign({},e),n=Object(j.h)();return Object(O.jsx)(p.Box,Object(d.a)(Object(d.a)({width:"100%",height:"100%",bg:"black.0",zIndex:n.zIndexes.PORTAL-1,position:"absolute",display:"flex",justifyContent:"center",alignItems:"center"},t),{},{children:Object(O.jsx)(y.AnimatePresence,{children:Object(O.jsx)(p.Card,{as:y.motion.div,width:"600px",height:"183px",bg:"white",display:"flex",justifyContent:"center",alignItems:"center",children:Object(O.jsx)(p.Loader,{})})})}))},C=n(3),w=n(767),D=n(1004),S=n(871);!function(e){e.Unaffected="unaffected",e.Partially_affected="partially_affected",e.Overstaffed="overstaffed",e.Reset="reset"}(r||(r={}));var P=new Map([[r.Unaffected,{label:"quick_filter_at_least_a_day_unaffected",rateFilters:[{key:"minRate",comparator:"<=",value:0}]}],[r.Partially_affected,{label:"quick_filter_at_least_a_day_partially_affected",rateFilters:[{key:"minRate",comparator:"<",value:100}]}],[r.Overstaffed,{label:"quick_filter_at_least_a_day_overstaffed",rateFilters:[{key:"maxRate",comparator:">",value:100}]}]]),T=function(e,t){var n,r={startDate:t.startDate,endDate:t.endDate};return Object(d.a)(Object(d.a)({},r),{},{rateFilters:null===(n=P.get(e))||void 0===n?void 0:n.rateFilters})},E=function(e){var t,n,r,a=null===e||void 0===e||null===(t=e.allocationRate)||void 0===t||null===(n=t.rateFilters)||void 0===n?void 0:n[0];return void 0!==a&&(P.forEach((function(e,t){-1!==e.rateFilters.findIndex((function(e){return e.key===a.key&&e.value===a.value&&e.comparator===a.comparator}))&&(r=t)})),r)},k=function(e){return"DESC"===e?"desc":"ASC"===e?"asc":null},A={view:"planning",periodInput:{startDate:Object(f.localeMoment)().startOf("month").set("hours",12).toDate(),endDate:Object(f.localeMoment)().startOf("month").set("hours",12).add(6,"months").toDate(),periodType:m.PeriodType.WEEK},selectedFilterKey:"my_subalterns",dataFilters:{managedBy:{managedBy:["me"]}},lockedUserId:void 0,isDisplayOptionsInitialized:!1};function N(e,t){var n;switch(t.type){case"initDisplayOptions":return Object(d.a)(Object(d.a)({},e),{},{view:t.view,periodInput:t.periodInput,selectedFilterKey:t.selectedFilterKey,dataFilters:t.dataFilters,isDisplayOptionsInitialized:!0});case"setView":return Object(d.a)(Object(d.a)({},e),{},{view:t.view});case"setPeriodInput":return void 0===(null===(n=e.dataFilters)||void 0===n?void 0:n.allocationRate)?Object(d.a)(Object(d.a)({},e),{},{periodInput:t.periodInput}):Object(d.a)(Object(d.a)({},e),{},{periodInput:t.periodInput,dataFilters:Object(d.a)(Object(d.a)({},e.dataFilters),{},{allocationRate:T(E(e.dataFilters),t.periodInput)})});case"setSelectedFilterKeyAndDataFilters":return Object(d.a)(Object(d.a)({},e),{},{selectedFilterKey:t.selectedFilterKey,dataFilters:t.dataFilters});case"setDataFilters":return Object(d.a)(Object(d.a)({},e),{},{dataFilters:t.dataFilters});case"setLockedUserId":return Object(d.a)(Object(d.a)({},e),{},{lockedUserId:t.lockedUserId});case"setProjectSorting":return Object(d.a)(Object(d.a)({},e),{},{projectSorting:t.projectSorting});case"setAllocationSorting":return Object(d.a)(Object(d.a)({},e),{},{allocationSorting:t.allocationSorting});default:return e}}var I=function(){var e,t,n,r,a,y=Object(p.useAlert)(),j=Object(p.useTranslate)({capitalize:!0}),I=Object(b.useAppContext)(),M=I.getErrorMessage,F=I.user,R=I.userGroups,L=I.userPreferences,B=I.usersManagedByMe,z=I.customFields,W=Object(u.useReducer)(N,A),H=Object(c.a)(W,2),U=H[0],K=U.allocationSorting,q=U.dataFilters,Y=U.isDisplayOptionsInitialized,V=U.lockedUserId,G=U.periodInput,Q=U.projectSorting,J=U.selectedFilterKey,X=U.view,Z=H[1],$="ressourcePlanningPage_displayOptions_".concat(F.id),ee=Object(u.useMemo)((function(){return Object(s.a)(P).reduce((function(e,t){var n=Object(c.a)(t,2),r=n[0],a=n[1];return Object(d.a)(Object(d.a)({},e),{},Object(l.a)({},r,null===a||void 0===a?void 0:a.label))}),{})}),[P]);Object(u.useEffect)((function(){var e=Object(g.getLocalStorage)({label:$});if(null!==e){var t=e.periodInput;if(Z({type:"initDisplayOptions",view:e.view,periodInput:{startDate:Object(f.localeMoment)(t.startDate).toDate(),endDate:Object(f.localeMoment)(t.endDate).toDate(),periodType:t.periodType},selectedFilterKey:e.selectedFilterKey,dataFilters:e.dataFilters}),e.selectedFilterKey){var n,r,a=null===L||void 0===L||null===(n=L.savedDataFilters)||void 0===n||null===(r=n.resourcePlanning)||void 0===r?void 0:r.find((function(t){var n;return t.name===j(e.selectedFilterKey)||t.id===(null===(n=e.selectedFilter)||void 0===n?void 0:n.id)})),o=pe.find((function(t){var n;return t.name===j(e.selectedFilterKey)||t.name===(null===(n=e.selectedFilter)||void 0===n?void 0:n.name)}));ue(a?{type:"advanced",id:a.id}:o?{type:"standard",name:o.name}:{type:"standard",name:B.length>0?j("my_subalterns"):j("my_entities")})}}else{var i=B.length>0?{managedBy:{managedBy:["me"]}}:{groups:{inValues:R}},l={startDate:G.startDate,endDate:G.endDate,periodType:m.PeriodType.WEEK};Z({type:"initDisplayOptions",view:"planning",periodInput:l,selectedFilterKey:B.length>0?j("my_subalterns"):j("my_entities"),dataFilters:i}),ue({type:"standard",name:B.length>0?j("my_subalterns"):j("my_entities")})}}),[]),Object(u.useEffect)((function(){Y&&Object(g.setLocalStorage)({label:$,value:{view:X,periodInput:G,selectedFilterKey:J,dataFilters:q}})}),[X,G.startDate.toISOString(),G.endDate.toISOString(),G.periodType,q,J]);var te=Object(b.useTableToolboxAdvancedFilters)({savedDataFilters:null===L||void 0===L?void 0:L.savedDataFilters,category:"resourcePlanning"}),ne=te.createAdvancedFilter,re=te.updateAdvancedFilter,ae=te.deleteAdvancedFilter,oe=te.openDeleteAdvancedFilterModal,ie=te.onCloseDeleteConfirmModal,le=te.isOpenedDeleteConfirmModal,se=te.isDeletingAdvancedFilter,ce=te.filterNameToDelete,de=te.selectedFilter,ue=te.setSelectedFilter,pe=Object(u.useMemo)((function(){return[{name:j("my_subalterns"),filters:{managedBy:{managedBy:["me"]}}},{name:j("all_my_subalterns"),filters:{managedBy:{managedByWithHierarchy:["me"]}}},{name:j("my_entities"),filters:{groups:{inValues:R}}}]}),[R]);Object(u.useEffect)((function(){var e,t;"advanced"===(null===de||void 0===de?void 0:de.type)&&"undefined"!==typeof(null===L||void 0===L||null===(e=L.savedDataFilters)||void 0===e?void 0:e.resourcePlanning)?t=L.savedDataFilters.resourcePlanning.find((function(e){return e.id===de.id})):"standard"===(null===de||void 0===de?void 0:de.type)&&(t=pe.find((function(e){return e.name===de.name}))),t&&("undefined"!==typeof t.filters.user?Z({type:"setSelectedFilterKeyAndDataFilters",selectedFilterKey:t.name,dataFilters:t.filters.user}):Z({type:"setSelectedFilterKeyAndDataFilters",selectedFilterKey:t.name,dataFilters:t.filters}))}),[L,de,pe]);var fe=Object(h.useUpdateScheduledPeriodDatesMutation)({ignoreResults:!0,optimisticResponse:function(e){var t=e.id,n=e.startDate,r=e.endDate;return{updateScheduledPeriodDates:t.startsWith("PRA")?{assignment:{__typename:"ProjectAssignment",id:t,startDate:n,endDate:r}}:{scheduledPeriod:{__typename:"ScheduledPeriod",id:t,startDate:n,endDate:r}}}},onCompleted:function(e){Oe&&Oe()}}),me=Object(c.a)(fe,1)[0],ge=Object(h.useDeleteProjectAssignmentMutation)({onCompleted:function(){ve(),y.success(j("success"))},onError:function(e){console.error("ERROR deleting assignment",e),y.error(M(e))}}),he=Object(c.a)(ge,1)[0],be=Object(h.useLazyPaginateGraphQLQuery)({query:h.ListResourcesForPlanningDocument,variables:{startDate:G.startDate,endDate:G.endDate,allocationAccuracy:Object(S.c)(G.periodType),dataFilters:q,sorting:(null===Q||void 0===Q?void 0:Q.field)?Q:void 0},pageSize:50,getConnections:function(e){return e.data.users},getFetchMoreConnections:function(e){return e.users}}),ve=be.launchQuery,xe=be.loadMore,ye=be.nodes,je=be.loading,Oe=be.refetch,_e=be.isLoadingMore,Ce=be.fetchMorePromise,we=be.totalCount,De=Object(h.useLazyPaginateGraphQLQuery)({query:h.ListResourcesForAllocationRatesDocument,variables:{startDate:G.startDate,endDate:G.endDate,allocationAccuracy:Object(S.c)(G.periodType),dataFilters:q,sorting:(null===K||void 0===K?void 0:K.field)?K:void 0},pageSize:50,getConnections:function(e){return e.data.users},getFetchMoreConnections:function(e){return e.users}}),Se=De.launchQuery,Pe=De.loadMore,Te=De.nodes,Ee=De.loading,ke=De.totalCount,Ae=De.isLoadingMore,Ne=De.fetchMorePromise,Ie=Object(w.d)({}),Me=(Ie.setProjectNeedId,Ie.setProjectAssignmentId),Fe=Ie.projectNeedId,Re=Ie.projectAssignmentId,Le=Ie.isOpened,Be=Ie.close,ze=Object(w.e)({scheduledPeriodId:void 0}),We=ze.setScheduledPeriodId,He=ze.scheduledPeriodId,Ue=ze.isOpened,Ke=ze.close;Object(u.useEffect)((function(){"planning"===X&&Y?ve():"allocationRate"===X&&Y&&Se()}),[X,G.startDate.toISOString(),G.endDate.toISOString(),G.periodType,q,K,Q]);var qe=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.id,r=t.startDate,a=t.endDate,Z({type:"setLockedUserId",lockedUserId:Xe.get(n)}),me({variables:{id:n,startDate:r.toISOString(),endDate:a.toISOString()}}).then((function(){y.success(j("success")),ve&&ve()})).catch((function(e){y.error(M(e))})).finally((function(){Z({type:"setLockedUserId",lockedUserId:void 0})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ye=function(e){return function(t){var n=t.sortBy,r=t.sortDirection;return Z(r?"planning"===e?{type:"setProjectSorting",projectSorting:{field:n,order:r}}:{type:"setAllocationSorting",allocationSorting:{field:n,order:r}}:"planning"===e?{type:"setProjectSorting",projectSorting:{field:n}}:{type:"setAllocationSorting",allocationSorting:{field:n}})}},Ve={data:Object(d.a)({totals:{nbPersons:0},persons:[]},G),callbacks:{},loadMoreRows:function(){},onRessourcePlanningSort:function(){},familyNameSortDirection:null,nextAvailabilitySortDirection:null},Ge={data:Object(d.a)(Object(d.a)({},G),{},{totals:{nbPersons:0,allocationRate:0,byPeriod:[]},allocations:[]}),isPercentage:!0,totalCount:0,loadMoreRows:function(){},onRessourcePlanningSort:function(){},familyNameSortDirection:null,allocationRatesTotalSortDirection:null};Object(u.useEffect)((function(){"string"===typeof V&&Z({type:"setLockedUserId",lockedUserId:void 0})}),[ye]);var Qe=Object(u.useMemo)((function(){return Object(S.b)(G,we,ye,V)}),[G,ye,V]),Je=Qe.data,Xe=Qe.allocationToUserMap;Object(u.useMemo)((function(){Ve.data=Object(d.a)(Object(d.a)({},Je),{},{getLinkToUserProfile:function(e){return C.b.USER_PROFILE.getRoute({userId:e})},getLinkToProject:function(e){return C.b.STAFFING_PROJECTS.getRoute({projectId:e})}})}),[X,G,ye,Ve]),Object(u.useMemo)((function(){Ge.data=Object(d.a)(Object(d.a)({},Object(S.a)(G,Te,ke)),{},{getLinkToUserProfile:function(e){return C.b.USER_PROFILE.getRoute({userId:e})},getLinkToProject:function(e){return C.b.STAFFING_PROJECTS.getRoute({projectId:e})}})}),[X,G,Te,Ge]);var Ze=Object(D.d)({planningData:null===Ve||void 0===Ve?void 0:Ve.data,allocationsMode:"percentage",fetchRowsPromise:Ce,totalCount:we}),$e=Object(c.a)(Ze,2),et=$e[0],tt=$e[1],nt=Object(D.c)({allocationData:null===Ge||void 0===Ge?void 0:Ge.data,allocationsMode:"percentage",fetchRowsPromise:Ne,totalCount:ke}),rt=Object(c.a)(nt,2),at=rt[0],ot=rt[1],it="planning"===X&&(null===Ve||void 0===Ve||null===(e=Ve.data)||void 0===e||null===(t=e.persons)||void 0===t?void 0:t.length)>0&&!je&&!et||"allocationRate"===X&&(null===Ge||void 0===Ge||null===(n=Ge.data)||void 0===n||null===(r=n.allocations)||void 0===r?void 0:r.length)>0&&!Ee&&!at,lt="allocationRate"===X?Ee?Object(O.jsx)(p.Loader,{}):Object(O.jsx)(m.AllocationResources,{isPercentage:!0,data:null===Ge||void 0===Ge?void 0:Ge.data,totalCount:ke,loadMoreRows:function(e){var t=e.startIndex;Pe(t)},onRessourcePlanningSort:Ye("allocation"),familyNameSortDirection:"familyName"===(null===K||void 0===K?void 0:K.field)?k((null===K||void 0===K?void 0:K.order)||null):null,allocationRatesTotalSortDirection:"allocationRates.total"===(null===K||void 0===K?void 0:K.field)?k((null===K||void 0===K?void 0:K.order)||null):null}):je?Object(O.jsx)(p.Loader,{}):Object(O.jsx)(m.PlanningResources,{data:null===Ve||void 0===Ve?void 0:Ve.data,callbacks:{onChangeAssignmentDates:function(e,t,n){qe({id:e,startDate:t,endDate:n})},onAssignResource:function(){},onAddNeed:function(){},onAddAssignment:function(){},onEditNeed:function(){},onEditAssignment:function(e){Me(e)},onEditScheduledPeriod:function(e){We(e)},onDeleteAssignment:function(e,t,n){!function(e,t,n){Z({type:"setLockedUserId",lockedUserId:n}),he({variables:{id:e}})}(e,0,n)},onReOrderNeed:function(){}},loadMoreRows:function(e){var t=e.startIndex;xe(t)},onRessourcePlanningSort:Ye("planning"),familyNameSortDirection:"familyName"===(null===Q||void 0===Q?void 0:Q.field)?k((null===Q||void 0===Q?void 0:Q.order)||null):null,nextAvailabilitySortDirection:"nextAvailability"===(null===Q||void 0===Q?void 0:Q.field)?k((null===Q||void 0===Q?void 0:Q.order)||null):null});return Object(O.jsxs)(x.a,{pt:1,pl:1,children:[(Ae||_e)&&Object(O.jsx)(_,{top:0,left:0}),Object(O.jsx)(v.a,{advancedFilters:(null===L||void 0===L||null===(a=L.savedDataFilters)||void 0===a?void 0:a.resourcePlanning)||[],quickFilters:[{id:"allocation_rate",title:j("assignation_level"),type:b.QuickFilterTypes.SingleSelect,elements:ee,value:ee[E(q)],isSelected:!!(null===q||void 0===q?void 0:q.allocationRate),onApplyFilter:function(e){Z({type:"setDataFilters",dataFilters:Object(d.a)(Object(d.a)({},q),{},{allocationRate:T(e,G)})})},onClearFilter:function(){Z({type:"setDataFilters",dataFilters:Object(d.a)(Object(d.a)({},q),{},{allocationRate:void 0})})}}],advancedFiltersSchema:[Object(h.getDataFiltersSchemaWithCustomFields)(h.UserDataFiltersSchema,z.userFields)],standardFilters:pe,standardFiltersSchema:[h.UserDataFiltersSchema],selectedFilter:de,onSelectFilter:ue,onNewFilter:function(e){ne(Object(d.a)(Object(d.a)({},e),{},{filters:e.filters.user}))},onUpdateFilter:function(e){re(Object(d.a)(Object(d.a)({},e),{},{filters:e.filters.user}))},onDeleteFilter:function(e){oe(e)},view:X,planningType:"resource",startDate:G.startDate,endDate:G.endDate,periodType:G.periodType,canExport:it,callbacks:{onChangeView:function(e){Z({type:"setView",view:e})},onChangeDisplayMode:function(e){},onChangePeriod:function(e,t,n){Z({type:"setPeriodInput",periodInput:{startDate:e,endDate:t,periodType:n}})},onChangeFilters:function(){},onExport:function(){"allocationRate"===X?ot():tt()}}},J),lt,Object(O.jsx)(w.a,{projectAssignmentId:Re,projectNeedId:Fe,isOpened:Le,onClose:Be,onChangeProjectAssignmentId:Me,onDeletedProjectAssignment:function(){Oe&&Oe(),y.success(j("success")),Be()},onDeletedProjectNeed:function(){},onUpdatedProjectAssignment:function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.userId,ve&&(Z({type:"setLockedUserId",lockedUserId:n}),ve());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onUpdatedProjectNeed:function(){}}),Object(O.jsx)(w.b,{scheduledPeriodId:He,isOpened:Ue,onClose:Ke,onDeletedScheduledPeriod:Ke}),Object(O.jsx)(b.DeleteAdvancedFilterConfirmModal,{filterName:ce,isOpened:le,onConfirm:function(){ae()},onCancel:ie,isLoading:se})]})}},742:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(17),a=n(285),o=(n(0),n(14)),i=n(1),l=["children"],s=function(e){var t=e.children,n=Object(a.a)(e,l);return Object(i.jsx)(o.Box,Object(r.a)(Object(r.a)({boxSizing:"border-box",height:"100%",overflow:"hidden",width:"100%"},n),{},{children:t}))}},752:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),a=["title","titleId"];function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function l(e,t){var n=e.title,l=e.titleId,s=i(e,a);return r.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 1000",ref:t,"aria-labelledby":l},s),n?r.createElement("title",{id:l},n):null,r.createElement("path",{d:"M444.144 230.551a40.004 40.004 0 0127.866 68.688L311.398 459.852h473.346a40.148 40.148 0 110 80.289H311.398L472.01 700.754a40.004 40.004 0 11-56.569 56.569L188.916 530.795a40.004 40.004 0 01-11.43-15.74 40.148 40.148 0 010-.002 40.004 40.004 0 01-1.156-3.32 40.148 40.148 0 01-.184-.559 40.004 40.004 0 01-.691-2.898 40.148 40.148 0 01-.023-.098 40.004 40.004 0 01-.112-.469 40.148 40.148 0 01-.105-.51 40.004 40.004 0 01-.283-2.064 40.004 40.004 0 01-.211-1.576 40.148 40.148 0 01-.034-.469 40.004 40.004 0 01-.043-1.074 40.004 40.004 0 01-.085-2.623 40.148 40.148 0 01.006-.12 40.004 40.004 0 01.019-.378 40.004 40.004 0 010-.012 40.004 40.004 0 01.002-.031 40.004 40.004 0 0114.436-29.762l226.42-226.42a40.004 40.004 0 0128.702-12.119z",style:{lineHeight:"normal",textIndent:0,textAlign:"start",textDecorationLine:"none",textDecorationStyle:"solid",textTransform:"none",blockProgression:"tb",whiteSpace:"normal",isolation:"auto",mixBlendMode:"normal",solidOpacity:1},fontWeight:400,fontFamily:"sans-serif",overflow:"visible",fillRule:"evenodd"}))}var s=r.forwardRef(l);n.p},762:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return v})),n.d(t,"a",(function(){return B}));var r=n(285),a=n(17),o=n(53),i=n(0),l=n(14),s=n(19),c=n(32),d=n(10),u=["status","comment","customFields","trainingTag"],p=function(e){var t=e.onBulkStatusUpdateCompleted,n=e.onUpdateCompleted,p=e.pinnedTrainingId,f=(e.onBulkDeletionCompleted,Object(d.useAppContext)().getErrorMessage),m=Object(l.useAlert)(),g=Object(s.useGetPinnedTrainingDataLazyQuery)(),h=Object(o.a)(g,2),b=h[0],v=h[1],x=v.data,y=v.loading,j=Object(s.useUpdateTrainingPinMutation)(),O=Object(o.a)(j,2),_=O[0],C=O[1].loading,w=Object(s.usePinTrainingsStatusBulkUpdateMutation)(),D=Object(o.a)(w,2),S=D[0],P=D[1].loading;Object(i.useEffect)((function(){"undefined"!==typeof p&&b({variables:{id:p}})}),[p]);var T=Object(i.useMemo)((function(){var e=null===x||void 0===x?void 0:x.pinnedTraining;if(e){if("undefined"===typeof e.user||null===e.user||"undefined"===typeof e.training||null===e.training)return;return Object(a.a)({id:e.id,status:e.status,capabilities:{canDelete:e.capabilities.canDelete,canUpdate:e.capabilities.canUpdate,allowedStatuses:e.capabilities.allowedStatuses},trainingTag:{id:e.training.id,name:e.training.name,kind:"trainingTag"},user:Object(s.getFormatedUserBasicFragment)(e.user),updatedAt:e.updatedAt},Object(s.getFormatedPinTrainingData)(e.data))}}),[x]),E=Object(i.useMemo)((function(){for(var e={},t=0,n=Object.values(c.PinTrainingStatus);t<n.length;t++){var r=n[t];(null===T||void 0===T?void 0:T[r])&&(e[r]=T[r])}return e}),[x]);return{isPinnedTrainingDataLoading:y,isPinnedTrainingUpdateLoading:C,isPinTrainingsStatusBulkUpdateLoading:P,onPinnedTrainingUpdate:function(e){if("undefined"!==typeof p){e.status;var t=e.comment,o=e.customFields,i=e.trainingTag,l=Object(r.a)(e,u),s={id:p,status:e.status,comment:t,trainingId:i.id};"undefined"!==typeof o&&(s.customFields=o),s=Object(a.a)(Object(a.a)({},s),l),_({variables:{input:s},onCompleted:n,onError:function(e){m.error(f(e)),console.error("Training application failed !!!",e)}})}},onPinnedTrainingBulkDeletion:function(e){},onPinnedTrainingBulkStatusUpdate:function(e){var n=e.comment,r=e.updatedStatus,a=e.selectedIds;"undefined"!==typeof r&&"undefined"!==typeof a&&S({variables:{input:{ids:a,comment:n,status:r}},onCompleted:t,onError:function(e){return m.error(f(e))}})},pinnedTraining:T,pinnedTrainingHistory:E}},f=n(15),m=function(e){var t=e.userId,n=e.pinnedTrainingId;return"undefined"!==typeof t&&"undefined"!==typeof n},g=function(e,t){switch(t.type){case"setIds":return Object(a.a)(Object(a.a)({},e),{},{pinnedTrainingId:t.pinnedTrainingId,userId:t.userId,isOpened:m({userId:t.userId,pinnedTrainingId:t.pinnedTrainingId})});case"setPinnedTrainingId":return Object(a.a)(Object(a.a)({},e),{},{pinnedTrainingId:t.pinnedTrainingId,isOpened:m({userId:e.userId,pinnedTrainingId:t.pinnedTrainingId})});case"setUserId":return Object(a.a)(Object(a.a)({},e),{},{userId:t.userId,isOpened:m({userId:t.userId,pinnedTrainingId:e.pinnedTrainingId})});case"close":return Object(a.a)(Object(a.a)({},e),{},{isOpened:!1,pinnedTrainingId:void 0});case"open":return Object(a.a)(Object(a.a)({},e),{},{isOpened:m({userId:e.userId,pinnedTrainingId:e.pinnedTrainingId})});default:return e}},h="pinnedTraining",b="user",v=function(e){var t=Object(i.useReducer)(g,{userId:e.userId,pinnedTrainingId:e.pinnedTrainingId,isOpened:m({userId:e.userId})}),n=Object(o.a)(t,2),r=n[0],a=r.isOpened,l=r.pinnedTrainingId,s=r.userId,c=n[1],d=Object(f.useHistory)(),u=Object(f.useLocation)();Object(i.useEffect)((function(){a?d.replace("?".concat(h,"=").concat(l,"&").concat(b,"=").concat(s)):d.replace(u.pathname)}),[a,l,s]),Object(i.useEffect)((function(){var e=new URLSearchParams(u.search),t=e.get(h),n=e.get(b);t&&n&&(t!==l||n!==s)&&c({type:"setIds",pinnedTrainingId:t,userId:n})}),[u.search]);return{close:function(){c({type:"close"})},isOpened:a,open:function(){c({type:"open"})},pinnedTrainingId:l,setPinnedTrainingId:function(e){return c({type:"setPinnedTrainingId",pinnedTrainingId:e})},setUserAndPinnedTrainingId:function(e){var t=e.userId,n=e.pinnedTrainingId;return c({type:"setIds",userId:t,pinnedTrainingId:n})},setUserId:function(e){return c({type:"setUserId",userId:e})},userId:s}},x=n(752),y=n(786),j=n(223),O=n(187),_=n(65),C=n(63),w=n(37),D=n(747),S=n(787),P=n(1),T=function(e){var t=e.status,n=e.isOpened,r=e.isLoading,a=e.onClose,s=e.onCancel,c=e.onConfirm,u=e.isReadOnly,p=Object(i.useState)(""),f=Object(o.a)(p,2),m=f[0],g=f[1],h=Object(l.useTranslate)({capitalize:!0});Object(i.useEffect)((function(){n||g("")}),[n]);return Object(P.jsx)(d.StandardModal,{title:h("pin_training_status_update"),isOpened:n,onClose:a,onCancel:s,onConfirm:function(){c(m)},isLoading:r,isDisabledSubmit:u,width:800,children:Object(P.jsxs)(l.Column,{alignItems:"flex-start",children:[Object(P.jsx)(l.Text,{mb:1,children:h("two_points",{phrase:h("pin_training_status_update_confirm_msg")})}),Object(P.jsx)(S.a,{status:t,width:162,my:1}),Object(P.jsx)(l.TextArea,{value:m,onChange:g,placeholder:h("comment"),disabled:u,mt:1})]})})},E=["capabilities","isPinnedTrainingUpdateLoading","onUpdate","pinnedTraining"],k=function(e){var t=e.customFields,n=e.id;if(null===t||void 0===t?void 0:t.find((function(e){return Object.keys(e||{})[0]===n})))return Object.values(t.find((function(e){return Object.keys(e||{})[0]===n}))||[])[0]},A=function(e){var t=e.capabilities,n=e.isPinnedTrainingUpdateLoading,s=e.onUpdate,c=e.pinnedTraining,u=Object(r.a)(e,E),p=Object(i.useState)(c.status),f=Object(o.a)(p,2),m=f[0],g=f[1],h=Object(l.useTranslate)({capitalize:!0}),b=Object(l.useSwitch)(!1),v=b.active,x=b.off,y=b.on,S=Object(_.h)(),A=Object(d.useAppContext)().customFields.pinnedTrainingFields,N=[];if(c.customFields)for(var I=0,M=Object.entries(c.customFields);I<M.length;I++){var F=Object(o.a)(M[I],2),R=F[0],L=F[1];N.push(Object(O.a)({},R,L))}Object(i.useEffect)((function(){m!==c.status?y():x()}),[m]);var B=function(e){return function(t){if("status"===e)g(t);else if("deadline"===e){var n=Object(w.localeMoment)(t).toISOString();s(Object(a.a)(Object(a.a)({},c),{},{deadline:n}))}else s(Object(a.a)(Object(a.a)({},c),{},Object(O.a)({},e,t)))}},z=Object(i.useMemo)((function(){var e,n=[],r=Object(j.a)(D.b);try{var a=function(){var r=e.value;c.status&&!(t.allowedStatuses||[]).includes(c.status)&&r[0]===c.status&&n.push(r),(t.allowedStatuses||[]).forEach((function(e){r[0]===e&&n.push(r)}))};for(r.s();!(e=r.n()).done;)a()}catch(o){r.e(o)}finally{r.f()}return n}),[t]);return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)(l.Column,Object(a.a)(Object(a.a)({},u),{},{children:[Object(P.jsx)(d.FormLine,{children:Object(P.jsx)(d.FormLabel,{content:h("targeted_training"),children:Object(P.jsx)(C.ObjectTag,Object(a.a)({},c.trainingTag))})}),Object(P.jsx)(d.FormLine,{children:Object(P.jsx)(d.FormLabel,{name:"status",content:h("status"),children:Object(P.jsx)(l.SelectField,{value:c.status,onChange:B("status"),zIndex:S.zIndexes.MODAL_POPOVER,readOnly:1===z.length||!t.canUpdate,placeholder:"",source:z.map((function(e){return{label:h(e[1]),value:e[0]}})),width:"100%"})})}),Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(d.FormLine,{children:Object(P.jsx)(d.FormLabel,{name:"budgetYear",content:h("budget_year"),mr:1,children:Object(P.jsx)(l.TextEditable,{value:c.budgetYear,onSubmit:B("budgetYear"),readOnly:!t.canUpdate,placeholder:h("add_a_value")})})}),Object(P.jsx)(d.FormLine,{children:Object(P.jsx)(l.PeriodPicker,{startDate:c.startDate,endDate:c.endDate,readOnly:!t.canUpdate,onChange:function(e){var t=e.startDate,n=e.endDate;if("undefined"!==typeof t&&t!==c.startDate||"undefined"!==typeof n&&n!==c.endDate){if("undefined"!==typeof n&&"string"===typeof c.startDate&&Object(w.localeMoment)(n).isBefore(c.startDate))return;"undefined"===typeof t||"undefined"!==typeof n&&!Object(w.localeMoment)(t).isAfter(Object(w.localeMoment)(c.endDate))?s(Object(a.a)(Object(a.a)({},c),{},{startDate:t||c.startDate,endDate:n||c.endDate})):s(Object(a.a)(Object(a.a)({},c),{},{startDate:t,endDate:t}))}},isOneDayMinimumGap:!1})}),A.map((function(e){return Object(P.jsx)(d.FormLine,{children:Object(P.jsx)(C.CustomField,Object(a.a)({mr:1,field:e,withLabel:!0,readOnly:!t.canUpdate,value:k({customFields:N,id:e._key}),onSubmit:function(t){return function(e){var t=Object(O.a)({},e.id,e.value),n={};N?N.forEach((function(e){var r=Object(o.a)(Object.entries(e||[])[0],2),i=r[0],l=r[1];n=Object(a.a)(Object(a.a)({},n),{},Object(O.a)({},i,l),t)})):n=t,B("customFields")(n)}({id:e._key,value:t,comparator:"DATE"===e.field_type?"BETWEEN":"IN_VALUES",fieldType:e.field_type})}},e),e._key)},e._key)}))]})]})),Object(P.jsx)(T,{isLoading:n,isOpened:v,isReadOnly:!t.canUpdate,onCancel:x,onClosingComplete:function(){g(c.status)},onClose:x,onConfirm:function(e){s(Object(a.a)(Object(a.a)({},c),{},{status:m,comment:e})),x()},status:m})]})},N=n(23),I=n(758),M=["data","isOpened"],F={MAP:{},statusToDisplay:[],usersIds:[]},R=["suggested","approved","accepted","pending","validated","noshow","canceled"],L=function(e){var t=e.data,n=e.isOpened,c=Object(r.a)(e,M),d=Object(l.useTranslate)(),u=Object(l.useSwitch)(!1),p=u.active,f=u.off,m=u.on,g=Object(i.useState)(F),h=Object(o.a)(g,2),b=h[0],v=b.MAP,x=b.statusToDisplay,y=b.usersIds,O=h[1],_=Object(s.useGetUsersLazyQuery)({variables:{ids:y}}),C=Object(o.a)(_,2),w=C[0],D=C[1],S=D.data,T=D.loading;Object(i.useEffect)((function(){var e={},n=[],r=new Set;if(t)for(var a=0,i=Object.entries(t);a<i.length;a++){var l,s=Object(o.a)(i[a],2),c=s[0],d=s[1],u=Object(j.a)(R);try{for(u.s();!(l=u.n()).done;){var p=l.value;c===p&&"undefined"!==typeof d&&(e[c]={data:d,wording:"training_status_".concat(c)},r.add(c),c===p&&n.push(d.by.id))}}catch(m){u.e(m)}finally{u.f()}}var f={MAP:e,usersIds:n,statusToDisplay:Array.from(r)};O(f)}),[t]),Object(i.useEffect)((function(){!0===n&&(y||[]).length>0&&w()}),[n,y]);var E=Object(i.useMemo)((function(){var e;return(null===S||void 0===S||null===(e=S.users)||void 0===e?void 0:e.nodes)?S.users.nodes.map((function(e){return Object(s.getFormatedUserBasicFragment)(e)})):[]}),[S]),k=function(e){return Object.entries(e).length>0},A=function(){for(var e=[],t=0,n=Object.values(v);t<n.length;t++){var r=n[t],a=r.data,o=r.wording;k(a)&&e.push({data:a,wording:o})}return e.sort((function(e,t){return new Date(t.data.at).getTime()-new Date(e.data.at).getTime()}))},L=Object(i.useMemo)((function(){return A()&&!p?A().slice(0,3):A()}),[A(),p]),B=function(){p?f():m()};return x.length>0?Object(P.jsxs)(I.a,Object(a.a)(Object(a.a)({isExpanded:p,isShowMoreDisplayed:A().length>3&&!p,onClickShowLess:B,onClickShowMore:B,title:Object(N.maj)(d("history_title"))},c),{},{children:[T&&Object(P.jsx)(P.Fragment,{children:x.map((function(e,t){return Object(P.jsxs)(l.Box,{children:[Object(P.jsxs)(l.Line,{width:"100%",height:"100%",children:[Object(P.jsx)(l.LoaderSkeleton.Point,{}),Object(P.jsx)(l.LoaderSkeleton.Line,{width:"150px"})]}),Object(P.jsx)(l.Line,{width:"100%",height:"100%",mt:1,children:Object(P.jsx)(l.LoaderSkeleton.Line,{width:"100px"})})]},"".concat(e," - ").concat(t))}))}),!T&&E.length>0&&L.map((function(e){var t=e.data,n=e.wording;if(t.by.id){var r=E.find((function(e){return e.id===t.by.id}));return k(t)&&r?Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(I.b,{user:r,date:t.at,children:Object(P.jsx)(l.Text,{fontSize:"small",as:"span",children:"".concat(d("pinned_training_updated_status_to"),' "').concat(d(n),'"')})}),t.comment&&Object(P.jsx)(l.TextWithAutoTooltipOnEllipsis,{rows:5,tooltipTitle:t.comment,pl:30,fontSize:"small",color:"grey.6",mb:1,children:t.comment})]}):null}return null}))]})):null},B=function(e){var t=e.isOpened,n=e.onClose,r=e.onUpdate,a=e.pinnedTrainingId,o=Object(l.useTranslate)({capitalize:!0}),i=Object(l.useResponsive)().isMobile,s=Object(d.useAppContext)().topBarHeight,c=p({pinnedTrainingId:a}),u=c.isPinnedTrainingUpdateLoading,f=c.isPinnedTrainingDataLoading,m=c.pinnedTraining,g=c.pinnedTrainingHistory;return Object(P.jsx)(l.RightPane.Container,{contentTop:i?0:s,isOpened:t,isOverlayTransparent:!0,fixed:!0,onClose:n,children:Object(P.jsx)(l.RightPane.Content,{bg:"white",height:i?"100%":"calc(100% - ".concat(s,"px)"),width:620,maxWidth:"100%",children:"undefined"!==typeof a&&"undefined"===typeof m&&f?Object(P.jsx)(y.c,{}):Object(P.jsx)(y.e,{renderHeader:function(){return Object(P.jsxs)(l.Line,{width:"100%",p:2,children:[i&&Object(P.jsx)(l.ClickableIcon,{icon:x.a,onClick:n,mr:2}),Object(P.jsx)(l.Text,{fontWeight:"bold",fontSize:"huge",children:o("training_application")})]})},children:"undefined"!==typeof m&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(A,{capabilities:m.capabilities,isPinnedTrainingUpdateLoading:u,onUpdate:r,pinnedTraining:{status:m.status,trainingTag:m.trainingTag,budgetYear:m.budgetYear,comment:m.comment,customFields:m.customFields,deadline:m.deadline,startDate:m.startDate,endDate:m.endDate}},m.id),Object(P.jsx)(L,{data:g,isOpened:t})]})})})})}},765:function(e,t,n){"use strict";n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return R}));var r=n(17),a=n(139),o=n.n(a),i=n(286),l=n(285),s=n(0),c=n(14),d=n(10),u=n(187),p=n(53),f=n(751),m=n(32),g=n(23),h=n(61),b=n(1),v=["label","isActive"],x=Object(h.default)(c.Text)((function(){return{fontWeight:"bold",borderRadius:0,textTransform:"uppercase"}}),(function(e){var t=e.isActive,n=e.theme;return t?{backgroundColor:n.colors.grey[2]}:{color:n.colors.grey[6]}})),y=function(e){var t=e.label,n=e.isActive,a=Object(l.a)(e,v);return Object(b.jsx)(x,Object(r.a)(Object(r.a)({isActive:n,p:1},a),{},{children:t}))},j=["value","onChange"],O=function(e){return{type:(null===e||void 0===e?void 0:e.type)||m.ScheduledPeriodType.ABSENCE,description:(null===e||void 0===e?void 0:e.description)||"",name:(null===e||void 0===e?void 0:e.name)||"",startDate:(null===e||void 0===e?void 0:e.startDate)||(new Date).toISOString(),endDate:(null===e||void 0===e?void 0:e.endDate)||(new Date).toISOString(),rate:(null===e||void 0===e?void 0:e.rate)||100}},_=function(e){var t=e.value,n=e.onChange,a=Object(l.a)(e,j),o=Object(s.useState)(O(t)),i=Object(p.a)(o,2),d=i[0],h=i[1],v=Object(c.useTranslate)({capitalize:!0}),x=Object(s.useCallback)(Object(f.debounce)((function(e){return n(e)}),500),[n]);Object(s.useEffect)((function(){h(O(t))}),[t]);var _=function(e){return function(){C("type")(e)}},C=function(e){return function(t){var n=Object(r.a)(Object(r.a)({},d),{},Object(u.a)({},e,t));h(n),x(n)}};return Object(b.jsxs)(c.Box,Object(r.a)(Object(r.a)({},a),{},{children:[Object(b.jsx)(c.Label,{content:v("name"),mb:2,required:!0,children:Object(b.jsx)(c.Input,{placeholder:v("unavailability_name"),value:d.name,onChange:C("name")})}),Object(b.jsxs)(c.Line,{justifyContent:"space-around",my:2,children:[Object(b.jsx)(y,{label:Object(g.maj)(v("absence")),onClick:_(m.ScheduledPeriodType.ABSENCE),isActive:d.type===m.ScheduledPeriodType.ABSENCE}),Object(b.jsx)(y,{label:Object(g.maj)(v("training",1)),onClick:_(m.ScheduledPeriodType.TRAINING),isActive:d.type===m.ScheduledPeriodType.TRAINING})]}),Object(b.jsx)(c.TextArea,{mb:2,value:d.description,onChange:C("description"),placeholder:v("details")}),Object(b.jsx)(c.PeriodPicker,{startDate:d.startDate,endDate:d.endDate,startDateLabel:v("from"),endDateLabel:v("to"),isFlex:!1,onChange:function(e){var t=Object(r.a)(Object(r.a)({},d),e);h(t),x(t)},mb:2,width:"100%"}),Object(b.jsx)(c.Label,{mb:2,content:"".concat(v("rate")," (%)"),children:Object(b.jsxs)(c.Line,{children:[Object(b.jsx)(c.Input,{mr:2,width:100,min:0,max:100,type:"number",rightElement:Object(b.jsx)(c.Text,{as:"span",children:"%"}),value:d.rate,onChange:function(e){return C("rate")(Number(e))}}),Object(b.jsx)(c.Slider,{flex:1,graduations:null,value:d.rate,max:100,onChange:function(e){return C("rate")(Number(e))}})]})})]}))},C=n(841),w=n(19),D=n(749),S=["onDelete"],P=function(e){var t=e.onDelete,n=Object(l.a)(e,S),a=Object(c.useSwitch)(!1),o=a.active,i=a.on,s=a.off,d=Object(c.useTranslate)({capitalize:!0});return Object(b.jsxs)(c.Column,Object(r.a)(Object(r.a)({alignItems:"flex-start"},n),{},{children:[Object(b.jsxs)(c.Line,{width:"100%",justifyContent:"space-between",mb:2,children:[Object(b.jsx)(c.Box,{children:Object(b.jsx)(c.Text,{fontWeight:"semiBold",children:d("unavailability")})}),Object(b.jsxs)(c.MenuSelect.Target,{px:1,children:[Object(b.jsx)(c.IconButton,{iconAs:D.a,onClick:i,isActive:o}),Object(b.jsx)(c.MenuSelect,{onClose:s,isOpened:o,children:Object(b.jsx)(c.MenuOption,{onClick:function(){t&&t(),s()},children:d("delete")})})]})]}),Object(b.jsx)(c.Line,{children:Object(b.jsx)(c.Text,{fontWeight:"bold",fontSize:"big",children:d("unavailability_details")})})]}))},T=["scheduledPeriodId","onUpdatedScheduledPeriod","onDeletedScheduledPeriod","isOpened","onClose"],E=["value","onChange","isLoading"],k=function(e){var t=e.scheduledPeriodId,n=e.onUpdatedScheduledPeriod,a=e.onDeletedScheduledPeriod,u=e.isOpened,f=e.onClose,m=Object(l.a)(e,T),g=Object(c.useTranslate)({capitalize:!0}),h=Object(d.useAppContext)().getErrorMessage,v=Object(c.useSwitch)(!1),x=Object(c.useAlert)(),y=function(e){var t=e.scheduledPeriodId,n=Object(w.useGetScheduledPeriodLazyQuery)({fetchPolicy:"cache-first",nextFetchPolicy:"network-only"}),r=Object(p.a)(n,2),a=r[0],l=r[1],c=l.data,d=l.loading,u=l.refetch,f=Object(w.useUpdatePeriodMutation)({awaitRefetchQueries:!0,refetchQueries:w.refetchQueries.onMutateScheduledPeriod,update:function(e,t){u&&u()}}),m=Object(p.a)(f,1)[0],g=Object(w.useDeleteScheduledPeriodMutation)({awaitRefetchQueries:!0,refetchQueries:w.refetchQueries.onMutateScheduledPeriod}),h=Object(p.a)(g,2),b=h[0],v=h[1].loading,x=function(){var e=Object(i.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return",m({variables:{input:{id:t,name:n.name,description:n.description,startDate:n.startDate,endDate:n.endDate,type:n.type,rate:n.rate}}}).then((function(){})).catch((function(e){throw new Error(e)})));case 2:return e.abrupt("return");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return",b({variables:{input:{id:t}}}).then((function(){})).catch((function(e){throw new Error(e)})));case 2:return e.abrupt("return");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=Object(s.useMemo)((function(){if(null===c||void 0===c?void 0:c.scheduledPeriod)return{id:c.scheduledPeriod.id,name:Object(w.maybeToOptional)(c.scheduledPeriod.name),description:Object(w.maybeToOptional)(c.scheduledPeriod.description),startDate:c.scheduledPeriod.startDate,endDate:c.scheduledPeriod.endDate,rate:c.scheduledPeriod.rate,type:c.scheduledPeriod.type}}),[c]);return Object(s.useEffect)((function(){t&&a({variables:{id:t}})}),[t]),{scheduledPeriod:j,isLoadingScheduledPeriod:d,isDeletingScheduledPeriod:v,updateScheduledPeriod:x,deleteScheduledPeriod:y}}({scheduledPeriodId:t}),j=y.scheduledPeriod,O=y.isLoadingScheduledPeriod,_=y.isDeletingScheduledPeriod,D=y.updateScheduledPeriod,S=y.deleteScheduledPeriod,E=function(){var e=Object(i.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D(r).then((function(){x.success(g("your_availability_has_been_updated")),n&&n()})).catch((function(e){x.error(h(e)),console.error("Error updating scheduledPeriod ".concat(t),e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(C.a,Object(r.a)(Object(r.a)({isOpened:u,onClose:f,renderHeader:function(){return Object(b.jsx)(P,{onDelete:v.on})}},m),{},{children:"undefined"!==typeof j&&Object(b.jsx)(A,{isLoading:O,value:j,onChange:E,mt:1})})),Object(b.jsx)(c.ConfirmModal,{isOpened:v.active,onConfirm:function(){S().then((function(){x.success(g("success")),a&&a(),v.off()})).catch((function(e){x.error(h(e)),console.error("Error deleting scheduledPeriod ".concat(t),e)}))},onCancel:v.off,isLoading:_,children:Object(b.jsx)(c.Box,{display:"flex",flexDirection:"column",children:Object(b.jsx)(c.Text,{fontSize:"big",fontWeight:"bold",children:g("confirm_delete_unavailability")})})})]})},A=function(e){var t=e.value,n=e.onChange,a=e.isLoading,o=Object(l.a)(e,E);return a?Object(b.jsx)(c.Loader,{}):Object(b.jsx)(_,Object(r.a)({value:t,onChange:n},o))},N=n(15),I="scheduledPeriodId",M=function(e){return"undefined"!==typeof e.scheduledPeriodId},F=function(e,t){switch(t.type){case"setScheduledPeriodId":return Object(r.a)(Object(r.a)({},e),{},{scheduledPeriodId:t.scheduledPeriodId,isOpened:M({scheduledPeriodId:t.scheduledPeriodId})});case"open":return Object(r.a)(Object(r.a)({},e),{},{isOpened:M({scheduledPeriodId:e.scheduledPeriodId})});case"close":return Object(r.a)(Object(r.a)({},e),{},{isOpened:!1});default:return e}},R=function(e){var t=Object(s.useReducer)(F,{scheduledPeriodId:e.scheduledPeriodId,isOpened:M({scheduledPeriodId:e.scheduledPeriodId})}),n=Object(p.a)(t,2),r=n[0],a=r.isOpened,o=r.scheduledPeriodId,i=n[1],l=Object(N.useLocation)(),c=Object(N.useHistory)();Object(s.useEffect)((function(){a&&o?c.push("?".concat(I,"=").concat(o)):c.push(l.pathname)}),[a,o]),Object(s.useEffect)((function(){var e=new URLSearchParams(l.search).get(I);e&&e!==o?i({type:"setScheduledPeriodId",scheduledPeriodId:e}):e||i({type:"close"})}),[l.search]);return{isOpened:a,scheduledPeriodId:o,setScheduledPeriodId:function(e){i({type:"setScheduledPeriodId",scheduledPeriodId:e})},open:function(){i({type:"open"})},close:function(){i({type:"close"})}}}},767:function(e,t,n){"use strict";n(762);var r=n(785);n.d(t,"a",(function(){return r.a})),n.d(t,"d",(function(){return r.b}));var a=n(765);n.d(t,"b",(function(){return a.a})),n.d(t,"e",(function(){return a.b}));var o=n(790);n.d(t,"c",(function(){return o.a})),n.d(t,"f",(function(){return o.b}))},787:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r,a=n(17),o=n(285),i=n(187),l=(n(0),n(14)),s=n(32),c=n(747),d=n(1),u=["status"],p=(r={},Object(i.a)(r,s.PinTrainingStatus.Validated,{color:"success.0",label:c.b.get(s.PinTrainingStatus.Validated)}),Object(i.a)(r,s.PinTrainingStatus.Suggested,{color:"grey.0",label:c.b.get(s.PinTrainingStatus.Suggested)}),Object(i.a)(r,s.PinTrainingStatus.Approved,{color:"secondary.0",label:c.b.get(s.PinTrainingStatus.Approved)}),Object(i.a)(r,s.PinTrainingStatus.Accepted,{color:"secondary.0",label:c.b.get(s.PinTrainingStatus.Accepted)}),Object(i.a)(r,s.PinTrainingStatus.Pending,{color:"secondary.0",label:c.b.get(s.PinTrainingStatus.Pending)}),Object(i.a)(r,s.PinTrainingStatus.Refused,{color:"error.0",label:c.b.get(s.PinTrainingStatus.Refused)}),Object(i.a)(r,s.PinTrainingStatus.Noshow,{color:"error.0",label:c.b.get(s.PinTrainingStatus.Noshow)}),Object(i.a)(r,s.PinTrainingStatus.Canceled,{color:"error.0",label:c.b.get(s.PinTrainingStatus.Canceled)}),r),f=function(e){var t=e.status,n=Object(o.a)(e,u),r=Object(l.useTranslate)({capitalize:!0}),i=p[t];return Object(d.jsx)(l.Box,Object(a.a)(Object(a.a)({p:0,bg:i.color,display:"flex",justifyContent:"center"},n),{},{children:Object(d.jsx)(l.Text,{fontWeight:"semiBold",children:r(i.label)})}))}},795:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r,a=n(0),o=["title","titleId"];function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function s(e,t){var n=e.title,s=e.titleId,c=l(e,o);return a.createElement("svg",i({viewBox:"0 0 10 16",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":s},c),n?a.createElement("title",{id:s},n):null,r||(r=a.createElement("path",{d:"M2.16667 0L0 2.27368L5.66667 8L0 13.7263L2.16667 16L10 8L2.16667 0Z"})))}var c=a.forwardRef(s);n.p},799:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(0);var r=n(14),a=n(1),o=function(e){var t=e.renderHeader,n=e.children;return Object(a.jsxs)(r.Box,{width:"100%",height:"100%",bg:"white",display:"flex",flexDirection:"column",backgroundColor:"white",children:[Object(a.jsx)(r.Box,{flexGrow:0,p:2,children:t()}),Object(a.jsx)(r.Box,{px:2,children:Object(a.jsx)(r.Separator,{width:"100%"})}),Object(a.jsx)(r.Box,{flexGrow:1,overflow:"auto",p:2,width:"100%",children:n})]})}},818:function(e,t,n){var r=n(1133),a=["title"],o=["title"],i=["title"],l=["title"],s=["title"],c=["title"];!function(e,t,n,d,u,p,f,m,g,h,b,v,x,y,j,O){"use strict";var _="default"in t?t.default:t;function C(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}m=m&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m,g=g&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g,x=x&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x,j=j&&Object.prototype.hasOwnProperty.call(j,"default")?j.default:j,C("@import url(http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,300,400,700);\n._app_cc-icon__3PrY8 {\n  display: block;\n  font-style: normal;\n  font-weight: normal;\n  line-height: 1;\n  user-select: none;\n  fill: currentColor;\n  width: 1em;\n  height: 1em; }\n  ._app_cc-icon__3PrY8._app_cc--inline__2Jl6Q {\n    display: inline-block; }\n\n._app_cc-scheduler-top-left__2dQy_ {\n  box-shadow: 3px 3px 3px #0f094526;\n  clip-path: inset(0px -15px 0px 0px);\n  z-index: 1; }\n\n._app_cc-scheduler-top-right__bz3sv {\n  -ms-overflow-style: none;\n  scrollbar-width: none; }\n  ._app_cc-scheduler-top-right__bz3sv::-webkit-scrollbar {\n    display: none; }\n\n._app_cc-scheduler-bottom-left__WFoYX {\n  box-shadow: 3px -3px 3px #0f094526;\n  clip-path: inset(0px -15px 0px 0px);\n  z-index: 1; }\n\n._app_cc-scheduler-custom-scrollbar__KOMij {\n  scrollbar-color: #F2F2FA #d6d6e9;\n  scrollbar-width: thin;\n  border-right: 1px solid #e6e6f5;\n  border-bottom: 1px solid #e6e6f5; }\n  ._app_cc-scheduler-custom-scrollbar__KOMij::-webkit-scrollbar {\n    background-color: #F2F2FA;\n    width: 5px; }\n  ._app_cc-scheduler-custom-scrollbar__KOMij::-webkit-scrollbar-thumb {\n    background-color: #d6d6e9;\n    width: 5px; }\n\n._app_cc-scheduler-container__1Az1W {\n  width: 100%;\n  height: calc(100% - 71px);\n  border-bottom: 1px solid black; }\n\n._app_cc-scheduler-header__1z_Oh {\n  display: flex;\n  height: 10%; }\n  ._app_cc-scheduler-header-left__kRVT1 {\n    width: 28%;\n    height: 100%;\n    display: flex;\n    align-items: flex-end;\n    background: white;\n    box-shadow: 3px 3px 3px #0f094526;\n    clip-path: inset(0px -15px 0px 0px);\n    z-index: 1; }\n  ._app_cc-scheduler-header-calendar__1B702 {\n    height: 100%;\n    width: 72%;\n    background: white;\n    display: flex;\n    overflow-x: scroll;\n    z-index: 0;\n    flex-direction: row; }\n    ._app_cc-scheduler-header-calendar-up__CDqzg {\n      height: 50%;\n      display: flex;\n      flex-direction: row;\n      align-items: flex-end;\n      padding-left: 5px;\n      font-weight: 600;\n      border-bottom: 0.5px solid #e6e6f5; }\n      ._app_cc-scheduler-header-calendar-up-text__2XTwc {\n        position: relative;\n        font-size: 13.5px; }\n    ._app_cc-scheduler-header-calendar-down__1wukc {\n      height: 50%;\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n      border-bottom: 1px solid black;\n      border-bottom: 1px solid black; }\n      ._app_cc-scheduler-header-calendar-down-item__zb10L {\n        border-right: 0.5px solid #e6e6f5;\n        height: 100%;\n        width: 50px;\n        font-size: 13px;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        font-weight: bold; }\n        ._app_cc-scheduler-header-calendar-down-item-index__2Pun- {\n          color: #a7a7bc;\n          position: relative;\n          left: 5px;\n          font-size: 10px;\n          font-weight: 600; }\n        ._app_cc-scheduler-header-calendar-down-item-text__1Cm2h {\n          position: relative;\n          left: 5px;\n          font-size: 12px; }\n  ._app_cc-scheduler-header-calendar__1B702::-webkit-scrollbar {\n    display: none; }\n\n._app_cc-scheduler-content__1wOS0 {\n  display: flex;\n  height: 90%; }\n\n._app_cc-scheduler-side-bar__1to5k {\n  background: white;\n  width: 28%;\n  height: 100%;\n  overflow-y: auto;\n  box-shadow: 3px -3px 3px #0f094526;\n  clip-path: inset(0px -15px 0px 0px);\n  z-index: 1; }\n  ._app_cc-scheduler-side-bar-item__3abvS {\n    width: 100%;\n    margin-bottom: 10px; }\n  ._app_cc-scheduler-side-bar-assign__UpOLd {\n    height: 50px;\n    flex-direction: row;\n    align-items: center;\n    display: flex;\n    padding-left: 20px;\n    font-size: 15px;\n    cursor: pointer;\n    transition: 0.3s; }\n  ._app_cc-scheduler-side-bar-assign__UpOLd:hover {\n    background-color: #e6e6f5; }\n\n._app_cc-scheduler-side-bar__1to5k::-webkit-scrollbar {\n  display: none; }\n\n._app_cc-scheduler-content-right__3-aup {\n  display: flex;\n  flex-direction: column;\n  background: #F2F2FA;\n  width: 72%;\n  height: 100%;\n  overflow-y: auto;\n  overflow-x: auto; }\n  ._app_cc-scheduler-content-right-row__1-68K {\n    display: flex;\n    flex-direction: row; }\n\n._app_cc-scheduler-content-right__3-aup::-webkit-scrollbar {\n  display: none; }\n\n._app_cc-scheduler-default-height__2nXMC {\n  height: 50px; }\n\n._app_cc-scheduler-default-width__3zJA7 {\n  width: 50px; }\n\n._app_divider__2bElr {\n  flex-shrink: 0; }\n\n._app_cc-scheduler-container__1Az1W ._app_locked__2STIq {\n  opacity: 0.75;\n  background-color: #e6e6f5; }\n\n._app_cc-planning-projects-content-item__3xGQ6 {\n  min-width: 50px;\n  min-height: 50px;\n  border: 0.5px solid black;\n  overflow-wrap: normal; }\n\n._app_cc-planning-projects-side-bar-item__2JZVb {\n  height: 50px;\n  width: 100%;\n  border-bottom: 0.5px solid #e6e6f5;\n  display: flex;\n  align-items: center;\n  padding-left: 20px;\n  flex-direction: row;\n  justify-content: space-between; }\n\n._app_cc-planning-projects-side-bar-left-info__2CBng {\n  display: flex;\n  position: relative;\n  align-items: center;\n  right: 52px;\n  flex-direction: column;\n  font-size: 11px; }\n\n._app_cc-planning-projects-side-bar-left-period__dQ4eO {\n  color: #a1a1a1;\n  font-size: 12px; }\n\n._app_cc-top-header-container__2r1l- {\n  width: 100%;\n  height: 85px;\n  padding: 10px 20px 10px 20px;\n  flex-direction: row;\n  display: flex;\n  justify-content: space-between;\n  align-items: center; }\n\n._app_cc-top-header-drop-down__2BJYs {\n  display: flex;\n  flex-direction: row;\n  width: 15%;\n  padding-left: 15px;\n  align-items: center; }\n  ._app_cc-top-header-drop-down-item__3RKqq {\n    width: 100%;\n    height: 50px;\n    align-items: center;\n    display: flex;\n    font-size: 14px;\n    cursor: pointer;\n    overflow: hidden;\n    transition: 0.3s; }\n    ._app_cc-top-header-drop-down-item-text__1yB99 {\n      margin-left: 15px; }\n  ._app_cc-top-header-drop-down-item__3RKqq:hover {\n    background-color: #e6e6f5; }\n  ._app_cc-top-header-drop-down-txt__3sV2y {\n    font-size: 14px;\n    font-weight: 600; }\n  ._app_cc-top-header-drop-down-icon__ikp7x {\n    margin-left: 10px;\n    cursor: pointer; }\n\n._app_cc-top-header-period-select__29n-L {\n  display: flex;\n  flex-direction: row;\n  width: 70%;\n  align-items: center; }\n  ._app_cc-top-header-period-select-text__1ARFj {\n    margin: 0px 12px 0px 12px;\n    font-size: 13px;\n    font-weight: 600; }\n  ._app_cc-top-header-period-select-arrow__FTPfU {\n    margin: 0px 13px 0px 13px; }\n  ._app_cc-top-header-period-select-button__3BO0a {\n    margin-left: 25px;\n    font-size: 13px;\n    font-weight: 600; }\n  ._app_cc-top-header-period-select-date__2AWbE {\n    font-size: 12px; }\n\n._app_cc-top-header-actions__qwaTV {\n  width: 15%;\n  display: flex;\n  flex-direction: row-reverse;\n  justify-content: space-between;\n  align-items: center; }\n  ._app_cc-top-header-actions-filter__-U2fA {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    cursor: pointer; }\n    ._app_cc-top-header-actions-filter-txt__A6KdV {\n      font-weight: bold;\n      margin-left: 5px;\n      font-size: 14px;\n      font-weight: 700; }\n  ._app_cc-top-header-actions-export__13FlI {\n    font-size: 14px; }\n\n._app_cc-top-header-border-btn__3967Y {\n  border: 0.5px solid #d7d7d7;\n  border-radius: 4px;\n  cursor: pointer;\n  padding: 5px 15px 5px 15px;\n  height: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: 0.3s; }\n\n._app_cc-top-header-border-btn__3967Y:hover {\n  background-color: #e6e6f5; }\n\n._app_cc-scheduler-square__1gmBd {\n  min-width: 50px;\n  min-height: 50px;\n  border-bottom: 0.5px solid #e6e6f5;\n  border-right: 0.5px solid #e6e6f5;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  background-color: white; }\n  ._app_cc-scheduler-square-bar__3tAb9 {\n    width: 100%;\n    height: 100%;\n    background-color: #e6e6f5;\n    cursor: pointer;\n    justify-content: flex-end;\n    display: flex; }\n    ._app_cc-scheduler-square-bar-hover__3inbL {\n      position: absolute;\n      background-color: black;\n      color: white;\n      top: -30px;\n      font-size: 12px;\n      padding: 5px 15px;\n      z-index: 100;\n      border-radius: 3px; }\n    ._app_cc-scheduler-square-bar-container__1orOi {\n      width: 100%;\n      height: 5px;\n      margin-bottom: 8px; }\n    ._app_cc-scheduler-square-bar-filled__3HFZY {\n      width: 100%;\n      height: 100%;\n      background-color: red; }\n  ._app_cc-scheduler-square-content__2Nn-n {\n    font-size: 12.5px;\n    font-weight: 600; }\n  ._app_cc-scheduler-square-selected__3LmF9 {\n    border: 1px dashed #bfbdcc;\n    background-color: #fff7f5;\n    width: 100%;\n    height: 24px; }\n\n._app_cc-scheduler-allocation__2yKI6 {\n  position: absolute;\n  border-radius: 2px;\n  overflow: hidden;\n  white-space: nowrap;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  box-shadow: 0px 1.5px 3px #636363;\n  justify-content: space-between;\n  cursor: pointer;\n  align-items: center; }\n  ._app_cc-scheduler-allocation-hatched__2ME1S {\n    background: repeating-linear-gradient(-45deg, transparent, transparent 2px, transparent 2px, rgba(0, 0, 0, 0.132) 4px); }\n  ._app_cc-scheduler-allocation-time__13Aot {\n    position: absolute;\n    top: 14px;\n    color: #636363;\n    font-size: 12px; }\n  ._app_cc-scheduler-allocation-extend-left__1ruXN {\n    background-color: inherit;\n    filter: brightness(0.8);\n    height: 60%;\n    width: 5px; }\n  ._app_cc-scheduler-allocation-extend-right__2ILyL {\n    background-color: inherit;\n    filter: brightness(0.8);\n    height: 60%;\n    width: 5px; }\n  ._app_cc-scheduler-allocation-text__qn20q {\n    font-size: 11.5px;\n    text-overflow: ellipsis;\n    position: relative;\n    color: #253a47;\n    width: calc(100% - 30px);\n    font-weight: 600;\n    height: 100%;\n    display: flex;\n    align-items: center; }\n    ._app_cc-scheduler-allocation-text-overflow__2cpQa {\n      overflow: hidden;\n      white-space: nowrap;\n      text-overflow: ellipsis; }\n  ._app_cc-scheduler-allocation-drag__yPBMY {\n    width: 25px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n    background-color: inherit; }\n\nbody {\n  font-family: 'Open Sans', sans-serif; }\n");var w,D,S,P=function(){return(P=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function T(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}function E(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(l){a={error:l}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i}function k(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e}(S=e.AllocationStatus||(e.AllocationStatus={})).PROVISION="provision",S.SIMULATION="simulation",S.APPROVED="approved",(D=e.AllocationType||(e.AllocationType={})).VACANCY="vacancy",D.ABSENT="absent",D.TRAINING="training",D.WORK="work",(w=e.PeriodType||(e.PeriodType={})).DAY="day",w.WEEK="week",w.MONTH="month";var A=Array.from({length:12},(function(e,t){return p.localeMoment.months(t).toUpperCase()})),N=Array.from({length:7},(function(e,t){return p.localeMoment.weekdaysMin(t)})),I=Object.fromEntries(Array.from({length:12},(function(e,t){return[p.localeMoment.monthsShort(t).toUpperCase(),t+1]}))),M=Object.keys(I),F=e.PeriodType.WEEK,R=e.PeriodType.DAY,L=e.PeriodType.MONTH,B=function(e,t,n,r,a){var o,i;return o=!1===(null===a||void 0===a?void 0:a.isAllowEndDateOverlap)?e<r:e<=r,i=!1===(null===a||void 0===a?void 0:a.isAllowStartDateOverlap)?n<t:n<=t,o&&i},z=function(){var e=n.useTranslate(),r=t.useCallback((function(e){return e<10?"0"+e:e}),[]),a=t.useCallback((function(t,n){if(n===R||n===F){var r=t.split("/"),a=new Date(r[2]+"-"+r[1]+"-"+r[0]);if(n===R)return""+N[a.getDay()];if(n===F){var o=p.localeMoment(a).isoWeek();return""+e("week_abbreviation")+o}}return n===L?""+e("month_abbreviation")+I[t]:null}),[]),o=t.useCallback((function(e){if(e){var t=null===e||void 0===e?void 0:e.length;if(1===t)return{height:51,lines:[[{startDate:e[0].startDate,endDate:e[0].endDate,id:e[0].id}]]};if(t>1){for(var n=[[{startDate:e[0].startDate,endDate:e[0].endDate,id:e[0].id}]],r=0,a=1;a<t;a++){for(var o=!1,i=0;i<n.length;i++){for(var l=!0,s=0;s<n[i].length;s++)if(B(n[i][s].startDate,n[i][s].endDate,e[a].startDate,e[a].endDate)){l=!1;break}l&&(n[i].push(e[a]),o=!0)}o||(n.push([e[a]]),r++)}return{height:32*r+50,lines:n}}}return{height:51,lines:[]}}),[B]);return{dateRangeOverlaps:B,padToTwo:r,getDateIndexByPeriod:a,multipleDateRangeOverlaps:o}},W=function(e){var t=e.calendarStructure,n=e.periodType,r=T(e,["calendarStructure","periodType"]),a=z().getDateIndexByPeriod;return _.createElement("div",P({},r,{id:"top-scroll",className:"cc-scheduler-header-calendar"}),t.map((function(e,t){return _.createElement("div",{key:t},_.createElement("div",{className:"cc-scheduler-header-calendar-up"},_.createElement("text",{className:"cc-scheduler-header-calendar-up-text"},e.name)),_.createElement("div",{className:"cc-scheduler-header-calendar-down"},e.squares.map((function(e,t){return _.createElement("div",{className:"cc-scheduler-header-calendar-down-item",key:t},_.createElement("text",{className:"cc-scheduler-header-calendar-down-item-index"},a(e,n)),_.createElement("text",{className:"cc-scheduler-header-calendar-down-item-text"},e.substring(0,5)))}))))})))},H=_.memo(W),U=function(e){var t=e.children;return _.createElement("div",{id:"content-scroll",className:"cc-scheduler-content-right"},t)};_.memo(U);var K=function(e){var t=e.children,n=T(e,["children"]);return _.createElement("div",P({},n,{className:"cc-scheduler-header-left"}),t)},q=function(e){var t=e.children;return _.createElement("div",{id:"sidebar-scroll",className:"cc-scheduler-side-bar"},t)};_.memo(q);var Y={onAddNeed:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];alert(JSON.stringify(e))},onAddAssignment:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];alert(JSON.stringify(e))},onAssignResource:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];alert(JSON.stringify(e))},onChangeAssignmentDates:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];alert(JSON.stringify(e))},onEditAssignment:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];alert(JSON.stringify(e))},onEditNeed:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];alert(JSON.stringify(e))},onDeleteAssignment:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];alert(JSON.stringify(e))},onReOrderNeed:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];alert(JSON.stringify(e))},onChangeExternalResourceName:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];alert(JSON.stringify(e))}},V=t.createContext(Y);function G(){return t.useContext(V)}var Q=function(e){var t=e.callbacks,n=e.children,r=P(P({},Y),t);return _.createElement(V.Provider,{value:r},n)},J=function(e,t,n,r,a){for(var o=new Date(Date.UTC(t,e,1,12)),i=[],l=new Date(Date.UTC(n.getFullYear(),n.getUTCMonth(),n.getUTCDate(),12)),s=new Date(Date.UTC(r.getFullYear(),r.getUTCMonth(),r.getUTCDate(),12));o.getUTCMonth()===e;){var c=new Date(o);c>=l&&c<=s&&i.push(a(c)),o.setUTCDate(o.getUTCDate()+1)}return i},X=function(e,t,n,r){for(var a=new Date(t,e,1,12),o=a.getMonth(),i=new Set,l=p.localeMoment(n).isoWeekday(1);a.getMonth()===o;){var s=p.localeMoment(a).hour(12).clone().isoWeekday(1);s.isSameOrAfter(l.toDate())&&s.isSameOrBefore(p.localeMoment(r))&&i.add({label:p.localeMoment(s).format("DD/MM/YYYY").toString(),startDate:s.toDate(),endDate:s.add(6,"d").toDate()}),a.setDate(a.getDate()+7)}return k([],E(i))},Z=function(t,n,r,a,o){var i=[];return t===e.PeriodType.DAY&&i.push({name:A[n]+" "+r,squares:J(n,r,a,o,(function(e){return{startDate:e,endDate:p.localeMoment(e).add(1,"d").toDate(),label:e.toDateString()}}))}),t===e.PeriodType.WEEK&&i.push({name:A[n]+" "+r,squares:X(n,r,a,o)}),t===e.PeriodType.MONTH&&i.push({name:""+r,squares:[{startDate:new Date(r,n,1,12),endDate:new Date(r,n+1,0,12),label:M[n]}]}),i},$=function(e,t,n){var r=[];if(t.getFullYear()===n.getFullYear())for(var a=t.getMonth();a<=n.getMonth();a++)r=r.concat(Z(e,a,t.getFullYear(),t,n));else for(var o=t.getFullYear();o<=n.getFullYear();o++)for(a=0;a<12;a++)o===t.getFullYear()?a>=t.getMonth()&&(r=r.concat(Z(e,a,o,t,n))):o===n.getFullYear()?a<=n.getMonth()&&(r=r.concat(Z(e,a,o,t,n))):r=r.concat(Z(e,a,o,t,n));return r},ee=function(n,r,a){var o=E(t.useState([]),2),i=o[0],l=o[1],s=z().padToTwo,c=t.useCallback((function(e,t,n,r){for(var a=new Date(t,e,1,12),o=a.getMonth(),i=new Set,l=p.localeMoment(n).isoWeekday(1);a.getMonth()===o;){var s=p.localeMoment(a).hour(12).clone().isoWeekday(1).toDate();s>=l.toDate()&&s<=r&&i.add(p.localeMoment(s).format("DD/MM/YYYY").toString()),a.setDate(a.getDate()+7)}return k([],E(i))}),[]),d=t.useCallback((function(t,n,r,a,o){var i=[];if(t===e.PeriodType.DAY){var d=J(n,r,a,o,(function(e){return e.toDateString()})).map((function(e){return e.substring(8,10)+"/"+s(n+1)+"/"+s(r)}));i.push({name:A[n]+" "+r,squares:d})}t===e.PeriodType.WEEK&&i.push({name:A[n]+" "+r,squares:c(n,r,a,o)}),t===e.PeriodType.MONTH&&i.push({name:""+r,squares:[M[n]]}),l((function(n){if(t!==e.PeriodType.MONTH){var r=[];n.forEach((function(e){return r.push(e.squares)}));var a=new Set(r.flat());i[0].squares=Array.from(new Set(i[0].squares)).filter((function(e){return!a.has(e)}))}return k(k([],E(n)),E(i))}))}),[c,s]),u=t.useCallback((function(e){e.setHours(12),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)}),[]);return t.useEffect((function(){u(r),u(a),l([]);var e=n;if(r.getFullYear()===a.getFullYear())for(var t=r.getMonth();t<=a.getMonth();t++)d(e,t,r.getFullYear(),r,a);else for(var o=r.getFullYear();o<=a.getFullYear();o++)for(t=0;t<12;t++)o===r.getFullYear()?t>=r.getMonth()&&d(e,t,o,r,a):o===a.getFullYear()?t<=a.getMonth()&&d(e,t,o,r,a):d(e,t,o,r,a)}),[n,d,r,a]),{getDaysInMonthUTC:J,calendarStructure:i}},te=function(n,r,a,o){var i=E(t.useState(0),2),l=i[0],s=i[1],c=E(t.useState(!1),2),d=c[0],u=c[1],m=z().dateRangeOverlaps,g=ae().selectedAssignment,h=G().onChangeAssignmentDates,b=void 0===h?function(){}:h,v=f.useTheme(),x=function(){return u(!0)},y=function(){return u(!1)},j=t.useMemo((function(){var e=v.colors,t=e.error,n=e.secondary,r=e.success;return l>100?t[3]:100===l?n[4]:l<100?r[3]:void 0}),[l]),O=t.useMemo((function(){return{justifyContent:l>100?"flex-start":"flex-end",background:v.colors.secondary[4]}}),[l]),_=t.useMemo((function(){return{width:l>=200?"100%":l<=100?100-l+"%":l-100+"%",backgroundColor:j}}),[j,l]),C=t.useMemo((function(){var e=v.colors.grey;return!1===a?{backgroundColor:e[1]}:l>100?{backgroundColor:l>100?"#E5AEC466":"white"}:{}}),[l,a]);return t.useEffect((function(){if(r){var t=0,a=p.localeMoment(r,"DD/MM/YYYY").hours(12).toDate(),i=p.localeMoment(a);o===e.PeriodType.DAY?i.add(1,"day"):o===e.PeriodType.WEEK?i.add(1,"week"):o===e.PeriodType.MONTH&&i.add(1,"month"),null===n||void 0===n||n.forEach((function(e){m(e.startDate,e.endDate,a,i.toDate(),{isAllowEndDateOverlap:!1,isAllowStartDateOverlap:!1})&&(t+=e.rate)})),s(t)}}),[n,r,m,o]),{barBackgroundColor:j,barStyleContent:O,barStyle:_,squareStyle:C,onDrop:function(e){if(r&&g){var t=g.startDate,n=g.endDate,a=g.id,o=r.split("/"),i=new Date(o[2]+"-"+o[1]+"-"+o[0]),l=new Date(i),s=Math.abs(t.getTime()-n.getTime()),c=Math.ceil(s/864e5);l.setDate(l.getDate()+c),b(a,p.getDateDay(i).toDate(),p.getDateDay(l).toDate()),e.preventDefault()}},onDragOver:function(e){e.preventDefault()},onMouseLeave:y,onMouseOver:x,isHovered:d,available:l}},ne=t.createContext({calendarStructure:[],contentSquares:[],selectedAssignment:null,setSelectedAssignment:function(e){},periodType:e.PeriodType,startDate:new Date,endDate:new Date}),re=function(n){var r=n.sideBarChildren,a=n.contentChildren,o=n.fixedHeaderChildren,i=n.periodType,l=n.startDate,s=n.endDate,c=n.type,u=n.totalCount,p=n.loadMoreRows,f=void 0===p?function(){}:p,m=n.getLinkToUserProfile,g=n.getLinkToProject,h=t.useRef(null),b=ee(i,l,s).calendarStructure,v=E(t.useState(null),2),x=v[0],y=v[1];t.useEffect((function(){h&&h.current.recomputeGridSize()}),[r,a]);var j=t.useMemo((function(){return i===e.PeriodType.MONTH?b.reduce((function(e,t){return k(k([],E(e)),E(t.squares.map((function(e){return"01/"+I[e]+"/"+t.name}))))}),[]):b.reduce((function(e,t){return k(k([],E(e)),E(t.squares))}),[])}),[b,i]),O=function(e){var t=e.columnIndex,n=e.key,l=e.rowIndex,s=e.style;if(0===l){if(0===t)return _.createElement(K,{style:s,key:n},o);if(1===t)return _.createElement(H,{style:s,key:n,periodType:i,calendarStructure:b})}var c=0===t?r&&r[l-1]:a&&a[l-1],d=c.component,u=c.props;return _.createElement(d,P({},u,{style:s,key:n}))},C=t.useCallback((function(e){switch(e.index){case 0:return 364;case 1:return 51*j.length;default:return 364}}),[j.length]),w=t.useCallback((function(e){var t=e.index;return 0===t?102:a&&a[t-1].height?a[t-1].height:r&&r[t-1].height?r[t-1].height:51}),[a,r]),D={calendarStructure:b,contentSquares:j,selectedAssignment:x,setSelectedAssignment:y,periodType:i,startDate:l,endDate:s,getLinkToUserProfile:m,getLinkToProject:g};function S(e){var t=e.index;return!!a&&!!a[t]}var T=function(e){return function(t){t.columnStartIndex,t.columnStopIndex;var n=t.rowStartIndex,r=t.rowStopIndex;e({startIndex:n,stopIndex:r})}};return _.createElement(ne.Provider,{value:P({},D)},_.createElement("div",{className:"cc-scheduler-container"},_.createElement(d.AutoSizer,null,(function(e){var t=e.height,n=e.width;return _.createElement(d.InfiniteLoader,{isRowLoaded:S,loadMoreRows:f,rowCount:u||((null===a||void 0===a?void 0:a.length)||0)+1},(function(e){var o=e.onRowsRendered;return e.registerChild,_.createElement(d.MultiGrid,P({ref:h,cellRenderer:O,columnCount:2,columnWidth:C,height:t,rowCount:((null===a||void 0===a?void 0:a.length)||0)+1,rowHeight:w,width:n,fixedColumnCount:1,fixedRowCount:"allocations"===c?2:1,overscanRowsCount:10,onSectionRendered:T(o),enableFixedColumnScroll:!0,hideBottomLeftGridScrollbar:!0,enableFixedRowScroll:!0,classNameTopLeftGrid:"cc-scheduler-top-left",classNameTopRightGrid:"cc-scheduler-top-right",classNameBottomLeftGrid:"cc-scheduler-bottom-left cc-scheduler-custom-scrollbar",classNameBottomRightGrid:"cc-scheduler-custom-scrollbar"},{sideBarChildren:r,contentChildren:a,periodType:i,startDate:l,endDate:s}))}))}))))};function ae(){return t.useContext(ne)}var oe=_.memo(re),ie=m(n.Box)((function(e){e.theme;var t=e.isColoredBackground,n=e.backgroundColor;return{border:"none",alignItems:"center",justifyContent:"center",minWidth:"50px",minHeight:"51px",display:"flex",flexDirection:"row",background:t?n:"none"}})),le=m(n.Box)((function(e){var t=e.theme,n=e.isColoredBackground,r=e.isFirstNeed;return{display:"flex",flexGrow:1,alignItems:"center",paddingLeft:"15px",paddingRight:"27px",minHeight:"inherit",minWidth:"inherit",borderTop:n||r?"2px solid black":"0.5px solid "+t.colors.grey[1]}})),se=function(e){e.className;var t=e.isColoredBackground,r=void 0!==t&&t,a=e.isFirstNeed,o=void 0!==a&&a,i=(e.contentClassName,e.children),l=e.total,s=e.minAssignees,c=e.maxHeadCount,d=e.onClick,u=e.isPercentage,p=e.backgroundColor,m=T(e,["className","isColoredBackground","isFirstNeed","contentClassName","children","total","minAssignees","maxHeadCount","onClick","isPercentage","backgroundColor"]),g=f.useTheme();return _.createElement(ie,P({},m,{theme:g,onClick:d,isColoredBackground:r,backgroundColor:p}),_.createElement(le,{theme:g,isColoredBackground:r,isFirstNeed:o},_.createElement(n.Box,{display:"flex",flexGrow:1,maxWidth:"calc(100% - 60px)"},i),_.createElement(nt,{isPercentage:u,value:{min:s,max:c,rate:l}})))};function ce(e,t){return e(t={exports:{}},t.exports),t.exports}var de=ce((function(e){!function(){var t={}.hasOwnProperty;function n(){for(var e=[],r=0;r<arguments.length;r++){var a=arguments[r];if(a){var o=typeof a;if("string"===o||"number"===o)e.push(a);else if(Array.isArray(a)&&a.length){var i=n.apply(null,a);i&&e.push(i)}else if("object"===o)for(var l in a)t.call(a,l)&&a[l]&&e.push(l)}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n}()})),ue={root:"index-module_root__1FYIT",name:"index-module_name__1XZID"};C(".index-module_root__1FYIT {\n  position: sticky;\n  top: 0;\n  z-index: 10; }\n\n.index-module_name__1XZID {\n  color: #142C3B;\n  letter-spacing: 0;\n  margin-bottom: 3px;\n  font: normal normal 600 14px/19px Open Sans; }\n");var pe=function(e){var t=e.className,n=e.text,r=e.total,a=e.minAssignees,o=e.maxHeadCount,i=e.isPercentage,l=T(e,["className","text","total","minAssignees","maxHeadCount","isPercentage"]),s=de(ue.root,t);return _.createElement(se,P({},l,{className:s,isPercentage:i,total:r,minAssignees:a,maxHeadCount:o}),_.createElement("div",{className:ue.name},n))},fe={root:"index-module_root__1BdbQ","first-project-child":"index-module_first-project-child__2PbHc","last-project-child":"index-module_last-project-child__30JM6","project-line":"index-module_project-line__1Ugty",square:"index-module_square__1nbiK","project-square":"index-module_project-square__jVTge","empty-square":"index-module_empty-square__2t1iO","selected-square":"index-module_selected-square__1bAjx",value:"index-module_value__3JCKO"};C(".index-module_root__1BdbQ {\n  display: flex;\n  align-items: center;\n  border-bottom: none; }\n\n.index-module_first-project-child__2PbHc {\n  border-top: 2px solid black; }\n\n.index-module_last-project-child__30JM6 {\n  border-bottom: 2px solid black; }\n\n.index-module_project-line__1Ugty {\n  border-top: 2px solid black; }\n\n.index-module_square__1nbiK {\n  align-items: center;\n  justify-content: center;\n  background-color: white; }\n\n.index-module_project-square__jVTge {\n  align-items: center;\n  justify-content: center;\n  background-color: #DDDFF2; }\n\n.index-module_empty-square__2t1iO {\n  background-color: #F0F1FF; }\n\n.index-module_selected-square__1bAjx {\n  background-color: #66bf3c; }\n\n.index-module_value__3JCKO {\n  flex-grow: 1;\n  display: flex;\n  justify-content: center; }\n");var me=function(e){var t=e.text,r=e.value,a=e.valueFontWeight,o=e.isBottomBorder,i=void 0===o||o,l=T(e,["text","value","valueFontWeight","isBottomBorder"]),s=f.useTheme();return _.createElement(n.Line,P({width:"100%",justifyContent:"space-between",borderBottom:i?"1px solid "+s.colors.grey[4]:void 0,py:1},l),_.createElement(n.Text,{fontSize:"small",fontWeight:"semiBold"},t),_.createElement(n.Text,{fontSize:"small",fontWeight:a},r))},ge=function(e){var t=e.totalAssignees,r=e.assignees,a=e.externalAssignees,o=e.isOpened,i=e.onClose,l=T(e,["totalAssignees","assignees","externalAssignees","isOpened","onClose"]),s=n.useTranslate({capitalize:!0});return _.createElement(n.Popover,{content:_.createElement(n.Card,{bg:"white",boxShadow:"small",width:300,p:2,pt:0},_.createElement(me,{text:s("assignees_stats_total"),value:t,valueFontWeight:"semiBold"}),_.createElement(me,{text:s("assignees_stats_internal"),value:r,valueFontWeight:"medium"}),_.createElement(me,{text:s("assignees_stats_external"),value:a,valueFontWeight:"medium",isBottomBorder:!1}),_.createElement(n.Text,{fontSize:"tiny",color:"grey.5",mt:2},s("assignees_stats_warning_message"))),isOpened:o,onClose:i},l.children)},he=function(e){var t=e.assigneesStats,n=e.isOpened,r=e.onClose,a=e.children;return"undefined"!==typeof t?_.createElement(ge,{assignees:t.assignees,externalAssignees:t.externalAssignees,totalAssignees:t.totalAssignees,isOpened:n,onClose:r},a):_.createElement(_.Fragment,null,a)};function be(){return(be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ve=_.createElement("g",{clipPath:"url(#externalResource_svg__clip0_3002_944)"},_.createElement("path",{d:"M9.933 12.075c0-1.142.325-2.2.867-3.067a.815.815 0 00-.208-.433.811.811 0 00-.592-.242H5V6.667h1.667a.811.811 0 00.591-.242.811.811 0 00.242-.592V4.167h1.667c.458 0 .85-.167 1.175-.492.325-.325.491-.717.491-1.175v-.333A6.408 6.408 0 0113.867 4.6c.441.658.741 1.358.925 2.1.625 0 1.225.142 1.775.383a7.993 7.993 0 00-.559-2.008 8.478 8.478 0 00-1.783-2.65A8.537 8.537 0 0011.583.642a8.064 8.064 0 00-3.25-.659c-1.15 0-2.233.217-3.25.659a8.339 8.339 0 00-2.65 1.783A8.479 8.479 0 00.65 5.075a8.065 8.065 0 00-.658 3.25c0 1.15.216 2.233.658 3.25a8.302 8.302 0 001.783 2.642A8.477 8.477 0 005.083 16c.8.342 1.642.55 2.534.625.591-1.167 1.5-2.125 2.616-2.725a5.98 5.98 0 01-.291-1.825h-.009zM7.5 14.958c-1.683-.208-3.075-.941-4.175-2.208-1.1-1.267-1.658-2.733-1.658-4.417 0-.25.016-.5.05-.75.033-.25.075-.5.116-.75l4 4v.834c0 .458.167.85.492 1.175.325.325.717.491 1.175.491v1.625z"}),_.createElement("path",{d:"M12.358 8.975a2.927 2.927 0 00-.891 2.142c0 .833.3 1.55.891 2.141a2.94 2.94 0 002.142.892c.825 0 1.55-.3 2.142-.892a2.94 2.94 0 00.891-2.141c0-.825-.3-1.55-.891-2.142a2.94 2.94 0 00-2.142-.892c-.825 0-1.55.3-2.142.892zm3.5 2.142c0 .375-.133.691-.4.958-.266.267-.583.4-.958.4s-.692-.133-.958-.4a1.303 1.303 0 01-.4-.958c0-.375.133-.692.4-.959.266-.266.583-.4.958-.4s.683.134.958.4c.267.267.4.584.4.959zM19.692 16.65a2.145 2.145 0 00-.825-.833 9.57 9.57 0 00-2.15-.859 8.688 8.688 0 00-4.434 0 9.978 9.978 0 00-2.15.859 2.202 2.202 0 00-.825.833A2.376 2.376 0 009 17.842V20h11v-2.158c0-.434-.1-.834-.308-1.192zm-1.267 1.675h-7.858v-.475c0-.117.025-.217.075-.317a.63.63 0 01.2-.216 8.67 8.67 0 011.808-.734 7.048 7.048 0 013.675 0 8.283 8.283 0 011.808.725.65.65 0 01.209.217c.05.092.075.2.075.317v.475l.008.008z"})),xe=_.createElement("defs",null,_.createElement("clipPath",{id:"externalResource_svg__clip0_3002_944"},_.createElement("path",{d:"M0 0h20v20H0z"}))),ye=function(e){var t=e.title,n=r(e,a);return _.createElement("svg",be({viewBox:"0 0 20 20"},n),t?_.createElement("title",null,t):null,ve,xe)},je=m(n.Box)((function(){return{width:"100%",height:"100%",position:"absolute"}})),Oe=m(n.Box)((function(){return{top:"0px",right:"0px",position:"absolute"}})),_e=function(e){var t=e.size,r=void 0===t?9:t,a=e.isShowIcon,o=e.onClick,i=T(e,["size","isShowIcon","onClick"]);return _.createElement(je,{onClick:o},a&&_.createElement(Oe,P({width:r,height:r,display:"flex",alignItems:"center",justifyContent:"center",p:"1px"},i),_.createElement(n.Icon,{as:ye,size:r})))},Ce=function(e){var t=e.isAssignmentSquare,r=e.content,a=e.style,o=void 0===a?{}:a,i=e.className,l=e.date,s=e.assignments,c=void 0===s?[]:s,d=e.isSelected,u=e.isAssignable,p=e.isAllocationLoading,f=e.assigneesStats,m=e.isExternalAssignees,g=void 0!==m&&m,h=T(e,["isAssignmentSquare","content","style","className","date","assignments","isSelected","isAssignable","isAllocationLoading","assigneesStats","isExternalAssignees"]),b=n.useTranslate({capitalize:!0}),v=de("cc-scheduler-square",i),x=n.useSwitch(!1),y=x.active,j=x.on,O=x.off,C=ae().periodType,w=te(c,l,u,C),D=w.barStyle,S=w.squareStyle,E=w.onDrop,k=w.onDragOver,A=w.onMouseLeave,N=w.onMouseOver,I=w.isHovered,M=w.available,F=w.barStyleContent;return _.createElement(he,{assigneesStats:f,isOpened:y,onClose:O},_.createElement("div",P({onDragOver:k,onDrop:E,style:P(P({},S),o),className:v},h),_.createElement(we,{isEnabled:"undefined"!==typeof f},"undefined"!==typeof f&&_.createElement(_e,{isShowIcon:g,onClick:j,mt:"1px"}),I&&_.createElement("div",{className:"cc-scheduler-square-bar-hover"},b("allocation_rate")+": "+M+"%"),t&&_.createElement("div",{className:"cc-scheduler-square-bar-container",onMouseLeave:A,onMouseOver:N},_.createElement("div",{style:P({},F),className:"cc-scheduler-square-bar"},_.createElement("div",{style:P({},D),className:"cc-scheduler-square-bar-filled"}))),d&&_.createElement("div",{className:"cc-scheduler-square-selected"}),!0===p?_.createElement(n.LoaderSkeleton.Point,null):_.createElement(n.Text,{fontSize:"small",color:o.color,fontWeight:"bold"},r))))},we=function(e){var t=e.isEnabled,r=T(e,["isEnabled"]);return t?_.createElement(n.Box,P({width:"100%",height:"100%",position:"relative",display:"flex",justifyContent:"center",alignItems:"center"},r),r.children):_.createElement(_.Fragment,null,r.children)},De=_.memo(Ce),Se=function(e){if(e&&e.split){var t=e.split("/");return new Date(t[2]+"-"+t[1]+"-"+t[0])}return new Date},Pe=function(t){var n=t.start,r=t.end,a=t.values,o=t.periodType;if(n>r){var i=n;n=r,r=i}return o===e.PeriodType.WEEK?{startDate:Se(a[n]),endDate:g(Se(a[r])).add(6,"days").toDate()}:o===e.PeriodType.MONTH?{startDate:Se(a[n]),endDate:g(Se(a[r])).subtract(1,"days").add(1,"months").toDate()}:{startDate:Se(a[n]),endDate:Se(a[r])}},Te=function(e,n){t.useEffect((function(){var t=function(t){e.current&&!e.current.contains(t.target)&&n(t)};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),function(){document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}}),[e,n])},Ee=function(){return t.createContext({values:new Array,reset:function(){return new Array},parentProps:{},getItemProps:function(e){return{}}})},ke=function(e){return Array.from({length:e},(function(){return!1}))},Ae=function(e){var n=e.context,r=e.children,a=e.length,o=e.onEnd,i=E(t.useState([]),2),l=i[0],s=i[1],c=E(t.useState(null),2),d=c[0],u=c[1],p=E(t.useState(null),2),f=p[0],m=p[1],g=t.useRef(),h=t.useCallback((function(){return s([]),[]}),[a]),b=t.useCallback((function(e){var t=e.currValues,n=void 0===t?l:t,r=e.currSelectionStartIndex,a=void 0===r?d:r,o=e.index;if(n[o]=!0,null!==a)if(o>a)for(var i=a;i<o;i++)n[i]=!0;else for(i=a;i>o;i--)n[i]=!0;return s(k([],E(n))),n}),[e,l,d]),v=t.useCallback((function(e){return{draggable:!0,onDragStart:function(t){var n=new Image;return n.src="",t.dataTransfer.setDragImage(n,window.outerWidth,window.outerHeight),u(e),b({currSelectionStartIndex:e,currValues:ke(a),index:e})},onDragEnter:function(){return null!==d?(m(e),b({index:e})):l},onDragEnd:function(){return o&&"function"===typeof o&&(null===d||null===f?console.error("Something went wrong with the selection"):o(d,f)),u(null),m(null),l}}}),[d,f,l]);Te(g,h);var x=t.useMemo((function(){return{values:l,reset:h,parentProps:{ref:g},getItemProps:v}}),[l,h,g,v]);return _.createElement(n.Provider,{value:x},r)},Ne=Ee();function Ie(e){return void 0===e&&(e=Ne),t.useContext(e)}var Me=function(e){var t=e.className,n=e.selectionContext,r=e.squareClassName,a=e.isAssignmentSquare,o=e.isPercentage,i=e.isProjectLine,l=e.isFirstChild,s=e.isLocked,c=e.assignments,d=e.byPeriod,u=e.squareValues,p=e.squareStyle,f=T(e,["className","selectionContext","squareClassName","isAssignmentSquare","isPercentage","isProjectLine","isFirstChild","isLocked","assignments","byPeriod","squareValues","squareStyle"]),m=Ie(n),g=m.values,h=m.parentProps,b=m.getItemProps;return _.createElement("div",P({},f,n?h:{},{className:t+" "+(i?"project-line":"")+" "+(l?"first-project-child":"")}),u.map((function(e,t){var l,u=g[t]||!1,f=i?de(fe["project-square"],r):de(fe.square,r,((l={})[fe["empty-square"]]=null===e.value,l)),m=!((null===d||void 0===d?void 0:d.length)>t&&null===d[t]);return _.createElement(De,P({},n?b(t):{},{key:t,isSelected:u,className:f+" "+(s?"locked":""),style:p,isAssignmentSquare:a,isAssignable:m,isLocked:s,assignments:c,date:e.date,content:null!==e.value&&"number"===typeof e.value.rate&&_.createElement("div",{className:fe.value},_.createElement(nt,{isPercentage:o,value:e.value}))}))})))},Fe=function(e){var n=e.isSelectable,r=void 0!==n&&n,a=e.isLocked,o=e.className,i=e.isPercentage,l=e.isProjectLine,s=void 0!==l&&l,c=e.isFirstChild,d=void 0!==c&&c,u=e.values,p=e.assignType,f=e.id,m=e.byPeriod,g=T(e,["isSelectable","isLocked","className","isPercentage","isProjectLine","isFirstChild","values","assignType","id","byPeriod"]),h=de(fe.root,o),b=ae(),v=b.contentSquares,x=b.periodType,y=G(),j=y.onAddAssignment,O=y.onAssignResource,C=y.onAddNeed,w=t.useMemo((function(){if(r)return Ee()}),[r]),D=t.useMemo((function(){return v.map((function(e,t){return{date:e,value:u[t]||null}}))}),[v,u]),S=t.useCallback((function(e,t){var n=Pe({start:e,end:t,values:u,periodType:x}),r=n.startDate,a=n.endDate;p&&("need"===p&&C&&C(f,r,a),"resource"===p&&O&&O(f,r,a),"assignment"===p&&j&&f&&j({needId:g.needId,userId:f,startDate:r,endDate:a}))}),[u,x,p,C,O,j]);return r&&w?_.createElement(Ae,{context:w,length:D.length,onEnd:S},_.createElement(Me,P({},g,{isFirstChild:d,isProjectLine:s,isPercentage:i,isLocked:a,className:h,squareValues:D,byPeriod:m,selectionContext:w}))):_.createElement(Me,P({},g,{isFirstChild:d,isProjectLine:s,isPercentage:i,isLocked:a,className:h,squareValues:D,byPeriod:m}))};function Re(){return(Re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Le=_.createElement("path",{d:"M24 7.75L20.59 4.5 12 13 3.41 4.5 0 7.75 12 19.5 24 7.75z"}),Be=function(e){var t=e.title,n=r(e,o);return _.createElement("svg",Re({viewBox:"0 0 24 24"},n),t?_.createElement("title",null,t):null,Le)},ze=m(n.Icon)((function(e){return{padding:"10px",position:"relative",cursor:"pointer",zIndex:5,flexShrink:0,flexGrow:0,fontSize:"medium",color:"black",transform:e.isCollapsed?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"}})),We=function(e){var t=e.isCollapsed,n=void 0!==t&&t;return _.createElement(ze,{as:Be,size:35,color:"black",isCollapsed:n})},He="EXTERNAL_RESOURCE",Ue="externalResource",Ke=function(e){var t,r=e.onChangeExternalUserName,a=e.user,o=n.useTranslate({capitalize:!0}),i=ae().getLinkToUserProfile;return i&&a.id!==He&&(t=i(a.id)),a.id!==He?_.createElement(h.UserBasicInfo,{key:a.id,user:{id:a.id,displayName:a.displayName,familyName:a.familyName,givenName:a.givenName,avatarURL:a.avatarURL},size:"small",linkTo:t}):_.createElement(n.Line,{width:"100%"},_.createElement(h.UserAvatar,{size:"tiny",user:a}),_.createElement(n.TextEditable,{fontSize:"tiny",fontWeight:"semiBold",getIsValueValid:function(e){return e.trim().length>0},onSubmit:function(e){"undefined"!==typeof r&&e.trim().length>0&&e!==a.displayName&&r(e.trim())},readOnly:"undefined"===typeof r,value:a.displayName}),a.displayName!==Ue&&_.createElement(n.InfoTooltip,{size:16,title:_.createElement(n.Text,{color:"white",fontSize:"small"},o("external_resource_shortcut")),position:"right"}))},qe={root:"index-module_root__1Czx4","column-1":"index-module_column-1__1HvHu","column-2":"index-module_column-2__1c87H"};C(".index-module_root__1Czx4 {\n  flex-grow: 1;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  padding-left: 15px;\n  padding-right: 0px;\n  border-bottom: 0.5px solid #e6e6f5; }\n\n.index-module_column-1__1HvHu {\n  font: normal normal bold 11px/24px Open Sans;\n  text-transform: uppercase; }\n\n.index-module_column-2__1c87H {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  font: normal normal bold 11px/15px Open Sans;\n  text-transform: uppercase; }\n");var Ye=function(e){var t=e.className,n=e.columns,r=de(qe.root,t);return _.createElement("div",{className:r},_.createElement("div",{className:qe["column-1"]},n[0]),_.createElement("div",{className:qe["column-2"]},n[1]))},Ve=function(e){var t=e.className,n=de("cc-icon",t);return _.createElement("svg",P({className:n},e,{width:"20",height:"20",viewBox:"0 0 24 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.0598 0C13.7669 0.00151589 13.481 0.0905226 13.2386 0.255714C12.9961 0.420906 12.808 0.654827 12.698 0.927763C12.5881 1.2007 12.5613 1.50033 12.6211 1.7886C12.6809 2.07687 12.8245 2.34077 13.0338 2.54677L18.9646 8.5095H1.48268C1.08945 8.5095 0.712323 8.66656 0.434267 8.94612C0.15621 9.22567 0 9.60484 0 10.0002C0 10.3955 0.15621 10.7747 0.434267 11.0543C0.712323 11.3338 1.08945 11.4909 1.48268 11.4909H18.9655L13.0338 17.4565C12.895 17.5941 12.7846 17.7579 12.7089 17.9385C12.6333 18.1192 12.594 18.3131 12.5933 18.5091C12.5926 18.7051 12.6304 18.8993 12.7047 19.0805C12.779 19.2617 12.8882 19.4264 13.026 19.5649C13.1639 19.7035 13.3276 19.8133 13.5079 19.888C13.6881 19.9627 13.8813 20.0007 14.0762 20C14.2711 19.9993 14.464 19.9597 14.6437 19.8837C14.8234 19.8077 14.9863 19.6967 15.1231 19.5571L23.4851 11.1422C23.6713 10.9853 23.8162 10.7846 23.9068 10.5579C23.9228 10.5174 23.9369 10.4762 23.9491 10.4343L23.9558 10.414C23.9654 10.3786 23.9741 10.3429 23.9817 10.3068V10.2894V10.2701C23.9856 10.2444 23.9891 10.2189 23.9923 10.1938C23.9955 10.1687 23.9981 10.1491 24 10.1349V10.1185C24 10.105 24 10.0918 24 10.0789C24 10.0467 24 10.0145 24 9.98232V9.96397C23.9946 9.75224 23.9443 9.54412 23.8523 9.35356C23.7604 9.163 23.6289 8.99442 23.4669 8.85912L15.1097 0.456815C14.9723 0.314733 14.8081 0.201718 14.6266 0.124426C14.4451 0.0471344 14.2501 0.00712689 14.053 0.00676044L14.0598 0Z",fill:"#030E2D"}))},Ge=m(n.Box)((function(e){return{cursor:e.isSortDisabled?"default":"pointer",flex:1,display:"flex",padding:"0 6px",overflow:"hidden",minWidth:0,alignItems:"center",whiteSpace:"nowrap",userSelect:"none",height:"30px"}})),Qe=m(n.Text)((function(){return{display:"flex",flexDirection:"column",alignItems:"center"}})),Je=m(Ve)((function(e){var t=e.isArrowUp,n=e.isInvisible,r=e.theme;return{display:"flex",width:"10px",height:"10px",marginLeft:r.space[0],transform:t?"rotate(-90deg)":"rotate(90deg)",visibility:n?"hidden":"visible",":hover":{background:r.colors.grey[2]}}})),Xe=function(e){return"desc"===e?"DESC":"asc"===e?"ASC":null},Ze=function(e){var n=e.children,r=e.useSort,a=e.sortKey,o=e.initialSortValue,i=e.onRessourcePlanningSort,l=e.isSortDisabled,s=f.useTheme(),c=r(),d=c.onSort,u=c.sortKeys,p=o||u[a]||null,m=t.useCallback((function(){var e=null===p?"desc":"desc"===p?"asc":null;l||(!i||"familyName"!==a&&"nextAvailability"!==a||i({sortBy:a,sortDirection:Xe(e)}),d&&d({sortKey:a,sortValue:e}))}),[p,d,a]);return _.createElement(Ge,{onClick:m,isSortDisabled:l},_.createElement(Qe,{fontSize:"small",fontWeight:"bold"},n),null===p&&_.createElement(Je,{theme:s,isInvisible:!0}),"desc"===p&&_.createElement(Je,{theme:s,isArrowUp:!0}),"asc"===p&&_.createElement(Je,{theme:s}))},$e=function(e){if(!0===e.isPercentage){var t=e.rate*e.external/e.min||0;return{totalAssignees:b.getRoundedToTwoDecimalsOrZero(e.rate)+"%",externalAssignees:b.getRoundedToTwoDecimalsOrZero(t)+"%",assignees:b.getRoundedToTwoDecimalsOrZero(e.rate-t)+"%",isExternalAssignees:e.external>0}}return{totalAssignees:e.min+" / "+e.max,externalAssignees:e.external+" / "+e.max,assignees:b.getRoundedToTwoDecimalsOrZero(e.min-e.external)+" / "+e.max,isExternalAssignees:e.external>0}},et=m(n.Box)((function(){return{width:"60px",height:"23px"}})),tt=m(n.Text)((function(e){var t=e.isOverValued,n=e.theme;return{color:t?n.colors.error[3]:void 0,font:"normal normal 600 12px/17px Open Sans",letterSpacing:0,lineHeight:"12px"}})),nt=function(e){var t,r,a=e.value,o=e.isPercentage,i=e.isShowAssignationStats,l=void 0!==i&&i,s=f.useTheme(),c=n.useSwitch(!1),d=c.active,u=c.on,p=c.off,m=0;o&&"undefined"!==typeof(null===a||void 0===a?void 0:a.rate)?(m=a.rate,t=Math.ceil(a.rate)+" %","undefined"!==typeof a.external&&l&&(r=$e({isPercentage:!0,rate:m,external:a.external,min:a.min}))):o||"undefined"===typeof(null===a||void 0===a?void 0:a.min)||"undefined"===typeof(null===a||void 0===a?void 0:a.max)||(m=100*a.min/a.max,t=b.getRoundedToOneDecimalOrZero(a.min)+" / "+b.getRoundedToOneDecimalOrZero(a.max),"undefined"!==typeof a.external&&l&&(r=$e({isPercentage:!1,external:a.external,min:a.min,max:a.max})));var g=function(e){return e>100||0===e?s.colors.error[0]:100===e?s.colors.success[0]:s.colors.alert[0]};return _.createElement(he,{isOpened:d,onClose:p,assigneesStats:"undefined"!==typeof r?{totalAssignees:r.totalAssignees,externalAssignees:r.externalAssignees,assignees:r.assignees}:void 0},_.createElement(et,{alignItems:"center",bg:g(m),display:"flex",justifyContent:"center",position:"relative"},"undefined"!==typeof r&&_.createElement(_e,{isShowIcon:r.isExternalAssignees,onClick:u}),"undefined"!==typeof t&&_.createElement(tt,{theme:s,isOverValued:m>100,as:"span"},t)))},rt={root:"ProjectDetailsHeader-module_root__2koIi",content:"ProjectDetailsHeader-module_content__1KQRn",name:"ProjectDetailsHeader-module_name__w3l_P","name-overflow":"ProjectDetailsHeader-module_name-overflow__3FaNJ","customer-wrapper":"ProjectDetailsHeader-module_customer-wrapper__1e0aD",customer:"ProjectDetailsHeader-module_customer__2svcR",suitcase:"ProjectDetailsHeader-module_suitcase__lLqP6"};function at(){return(at=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}C(".ProjectDetailsHeader-module_root__2koIi {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  cursor: pointer; }\n\n.ProjectDetailsHeader-module_content__1KQRn {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  flex-grow: 1;\n  cursor: default; }\n\n.ProjectDetailsHeader-module_name__w3l_P {\n  color: #142C3B;\n  letter-spacing: 0;\n  margin-bottom: 3px;\n  font: normal normal bold 13px/18px Open Sans;\n  width: 240px;\n  display: flex; }\n  .ProjectDetailsHeader-module_name-overflow__3FaNJ {\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis; }\n\n.ProjectDetailsHeader-module_customer-wrapper__1e0aD {\n  display: flex;\n  align-items: center; }\n\n.ProjectDetailsHeader-module_customer__2svcR {\n  margin-left: 7px;\n  font: normal normal 600 12px/17px Open Sans;\n  letter-spacing: 0;\n  color: #88889A; }\n\n.ProjectDetailsHeader-module_suitcase__lLqP6 {\n  width: 10px;\n  height: 10px;\n  margin-bottom: 5px;\n  filter: opacity(0.5) drop-shadow(0 0 0 #a7a7bc); }\n");var ot=_.createElement("path",{d:"M.6 6.3a.6.6 0 00-.6.6v14a.6.6 0 00.6.6h22.8a.6.6 0 00.6-.6v-14a.6.6 0 00-.6-.6H.6zm2.79 12.55a.6.6 0 01-.6-.6V9.54a.6.6 0 01.6-.6H21a.2.2 0 01.2.2v9.11a.6.6 0 01-.6.6H3.39zM8.3 4.8a.2.2 0 00.2-.2V3.04c0-.14.19-.28.37-.28H15c.18 0 .37.14.37.28V4.6c0 .11.09.2.2.2h2.37a.2.2 0 00.2-.2V2.62A2.39 2.39 0 0015.53.5H8.32a2.39 2.39 0 00-2.6 2.12V4.6c0 .11.09.2.2.2H8.3z"}),it=function(e){var t=e.title,n=r(e,i);return _.createElement("svg",at({viewBox:"0 0 24 22",fill:"none"},n),t?_.createElement("title",null,t):null,ot)},lt=m(v.Link)({color:"#142C3B",textDecoration:"none",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}),st=m(n.Box)((function(){return{display:"flex",flexDirection:"column",justifyContent:"center",flexGrow:1,maxWidth:"230px",cursor:"default"}})),ct=m(n.Box)((function(e){var t=e.theme;return{color:t.colors.black[2],letterSpacing:0,marginBottom:"3px",fontSize:t.fontSizes.small,fontWeight:"bold",width:"240px",display:"flex"}})),dt=function(e){var t=e.className,r=e.name,a=e.customer,o=e.total,i=e.minAssignees,l=e.maxHeadCount,s=e.isCollapsed,c=e.isPercentage,d=e.handleHeaderClick,u=T(e,["className","name","customer","total","minAssignees","maxHeadCount","isCollapsed","isPercentage","handleHeaderClick"]),p=de(rt.root,t),m=f.useTheme(),g=ae().getLinkToProject;return _.createElement(se,P({},u,{isColoredBackground:!0,backgroundColor:m.colors.grey[2],contentClassName:p,total:o,minAssignees:i,maxHeadCount:l,isPercentage:c}),_.createElement(st,null,_.createElement(ct,{theme:m},g?_.createElement(lt,{to:g(e.id),target:"_blank"},r):_.createElement(n.Text,{ellipsis:!0},r)),_.createElement(n.Box,{display:"flex",alignItems:"center"},_.createElement(n.Icon,{size:10,mr:0,color:m.colors.grey[6],as:it}),_.createElement(n.Text,{fontSize:"small",color:m.colors.grey[6]},a))),_.createElement(n.Box,{onClick:d},_.createElement(We,{isCollapsed:s})))},ut={container:"ProjectDetailsNeed-module_container__u5gwd",name:"ProjectDetailsNeed-module_name__cK8Q-","name-overflow":"ProjectDetailsNeed-module_name-overflow__bBbE5",arrows:"ProjectDetailsNeed-module_arrows__yxuRh",arrowDown:"ProjectDetailsNeed-module_arrowDown__Ml85t",arrowUp:"ProjectDetailsNeed-module_arrowUp__1cCEl",arrow:"ProjectDetailsNeed-module_arrow__1J73Y"};C(".ProjectDetailsNeed-module_container__u5gwd {\n  color: #142C3B;\n  letter-spacing: 0;\n  margin-bottom: 3px;\n  font: normal normal 600 14px/19px Open Sans;\n  cursor: pointer;\n  display: flex;\n  flex-direction: row;\n  align-items: center; }\n\n.ProjectDetailsNeed-module_name__cK8Q- {\n  max-width: 260px;\n  display: flex; }\n  .ProjectDetailsNeed-module_name-overflow__bBbE5 {\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis; }\n\n.ProjectDetailsNeed-module_name__cK8Q-:hover {\n  max-width: 220px;\n  border-bottom: 1px solid black; }\n\n.ProjectDetailsNeed-module_arrows__yxuRh {\n  display: flex;\n  flex-direction: row;\n  position: relative;\n  width: 40px;\n  align-items: center;\n  justify-content: center;\n  top: 3px; }\n\n.ProjectDetailsNeed-module_arrowDown__Ml85t {\n  display: flex;\n  width: 15px;\n  height: 15px;\n  transform: rotate(90deg);\n  margin-right: 3px; }\n\n.ProjectDetailsNeed-module_arrowUp__1cCEl {\n  display: flex;\n  width: 15px;\n  height: 15px;\n  transform: rotate(-90deg);\n  margin-right: 3px; }\n\n.ProjectDetailsNeed-module_arrow__1J73Y {\n  cursor: pointer;\n  transition: 0.4s;\n  padding: 2px; }\n\n.ProjectDetailsNeed-module_arrow__1J73Y:hover {\n  background-color: #e6e6f5; }\n");var pt=function(){var e=E(t.useState(!1),2),n=e[0],r=e[1];return{onMouseEnter:function(){return r(!0)},onMouseLeave:function(){return r(!1)},isHovered:n}},ft=m(n.Box)((function(e){var t=e.theme;return{color:t.colors.black[2],letterSpacing:0,marginBottom:"3px",fontSize:t.fontSizes.small,fontWeight:"bold",width:"240px",display:"flex"}})),mt=m(n.Box)((function(e){return{display:"flex",flexDirection:"row",position:"relative",width:e.isFirstOrLastNeed?"15px":"30px",alignItems:"center",justifyContent:"center",top:"1px"}})),gt=m(n.Box)((function(){return{cursor:"pointer",transition:"0.4s",padding:"2px"}})),ht=m(Ve)((function(e){return{display:"flex",width:"15px",height:"15px",transform:e.isArrowUp?"rotate(-90deg)":"rotate(90deg)",":hover":{background:e.theme.colors.grey[2]}}})),bt=m(n.Text)((function(){return{cursor:"pointer",transition:"0.5s",paddingLeft:"0px",":hover":{background:"none",textDecoration:"underline"}}})),vt=function(e){var t=e.id,r=e.isFirstNeed,a=e.isLastNeed,o=e.className,i=e.isPercentage,l=e.name,s=e.total,c=e.minAssignees,d=e.maxHeadCount,u=e.onClick,p=void 0===u?function(){}:u,m=T(e,["id","isFirstNeed","isLastNeed","className","isPercentage","name","total","minAssignees","maxHeadCount","onClick"]),g=f.useTheme(),h=de(ut.root,o),b=pt(),v=b.onMouseEnter,x=b.onMouseLeave,y=b.isHovered,j=G().onReOrderNeed,O=void 0===j?function(){}:j;return _.createElement(se,P({},m,{isColoredBackground:!0,backgroundColor:g.colors.grey[1],isFirstNeed:r,isPercentage:i,className:h,total:s,minAssignees:c,maxHeadCount:d}),_.createElement(ft,{theme:g,onMouseEnter:v,onMouseLeave:x},y&&_.createElement(mt,{isFirstOrLastNeed:r||a,mr:1},!r&&_.createElement(gt,{onClick:function(){O(t,"top")},theme:g},_.createElement(ht,{theme:g,isArrowUp:!0})),!a&&_.createElement(gt,{onClick:function(){O(t,"bottom")},theme:g},_.createElement(ht,{theme:g}))),_.createElement(n.Box,{maxWidth:"200px",display:"flex",onClick:p},_.createElement(bt,{fontSize:"small",fontWeight:"semiBold",ellipsis:!0},l))))},xt=function(){return t.createContext({metadataMap:{}})},yt={isCollapsed:!0},jt=function(e){var t,n=e.result,r=e.obj,a=e.existingMetadataMap,o=e.fieldKey,i="string"===typeof o?x.get(r,o):"function"===typeof o?o(r):void 0;return P(P({},n),((t={})[i]=P({},a[i]?a[i]:yt),t))},Ot=function(e){var n=e.data,r=e.fieldKey,a=e.children,o=e.context,i=E(t.useState({}),2),l=i[0],s=i[1],c=t.useRef(null),d=E(t.useState(c),2),u=d[0],p=d[1],f=E(t.useState(614),2),m=f[0],g=f[1];t.useEffect((function(){s(n.reduce((function(e,t){return jt({result:e,obj:t,existingMetadataMap:l,fieldKey:r})}),{}))}),[n,r]);var h=function(e){g(e)},b=function(e){p(e)},v=t.useCallback((function(e){var t,n=e.metadata,r=e.key,a=P(P({},l),((t={})[r]=P(P({},l[r]),n),t));return s(a),a}),[l,s]),x=t.useMemo((function(){return{metadataMap:l,metadataMapAsArray:function(){return Object.values(l)},setIsCollapsed:function(e){var t=e.value,n=e.key;return v({metadata:{isCollapsed:t},key:n})},get:function(e){return l[e]||yt},ref:u,setRefFn:b,sidebarRightLimit:m,setSidebarRightLimitFn:h}}),[l,yt]);return _.createElement(o.Provider,{value:x},a)};function _t(){return t.createContext({data:{},sortKeys:{},onSort:function(e){}})}function Ct(e){var n=e.onSort,r=e.data,a=e.children,o=e.context,i=E(t.useState(P({},r)),2),l=i[0],s=i[1],c=E(t.useState({}),2),d=c[0],u=c[1];t.useEffect((function(){s(P({},r))}),[r]);var p=t.useCallback((function(e){var t,a=e.sortKey,o=e.sortValue,i=((t={})[a]=o,t);u(i);var l=n({sortKeys:i,data:x.cloneDeep(r)});return s(l),l}),[r,d]),f=t.useMemo((function(){return{data:l,sortKeys:d,onSort:p}}),[l,d]);return _.createElement(o.Provider,{value:f},a)}var wt=xt(),Dt=_t(),St=function(e){var t=e.sortKeys,n=e.data;return t["projects-and-needs"]&&(n.projectAllocations=x.orderBy(n.projectAllocations,(function(e){return e.project.name}),t["projects-and-needs"])),t["allocation-rate"]&&(n.projectAllocations=x.orderBy(n.projectAllocations,(function(e){return e.total}),t["allocation-rate"])),n},Pt=function(e){var t=e.children,n=e.callbacks,r=e.data;return _.createElement(Ct,{onSort:St,context:Dt,data:r},_.createElement(Dt.Consumer,null,(function(e){var r=e.data;return _.createElement(Q,{callbacks:n},_.createElement(Ot,{context:wt,data:null===r||void 0===r?void 0:r.projectAllocations,fieldKey:"project.id"},t))})))};function Tt(){return t.useContext(wt)}function Et(){return t.useContext(Dt)}var kt=function(e){var r=e.totals,a=e.allocations,o=e.isPercentage,i=n.useTranslate(),l=Tt(),s=G().onEditNeed;return t.useMemo((function(){return k([{component:pe,props:{text:i("num_staffing_project",r.nbProjects)+", "+i("staffing_project_need_num",r.nbNeeds),total:r.allocationRate,minAssignees:r.minAssignees,maxHeadCount:r.maxHeadCount,isPercentage:o}}],E(a.reduce((function(e,t){var n=function(e){s&&s(e)},r=function(){l.setIsCollapsed({value:!a,key:t.project.id})},a=l.get(t.project.id).isCollapsed;return k(k(k([],E(e)),[{component:dt,props:P(P({total:t.total,minAssignees:t.minAssignees,maxHeadCount:t.maxHeadCount},t.project),{isCollapsed:a,handleHeaderClick:r,isPercentage:o})}]),E(a?[]:t.needs.map((function(e,r){var a=e.need,i=e.total,l=e.minAssignees,s=e.maxHeadCount;return{component:vt,props:{onClick:function(){return n(a.id)},isPercentage:o,name:a.name,total:i,minAssignees:l,maxHeadCount:s,isFirstNeed:0===r,isLastNeed:r+1===t.needs.length,id:a.id}}}))))}),[])))}),[a,l,s,r])},At={row:"index-module_row__6a5hf"};C(".index-module_row__6a5hf {\n  min-height: 51px;\n  height: 51px; }\n");var Nt=function(e){var n=e.totals,r=e.allocations,a=e.isPercentage,o=Tt();return t.useMemo((function(){return k([{component:Fe,props:{values:n.byPeriod,className:At.row,isSelectable:!1,isPercentage:a}}],E(r.reduce((function(e,t){var n=o.get(t.project.id).isCollapsed;return k(k(k([],E(e)),[{component:Fe,props:{values:t.byPeriod,className:At.row,isSelectable:!1,isPercentage:a,isProjectLine:!0}}]),E(n?[]:t.needs.map((function(e,t){var n=0===t;return{component:Fe,props:{values:e.byPeriod,className:At.row,isSelectable:!1,isPercentage:a,isFirstChild:n}}}))))}),[])))}),[r,o])},It=function(e){var t=e.isPercentage,r=n.useTranslate(),a=Et().data,o=kt({totals:a.totals,allocations:a.projectAllocations,isPercentage:t}),i=Nt({totals:a.totals,allocations:a.projectAllocations,isPercentage:t}),l=_.createElement(Ye,{columns:[_.createElement(Ze,{useSort:Et,sortKey:"projects-and-needs"},r("staffing_project",10)),_.createElement(Ze,{useSort:Et,sortKey:"allocation-rate"},r("allocationRatesView",10))]});return _.createElement(oe,{periodType:a.periodType,startDate:a.startDate,endDate:a.endDate,getLinkToProject:a.getLinkToProject,fixedHeaderChildren:l,sideBarChildren:o,contentChildren:i,isPercentage:t,type:"allocations"})},Mt=function(e){var t=e.data,n=e.isPercentage,r=e.callbacks;return _.createElement(Pt,{callbacks:r,data:t},_.createElement(It,{isPercentage:n}))},Ft={name:"index-module_name__12mWA","customer-wrapper":"index-module_customer-wrapper__3q8jq",customer:"index-module_customer__27ooe"};C(".index-module_name__12mWA {\n  color: #142C3B;\n  letter-spacing: 0;\n  margin-bottom: 3px;\n  font: normal normal bold 13px/18px Open Sans; }\n\n.index-module_customer-wrapper__3q8jq {\n  display: flex;\n  align-content: center; }\n\n.index-module_customer__27ooe {\n  margin-left: 7px;\n  font: normal normal 600 12px/17px Open Sans;\n  letter-spacing: 0;\n  color: #88889A; }\n");var Rt=function(e){var t=e.className,n=e.person,r=e.total,a=e.isFirstChild,o=(e.isLastChild,T(e,["className","person","total","isFirstChild","isLastChild"])),i=de(Ft.root,t);return _.createElement(se,P({},o,{isFirstNeed:a,className:i,total:r}),_.createElement(Ke,{user:n}))},Lt=function(e){var r=e.totals,a=e.allocations,o=e.isPercentage,i=n.useTranslate({capitalize:!0});return t.useMemo((function(){return k([{component:pe,props:{text:i("num_resources",r.nbPersons),total:r.allocationRate,isPercentage:o}}],E(a.reduce((function(e,t,n){return k(k([],E(e)),[{component:Rt,props:{person:t.person,total:t.total,isPercentage:o,isFirstChild:0===n,isLastChild:n===a.length-1}}])}),[])))}),[a,r.nbPersons,r.allocationRate])},Bt={row:"index-module_row__1Tte2"};C(".index-module_row__1Tte2 {\n  min-height: 51px;\n  height: 51px; }\n");var zt=function(e){var n=e.totals,r=e.allocations;return t.useMemo((function(){return k([{component:Fe,props:{className:Bt.row,values:n.byPeriod,byPeriod:n.byPeriod,isSelectable:!1,isPercentage:!0}}],E(r.reduce((function(e,t,n){var r;return k(k([],E(e)),[{component:Fe,props:{key:null===(r=t.person)||void 0===r?void 0:r.id,className:Bt.row,values:t.byPeriod,byPeriod:t.byPeriod,isSelectable:!1,isPercentage:!0,isFirstChild:0===n}}])}),[])))}),[r])},Wt=_t(),Ht=function(e){var t=e.children,n=e.data,r=function(e){var t=e.sortKeys,n=e.data;return t["allocation-rate"]&&(n.allocations=x.orderBy(n.allocations,(function(e){return e.total}),t["allocation-rate"])),t.resources&&(n.allocations=x.orderBy(n.allocations,(function(e){return e.person.familyName+" "+e.person.givenName}),t.resources)),n};return _.createElement(Ct,{onSort:r,context:Wt,data:n},t)};function Ut(){return t.useContext(Wt)}var Kt=function(e){var t=e.isPercentage,r=e.totalCount,a=e.loadMoreRows,o=e.onRessourcePlanningSort,i=e.familyNameSortDirection,l=e.allocationRatesTotalSortDirection,s=n.useTranslate(),c=Ut().data,d=Lt({totals:c.totals,allocations:c.allocations,isPercentage:t}),u=zt({totals:c.totals,allocations:c.allocations}),p=_.createElement(Ye,{columns:[_.createElement(Ze,{useSort:Ut,initialSortValue:i,onRessourcePlanningSort:o,sortKey:"familyName"},_.createElement(n.Text,{fontWeight:"bold",fontSize:11},s("resources"))),_.createElement(Ze,{useSort:Ut,isSortDisabled:!0,initialSortValue:l,onRessourcePlanningSort:o,sortKey:"allocationRates.total"},_.createElement(n.Text,{fontWeight:"bold",fontSize:11},s("allocation_rate")))]});return _.createElement(oe,{startDate:c.startDate,endDate:c.endDate,periodType:c.periodType,fixedHeaderChildren:p,getLinkToUserProfile:c.getLinkToUserProfile,sideBarChildren:d,contentChildren:u,totalCount:r,loadMoreRows:a,type:"allocations"})},qt=function(e){var t=e.data,n=e.isPercentage,r=e.totalCount,a=e.loadMoreRows,o=e.onRessourcePlanningSort,i=e.familyNameSortDirection,l=e.allocationRatesTotalSortDirection;return _.createElement(Ht,{data:t},_.createElement(Kt,{isPercentage:n,totalCount:r,loadMoreRows:a,onRessourcePlanningSort:o,familyNameSortDirection:i,allocationRatesTotalSortDirection:l}))},Yt=xt(),Vt=xt(),Gt=_t(),Qt=function(e,t,n){return void 0===n&&(n=function(e){return e.name}),n(t).toLowerCase().localeCompare(n(e).toLowerCase())},Jt=function(e){return e?e.reduce((function(e,t){return k(k([],E(e)),E(t.needs||[]))}),[]).map((function(e){var t=e.allocations;if(t.length>0){var n=[],r=[];return t.forEach((function(e){"externalResource"!==e.person.displayName?n.push(e):r.push(e)})),n.sort((function(e,t){return y.sortByName(e,t,(function(e){return e.person.familyName||"zzzzzzzzzzzzzzzzzzzzzzzzzz"}))})),e.allocations=k(k([],E(n)),E(r)),e}return e})):[]},Xt=function(e){var t=e.sortKeys,n=e.data;return t.projects&&"desc"===t.projects&&(n.projects=n.projects.sort((function(e,t){return Qt(e,t,(function(e){return e.project.name}))}))),t["projects-allocation-rate"]&&(n.projects=x.orderBy(n.projects,(function(e){return e.total}),t["projects-allocation-rate"])),n},Zt=function(e){var t=e.children,n=e.data,r=e.callbacks;return _.createElement(Q,{callbacks:r},_.createElement(Ct,{onSort:Xt,context:Gt,data:n},_.createElement(Gt.Consumer,null,(function(e){var n=e.data;return _.createElement(Ot,{context:Yt,data:(null===n||void 0===n?void 0:n.projects)?n.projects:[],fieldKey:"project.id"},_.createElement(Ot,{context:Vt,data:Jt(n.projects),fieldKey:"projectNeed.id"},t))}))))};function $t(){return t.useContext(Yt)}function en(){return t.useContext(Vt)}function tn(){return t.useContext(Gt)}var nn={noborder:"index-module_noborder__3H4fn"};C(".index-module_noborder__3H4fn {\n  border-bottom: 0px solid transparent; }\n");var rn=m(n.Box)((function(e){var t=e.theme,n=e.contentSquares,r=e.style,a=e.isLocked;return P({width:51*n.length,display:"flex",flexDirection:"row",position:"relative",borderTop:"2px solid black",borderBottom:"1.5px solid black",borderRight:"0.5px solid "+t.colors.grey[0],opacity:a?"0.75":"none",background:a?t.colors.grey[2]:"none"},r)})),an=function(e){var t=e.className,n=e.assignType,r=e.id,a=e.style,o=e.isPercentage,i=e.isLocked,l=ae().contentSquares,s=f.useTheme();return _.createElement(rn,{style:a,contentSquares:l,theme:s,isLocked:i},_.createElement(Fe,{isSelectable:!i,isLocked:i,isPercentage:o,id:r,assignType:n,values:l,byPeriod:[],squareClassName:nn.noborder,className:t}))};function on(){return(on=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ln=function(e){var t=e.title,n=r(e,l);return _.createElement("svg",on({viewBox:"0 0 1000 1000"},n),t?_.createElement("title",null,t):null,"&gt;",_.createElement("path",{d:"M555.856 230.551a40.004 40.004 0 00-27.866 68.688l160.612 160.613H215.256a40.148 40.148 0 100 80.289h473.346L527.99 700.754a40.004 40.004 0 1056.569 56.569l226.525-226.528a40.004 40.004 0 0011.43-15.74 40.148 40.148 0 000-.002 40.004 40.004 0 001.156-3.32 40.148 40.148 0 00.184-.559 40.004 40.004 0 00.691-2.898 40.148 40.148 0 00.023-.098 40.004 40.004 0 00.112-.469 40.148 40.148 0 00.105-.51 40.004 40.004 0 00.283-2.064 40.004 40.004 0 00.211-1.576 40.148 40.148 0 00.034-.469 40.004 40.004 0 00.043-1.074 40.004 40.004 0 00.085-2.623 40.148 40.148 0 00-.006-.12 40.004 40.004 0 00-.02-.378 40.004 40.004 0 000-.012 40.004 40.004 0 00-.001-.031 40.004 40.004 0 00-14.436-29.762l-226.42-226.42a40.004 40.004 0 00-28.702-12.119z",style:{lineHeight:"normal",textIndent:0,textAlign:"start",textDecorationLine:"none",textDecorationStyle:"solid",textDecorationColor:"#000",textTransform:"none",blockProgression:"tb",whiteSpace:"normal",isolation:"auto",mixBlendMode:"normal",solidColor:"#000",solidOpacity:1},color:"#000",fontWeight:400,fontFamily:"sans-serif",overflow:"visible",fillRule:"evenodd"}))},sn={info:"index-module_info__3wWPt",name:"index-module_name__2KNbj",status:"index-module_status__K0PQ_",confirmed:"index-module_confirmed__3Cqup",lead:"index-module_lead__2q32x",relative:"index-module_relative__2-2ae",project:"index-module_project__14CHr"};C(".index-module_info__3wWPt {\n  display: flex;\n  flex-direction: row;\n  position: absolute;\n  align-items: center;\n  left: 20px;\n  height: 50px; }\n\n.index-module_name__2KNbj {\n  font-size: 12px;\n  font-weight: bold; }\n\n.index-module_status__K0PQ_ {\n  margin-left: 40px;\n  width: 120px;\n  height: 28px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #ccfae3;\n  font-size: 12px;\n  font-weight: bold;\n  border-radius: 3px; }\n\n.index-module_confirmed__3Cqup {\n  background-color: #ccfae3; }\n\n.index-module_lead__2q32x {\n  background-color: #f2f2ff; }\n\n.index-module_relative__2-2ae {\n  position: relative;\n  border-top: 0.5px solid black;\n  border-bottom: 0.5px solid black;\n  border-right: 0.5px solid #e6e6f5; }\n\n.index-module_project__14CHr {\n  background-color: #DDDFF2;\n  border-right: 0.5px solid #DDDFF2; }\n");var cn=m(n.Box)((function(e){var t=e.theme,n=e.contentSquares,r=e.style;return P({width:51*n.length,display:"flex",flexDirection:"row",position:"relative",borderTop:"2px solid black",borderRight:"0.5px solid "+t.colors.grey[0]},r)})),dn=m(n.Box)((function(){return{display:"flex",flexDirection:"row",position:"absolute",alignItems:"center",left:"20px",height:"50px"}})),un=function(e){var t=e.project,r=e.style,a=ae().contentSquares,o=f.useTheme();return _.createElement(cn,{style:r,contentSquares:a,theme:o},_.createElement(dn,null,_.createElement(h.ProjectStatus,{status:t.status,ml:1}),_.createElement(n.Text,{fontSize:"small",fontWeight:"bold",color:"grey.6",ml:2},p.localeMoment(t.startDate).format("DD/MM/YYYY")),_.createElement(n.Icon,{color:"grey.6",as:ln,size:16,ml:1}),_.createElement(n.Text,{fontSize:"small",fontWeight:"bold",color:"grey.6",ml:1},p.localeMoment(t.endDate).format("DD/MM/YYYY"))),a.map((function(e,t){return _.createElement(De,{className:sn.project,date:e,key:t})})))},pn=function(){var e=f.useTheme();return{squareStyle:_.useCallback((function(t){var n,r;return"number"!==typeof t?n=e.colors.grey[1]:t>100?(n=e.colors.error[0],r=e.colors.primary[3]):100===t?(n=e.colors.success[0],r=e.colors.black[3]):t<100&&t>0?(n=e.colors.alert[0],r=e.colors.black[3]):(n=e.colors.error[0],r=e.colors.black[3]),{backgroundColor:n,alingItems:"center",justifyContent:"center",fontWeight:"bold",color:r}}),[e])}},fn=m(n.Box)((function(e){var t=e.isFirstNeed,n=e.contentSquares,r=e.style;return P({display:"flex",flexDirection:"row",width:51*n.length,borderTop:t?"2px solid black":"0.5px solid black"},r)})),mn=function(e){var t=e.isAllocationLoading,n=e.isFirstNeed,r=e.need,a=e.style,o=e.isPercentage,i=ae().contentSquares,l=pn().squareStyle;return _.createElement(fn,{style:a,contentSquares:i,isFirstNeed:n},i.map((function(e,n){var a,i,s=r.byPeriod[n]||void 0,c=null;return"undefined"!==typeof s&&(o?(a=(c=s.rate||0)+"%",i=$e({isPercentage:!0,external:s.external,min:s.min,rate:c})):(c=s.min/s.max*100,a=s.min+" / "+s.max,i=$e({isPercentage:!1,external:s.external,min:s.min,max:s.max}))),_.createElement(De,{style:l(c),content:a||"",isAllocationLoading:t,key:n,date:e,assigneesStats:"undefined"!==typeof i?{assignees:i.assignees,externalAssignees:i.externalAssignees,totalAssignees:i.totalAssignees}:void 0,isExternalAssignees:null===i||void 0===i?void 0:i.isExternalAssignees})})))},gn={edges:{left:!0,right:!0,bottom:!1,top:!1}},hn={edges:{left:!1,right:!1,bottom:!1,top:!1}},bn=864e5,vn=36e5,xn=50,yn=30,jn=7,On=e.AllocationType.WORK,_n=e.AllocationStatus.PROVISION,Cn=e.AllocationStatus.SIMULATION,wn=function(e,t,r,a,o){var i=n.useTranslate({capitalize:!0}),l=E(_.useState(!1),2),s=l[0],c=l[1],d=E(_.useState(!1),2),u=d[0],p=d[1],f=z().dateRangeOverlaps,m=G(),g=m.onEditAssignment,h=m.onEditScheduledPeriod,b=ae().setSelectedAssignment,v=function(){return p(!0)},x=function(){return p(!1)},j=function(t){p(!0),b(e),c(!0),t.stopPropagation()},O=function(e){b(null),p(!1),c(!1),e.stopPropagation()},C=_.useMemo((function(){for(var t=-1,n=0;n<a.length;n++)if(-1!==a[n].findIndex((function(t){return t.id===e.id}))){t=n;break}return 32*t+10}),[t,f,r]),w=_.useMemo((function(){var t,n;return{display:s?"none":"flex",top:C,backgroundColor:e.type===On?null===(t=e.project)||void 0===t?void 0:t.colorHex:"#C1C1D8",opacity:e.type===On&&o?(null===(n=e.project)||void 0===n?void 0:n.name)===o||u?1:.5:1}}),[e,s,C,u,o]),D=_.useCallback((function(e,t){var n,r;if(e.type===On){var a="";return e.status===_n?a="["+i("provisional")+"]":e.status===Cn&&(a="["+i("simulation")+"]"),e.isExternalAssignment?a+" "+(null===(n=e.project)||void 0===n?void 0:n.name)+" - "+(t?t+" -":"")+" "+e.rate+"%":a+" "+(null===(r=e.projectAndNeedName)||void 0===r?void 0:r.replace("@"," - "))+" - "+e.rate+"%"}return y.maj(e.type)}),[]);return{indexPosition:C,dragStart:j,styles:w,dragEnd:O,onMouseLeave:x,onMouseOver:v,isHovered:u,onClickAssignment:function(e){if(g&&"function"===typeof g)return g(e)},onClickScheduledPeriod:function(e){if(h&&"function"===typeof h)return h(e)},assignmentName:D}},Dn=function(n,r,a,o){var i=E(_.useState(!1),2),l=i[0],s=i[1],c=G().onChangeAssignmentDates,d=(ae().calendarStructure,_.useCallback((function(e){return p.localeMoment(e).startOf("isoWeek").hour(12).toDate()}),[])),u=_.useCallback((function(e){return p.localeMoment(e).startOf("month").hour(12).toDate()}),[]),f=_.useCallback((function(t){var n=t.dateA,r=t.dateB,a=t.selectedPeriodStartDate,o=t.selectedPeriodEndDate,i=t.assignmentStartDate,l=t.assignmentEndDate,s=t.periodType,c=t.data;if(n===r)return{value:0,isInRange:!0};if(p.localeMoment(i).isAfter(p.localeMoment(o))||p.localeMoment(l).isBefore(p.localeMoment(a)))return{value:0,isInRange:!1};n.setHours(12,0,0,0),r.setHours(12,0,0,0);var f=p.localeMoment(i).isBefore(p.localeMoment(a)),m=function(){if("left"===c){if(s===e.PeriodType.WEEK)return d(n);if(s===e.PeriodType.MONTH)return u(n)}return"width"===c&&f?new Date(d(a).getTime()):new Date(n.getTime())}().getTime()-r.getTime();return{value:function(){var t=Math.abs(Math.round(m/bn)),n=s===e.PeriodType.WEEK?7:1;return"left"===c?f?0-n:t:f?t+n+(s===e.PeriodType.DAY?1:0):t+(s===e.PeriodType.DAY||s===e.PeriodType.MONTH||s===e.PeriodType.WEEK?1:0)}(),isInRange:!0}}),[u,d]),m=_.useCallback((function(){var t=a===e.PeriodType.WEEK?d(n):n,i=f({selectedPeriodStartDate:t,selectedPeriodEndDate:o,dateA:t,dateB:r.startDate,assignmentStartDate:r.startDate,assignmentEndDate:r.endDate,periodType:a,data:"left"}).value;return a===e.PeriodType.WEEK?i/jn:a===e.PeriodType.MONTH?i/yn:a===e.PeriodType.DAY?i:0}),[f,r,n,a]),g=_.useCallback((function(){var t=f({selectedPeriodStartDate:n,selectedPeriodEndDate:o,dateA:r.startDate,dateB:r.endDate,assignmentStartDate:r.startDate,assignmentEndDate:r.endDate,periodType:a,data:"width"}).value;return a===e.PeriodType.WEEK?t/jn:a===e.PeriodType.MONTH?t/yn:a===e.PeriodType.DAY?t:0}),[f,r,a]),h=E(_.useState({x:0,lastX:0,width:0,lastWidth:0,sd:p.localeMoment(p.getDateDay(new Date(r.startDate))),ed:p.localeMoment(p.getDateDay(new Date(r.endDate))),isInRange:!0}),2),b=h[0],v=h[1];return t.useEffect((function(){v({x:m()*xn,lastX:m()*xn,width:g()*xn,lastWidth:g()*xn,sd:p.localeMoment(new Date(r.startDate)),ed:p.localeMoment(new Date(r.endDate)),isInRange:f({selectedPeriodStartDate:n,selectedPeriodEndDate:o,dateA:n,dateB:r.startDate,assignmentStartDate:r.startDate,assignmentEndDate:r.endDate,periodType:a,data:"left"}).isInRange})}),[r,m,g]),{onResizeEnd:function(){v((function(e){var t=e.width,n=e.lastWidth,a=e.lastX,o=e.x,i=e.ed,l=e.sd,s=e.isInRange,d=Math.ceil(a/xn)*xn-a,u=n-d-Math.floor((n-d)/xn)*xn,f=n,m=a,g=function(){var e=t-n;return d>0&&o!==a||u>0&&o===a?e-(xn-d):e}(),h=Math.ceil(g/xn)*xn;return o!==a?(f+=h,m-=h,d&&(f+=xn-d,m-=xn-d),c&&"function"===typeof c&&c(r.id,p.getDateDay(l).toDate(),p.getDateDay(i).toDate())):(f+=h,u>0&&(f+=xn-u),c&&"function"===typeof c&&c(r.id,p.getDateDay(l).toDate(),p.getDateDay(i).toDate())),{width:f,x:m,lastWidth:f,lastX:m,ed:p.getDateDay(i),sd:p.getDateDay(l),isInRange:s}})),s(!1)},onResizeMove:function(t){s(!0);var r=t.rect.width,o=t.deltaRect.left;v((function(t){var i=t.sd,l=t.ed,s=t.x+o,c=new Date(p.getDateDay(i).toDate()),u=new Date(p.getDateDay(l).toDate()),f=t.x===t.lastX&&0===o,m=Math.floor(s/xn),g=Math.floor((s+r)/xn);if(a===e.PeriodType.DAY&&(f?u.setTime(n.getTime()+g*bn-vn):c.setTime(n.getTime()+m*bn)),a===e.PeriodType.WEEK){var h=d(n);if(m*=jn,g*=jn,f){var b=new Date(h);p.localeMoment(new Date(b)).add(g,"days").toDate(),u.setTime(h.getTime()+g*bn-bn)}else c.setTime(h.getTime()+m*bn)}return a===e.PeriodType.MONTH&&(g*=yn,m*=yn,f?(u.setTime(n.getTime()+g*bn),u.setDate(1),u.setTime(u.getTime()-bn)):(c.setTime(n.getTime()+m*bn),c.setDate(1))),P(P({},t),{x:s,width:r,ed:p.localeMoment(u),sd:p.localeMoment(c)})}))},coordinate:b,calculateWidth:g,calculateLeft:m,isResizing:l}},Sn=27,Pn=60,Tn=m(n.Box)((function(e){return{position:"sticky",left:e.leftPosition}})),En=m(n.Box)((function(){return{position:"absolute",borderRadius:"2px",overflow:"hidden",whiteSpace:"nowrap",height:"24px",alignItems:"center",boxShadow:"0px 1.5px 3px #636363",justifyContent:"space-between",cursor:"pointer"}}),(function(t){var n=t.status;return n===e.AllocationStatus.SIMULATION?{backgroundImage:"repeating-linear-gradient(-45deg, transparent, transparent 2px, transparent 2px, rgba(0, 0, 0, 0.132) 4px)"}:n===e.AllocationStatus.PROVISION?{backgroundImage:"radial-gradient(circle, rgba(0, 0, 0, 0.132) 1px, transparent 1px), radial-gradient(circle, rgba(0, 0, 0, 0.132) 1px, transparent 1px)",backgroundSize:"5px 5px"}:{}})),kn=function(r){var a=r.assignment,o=r.assignments,i=r.index,l=r.getRef,s=r.sidebarRightLimit,c=r.width,d=r.x,u=r.need,f=r.isResizing,m=r.isInRange,g=r.currentProjectName,h=r.sd,b=r.ed,v=r.contentLines,x=(r.periodType,wn(a,o,i,v,g)),j=x.styles,O=x.dragStart,C=x.dragEnd,w=x.onMouseLeave,D=x.onMouseOver,S=x.isHovered,P=x.indexPosition,T=x.onClickAssignment,E=x.onClickScheduledPeriod,k=x.assignmentName,A=G().onDeleteAssignment,N=t.useRef(null),I=n.useTranslate(),M=n.useSwitch(!1),F=M.active,R=M.on,L=M.off,B=n.useSwitch(!1),z=function(e){A&&(e.preventDefault(),R())},W=function(){var e;B.off(),A&&a.assignmentId&&A(a.assignmentId,null===(e=a.project)||void 0===e?void 0:e.id,a.userId)},H=_.useMemo((function(){return f||S}),[f,S]),U=t.useMemo((function(){if(null===N||void 0===N?void 0:N.current)return N.current.getBoundingClientRect().left}),[S,null===N||void 0===N?void 0:N.current]),K=t.useMemo((function(){return"undefined"!==typeof U?s>U?s-U+15+(d<0?Pn:Sn):d<0?Pn:Sn:Sn}),[U,s,d]),q=t.useMemo((function(){var e=S?30:10;return Math.max(Math.round(c)-e,0)+"px"}),[c,S]),Y=t.useMemo((function(){return 0===c?1.5:c}),[c]),V=t.useMemo((function(){return y.getContrastedTextColorFromBackgroundHexColor(j.backgroundColor)}),[j.backgroundColor]);return m?_.createElement("div",null,H&&_.createElement("div",{style:{left:d-75,top:P+3},className:"cc-scheduler-allocation-time"},p.localeMoment(h).format("DD/MM/YYYY")),_.createElement(En,{ref:l,status:a.status,left:d,width:Y,top:j.top,display:j.display?j.display:"flex",opacity:j.opacity,bg:j.backgroundColor,draggable:!0,onMouseOver:D,onMouseLeave:w,onDragStart:O,onDragEnd:C,onContextMenu:z},_.createElement("div",{className:H?"cc-scheduler-allocation-drag":""},H&&_.createElement("div",{className:"cc-scheduler-allocation-extend-left"})),_.createElement(n.MenuSelect.Target,{width:a.type===e.AllocationType.WORK?"inherit":"100%",m:"0px"},_.createElement(n.Box,{onClick:function(){a.type===e.AllocationType.WORK&&a.assignmentId?T(a.assignmentId):E(a.id)},display:"flex",justifyContent:"flex-start",width:a.type===e.AllocationType.WORK?"inherit":"100%",className:"cc-scheduler-allocation-text"},_.createElement(Tn,{leftPosition:K,ref:N,maxWidth:q},_.createElement(n.TextWithAutoTooltipOnEllipsis,{tooltipTitle:k(a,u),fontSize:"small",color:V,fontWeight:"semiBold"},k(a,u)))),_.createElement(n.MenuSelect,{onClose:L,isOpened:F},_.createElement(n.MenuOption,{onClick:function(){L(),B.on()}},I("delete")))),_.createElement("div",{className:H?"cc-scheduler-allocation-drag":""},H&&_.createElement("div",{className:"cc-scheduler-allocation-extend-right"}))),H&&_.createElement("div",{style:{left:d+c+15,top:P+3},className:"cc-scheduler-allocation-time"},p.localeMoment(b).format("DD/MM/YYYY")),_.createElement(n.ConfirmModal,{isOpened:B.active,onConfirm:W,onCancel:B.off},_.createElement(n.Box,{display:"flex",flexDirection:"column"},_.createElement(n.Text,{fontSize:"big",fontWeight:"bold"},I("confirm_delete_staffing_project_assignment"))))):null},An=_.memo(kn),Nn=j(An),In=function(e){var t=Dn(e.startDate,e.assignment,e.periodType,e.endDate),n=t.coordinate,r=t.onResizeMove,a=t.onResizeEnd,o=t.isResizing;return _.createElement(Nn,P({key:e.assignment.id+"_"+e.startDate+"_"+e.endDate,resizable:!0===e.isLocked?hn:gn,onResizeMove:r,onResizeEnd:a,isResizing:o},e,n))},Mn=_.memo(In),Fn={top:"index-module_top__34tKQ"};C(".index-module_top__34tKQ {\n  justify-content: flex-start; }\n");var Rn=function(e){var t=e.lines,n=e.endDate,r=e.allocation,a=e.startDate,o=e.periodType,i=e.need,l=e.byPeriod,s=e.projectName,c=e.style,d=e.height,u=e.isPercentage,p=e.isLocked,f=ae().contentSquares,m=$t().sidebarRightLimit;return _.createElement("div",{style:P({position:"relative",width:50.5*(f.length+1),display:"flex"},c)},r.assignments.map((function(e,l){return _.createElement(Mn,{isLocked:p,sidebarRightLimit:m,contentLines:t,startDate:a,endDate:n,periodType:o,index:l,key:l,assignment:e,assignments:r.assignments,need:i.name,currentProjectName:s})})),_.createElement("div",{className:"cc-scheduler-content-right-row"},_.createElement(Fe,{id:r.person.id,needId:i.id,isAssignmentSquare:!0,isPercentage:u,squareClassName:Fn.top,squareStyle:{height:d},assignType:"assignment",assignments:r.assignments,byPeriod:l,values:f,isLocked:p})))},Ln={project:"index-module_project__2KILy",bordersassign:"index-module_bordersassign__2CAZm"};C(".index-module_project__2KILy {\n  border-top: 0.5px solid black;\n  border-bottom: 0.5px solid black; }\n\n.index-module_bordersassign__2CAZm {\n  border-top: 0.5px solid black; }\n");var Bn=function(e,n){var r=e.projects,a=e.startDate,o=e.endDate,i=e.periodType,l=en(),s=$t(),c=z().multipleDateRangeOverlaps;return t.useMemo((function(){return k([],E(r.reduce((function(e,t){var r=t.needs,d=s.get(t.project.id).isCollapsed;return k(k(k(k([],E(e)),[{component:un,props:{project:t.project}}]),E(d?[]:r.reduce((function(e,r,s){var d=l.get(r.projectNeed.id).isCollapsed;return k(k(k(k([],E(e)),[{component:mn,props:{isAllocationLoading:!0===t.allocationRatesLoading,need:r,isPercentage:n,isFirstNeed:0===s}}]),E(d?[]:r.allocations.map((function(e){var l=c(e.assignments),s=l.height,d=l.lines;return{component:Rn,props:{lines:d,projectName:t.project.name,startDate:a,endDate:o,periodType:i,allocation:e,need:r.projectNeed,height:s,isPercentage:n,isLocked:!0===r.isLocked},height:s}})))),E(d?[]:[{component:an,props:{id:r.projectNeed.id,assignType:"resource",isPercentage:n,isLocked:!0===r.isLocked}}]))}),[]))),E(d?[]:[{component:an,props:{id:t.project.id,assignType:"need",className:Ln.bordersassign}}]))}),[])))}),[l,s,a,c,i,r])};function zn(){return(zn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Wn=_.createElement("path",{d:"M20.5 10H14V3.5c0-.3-.2-.5-.5-.5h-3c-.3 0-.5.2-.5.5V10H3.5c-.3 0-.5.2-.5.5v3c0 .3.2.5.5.5H10v6.5c0 .3.2.5.5.5h3c.3 0 .5-.2.5-.5V14h6.5c.3 0 .5-.2.5-.5v-3c0-.3-.2-.5-.5-.5z"}),Hn=function(e){var t=e.title,n=r(e,s);return _.createElement("svg",zn({viewBox:"0 0 24 24"},n),t?_.createElement("title",null,t):null,Wn)};function Un(){return(Un=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Kn=_.createElement("path",{d:"M10.997 8.6a4.56 4.56 0 001.707-4.92 4.641 4.641 0 00-1.56-2.601A4.625 4.625 0 008.311 0h-.539a4.636 4.636 0 00-2.88 1.071A4.652 4.652 0 003.312 3.71a4.518 4.518 0 001.637 4.85c-3.234.63-5.16 3.44-4.93 7.19V16h2.265v-.29a4.298 4.298 0 012.106-4.25 7.335 7.335 0 017.226 0 4.336 4.336 0 012.136 4.24v.29h2.235v-.25c.19-3.74-1.736-6.51-4.99-7.14zm-.799-2.24a2.347 2.347 0 01-2.195 1.1h-.19a2.362 2.362 0 01-2.146-1.15 3.005 3.005 0 010-3 2.257 2.257 0 011.996-1.06h.41a2.342 2.342 0 012.136 1.15 3.004 3.004 0 01.03 2.96h-.04z"}),qn=function(e){var t=e.title,n=r(e,c);return _.createElement("svg",Un({width:16,height:16,fill:"none"},n),t?_.createElement("title",null,t):null,Kn)},Yn=function(e){var t=e.isLocked,r=e.name,a=e.isProjectNeed,o=void 0!==a&&a,i=e.onClick,l=e.style,s=f.useTheme(),c=m(n.Button)((function(){return{borderTop:o?"2px solid black":"0.5px solid black",fontWeight:s.fontWeights.semiBold,fontSize:s.fontSizes.small,color:s.colors.black[2],justifyContent:"flex-start"}}));return _.createElement(c,{width:"100%",onClick:i,disabled:t,appearance:"clean",maxWidth:500,style:l,icon:o?Hn:qn},r)},Vn=m(n.Box)((function(e){var t=e.theme,n=e.styles;return P({height:50,width:"100%",borderBottom:"0.5px solid "+t.colors.grey[2],display:"flex",alignItems:"center",paddingLeft:20,flexDirection:"row",position:"relative",justifyContent:"space-between"},n)})),Gn=m(n.Box)((function(e){var t=e.isLocked,n=e.theme;return{display:"flex",position:"relative",alignItems:"center",flexDirection:"column",opacity:t?.75:1,backgroundColor:t?n.colors.grey[2]:void 0}})),Qn=function(e){var t=e.isLocked,r=e.allocation,a=e.style,o=e.height,i=f.useTheme(),l=G().onChangeExternalResourceName,s=O.getIsExternal(r.person),c=function(e){r.person.id===He&&r.assignments.length>0&&"undefined"!==typeof l&&l(r.assignments[0].id,e)};return _.createElement(Vn,{theme:i,height:o,styles:a},_.createElement(n.Box,{display:"flex",justifyContent:"flex-start",flexGrow:1},_.createElement(Ke,{onChangeExternalUserName:c,user:r.person})),_.createElement(Gn,{isLocked:t,theme:i,width:"fit-content",display:"flex",justifyContent:"flex-start"},!s&&_.createElement(h.NextAvailability,{textSize:"tiny",width:"170px",justifyContent:"flex-start",date:(null===r||void 0===r?void 0:r.assignmentEnd)?p.localeMoment(r.assignmentEnd).toISOString():p.localeMoment().subtract(1,"day").toISOString()})))},Jn=m(n.Box)((function(e){return{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingLeft:"20px",height:"51px",background:e.theme.colors.grey[2],borderTop:" 2px solid black"}})),Xn=m(n.Box)((function(){return{display:"flex",flexDirection:"column",width:"75%",marginRight:"5%"}})),Zn=m(n.Box)((function(e){return P({position:"relative",right:"5px",padding:"3px 6px",borderRadius:"20px",transition:"0.3s",cursor:"pointer"},e.style)})),$n=m(v.Link)((function(e){return{color:"#142C3B",textDecoration:"none",fontSize:e.theme.fontSizes.small,fontWeight:"bold",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}})),er=function(e){var r,a=e.project,o=e.isAllocationLoading,i=e.minAssignees,l=e.maxHeadCount,s=e.total,c=e.externalTotal,d=e.isPercentage,u=e.style,p=f.useTheme(),m=$t(),g=m.get(a.id).isCollapsed,h=t.useRef(null),b=ae().getLinkToProject,v=function(){m.setIsCollapsed({value:!g,key:a.id})};return t.useEffect((function(){(null===h||void 0===h?void 0:h.current)&&(m.setRefFn(h),m.setSidebarRightLimitFn(h.current.getBoundingClientRect().right))}),[null===(r=null===h||void 0===h?void 0:h.current)||void 0===r?void 0:r.getBoundingClientRect().right]),_.createElement(Jn,{ref:h,theme:p,style:u},_.createElement(n.Box,{display:"flex",width:"100%","flex-direction":"row",justifyContent:"space-between",alignItems:"center"},_.createElement(Xn,{maxWidth:"200px"},b?_.createElement($n,{to:b(a.id),target:"_blank",theme:p},a.name," ",a.place&&"("+a.place+")"):_.createElement(n.Text,{fontSize:"small",fontWeight:"bold",ellipsis:!0},a.name," ",a.place&&"("+a.place+")"),_.createElement(n.Box,{display:"flex",mt:0,alignItems:"center"},_.createElement(n.Icon,{size:10,mr:0,color:p.colors.grey[6],as:it}),_.createElement(n.Text,{fontSize:"small",color:p.colors.grey[6]},a.customer))),_.createElement(n.Box,{display:"flex",width:"60px","flex-direction":"row",alignItems:"center"},o?_.createElement(n.LoaderSkeleton.Point,null):_.createElement(nt,{isPercentage:d,value:{min:i,max:l,rate:s,external:c},isShowAssignationStats:!0}))),_.createElement(Zn,{onClick:v},_.createElement(We,{isCollapsed:g})))},tr=function(){var e=G(),t=e.onEditNeed,n=void 0===t?function(){}:t,r=e.onReOrderNeed,a=void 0===r?function(){}:r;return{onClickNeed:function(e){n(e)},onClickArrow:function(e,t){a(e,t)}}},nr=m(n.Box)((function(e){var t=e.theme,n=e.isFirstNeed,r=e.isLocked,a=e.style;return P({height:"50px",width:"100%",borderBottom:"0.5px solid "+t.colors.grey[2],display:"flex",alignItems:"center",paddingLeft:"20px",flexDirection:"row",justifyContent:"space-between",borderTop:n?"2px solid black":"0.5px solid black",opacity:r?"0.75":"none",background:r?t.colors.grey[2]:t.colors.grey[1]},a)})),rr=m(n.Box)((function(){return{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",transition:"0.5s"}})),ar=m(n.Box)((function(e){return{display:"flex",flexDirection:"row",position:"relative",width:e.isFirstOrLastNeed?"15px":"30px",alignItems:"center",justifyContent:"center",top:"1px"}})),or=m(n.Box)((function(){return{cursor:"pointer",transition:"0.4s",padding:"2px"}})),ir=m(Ve)((function(e){return{display:"flex",width:"15px",height:"15px",transform:e.isArrowUp?"rotate(-90deg)":"rotate(90deg)",":hover":{background:e.theme.colors.grey[2]}}})),lr=m(n.Box)((function(){return{position:"relative",right:"5px",padding:"3px 6px",borderRadius:"20px",transition:"0.3s",cursor:"pointer"}})),sr=m(n.Text)((function(){return{cursor:"pointer",transition:"0.5s",paddingLeft:"0px",":hover":{background:"none",textDecoration:"underline"}}})),cr=function(e){var t=e.need,r=e.isAllocationLoading,a=e.isLocked,o=e.isFirstNeed,i=e.isLastNeed,l=e.style,s=e.isPercentage,c=en(),d=f.useTheme(),u=c.get(t.projectNeed.id).isCollapsed,p=tr(),m=p.onClickNeed,g=p.onClickArrow,h=function(){c.setIsCollapsed({value:!u,key:t.projectNeed.id})},b=E(_.useState(!1),2),v=b[0],x=b[1];return _.createElement(nr,{theme:d,isLocked:a,style:l,isFirstNeed:o},_.createElement(rr,{onMouseEnter:function(){x(!0)},onMouseLeave:function(){x(!1)}},_.createElement(n.Box,{display:"flex",flexDirection:"row",alignItems:"center",width:"50%"},v&&_.createElement(ar,{isFirstOrLastNeed:o||i,mr:1},!o&&_.createElement(or,{onClick:function(){g(t.projectNeed.id,"top")},theme:d},_.createElement(ir,{theme:d,isArrowUp:!0})),!i&&_.createElement(or,{onClick:function(){g(t.projectNeed.id,"bottom")},theme:d},_.createElement(ir,{theme:d}))),_.createElement(n.Box,{maxWidth:"200px",display:"flex"},_.createElement(sr,{fontSize:"small",fontWeight:"semiBold",ellipsis:!0,onClick:function(){m(t.projectNeed.id)}},t.projectNeed.name))),_.createElement(n.Box,{display:"flex",width:"60px","flex-direction":"row",alignItems:"center"},!0===r?_.createElement(n.LoaderSkeleton.Point,null):_.createElement(nt,{isPercentage:s,value:{min:t.minAssignees,max:t.maxHeadCount,rate:t.allocationsNeed,external:t.externalTotal},isShowAssignationStats:!0}))),_.createElement(lr,{onClick:h},_.createElement(We,{isCollapsed:u})))},dr=function(){var e=G(),t=e.onAddNeed,n=void 0===t?function(){}:t,r=e.onAssignResource,a=void 0===r?function(){}:r,o=en(),i=$t();return{onClickAssignResource:function(e){a(e);var t=o.get(e).isCollapsed;o.setIsCollapsed({value:t,key:e})},onClickNewNeed:function(e){n(e);var t=i.get(e).isCollapsed;i.setIsCollapsed({value:t,key:e})}}},ur=function(e,r){var a=e.projects,o=n.useTranslate(),i=en(),l=$t(),s=dr(),c=s.onClickAssignResource,d=s.onClickNewNeed,u=z().multipleDateRangeOverlaps;return t.useMemo((function(){return k([],E(a.reduce((function(e,t){var n,a=l.get(t.project.id).isCollapsed,s=t.needs;return k(k(k(k([],E(e)),[{component:er,props:{project:t.project,isAllocationLoading:!0===t.allocationRatesLoading,total:t.total,externalTotal:t.externalTotal,minAssignees:t.minAssignees,maxHeadCount:t.maxHeadCount,isPercentage:r}}]),E(a?[]:s.reduce((function(e,n,a){var l,s=i.get(n.projectNeed.id).isCollapsed;return k(k(k(k([],E(e)),[{component:cr,props:{isAllocationLoading:!0===t.allocationRatesLoading,isLocked:n.isLocked,isLastNeed:a+1===(null===(l=t.needs)||void 0===l?void 0:l.length),isFirstNeed:0===a,need:n,isPercentage:r}}]),E(s?[]:n.allocations.map((function(e){var t=u(e.assignments).height;return{component:Qn,props:{isLocked:n.isLocked,allocation:e,height:t},height:t}})))),E(s?[]:[{component:Yn,props:{isLocked:n.isLocked,onClick:function(){c(n.projectNeed.id)},name:o("assign_resource")}}]))}),[]))),E(a?[]:[{component:Yn,props:{onClick:function(){d(t.project.id)},name:o("add_a_something",{object:o("a_staffing_project_need")}),isProjectNeed:!0,isLocked:!(null===(n=t.project.capabilities)||void 0===n?void 0:n.canCreateNeed)}}]))}),[])))}),[l,i,d,c,u,a])},pr=m(n.Text)((function(){return{textTransform:"lowercase"}})),fr=function(e){var t=e.isPercentage,r=n.useTranslate(),a=tn().data,o=Bn(a,t),i=ur(a,t);return _.createElement(oe,{periodType:a.periodType,startDate:a.startDate,endDate:a.endDate,getLinkToUserProfile:a.getLinkToUserProfile,getLinkToProject:a.getLinkToProject,fixedHeaderChildren:_.createElement(Ye,{columns:[_.createElement(n.Column,{alignItems:"flex-start"},_.createElement(Ze,{useSort:tn,sortKey:"projects"},r("staffing_project",10)),_.createElement(pr,{fontWeight:"semiBold",height:"25px",mb:1,ml:0},r("num_staffing_project",a.totals.nbProjects)+", "+r("staffing_project_need_num",a.totals.nbNeeds))),_.createElement(n.Column,null,_.createElement(Ze,{useSort:tn,isSortDisabled:!0,sortKey:"projects-allocation-rate"},r("allocationRatesView")),_.createElement(n.Box,{height:"25px",mb:1}))]}),sideBarChildren:i,contentChildren:o,type:"planning"})},mr=function(e){var t=e.data,n=e.callbacks,r=e.isPercentage;return _.createElement(Zt,{data:t,callbacks:n},_.createElement(fr,{isPercentage:r}))},gr=xt(),hr=_t(),br=function(e){var t=e.sortKeys,n=e.data;return t.resources&&(n.persons=x.orderBy(n.persons,(function(e){return e.person.familyName+" "+e.person.givenName}),t.resources)),t["assignment-end"]&&(n.persons=x.orderBy(n.persons,(function(e){return e.assignmentEnd}),t["assignment-end"])),n},vr=function(e){var t=e.children,n=e.data,r=e.callbacks;return _.createElement(Q,{callbacks:r},_.createElement(Ct,{onSort:br,context:hr,data:n},_.createElement(hr.Consumer,null,(function(e){var n=e.data;return _.createElement(Ot,{context:gr,data:(null===n||void 0===n?void 0:n.persons)?n.persons:[],fieldKey:"person.id"},t)}))))};function xr(){return t.useContext(hr)}function yr(){return t.useContext(gr)}var jr=m(n.Box)((function(e){var t=e.theme,n=e.isFirstChild,r=e.styles;return P({height:"50px",width:"100%",borderTop:n?"2px solid black":void 0,borderBottom:"0.5px solid "+t.colors.grey[1],display:"flex",alignItems:"center",paddingLeft:"20px",flexDirection:"row",justifyContent:"space-between"},r)})),Or=m(n.Box)((function(e){return{display:"flex",position:"relative",alignItems:"center",right:e.isAvailableNow?79:20,flexDirection:"column"}})),_r=function(e){var r,a=e.data,o=e.style,i=(e.height,e.isFirstChild),l=e.isLastChild,s=f.useTheme(),c=p.localeMoment(null===a||void 0===a?void 0:a.assignmentEnd).diff(p.localeMoment(),"day")<1,d=t.useRef(null),u=yr(),m=u.setRefFn,g=u.setSidebarRightLimitFn,b=O.getIsExternal(a.person);return t.useEffect((function(){(null===d||void 0===d?void 0:d.current)&&(m(d),g(d.current.getBoundingClientRect().right))}),[null===(r=null===d||void 0===d?void 0:d.current)||void 0===r?void 0:r.getBoundingClientRect().right]),"undefined"===typeof(null===a||void 0===a?void 0:a.person)?_.createElement(n.Line,{width:"100%"},_.createElement(n.LoaderSkeleton.Line,{width:"40%"})):_.createElement(jr,{styles:o,ref:d,isFirstChild:i,isLastChild:l,theme:s},_.createElement(n.Box,{maxWidth:"40%"},_.createElement(Ke,{user:a.person})),_.createElement(Or,{maxWidth:"45%",isAvailableNow:c},!b&&_.createElement(h.NextAvailability,{textSize:"tiny",date:(null===a||void 0===a?void 0:a.assignmentEnd)?p.localeMoment(a.assignmentEnd).toISOString():p.localeMoment().subtract(1,"day").toISOString()})))},Cr=function(e){var n=e.persons,r=z().multipleDateRangeOverlaps;return t.useMemo((function(){return k([],E(n.reduce((function(e,t,a){var o=r(t.allocations).height;return k(k([],E(e)),[{component:_r,props:{data:t,key:t.person.id,height:o,isFirstChild:0===a,isLastChild:a===n.length-1},height:o}])}),[])))}),[n,r])},wr=m(n.Box)((function(e){var t=e.conmputedWidth,n=e.isFirstChild;return e.isLastChild,{position:"relative",width:t,borderTop:n?"2px solid black":void 0}})),Dr=function(e){var t=e.lines,r=e.endDate,a=e.style,o=e.isFirstChild,i=e.isLastChild,l=e.isLocked,s=e.person,c=e.data,d=e.startDate,u=e.periodType,p=e.height,f=ae().contentSquares,m=yr().sidebarRightLimit;return _.createElement(wr,{conmputedWidth:50.5*(f.length+1),isFirstChild:o,isLastChild:i,style:P({},a)},c.map((function(e,n){return _.createElement(Mn,{contentLines:t,sidebarRightLimit:m,startDate:d,endDate:r,periodType:u,isLocked:l,index:n,key:n,assignment:e,assignments:c})})),_.createElement(n.Box,{display:"flex",flexDirection:"row"},_.createElement(Fe,{id:s.id,isPercentage:!1,isLocked:l,isAssignmentSquare:!0,assignments:c,assignType:"assignment",values:f,byPeriod:[],squareStyle:{height:p,justifyContent:"flex-start"}})))},Sr=function(e){var n=e.persons,r=e.startDate,a=e.endDate,o=e.periodType,i=z().multipleDateRangeOverlaps;return t.useMemo((function(){return k([],E(n.reduce((function(e,t,n){var l=i(t.allocations),s=l.height,c=l.lines;return k(k([],E(e)),[{component:Dr,props:{lines:c,key:n,person:t.person,data:t.allocations,startDate:r,endDate:a,periodType:o,height:s,isFirstChild:0===n,isLastChild:n===t.allocations.length-1,isLocked:t.isLocked},height:s}])}),[])))}),[n,a,i,o,r])},Pr=m(n.Text)((function(){return{textTransform:"lowercase"}})),Tr=function(e){var t=e.loadMoreRows,r=e.onRessourcePlanningSort,a=e.familyNameSortDirection,o=e.nextAvailabilitySortDirection,i=n.useTranslate(),l=xr().data,s=Sr(l),c=Cr({persons:l.persons}),d=_.createElement(Ye,{columns:[_.createElement(n.Column,{alignItems:"left"},_.createElement(Ze,{useSort:xr,initialSortValue:a,onRessourcePlanningSort:r,sortKey:"familyName"},_.createElement(n.Text,{fontWeight:"bold",fontSize:11},i("resources"))),_.createElement(Pr,{fontWeight:"semiBold",height:"25px",mb:1,ml:0},i("num_resources",l.totals.nbPersons))),_.createElement(n.Column,null,_.createElement(Ze,{useSort:xr,initialSortValue:o,onRessourcePlanningSort:r,sortKey:"nextAvailability"},_.createElement(n.Text,{fontWeight:"bold",fontSize:11},i("assignment_end"))),_.createElement(n.Box,{height:"25px",mb:1}))]});return _.createElement(oe,{periodType:l.periodType,startDate:l.startDate,endDate:l.endDate,loadMoreRows:t,fixedHeaderChildren:d,getLinkToUserProfile:l.getLinkToUserProfile,contentChildren:s,sideBarChildren:c,type:"planning"})},Er=function(e){var t=e.data,n=e.callbacks,r=e.loadMoreRows,a=e.onRessourcePlanningSort,o=e.familyNameSortDirection,i=e.nextAvailabilitySortDirection;return _.createElement(vr,{data:t,callbacks:n},_.createElement(Tr,{loadMoreRows:r,onRessourcePlanningSort:a,familyNameSortDirection:o,nextAvailabilitySortDirection:i}))},kr=function(e){var t=e.className,n=de("cc-icon",t);return _.createElement("svg",P({className:n},e,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),_.createElement("path",{d:"M2.00007 0C0.892078 0 0 0.891648 0 1.99963C0 3.10763 0.892078 3.99971 2.00007 3.99971H21.9999C23.1079 3.99971 24 3.10763 24 1.99963C24 0.891648 23.1079 0 21.9999 0H2.00007ZM2.00007 9.99992C0.892078 9.99992 0 10.8916 0 11.9996C0 13.1076 0.892078 13.9996 2.00007 13.9996H14.0001C15.1081 13.9996 15.9997 13.1076 15.9997 11.9996C15.9997 10.8916 15.1081 9.99992 14.0001 9.99992H2.00007ZM2.00007 19.9994C0.892078 19.9994 0 20.8915 0 21.9995C0 23.1075 0.892078 23.9996 2.00007 23.9996H5.99979C7.10778 23.9996 7.99986 23.1075 7.99986 21.9995C7.99986 20.8915 7.10778 19.9994 5.99979 19.9994H2.00007Z",fill:"#030E2D"}))},Ar={callbacks:{onChangePeriod:function(){},onChangeView:function(){},onChangeDisplayMode:function(){},onChangeFilters:function(){},onExport:function(){}}},Nr=t.createContext(Ar),Ir=function(e){var t=e.children,n=e.callbacks;return _.createElement(Nr.Provider,{value:{callbacks:n}},t)},Mr=function(){var e=t.useContext(Nr).callbacks,n=e.onChangeFilters,r=e.onExport;return{onClickExport:function(){r()},onClickFilter:function(){n()}}},Fr=function(){var e=Mr().onClickFilter;return _.createElement("div",{className:"cc-top-header-actions"},_.createElement("div",{className:"cc-top-header-actions-filter"},_.createElement(kr,null),_.createElement("div",{onClick:e,className:"cc-top-header-actions-filter-txt"},"FILTER")))},Rr=function(r){var a=r.startDate,o=r.endDate,i=r.periodType,l=n.useTranslate(),s=t.useContext(Nr).callbacks.onChangePeriod;return _.createElement(n.Line,{ml:3},_.createElement(n.Label,{content:l("startDate")},_.createElement(n.DatePicker,{width:150,onChange:function(e){s(e.toDate(),o,i)},value:a.toISOString()})),_.createElement(n.Label,{content:l("endDate"),ml:1},_.createElement(n.DatePicker,{width:150,onChange:function(e){s(a,e.toDate(),i)},value:o.toISOString()})),_.createElement(n.Label,{content:l("periodType"),ml:3},_.createElement(n.SelectField,{value:i,onChange:function(e){return s(a,o,e)},width:100,source:[{label:l(e.PeriodType.DAY),value:e.PeriodType.DAY},{label:l(e.PeriodType.WEEK),value:e.PeriodType.WEEK},{label:l(e.PeriodType.MONTH),value:e.PeriodType.MONTH}]})))},Lr=[{label:"planningView",value:"planning"},{label:"allocationRatesView",value:"allocationRate"}],Br=function(e){var t=e.value,r=void 0===t?Lr[0]:t,a=e.onChange,o=n.useTranslate();return _.createElement(n.Label,{content:o("viewType")},_.createElement(n.SelectField,{value:r,onChange:a,width:150,source:Lr.map((function(e){var t=e.label,n=e.value;return{label:o(t),value:n}}))}))},zr=function(e){var t=e.callbacks,r=e.view,a=e.periodType,o=e.startDate,i=e.endDate;return _.createElement(Ir,{callbacks:t},_.createElement("div",{className:"cc-top-header-container"},_.createElement(n.Line,null,_.createElement(Br,{value:r,onChange:t.onChangeView}),_.createElement(Rr,{periodType:a,startDate:o,endDate:i})),_.createElement(Fr,null)))};Object.defineProperty(e,"ProjectStatus",{enumerable:!0,get:function(){return u.ProjectStatus}}),e.AllocationProjects=Mt,e.AllocationResources=qt,e.PlanningProjects=mr,e.PlanningResources=Er,e.TopHeader=zr,e.generatePlanningHeaders=$,e.useCommon=z,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(0),n(14),n(225),n(32),n(37),n(88),n(1144),n(421),n(63),n(773),n(140),n(1134),n(23),n(1135),n(425))},821:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r,a,o=n(0),i=["title","titleId"];function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function c(e,t){var n=e.title,c=e.titleId,d=s(e,i);return o.createElement("svg",l({viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":c},d),n?o.createElement("title",{id:c},n):null,r||(r=o.createElement("path",{d:"M9.87792 6.37764H8.11267V4.61239C8.11267 4.13163 7.72957 3.74854 7.24882 3.74854C6.76807 3.74854 6.38497 4.13163 6.38497 4.61239V6.37764H4.61971C4.13896 6.37764 3.75586 6.76074 3.75586 7.24149C3.75586 7.72224 4.13896 8.10534 4.61971 8.10534H6.38497V9.8706C6.38497 10.3438 6.76807 10.7345 7.24882 10.7345C7.72957 10.7345 8.11267 10.3438 8.11267 9.8706V8.10534H9.87792C10.3512 8.10534 10.7418 7.72224 10.7418 7.24149C10.7418 6.76074 10.3512 6.37764 9.87792 6.37764Z"})),a||(a=o.createElement("path",{d:"M15.7446 14.5202L12.9427 11.7183C13.9493 10.4413 14.4977 8.88638 14.4977 7.24883C14.4977 5.34836 13.7239 3.48545 12.3643 2.13333C10.9897 0.758685 9.17183 0 7.24883 0C5.32582 0 3.48545 0.766197 2.13333 2.12582C0.758685 3.50047 0 5.31831 0 7.24131C0 9.16432 0.773709 11.0047 2.13333 12.3568C3.50798 13.7315 5.32582 14.4901 7.24883 14.4901C8.85634 14.4901 10.4488 13.9268 11.7183 12.9352L14.5277 15.7446C14.693 15.9099 14.9183 16 15.1362 16C15.354 16 15.5793 15.9174 15.7446 15.7446C16.0826 15.4066 16.0826 14.8582 15.7446 14.5202ZM11.1399 11.1399C10.1108 12.1765 8.69108 12.7624 7.24131 12.7624C5.79155 12.7624 4.40939 12.1991 3.34272 11.1399C2.31361 10.1108 1.72019 8.69108 1.72019 7.24131C1.72019 5.79155 2.28357 4.40939 3.34272 3.34272C4.37183 2.31361 5.79155 1.72019 7.24131 1.72019C8.69108 1.72019 10.0732 2.28357 11.1399 3.34272C12.1765 4.37934 12.7624 5.79906 12.7624 7.24131C12.7624 8.68357 12.1991 10.0732 11.1399 11.1399Z"})))}var d=o.forwardRef(c);n.p},871:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f}));var r=n(17),a=n(19),o=n(818),i=n(23),l=new Map([[o.PeriodType.DAY,a.AllocationRateAccuracy.Day],[o.PeriodType.WEEK,a.AllocationRateAccuracy.Week],[o.PeriodType.MONTH,a.AllocationRateAccuracy.Month]]),s=new Map([[a.ScheduledPeriodType.Project,o.AllocationType.WORK],[a.ScheduledPeriodType.Training,o.AllocationType.TRAINING],[a.ScheduledPeriodType.Absence,o.AllocationType.ABSENT]]),c=new Map([[a.ProjectAssignmentStatus.Confirmed,o.AllocationStatus.APPROVED],[a.ProjectAssignmentStatus.Planned,o.AllocationStatus.PROVISION],[a.ProjectAssignmentStatus.Provisional,o.AllocationStatus.PROVISION],[a.ProjectAssignmentStatus.Simulated,o.AllocationStatus.SIMULATION]]),d=new Map([[a.ProjectStatus.Past,o.ProjectStatus.PAST],[a.ProjectStatus.Ongoing,o.ProjectStatus.ONGOING],[a.ProjectStatus.Upcoming,o.ProjectStatus.UPCOMING]]);function u(e){return l.get(e)||a.AllocationRateAccuracy.Day}function p(e,t,n){var o=(t||[]).reduce((function(e,t){return e.nbPersons=n||0,e.allocationRate=e.allocationRate+t.allocationRates.total,t.allocationRates.byPeriod.forEach((function(t,n){var r;e.byPeriod.length>n?null!=t&&(e.byPeriod[n]={rate:((null===(r=e.byPeriod[n])||void 0===r?void 0:r.rate)||0)+t.rate}):e.byPeriod.push(t||null)})),e}),{nbPersons:0,allocationRate:0,byPeriod:[]});return o.allocationRate=o.allocationRate/(o.nbPersons||1),o.byPeriod=o.byPeriod.map((function(e){return e?{rate:e.rate/(o.nbPersons||1)}:e})),Object(r.a)(Object(r.a)({},e),{},{totals:o,allocations:(t||[]).map((function(e){return{person:Object(r.a)(Object(r.a)({},Object(a.getFormatedUserBasicFragment)(e)),{},{place:e.place,title:e.title,groups:e.groups}),total:e.allocationRates.total,byPeriod:e.allocationRates.byPeriod.map((function(e){return null!==e?{rate:(null===e||void 0===e?void 0:e.rate)||0}:null}))}}))})}function f(e,t,n,l){var u=new Map;return{data:Object(r.a)(Object(r.a)({},e),{},{totals:{nbPersons:t},persons:(n||[]).map((function(e){return{person:Object(r.a)(Object(r.a)({},Object(a.getFormatedUserBasicFragment)(e)),{},{place:e.place,title:e.title,groups:e.groups}),isLocked:l===e.id,assignmentEnd:e.nextAvailability,allocations:(e.scheduledPeriods.nodes||[]).map((function(t){var n,r;u.set(t.id,e.id);var i,l,p,f=(i=t.type,s.get(i)||o.AllocationType.VACANCY),m=t.projectAssignment?{id:t.projectAssignment.project.id,name:t.projectAssignment.project.name,colorHex:Object(a.maybeToOptional)(t.projectAssignment.project.color)||"success.3",status:(l=t.projectAssignment.project.status||a.ProjectStatus.Ongoing,d.get(l)||o.ProjectStatus.ONGOING),customer:""}:void 0;return{id:t.id,userId:e.id,project:m,startDate:new Date(t.startDate),endDate:new Date(t.endDate),type:f,status:(p=Object(a.maybeToOptional)(null===(n=t.projectAssignment)||void 0===n?void 0:n.status)||a.ProjectAssignmentStatus.Confirmed,c.get(p)||o.AllocationStatus.APPROVED),rate:t.rate,projectAndNeedName:Object(a.maybeToOptional)(t.name),assignmentId:f===o.AllocationType.WORK?null===(r=t.projectAssignment)||void 0===r?void 0:r.id:void 0}})).sort((function(e,t){return Object(i.sortByName)(e,t,(function(e){return(e.projectAndNeedName||"").toLowerCase()}))}))}}))}),allocationToUserMap:u}}},995:function(e,t,n){}}]);