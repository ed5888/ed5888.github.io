(this["webpackJsonp@elamp/main-app"]=this["webpackJsonp@elamp/main-app"]||[]).push([[3],{745:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i,r=n(0),a=["title","titleId"];function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function s(e,t){var n=e.title,s=e.titleId,l=c(e,a);return r.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 1000",ref:t,"aria-labelledby":s},l),n?r.createElement("title",{id:s},n):null,">",i||(i=r.createElement("path",{d:"M131.547 53.563c-40.01 0-72.22 32.21-72.22 72.221v748.43c0 40.01 32.21 72.222 72.22 72.222h736.906c40.01 0 72.22-32.211 72.22-72.222v-748.43c0-40.01-32.21-72.22-72.22-72.22H131.547zM500 182.648a179.773 179.773 0 01179.773 179.774A179.773 179.773 0 01500 542.194a179.773 179.773 0 01-179.773-179.773A179.773 179.773 0 01500 182.647zM250.527 638.692a40 40 0 0140 40 40 40 0 01-40 40 40 40 0 01-40-40 40 40 0 0140-40zm105.809 0h392.566a40.004 40.004 0 110 80H356.336a40.004 40.004 0 110-80zM250.527 758.54a40 40 0 0140 40 40 40 0 01-40 40 40 40 0 01-40-40 40 40 0 0140-40zm105.809 0H502.08a40.004 40.004 0 110 80H356.336a40.004 40.004 0 110-80z"})))}var l=r.forwardRef(s);n.p},746:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var i,r,a,o,c,s,l,d,u=n(0),b=["title","titleId"];function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function j(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function f(e,t){var n=e.title,f=e.titleId,O=j(e,b);return u.createElement("svg",p({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 250 250",ref:t,"aria-labelledby":f},O),n?u.createElement("title",{id:f},n):null,i||(i=u.createElement("linearGradient",{id:"elamp_svg__a",gradientUnits:"userSpaceOnUse",x1:78.304,y1:198.938,x2:108.65,y2:235.103},u.createElement("stop",{offset:0,stopColor:"#3958ab"}),u.createElement("stop",{offset:.205,stopColor:"#3251a2"}),u.createElement("stop",{offset:.539,stopColor:"#203d8a"}),u.createElement("stop",{offset:.958,stopColor:"#031d62"}),u.createElement("stop",{offset:1,stopColor:"#00195e"}))),r||(r=u.createElement("circle",{cx:93.5,cy:217,r:23.6,fill:"url(#elamp_svg__a)"})),a||(a=u.createElement("linearGradient",{id:"elamp_svg__b",gradientUnits:"userSpaceOnUse",x1:127.443,y1:149.227,x2:177.472,y2:199.256},u.createElement("stop",{offset:.004,stopColor:"#ffbd41"}),u.createElement("stop",{offset:.276,stopColor:"#ffb439"}),u.createElement("stop",{offset:.719,stopColor:"#fe9c24"}),u.createElement("stop",{offset:1,stopColor:"#fe8914"}))),o||(o=u.createElement("circle",{cx:152.5,cy:174.2,r:35.4,fill:"url(#elamp_svg__b)"})),c||(c=u.createElement("linearGradient",{id:"elamp_svg__c",gradientUnits:"userSpaceOnUse",x1:33.708,y1:96.99,x2:106.037,y2:157.682},u.createElement("stop",{offset:0,stopColor:"#00cdc9"}),u.createElement("stop",{offset:.246,stopColor:"#00c4c2"}),u.createElement("stop",{offset:.646,stopColor:"#00acae"}),u.createElement("stop",{offset:1,stopColor:"#009199"}))),s||(s=u.createElement("circle",{cx:69.9,cy:127.3,r:47.2,fill:"url(#elamp_svg__c)"})),l||(l=u.createElement("linearGradient",{id:"elamp_svg__d",gradientUnits:"userSpaceOnUse",x1:138.149,y1:23.173,x2:213.975,y2:113.538},u.createElement("stop",{offset:0,stopColor:"#fd0d55"}),u.createElement("stop",{offset:.258,stopColor:"#f90d55"}),u.createElement("stop",{offset:.525,stopColor:"#ec0953"}),u.createElement("stop",{offset:.796,stopColor:"#d80451"}),u.createElement("stop",{offset:1,stopColor:"#c2014f"}))),d||(d=u.createElement("circle",{cx:176.1,cy:68.4,r:59,fill:"url(#elamp_svg__d)"})))}var O=u.forwardRef(f);n.p},747:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));new Map([["theme","theme_not_interesting"],["skills","skills_not_interesting"],["over_qualified","over_qualified"],["under_qualified","under_qualified"]]);var i=n(32),r=new Map([[i.PinTrainingStatus.Suggested,"training_status_suggested"],[i.PinTrainingStatus.Approved,"training_status_approved"],[i.PinTrainingStatus.Accepted,"training_status_accepted"],[i.PinTrainingStatus.Pending,"training_status_pending"],[i.PinTrainingStatus.Validated,"training_status_validated"],[i.PinTrainingStatus.Refused,"training_status_refused"],[i.PinTrainingStatus.Noshow,"training_status_noshow"],[i.PinTrainingStatus.Canceled,"training_status_canceled"]]),a=(new Map([[i.PinTrainingStatus.Suggested,"grey.1"],[i.PinTrainingStatus.Approved,"secondary.0"],[i.PinTrainingStatus.Accepted,"secondary.0"],[i.PinTrainingStatus.Pending,"secondary.0"],[i.PinTrainingStatus.Validated,"success.0"],[i.PinTrainingStatus.Refused,"error.0"],[i.PinTrainingStatus.Noshow,"error.0"],[i.PinTrainingStatus.Canceled,"error.0"]]),new Map([[i.PinTrainingStatus.Suggested,{labelKey:"training_status_suggested",color:"grey.1"}],[i.PinTrainingStatus.Approved,{labelKey:"training_status_approved",color:"secondary.0"}],[i.PinTrainingStatus.Accepted,{labelKey:"training_status_accepted",color:"secondary.0"}],[i.PinTrainingStatus.Pending,{labelKey:"training_status_pending",color:"secondary.0"}],[i.PinTrainingStatus.Validated,{labelKey:"training_status_validated",color:"success.0"}],[i.PinTrainingStatus.Refused,{labelKey:"training_status_refused",color:"error.0"}],[i.PinTrainingStatus.Noshow,{labelKey:"training_status_noshow",color:"error.0"}],[i.PinTrainingStatus.Canceled,{labelKey:"training_status_canceled",color:"error.0"}]]))},758:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return j}));var i=n(17),r=n(285),a=(n(0),n(14)),o=n(813),c=n(1),s=["children","isExpanded","onClickShowLess","onClickShowMore","isShowMoreDisplayed","title"],l=function(e){var t=e.children,n=e.isExpanded,l=e.onClickShowLess,d=e.onClickShowMore,u=e.isShowMoreDisplayed,b=e.title,p=Object(r.a)(e,s),j=Object(a.useTranslate)({capitalize:!0});return Object(c.jsxs)(a.Column,Object(i.a)(Object(i.a)({alignItems:"flex-start",bg:"grey.0",p:2},p),{},{children:[Object(c.jsxs)(a.Line,{mb:2,children:[Object(c.jsx)(a.Icon,{as:o.a,size:16,mr:8}),Object(c.jsx)(a.Text,{fontWeight:"bold",children:b})]}),t,u&&Object(c.jsx)(a.TextButton,{onClick:d,children:j("show_more")}),n&&Object(c.jsx)(a.TextButton,{onClick:l,children:j("show_less")})]}))},d=n(63),u=n(37),b=n(3),p=["user","iconBgColor","date","icon"],j=function(e){var t=e.user,n=e.iconBgColor,i=e.date,o=e.icon,s=Object(r.a)(e,p);return Object(c.jsxs)(a.Line,{width:"100%",justifyContent:"space-between",alignItems:"flex-start",mb:1,pl:36,position:"relative",flexWrap:"wrap",children:[Object(c.jsx)(a.Box,{position:"absolute",top:"3px",left:"0px",children:Object(c.jsx)(d.UserAvatar,{user:{displayName:t.displayName,avatarURL:t.avatarURL,familyName:t.familyName,givenName:t.givenName},size:26})}),Object(c.jsx)(a.Box,{flexShrink:1,position:"relative",py:0,children:Object(c.jsxs)(a.Text,{children:[Object(c.jsx)(a.Link,{fontSize:"small",to:b.b.USER_PROFILE.getRoute({userId:t.id}),children:t.displayName})," ",s.children]})}),Object(c.jsxs)(a.Line,{flexGrow:1,flexShrink:0,justifyContent:"right",ml:1,pt:0,children:[Object(c.jsx)(a.Box,{width:"16px",height:"16px",bg:n,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"2px",mr:1,children:o}),Object(c.jsx)(a.Text,{fontWeight:"semiBold",color:"grey.6",fontSize:"small",children:Object(u.localeMoment)(i).format("DD MMMM YYYY")})]})]})}},786:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return p}));n(0);var i=n(14),r=n(1),a=function(){return Object(r.jsxs)(i.Box,{width:"100%",mb:40,children:[Object(r.jsx)(i.LoaderSkeleton.Line,{width:"100%",mb:1}),Object(r.jsx)(i.LoaderSkeleton.Line,{width:"50%",mb:1}),Object(r.jsx)(i.LoaderSkeleton.Line,{width:"75%",mb:1}),Object(r.jsx)(i.LoaderSkeleton.Line,{width:"33%",mb:1})]})},o=function(){return Object(r.jsxs)(i.Line,{width:"100%",my:1,children:[Object(r.jsx)(i.LoaderSkeleton.Point,{mr:1}),Object(r.jsx)(i.LoaderSkeleton.Line,{width:"50%"})]})},c=function(){return Object(r.jsx)(p,{renderHeader:function(){return Object(r.jsxs)(i.Box,{children:[Object(r.jsxs)(i.Mobile,{children:[Object(r.jsx)(i.Box,{width:"100%",px:2,children:Object(r.jsx)(i.Line,{py:0,height:"30px"})}),Object(r.jsx)(i.Line,{width:"100%",my:1,px:2,children:Object(r.jsx)(o,{})}),Object(r.jsx)(i.Line,{width:"100%",my:1,px:2,children:Object(r.jsx)(o,{})})]}),Object(r.jsxs)(i.DesktopOrTablet,{children:[Object(r.jsx)(i.Line,{width:"100%",my:1,px:3,children:Object(r.jsx)(o,{})}),Object(r.jsx)(i.Line,{width:"100%",my:1,px:3,children:Object(r.jsx)(o,{})})]})]})},children:Object(r.jsx)(a,{})})},s=n(17),l=n(285),d=["title","children"],u=function(e){var t=e.title,n=e.children,a=Object(l.a)(e,d);return Object(r.jsxs)(i.Card,Object(s.a)(Object(s.a)({width:"100%"},a),{},{children:[Object(r.jsx)(i.Text,{fontSize:"large",fontWeight:"semiBold",mb:1,children:t}),Object(r.jsx)(i.Box,{children:n})]}))},b=n(65),p=function(e){var t=e.renderHeader,n=e.children,a=Object(b.h)();return Object(r.jsxs)(i.Box,{width:"100%",height:"100%",bg:"white",display:"flex",flexDirection:"column",backgroundColor:"white",children:[Object(r.jsx)(i.Box,{flexGrow:0,style:{borderBottom:"1px solid ".concat(a.colors.grey[1])},children:t()}),Object(r.jsx)(i.Box,{flexGrow:1,overflow:"auto",p:20,width:"100%",children:n})]})}},789:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return l}));var i=n(19),r=n(37),a=n(747),o=function(e){var t=e.selectedIds,n=e.pinnedTrainings;if("undefined"!==typeof t){var i={},r=[];return t.forEach((function(e){var t=n.find((function(t){return t.id===e}));"undefined"!==typeof t&&r.push(t.capabilities.allowedStatuses)})),Array.from(new Set(r.flatMap((function(e){return e})))).filter((function(e){return r.every((function(t){return t.includes(e)}))})).forEach((function(e){i[e]=a.b.get(e)})),i}return{}},c="1870-01-00T12:00:00.000Z",s=function(e){if(e)return e.map((function(e){return{id:e.id,status:e.status,updatedAt:Object(i.maybeToOptional)(e.updatedAt),updatedBy:e.updatedBy?Object(i.getFormatedUserBasicFragment)(e.updatedBy):void 0}})).sort((function(e,t){var n=e.updatedAt||c,i=t.updatedAt||c;return Object(r.localeMoment)(n).isBefore(Object(r.localeMoment)(i))?1:Object(r.localeMoment)(i).isBefore(Object(r.localeMoment)(n))?-1:0}))},l=function(e){return{must:(e.must||[]).map((function(e){return{skill:Object(i.getFormatedSkillBasicFragment)(e.skill),qualifiers:(e.qualifiers||[]).map((function(e){return{qualifier:Object(i.getFormatedQualifierBasicFragment)(e.qualifier),value:e.value}}))}})),should:(e.should||[]).map((function(e){return{skill:Object(i.getFormatedSkillBasicFragment)(e.skill),qualifiers:(e.qualifiers||[]).map((function(e){return{qualifier:Object(i.getFormatedQualifierBasicFragment)(e.qualifier),value:e.value}}))}}))}}},790:function(e,t,n){"use strict";n.d(t,"a",(function(){return rn})),n.d(t,"b",(function(){return ln}));var i,r=n(139),a=n.n(r),o=n(286),c=n(53),s=n(17),l=n(0),d=n(14),u=n(19),b=n(10),p=n(188),j=n(187),f=n(122),O=n(32),m=n(37),g=n(285),h=n(1),v=["currentStepNumber","stepElements"],x=function(e){var t=e.currentStepNumber,n=e.stepElements,i=Object(g.a)(e,v);return Object(h.jsx)(b.FormContainerModal,Object(s.a)({topElement:Object(h.jsx)(d.StepComponent,{currentStepNumber:t,pt:0,pb:1,stepElements:n})},i))},y=["title"],w=function(e){var t=e.title,n=Object(g.a)(e,y);return Object(h.jsx)(d.Column,Object(s.a)(Object(s.a)({width:"100%",display:"flex",alignItems:"center"},n),{},{children:Object(h.jsx)(b.NoDataToDisplay,{fontSize:"small",iconMaxHeightAndWidth:150,isText:!1,textMarginTop:1,title:t,textAlign:"center",width:"50%"})}))},k=n(61),C=["onTrainingLineClick","training"],S=Object(k.default)(d.Box)((function(e){var t=e.theme;return{border:"1px solid ".concat(t.colors.grey[5]),borderRadius:"3px",margin:"".concat(t.space[0],"px"),maxWidth:"150px",padding:"".concat(t.space[0],"px ").concat(t.space[1],"px")}})),I=function(e){var t=e.onTrainingLineClick,n=e.training,i=Object(g.a)(e,C);return Object(h.jsx)(H,Object(s.a)(Object(s.a)({onTrainingLineClick:t,training:n},i),{},{children:n.qualifiersValues.length>0&&Object(h.jsx)(d.Line,{children:n.qualifiersValues.map((function(e,t){return Object(h.jsx)(S,{children:Object(h.jsx)(d.TextWithAutoTooltipOnEllipsis,{color:"black.2",fontWeight:"semiBold",fontSize:"small",tooltipTitle:e,children:e})},"".concat(e,"_").concat(t))}))})}))},T=n(746),_=["onTrainingLineClick","skillName","training"],L=Object(k.default)(d.Line)((function(e){var t=e.theme;return{border:"1px solid ".concat(t.colors.grey[2]),borderRadius:"20px",cursor:"default",height:"26px",maxWidth:"250px",padding:"".concat(t.space[0],"px ").concat(t.space[2],"px"),width:"fit-content"}})),P=function(e){var t=e.onTrainingLineClick,n=e.skillName,i=e.training,r=Object(g.a)(e,_),a=Object(d.useTranslate)({capitalize:!0});return Object(h.jsx)(H,Object(s.a)(Object(s.a)({onTrainingLineClick:t,training:i},r),{},{children:Object(h.jsxs)(L,{children:[Object(h.jsx)(d.Icon,{as:T.a,mr:1,size:16}),Object(h.jsx)(d.TextWithAutoTooltipOnEllipsis,{fontSize:"small",fontWeight:"semiBold",tooltipTitle:"".concat(a("related_to"),' "').concat(n,'"'),children:"".concat(a("related_to"),' "').concat(n,'"')})]})}))},R=n(63),E=n(760),M=function(e){var t=e.onCreateNewTraining,n=e.onSelectTrainingFromListOrSelector,i=e.skill,r=e.smartSearchedTrainings,a=e.users,o=Object(d.useTranslate)({capitalize:!0}),c=Object(d.useSwitch)(!1),l=c.active,u=c.off,b=c.on,p=function(e){var t=e.trainingId,i=e.trainingName;n({trainingId:t,trainingName:i})};return Object(h.jsxs)(d.Column,{alignItems:"flex-start",height:"100%",overflowY:"auto",width:"100%",children:[Object(h.jsx)(d.Box,{pl:1,width:"100%",children:"undefined"!==typeof a?Object(h.jsx)(h.Fragment,{children:a.length>1?Object(h.jsx)(E.a,{users:a}):Object(h.jsx)(E.b,{user:a[0]})}):Object(h.jsx)(d.LoaderSkeleton.Line,{width:"50%"})}),Object(h.jsxs)(d.Box,{display:"flex",flexDirection:"column",pt:3,width:"100%",children:[Object(h.jsx)(d.Text,{pb:1,children:o("collaborator_training_application_label")}),"undefined"!==typeof i?Object(h.jsx)(R.ObjectTag,Object(s.a)({},i)):Object(h.jsx)(d.Box,{width:"100%",pt:1,children:Object(h.jsx)(d.LoaderSkeleton.Line,{width:"50%"})})]}),Object(h.jsx)(d.Box,{display:"flex",flexDirection:"column",pt:3,width:"100%",children:"undefined"!==typeof i&&"undefined"!==typeof r?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(d.Text,{fontSize:"small",fontWeight:"bold",children:o("skill_linked_trainings",(null===i||void 0===i?void 0:i.trainings.length)||0)}),0===i.trainings.length&&0===r.length?Object(h.jsx)(w,{title:o("no_linked_training_label")}):Object(h.jsxs)(h.Fragment,{children:[i.trainings.map((function(e,t){return Object(h.jsx)(I,{onTrainingLineClick:function(){p({trainingId:e.id,trainingName:e.name})},training:e},"".concat(e.id,"_").concat(t))})),r.map((function(e,t){return Object(h.jsx)(P,{onTrainingLineClick:function(){p({trainingId:e.id,trainingName:e.name})},skillName:i.name,training:e},"".concat(e.id,"_").concat(t))}))]})]}):Object(h.jsx)(d.Box,{width:"100%",py:1,children:Object(h.jsx)(d.LoaderSkeleton.Line,{width:"45%"})})}),Object(h.jsx)(d.Line,{pt:3,width:"100%",children:Object(h.jsx)(d.Popover,{isOpened:l,onClose:u,content:Object(h.jsx)(R.TrainingsNavigator,{isCreateNewTrainingButtonEnabled:!0,isSearchModeActivatedOnOpening:!0,isTrainingWithChildrenSelectionBlocked:!0,multiple:!1,onCreateNewTraining:function(e){t(e),u()},onSubmit:function(e){n(Array.isArray(e)?{trainingId:e[0].id,trainingName:e[0].name}:{trainingId:e.id,trainingName:e.name}),u()}}),children:Object(h.jsx)(d.Button,{appearance:"outline",onClick:b,children:o("find_training_manually")})})})]})},A=n(895),B=function(e){var t=e.trainingId;return Object(h.jsx)(A.a,{trainingId:t})},F=n(65),D=n(747),U=n(843),z=n(789),Q=Object(k.default)(d.TextArea)((function(){return{borderRadius:0}})),N=function(e){var t=e.customFields,n=e.id;if(null===t||void 0===t?void 0:t.find((function(e){return Object.keys(e||{})[0]===n})))return Object.values(t.find((function(e){return Object.keys(e||{})[0]===n}))||[])[0]},q=function(e){var t=e.isFormAdvancedSettings,n=e.onChange,i=e.onCustomFieldsChange,r=e.onDatesChange,a=e.onFreeTrainingNameChange,o=e.form,p=e.toggleIsFormAdvancedSettings,f=e.trainingTag,O=e.users,g=Object(d.useTranslate)({capitalize:!0}),v=Object(F.h)(),x=Object(b.useAppContext)().customFields.pinnedTrainingFields,y=Object(u.useGetPinnedTrainingsLazyQuery)({fetchPolicy:"cache-first",nextFetchPolicy:"cache-only"}),w=Object(c.a)(y,2),k=w[0],C=w[1].data;Object(l.useEffect)((function(){if("undefined"!==typeof O&&"undefined"!==typeof f&&f.id!==Z&&"NONE"!==f.id){var e=O.map((function(e){return e.id}));k({variables:{dataFilters:{user:{inUsers:e},training:{inValues:[f.id]}}}})}}),[O]);var S=Object(l.useMemo)((function(){return Array.from(D.b)}),[]),I=Object(l.useMemo)((function(){return Object(z.b)(null===C||void 0===C?void 0:C.pinnedTrainings.nodes)}),[C]),T=function(e){return function(t){n("deadline"!==e?{field:e,value:t}:{field:e,value:Object(m.localeMoment)(t).toISOString()})}};return Object(h.jsxs)(d.Column,{alignItems:"flex-start",width:"100%",children:[Object(h.jsx)(b.FormLine,{mt:2,children:"undefined"!==typeof O?Object(h.jsx)(h.Fragment,{children:O.length>1?Object(h.jsx)(E.a,{users:O}):Object(h.jsx)(E.b,{user:O[0]})}):Object(h.jsx)(d.LoaderSkeleton.Line,{width:"50%"})}),Object(h.jsx)(b.FormLine,{mt:2,children:"undefined"!==typeof f&&Object(h.jsx)(b.FormLabel,{content:g("targeted_training"),children:f.id===Z?Object(h.jsx)(d.Input,{onChange:a,value:f.name,width:"100%"}):Object(h.jsx)(R.ObjectTag,Object(s.a)({},f))})}),"undefined"!==typeof I&&I.length>0&&Object(h.jsx)(b.FormLine,{mt:2,children:Object(h.jsx)(U.a,{pinnedTrainings:I})}),Object(h.jsx)(b.FormLine,{mt:2,children:Object(h.jsx)(b.FormLabel,{name:"status",content:g("status"),children:Object(h.jsx)(d.SelectField,{value:o.status,onChange:T("status"),zIndex:v.zIndexes.MODAL_POPOVER,readOnly:1===S.length,placeholder:"",source:S.map((function(e){return{label:g(e[1]),value:e[0]}})),width:"100%"})})}),!t&&Object(h.jsx)(b.FormLine,{children:Object(h.jsx)(d.Box,{width:"fit-content",onClick:p,children:Object(h.jsx)(d.Text,{fontWeight:"semiBold",color:v.colors.primary[3],children:"".concat(g("advanced_settings"),"...")})})}),t&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(b.FormLine,{children:Object(h.jsx)(b.FormLabel,{name:"budgetYear",content:g("budget_year"),mr:1,children:Object(h.jsx)(d.Input,{value:o.budgetYear,onChange:T("budgetYear"),placeholder:g("add_a_value")})})}),Object(h.jsx)(b.FormLine,{children:Object(h.jsx)(d.PeriodPicker,{startDate:o.startDate,endDate:o.endDate,onChange:function(e){var t=e.startDate,n=e.endDate;"undefined"===typeof t||"undefined"===typeof n||t===o.startDate&&n===o.endDate||r({startDate:t,endDate:n})},isOneDayMinimumGap:!1})}),x.map((function(e){return Object(h.jsx)(b.FormLine,{children:Object(h.jsx)(R.CustomField,Object(s.a)({mr:1,field:e,withLabel:!0,value:N({customFields:o.customFields,id:e._key}),onSubmit:function(t){return function(e){var t=Object(j.a)({},e.id,e.value);i(t)}({id:e._key,value:t,comparator:"DATE"===e.field_type?"BETWEEN":"IN_VALUES",fieldType:e.field_type})}},e),e._key)},e._key)}))]}),Object(h.jsx)(b.FormLine,{children:Object(h.jsx)(b.FormLabel,{name:"comment",content:g("comment"),children:Object(h.jsx)(Q,{value:o.comment,onChange:T("comment"),placeholder:g("add_comment")})})})]})},V=n(123),G=["onTrainingLineClick","training"],W=Object(k.default)(d.Line)((function(e){var t=e.theme;return{borderBottom:"1px solid ".concat(t.colors.grey[2]),padding:"".concat(t.space[1],"px 0px"),":hover":{backgroundColor:t.colors.grey[2],cursor:"pointer"}}})),H=function(e){var t=e.onTrainingLineClick,n=e.training,i=Object(g.a)(e,G);return Object(h.jsxs)(W,Object(s.a)(Object(s.a)({justifyContent:"space-between",onClick:t,width:"100%"},i),{},{children:[Object(h.jsxs)(d.Line,{display:"flex",flexGrow:1,pl:0,children:[Object(h.jsx)(d.Icon,{as:V.a,size:14,mr:1}),Object(h.jsx)(d.TextWithAutoTooltipOnEllipsis,{fontSize:"small",fontWeight:"semiBold",rows:2,tooltipTitle:n.name,children:n.name})]}),i.children]}))},Y={currentStep:1,form:{status:O.PinTrainingStatus.Suggested,budgetYear:void 0,deadline:void 0,startDate:void 0,endDate:void 0,comment:void 0,customFields:void 0},isFormAdvancedSettings:!1},Z="NO_REF",K=function(e,t){var n;switch(t.type){case"setCurrentStep":return Object(s.a)(Object(s.a)({},e),{},{currentStep:t.currentStep,manuallyCreatedTrainingLabel:void 0});case"setManuallyCreatedTrainingLabel":return Object(s.a)(Object(s.a)({},e),{},{currentStep:3,manuallyCreatedTrainingLabel:t.manuallyCreatedTrainingLabel,trainingTag:{id:Z,kind:"trainingTag",name:t.manuallyCreatedTrainingLabel}});case"setTrainingTag":return Object(s.a)(Object(s.a)({},e),{},{manuallyCreatedTrainingLabel:void 0,trainingTag:t.trainingTag});case"setForm":return Object(s.a)(Object(s.a)({},e),{},{form:Object(s.a)(Object(s.a)({},e.form),{},Object(j.a)({},t.field,t.value))});case"setDates":return Object(s.a)(Object(s.a)({},e),{},{form:Object(s.a)(Object(s.a)({},e.form),{},{startDate:t.startDate,endDate:t.endDate})});case"setCustomFields":var i=Object.keys(t.customField||[])[0],r=null===(n=e.form.customFields)||void 0===n?void 0:n.filter((function(e){return Object.keys(e||{})[0]!==i}));return Object(s.a)(Object(s.a)({},e),{},{customFields:[].concat(Object(p.a)(r||[]),[t.customField])});case"setIsFormAdvancedSettings":return Object(s.a)(Object(s.a)({},e),{},{isFormAdvancedSettings:t.isFormAdvancedSettings});case"reset":default:return Y}},J=function(e){var t=e.isLoading,n=e.isOpened,i=e.onClose,r=e.onSubmit,a=e.skillId,o=e.userIds,p=Object(d.useTranslate)({capitalize:!0}),O=Object(d.useAlert)(),g=Object(b.useAppContext)().getErrorMessage,v=Object(u.useGetUsersLazyQuery)({fetchPolicy:"cache-first",nextFetchPolicy:"cache-only",onError:function(e){return O.error(g(e))}}),y=Object(c.a)(v,2),w=y[0],k=y[1].data,C=Object(u.useGetSkillAndSkillRelatedTrainingLazyQuery)({fetchPolicy:"cache-first",nextFetchPolicy:"cache-only",onError:function(e){return O.error(g(e))}}),S=Object(c.a)(C,2),I=S[0],T=S[1].data,_=Object(u.useGetSmartSearchedTrainingsLazyQuery)({fetchPolicy:"cache-first",nextFetchPolicy:"cache-only",onError:function(e){return O.error(g(e))}}),L=Object(c.a)(_,2),P=L[0],R=L[1].data,E=Object(l.useReducer)(K,Y),A=Object(c.a)(E,2),F=A[0],D=F.currentStep,U=F.form,z=F.isFormAdvancedSettings,Q=F.manuallyCreatedTrainingLabel,N=F.trainingTag,V=A[1],G=Object(l.useMemo)((function(){var e,t=null===k||void 0===k||null===(e=k.users)||void 0===e?void 0:e.nodes;if(t)return t.map((function(e){return Object(u.getFormatedUserBasicFragment)(e)}))}),[k]),W=Object(l.useMemo)((function(){var e=null===T||void 0===T?void 0:T.skill;if(e){var t=[];return(e.trainings.nodes||[]).forEach((function(e){var n,i=e.pattern,r=[];i&&(i.must&&i.must.forEach((function(e){e.skill.id===a&&e.qualifiers.forEach((function(e){if(e.qualifier&&e.value){var t=Object(f.parseQualifierValue)(Object(u.getFormatedQualifierBasicFragment)(e.qualifier),e.value,p);"undefined"!==typeof t.label&&r.push(t.label)}}))})),i.should&&i.should.forEach((function(e){e.skill.id===a&&e.qualifiers.forEach((function(e){if(e.qualifier&&e.value){var t=Object(f.parseQualifierValue)(Object(u.getFormatedQualifierBasicFragment)(e.qualifier),e.value,p);"undefined"!==typeof t.label&&r.push(t.label)}}))})));var o={id:e.id,name:e.name,image:Object(u.maybeToOptional)(null===(n=e.image)||void 0===n?void 0:n.url),description:Object(u.maybeToOptional)(e.description),qualifiersValues:r};t.push(o)})),Object(s.a)(Object(s.a)({},Object(u.getFormatedSkillBasicFragment)(e)),{},{kind:"skillTag",trainings:t})}}),[T]),H=Object(l.useMemo)((function(){var e,t=null===R||void 0===R||null===(e=R.smartSearch)||void 0===e?void 0:e.edges;if(t)return t.map((function(e){if("Training"===e.node.__typename)return{id:e.node.id,name:e.node.name,score:e.score}}))}),[R]),J=Object(l.useMemo)((function(){return[{title:p("choose_a_training"),stepNumber:1},{title:p("confirmation_label"),stepNumber:2},{title:p("application_confirmation_label"),stepNumber:3}]}),[]);Object(l.useEffect)((function(){n&&o.length>0&&w({variables:{ids:o}})}),[n,o]),Object(l.useEffect)((function(){n&&"undefined"!==typeof a&&I({variables:{id:a}})}),[n,a]),Object(l.useEffect)((function(){n&&"undefined"!==typeof W&&P({variables:{searchQuery:W.name}})}),[n,W]),Object(l.useEffect)((function(){1===D?V({type:"setTrainingTag"}):3!==D&&ee()}),[D]);var X=function(){1===D?V({type:"setCurrentStep",currentStep:"undefined"===typeof Q?2:3}):2===D?V({type:"setCurrentStep",currentStep:3}):$()},$=function(){var e={};U.customFields?U.customFields.forEach((function(t){var n=Object(c.a)(Object.entries(t||[])[0],2),i=n[0],r=n[1];e=Object(s.a)(Object(s.a)({},e),{},Object(j.a)({},i,r))})):e=void 0,"undefined"!==typeof N&&"undefined"!==typeof G&&1===G.length&&r({userId:G[0].id,trainingId:N.id!==Z?N.id:void 0,trainingName:Q,status:U.status,budgetYear:U.budgetYear,deadline:U.deadline?Object(m.localeMoment)(U.deadline).toISOString():void 0,startDate:U.startDate?Object(m.localeMoment)(U.startDate).toISOString():void 0,endDate:U.endDate?Object(m.localeMoment)(U.endDate).toISOString():void 0,comment:U.comment,customFields:e})},ee=function(){V({type:"setIsFormAdvancedSettings",isFormAdvancedSettings:!1})};return Object(h.jsxs)(x,{confirmButtonLabel:p("submit"),cancelButtonLabel:p("back"),currentStepNumber:D,isOpened:n,isLoading:t,isButtonLineDisplayed:1!==D,maxHeight:"95vh",onCancel:function(){1!==D&&V({type:"setCurrentStep",currentStep:"undefined"===typeof Q?D-1:1})},onClose:function(){V({type:"reset"}),i()},onConfirm:X,stepElements:J,title:p("add_a_something",{object:p("a_training",1)}),width:596,children:[1===D&&Object(h.jsx)(M,{onCreateNewTraining:function(e){V({type:"setManuallyCreatedTrainingLabel",manuallyCreatedTrainingLabel:e})},onSelectTrainingFromListOrSelector:function(e){var t=e.trainingId,n=e.trainingName;V({type:"setTrainingTag",trainingTag:{id:t,name:n,kind:"trainingTag"}}),X()},skill:W,smartSearchedTrainings:H,users:G}),2===D&&Object(h.jsx)(B,{trainingId:null===N||void 0===N?void 0:N.id}),3===D&&Object(h.jsx)(q,{isFormAdvancedSettings:z,form:U,onChange:function(e){var t=e.field,n=e.value;V({type:"setForm",field:t,value:n})},onCustomFieldsChange:function(e){V({type:"setCustomFields",customField:e})},onDatesChange:function(e){var t=e.startDate,n=e.endDate;V({type:"setDates",startDate:t,endDate:n})},onFreeTrainingNameChange:function(e){V({type:"setManuallyCreatedTrainingLabel",manuallyCreatedTrainingLabel:e})},toggleIsFormAdvancedSettings:function(){V({type:"setIsFormAdvancedSettings",isFormAdvancedSettings:!0})},trainingTag:N,users:G})]})},X=n(935),$=n(786),ee=n(752),te=n(905),ne=n(909),ie=function(e){var t=e.userId,n=e.myUserId,i=e.skillId,r=e.isSkillPowered,a=e.isAppetence,o=e.isRecommendedByMe,c=e.recommendationsCount,b=e.capabilities,p=e.onCreatePower,j=e.isCreatingPower,f=e.onDeletePower,O=e.onChangeIsAppetence,m=e.isChangingAppetence,g=e.onChangeIsRecommendedByMe,v=e.isChangingRecommendation,x=e.closePanel,y=Object(F.h)(),w=Object(u.useGetUserBasicInfosQuery)({variables:{id:t},fetchPolicy:"cache-first",nextFetchPolicy:"cache-only"}),k=w.data,C=w.loading,S=Object(u.useGetSkillBasicInfosQuery)({variables:{id:i},fetchPolicy:"cache-first",nextFetchPolicy:"cache-only"}),I=S.data,T=S.loading,_=Object(l.useMemo)((function(){return(null===k||void 0===k?void 0:k.user)?Object(u.getFormatedUserBasicFragment)(k.user):void 0}),[k]),L=Object(l.useMemo)((function(){var e=null===I||void 0===I?void 0:I.skill;if(e)return Object(s.a)(Object(s.a)({},Object(u.getFormatedSkillBasicFragment)(e)),{},{isPowerable:e.isPowerable})}),[I]),P=Object(l.useMemo)((function(){if("undefined"!==typeof L)return Object(s.a)(Object(s.a)({},b),{},{canSetPower:L.isPowerable})}),[b,L]),E=!C&&_?Object(h.jsx)(R.UserBasicInfo,{user:_,size:"big"}):Object(h.jsx)($.b,{}),M=!T&&L?Object(h.jsx)(te.a,{name:L.name,logo:L.logo,color:L.color,mr:1}):Object(h.jsx)($.b,{}),A="undefined"!==typeof P?Object(h.jsx)(ne.a,{capabilities:P,isSkillPowered:r,userId:t,myUserId:n,skillId:i,onCreatePower:p,isCreatingPower:j,onDeletePower:f,isAppetence:a,isRecommendedByMe:o,recommendationsCount:c,onChangeIsAppetence:O,isChangingAppetence:m,onChangeIsRecommendedByMe:g,isChangingRecommendation:v}):Object(h.jsx)($.b,{});return Object(h.jsxs)(d.Box,{children:[Object(h.jsxs)(d.DesktopOrTablet,{children:[Object(h.jsx)(d.Line,{width:"100%",my:1,px:3,children:E}),Object(h.jsxs)(d.Line,{justifyContent:"space-between",my:1,px:3,children:[M,A]})]}),Object(h.jsxs)(d.Mobile,{children:[Object(h.jsx)(d.Box,{width:"100%",px:2,style:{borderBottom:"1px solid ".concat(y.colors.grey[1])},children:Object(h.jsxs)(d.Line,{py:0,justifyContent:"space-between",children:[Object(h.jsx)(d.ClickableIcon,{icon:ee.a,onClick:x}),A]})}),Object(h.jsx)(d.Line,{width:"100%",mt:0,py:0,px:2,children:E}),Object(h.jsx)(d.Line,{py:0,mb:0,px:2,children:M})]})]})},re=["capabilities","powerDescription","onUpdateSkillDescription","isPower"],ae=function(e){var t=e.capabilities,n=e.powerDescription,i=void 0===n?"":n,r=e.onUpdateSkillDescription,a=e.isPower,o=Object(g.a)(e,re),c=Object(d.useTranslate)({capitalize:!0});return a&&(t.canUpdateDetails||i)?Object(h.jsx)(d.Box,Object(s.a)(Object(s.a)({},o),{},{children:Object(h.jsx)(d.TextEditableCancelable,{placeholder:"".concat(c("add_a_description"),"..."),onSubmit:r,initialText:i,isReadOnly:!t.canUpdateDetails,width:"100%",fontSize:"small",fixedHeight:!1,rows:5,mb:3})})):null},oe=["title","titleId"];function ce(){return(ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function se(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function le(e,t){var n=e.title,r=e.titleId,a=se(e,oe);return l.createElement("svg",ce({id:"Icon",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 24 24",style:{enableBackground:"new 0 0 24 24"},xmlSpace:"preserve",ref:t,"aria-labelledby":r},a),n?l.createElement("title",{id:r},n):null,i||(i=l.createElement("path",{d:"M21.5,2.1L6.9,4.9C6.7,5,6.6,5.2,6.7,5.4l4.2,4.2l-8.7,8.7c-0.1,0.1-0.1,0.3,0,0.4l3,3c0.1,0.1,0.3,0.1,0.4,0l8.7-8.7 l4.2,4.2c0.2,0.2,0.5,0.1,0.5-0.2l2.8-14.6C21.9,2.2,21.8,2.1,21.5,2.1z"})))}var de,ue,be=l.forwardRef(le),pe=(n.p,n(749)),je=["isActionDisabled","initialIsUpgrade","initialDescription","onSubmit"],fe=["isDisabled","icon","rightElement","isChecked"],Oe=["initialValue","onSubmitDescription","readOnly"],me=Object(k.default)(d.Box)((function(e){var t=e.theme;if(e.isReadOnly)return{border:"1px solid ".concat(t.colors.success[1]),borderTopColor:"transparent"}}),(function(e){var t=e.theme;if(!e.isReadOnly)return{background:t.colors.primary[0]}})),ge=function(e,t){switch(t.type){case"setIsUpgrade":return Object(s.a)(Object(s.a)({},e),{},{isReadOnly:!1,isUpgrade:!0});case"setReadOnly":return Object(s.a)(Object(s.a)({},e),{},{isReadOnly:t.isReadOnly});case"updateDescription":return Object(s.a)(Object(s.a)({},e),{},{description:t.description});case"cancel":return Object(s.a)(Object(s.a)({},e),{},{isReadOnly:!0,isUpgrade:!1});default:return e}},he=function(e){return{isUpgrade:e.initialIsUpgrade,description:e.initialDescription,isReadOnly:!0}},ve=Object(k.default)(d.Line)((function(e){var t=e.isDisabled,n=e.theme;return{cursor:t?"default":"pointer",padding:"".concat(n.space[1],"px"),borderRadius:0,borderWidth:2,borderStyle:"solid",display:"flex",justifyContent:"space-between",height:50}}),(function(e){var t=e.theme;if(e.isChecked)return{borderColor:"transparent",background:t.colors.success[3],":hover":{background:t.colors.success[3]}}}),(function(e){var t=e.theme;if(!e.isChecked)return{borderColor:t.colors.success[2],background:"white",":hover":{background:t.colors.success[1]}}})),xe=function(e){var t=e.isDisabled,n=e.icon,i=e.rightElement,r=e.isChecked,a=Object(g.a)(e,fe);return Object(h.jsxs)(ve,Object(s.a)(Object(s.a)({isChecked:r,isDisabled:t},a),{},{children:[Object(h.jsxs)(d.Line,{children:[n&&Object(h.jsx)(d.Icon,{as:n,size:20,mr:1}),Object(h.jsx)(d.Text,{textTransform:"uppercase",fontWeight:"semiBold",children:a.children})]}),Object(h.jsx)(d.Box,{justifySelf:"flex-end",children:i})]}))},ye=function(e){var t=e.initialValue,n=e.onSubmitDescription,i=e.readOnly,r=Object(g.a)(e,Oe),a=Object(d.useTranslate)({capitalize:!0}),o=Object(l.useState)(t),u=Object(c.a)(o,2),b=u[0],p=u[1];return Object(h.jsxs)(d.Column,Object(s.a)(Object(s.a)({width:"100%"},r),{},{children:[Object(h.jsx)(d.Line,{width:"100%",children:Object(h.jsx)(d.Label,{content:a("description"),tooltip:"",name:"description",width:"100%",children:i?Object(h.jsx)(d.Text,{children:b}):Object(h.jsx)(d.TextArea,{placeholder:a("description"),value:b,onChange:p,width:"100%"})})}),!i&&Object(h.jsx)(d.Line,{justifyContent:"flex-end",width:"100%",mt:20,children:Object(h.jsx)(d.Button,{onClick:function(){n(b)},children:a("submit")})})]}))},we=function(e){var t=e.isActionDisabled,n=e.initialIsUpgrade,i=e.initialDescription,r=e.onSubmit,a=Object(g.a)(e,je),o=Object(F.h)(),u=Object(d.useTranslate)(),b=Object(l.useReducer)(ge,{initialIsUpgrade:n,initialDescription:i},he),p=Object(c.a)(b,2),j=p[0],f=j.isReadOnly,O=j.isUpgrade,m=j.description,v=p[1],x=Object(d.useSwitch)(!1),y=x.active,w=x.on,k=x.off;return Object(h.jsxs)(d.Column,Object(s.a)(Object(s.a)({},a),{},{children:[Object(h.jsx)(xe,{icon:be,isChecked:O,isDisabled:t,onClick:t?void 0:function(){O||v({type:"setIsUpgrade"})},width:"100%",rightElement:O&&!t&&Object(h.jsxs)(d.MenuSelect.Target,{zIndex:o.zIndexes.MODAL_POPOVER,children:[Object(h.jsx)(d.IconButton,{iconAs:pe.a,onClick:w,isActive:y}),Object(h.jsxs)(d.MenuSelect,{onClose:k,isOpened:y,children:[n&&Object(h.jsx)(d.MenuOption,{onClick:function(){k(),v({type:"setReadOnly",isReadOnly:!1})},children:u("edit")}),Object(h.jsx)(d.MenuOption,{onClick:function(){k(),!0===n&&!0===O?r({isUpgrade:!1}):v({type:"cancel"})},children:u("delete")})]})]}),children:u(O?"skill_type_upgrade_label":"set_an_improvement_goal")}),O&&(!f||f&&"undefined"!==typeof m&&m.length>0)&&Object(h.jsx)(me,{isReadOnly:f,width:"100%",children:Object(h.jsx)(ye,{readOnly:f,initialValue:m,onSubmitDescription:function(e){v({type:"setReadOnly",isReadOnly:!0}),r({isUpgrade:O,description:e})},p:20})})]}))},ke=function(e){var t=Object.assign({},e);return Object(h.jsx)(d.Line,Object(s.a)(Object(s.a)({},t),{},{width:"100%",py:1,justifyContent:"space-between",children:t.children}))},Ce=function(e){var t=Object.assign({},e);return Object(h.jsx)(d.Line,Object(s.a)(Object(s.a)({mt:2,width:"100%",justifyContent:"flex-end"},t),{},{children:t.children}))},Se=["onSubmit","onCancel","valuedQualifiers"],Ie=Object(k.default)("input")((function(){return{width:1,height:1,position:"absolute",display:"none"}})),Te=function(e){var t=e.onSubmit,n=e.onCancel,i=e.valuedQualifiers,r=Object(g.a)(e,Se),u=Object(F.h)(),b=Object(d.useTranslate)({capitalize:!0}),p=Object(l.useRef)(null),f=Object(l.useState)(!1),O=Object(c.a)(f,2),m=O[0],v=O[1],x=Object(l.useState)(""),y=Object(c.a)(x,2),w=y[0],k=y[1],C=Object(l.useState)(i.reduce((function(e,t){return Object(s.a)(Object(s.a)({},e),{},Object(j.a)({},t.id,t.value))}),{})),S=Object(c.a)(C,2),I=S[0],T=S[1],_=Object(R.useUploadFile)(),L=_.uploadFile,P=_.isUploadingFile,E=_.fileUrl,M=i.map((function(e){var t=Object(s.a)({},e);return delete t.value,t})),A=function(){var e=Object(o.a)(a.a.mark((function e(){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object.entries(I).map((function(e){var t=Object(c.a)(e,2);return{id:t[0],value:t[1]}})).filter((function(e){return"undefined"!==typeof e.value})),v(!0),e.next=4,t({qualifiers:n,description:w,attachment:"string"===typeof E?{url:E}:void 0});case 4:v(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"undefined"!==typeof(i=null===(n=t.target.files)||void 0===n?void 0:n[0])&&"undefined"!==typeof L&&L(i);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(d.Box,Object(s.a)(Object(s.a)({},r),{},{children:[Object(h.jsxs)(d.Box,{position:"relative",mb:2,children:[Object(h.jsx)(Ie,{type:"file",ref:p,onChange:B}),M.map((function(e){return Object(h.jsx)(ke,{children:Object(h.jsx)(R.QualifierEditable,{qualifier:e,value:I[e.id],onChange:(t=e.id,function(e){T((function(n){return Object(s.a)(Object(s.a)({},n),{},Object(j.a)({},t,e))}))}),zIndex:u.zIndexes.MODAL_POPOVER})},e.id);var t})),Object(h.jsx)(ke,{children:Object(h.jsx)(d.Label,{content:b("comment"),tooltip:"",name:"description",width:"100%",children:Object(h.jsx)(d.TextArea,{placeholder:b("leave_a_comment"),value:w,onChange:k,width:"100%"})})})]}),"string"===typeof E&&Object(h.jsx)(d.Box,{width:"100%",children:Object(h.jsx)(d.FileName,{isLink:!1,fontSize:"small",url:E})}),Object(h.jsxs)(d.Line,{flexWrap:"wrap",children:[Object(h.jsx)(d.Box,{children:Object(h.jsx)(d.Button,{onClick:function(){p.current&&p.current.click()},appearance:"clean",isLoading:P,mt:20,children:b("add_a_something",{object:b("a_document").toLowerCase()})})}),Object(h.jsxs)(Ce,{children:[Object(h.jsx)(d.Button,{accent:"grey",appearance:"clean",mr:2,onClick:n,children:b("cancel")}),Object(h.jsx)(d.Button,{accent:"primary",appearance:"outline",ml:2,onClick:A,isLoading:m,children:b("submit")})]})]})]}))},_e=n(15),Le=["title","titleId"];function Pe(){return(Pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function Re(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ee(e,t){var n=e.title,i=e.titleId,r=Re(e,Le);return l.createElement("svg",Pe({viewBox:"0 0 36 37",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},r),n?l.createElement("title",{id:i},n):null,de||(de=l.createElement("path",{d:"M35.0644 18.5026C34.0076 17.4436 33.7056 15.7795 34.4605 14.418C34.9134 13.5103 35.0644 12.3 34.6115 11.241C34.1585 10.1821 33.2527 9.57694 32.1958 9.27437C30.6861 8.97181 29.6292 7.61027 29.4783 6.09744C29.3273 5.03847 28.7234 3.97949 27.8175 3.37436C26.9116 2.76923 25.7038 2.61795 24.798 3.0718C23.2882 3.52565 21.7784 3.0718 20.8726 1.86154C20.1177 0.953847 19.0608 0.5 18.004 0.5C16.9472 0.5 15.8903 0.953847 15.2864 1.86154C14.2296 3.0718 12.7198 3.52565 11.21 3.0718C10.1532 2.76923 9.09636 2.76923 8.1905 3.37436C7.28464 3.97949 6.68073 4.88719 6.52976 6.09744C6.37878 7.61027 5.32194 8.97181 3.81217 9.27437C2.75533 9.42565 1.84947 10.1821 1.39654 11.241C0.943606 12.1487 0.943606 13.359 1.54751 14.2667C2.3024 15.6282 2.00045 17.2923 0.943606 18.3513C0.188721 19.1077 -0.113233 20.1667 0.0377443 21.377C0.188721 22.4359 0.792629 23.3436 1.84947 23.9488C3.05728 24.7052 3.66119 26.218 3.35924 27.7308C3.20826 28.7898 3.35924 29.8488 4.11412 30.7565C4.86901 31.5129 5.92585 31.9667 6.98269 31.9667C8.49246 31.8154 10.0022 32.7231 10.4552 34.2359C10.9081 35.2949 11.663 36.0513 12.7198 36.3539C13.7767 36.6565 14.8335 36.5052 15.7394 35.7488C16.9472 34.8411 18.6079 34.8411 19.9667 35.7488C20.8726 36.3539 21.9294 36.6565 22.9862 36.3539C24.0431 36.0513 24.9489 35.2949 25.2509 34.2359C25.8548 32.8744 27.2136 31.8154 28.7234 31.9667C29.7802 31.9667 30.837 31.6641 31.5919 30.7565C32.3468 30 32.6488 28.7898 32.3468 27.7308C32.0449 26.218 32.7998 24.7052 34.0076 23.9488C34.9134 23.3436 35.6683 22.4359 35.8193 21.377C36.2722 20.318 35.8193 19.259 35.0644 18.5026Z"})),ue||(ue=l.createElement("path",{d:"M22.8332 12.8999L16.25 19.7176L13.1668 16.7642L11 18.9548L16.25 24.0999L25 15.0894L22.8332 12.8999Z",fill:"white"})))}var Me,Ae,Be=l.forwardRef(Ee),Fe=(n.p,n(897)),De=["onEdit","capabilities","showEditButton","valuedQualifiers","onValidateQualifier"],Ue=["value","isValidated"],ze=Object(k.default)(d.Icon)((function(e){return{cursor:e.onClick?"pointer":"initial"}})),Qe=function(e){var t,n=e.onEdit,i=e.capabilities,r=e.showEditButton,a=e.valuedQualifiers,o=e.onValidateQualifier,u=Object(g.a)(e,De),p=Object(d.useTranslate)({capitalize:!0}),j=Object(b.useAppContext)().user,f=Object(_e.useParams)().userId,O=Object(d.useSwitch)(),m=O.on,v=O.off,x=O.active,y=Object(l.useState)(),w=Object(c.a)(y,2),k=w[0],C=w[1],S=Object(l.useMemo)((function(){return(null===j||void 0===j?void 0:j.id)===f}),[f]),I=a.map((function(e){return{value:e.value,isValidated:e.isValidated,qualifier:Object(g.a)(e,Ue)}}));return Object(h.jsxs)(d.Column,Object(s.a)(Object(s.a)({},u),{},{children:[Object(h.jsxs)(d.Column,{width:"100%",children:[I.map((function(e){return Object(h.jsxs)(ke,{children:[Object(h.jsx)(R.Qualifier,{qualifier:e.qualifier,value:e.value}),"undefined"!==typeof e.value&&Object(h.jsx)(d.Line,{justifyContent:"flex-end",children:e.isValidated?Object(h.jsx)(d.Tooltip,{position:"left",title:p("review_validated"),children:Object(h.jsx)(ze,{as:Be,color:"success.4",size:36,ml:0})}):Object(h.jsx)(d.Tooltip,{position:"left",title:!S&&i.canReview?p("validate_qualifier_action"):p("review_not_validated"),children:Object(h.jsx)(ze,{as:Be,color:"grey.4",size:36,ml:0,onClick:!S&&i.canReview?function(){return function(e){C(e),m()}(e)}:void 0})})})]},e.qualifier.id)})),k&&Object(h.jsx)(Fe.a,{isOpened:x,onConfirm:(t=k.qualifier.id,function(){o(t),v()}),onClose:v,qualifier:k.qualifier,value:k.value})]}),r&&Object(h.jsx)(Ce,{children:Object(h.jsx)(d.Button,{onClick:n,children:p("evaluate_action")})})]}))},Ne=["capabilities","onCreateReview","isEditable","isPower","valuedQualifiers","onValidateQualifier"],qe=function(e){var t=e.capabilities,n=e.onCreateReview,i=e.isEditable,r=(e.isPower,e.valuedQualifiers),u=e.onValidateQualifier,b=Object(g.a)(e,Ne),p=Object(l.useState)(!0),j=Object(c.a)(p,2),f=j[0],O=j[1],m=Object(d.useTranslate)({capitalize:!0}),v=function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:O(!0);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return"undefined"!==typeof r&&0===r.length?null:"undefined"===typeof r?Object(h.jsx)(d.Loader,{}):Object(h.jsx)(d.Box,Object(s.a)(Object(s.a)({},b),{},{children:f?Object(h.jsx)($.d,{title:m("evaluation_title"),children:Object(h.jsx)(Qe,{onEdit:function(){O(!1)},capabilities:t,showEditButton:i,valuedQualifiers:r,onValidateQualifier:u})}):Object(h.jsx)($.d,{title:m("evaluation_title"),bg:"primary.0",p:2,children:Object(h.jsx)(Te,{onSubmit:v,onCancel:function(){O(!0)},valuedQualifiers:r})})}))},Ve={isAppetence:!1,recommendations:{isRecommendedByMe:!1,recommendationsCount:0},powerValuedQualifierFields:{}},Ge=function(e){if(e)return{id:e.id,capabilities:{canReadReviews:e.capabilities.canReadReviews,canReview:e.capabilities.canReview,canUpdate:e.capabilities.canUpdate,canRecommend:e.capabilities.canRecommend,canDelete:e.capabilities.canDelete,canSetAppetence:e.capabilities.canSetAppetence,canSetGoal:e.capabilities.canSetGoal,canUpdateDetails:e.capabilities.canUpdateDetails},description:Object(u.maybeToOptional)(e.description),isUpgrade:"upgrade"===(null===e||void 0===e?void 0:e.type),upgradeDescription:Object(u.maybeToOptional)(null===e||void 0===e?void 0:e.upgradeDescription)}},We=function(e){return(null===e||void 0===e?void 0:e.appetence)===u.SkillAppetenceOpinion.Like},He=function(e,t){var n,i;return{isRecommendedByMe:((null===e||void 0===e||null===(n=e.endorsedBy)||void 0===n?void 0:n.nodes)||[]).some((function(e){return e.id===t})),recommendationsCount:(null===e||void 0===e||null===(i=e.endorsedBy)||void 0===i?void 0:i.totalCount)||0}},Ye=function(e,t){return{isAppetence:We(e),power:Ge(e),recommendations:He(e,t),powerValuedQualifierFields:Ze(e)}},Ze=function(e){return((null===e||void 0===e?void 0:e.qualifiers.edges)||[]).reduce((function(e,t){return Object(s.a)(Object(s.a)({},e),{},Object(j.a)({},t.node.id,{value:t.value,isValidated:t.validated}))}),{})},Ke=["getUserPower","getSkillReviewsHistory","GetJobDetails"],Je=function(e){var t=e.skillId,n=e.userId,i=e.currentUserId,r=e.onPowerCreated,a=e.onPowerUpdated,o=e.onPowerDeleted,d=Object(l.useState)(Ve),b=Object(c.a)(d,2),p=b[0],j=p.isAppetence,O=p.powerValuedQualifierFields,m=p.recommendations,g=p.power,h=b[1],v=Object(l.useState)(!1),x=Object(c.a)(v,2),y=x[0],w=(x[1],Object(u.useGetUserPowerLazyQuery)({fetchPolicy:"network-only",nextFetchPolicy:"cache-only"})),k=Object(c.a)(w,2),C=k[0],S=k[1],I=S.data,T=S.loading;Object(l.useEffect)((function(){"undefined"!==typeof n&&"undefined"!==typeof t&&C({variables:{skillId:t,userId:n,isGetSkillRelatedObjects:!0}})}),[n,t]),Object(l.useEffect)((function(){var e,t=null===I||void 0===I||null===(e=I.user)||void 0===e?void 0:e.power;if(t){var n=Ye(t,i);h(n)}}),[I]);var _=Object(u.useGetQualifiersLazyQuery)({fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-only"}),L=Object(c.a)(_,2),P=L[0],R=L[1].data,E=Object(u.useCreateSkillReviewMutation)({refetchQueries:Ke}),M=Object(c.a)(E,2),A=M[0],B=M[1].loading,F=Object(u.useDeletePowerMutation)({refetchQueries:Ke,onCompleted:function(e){var t=e.deletePower.power;o&&t&&o(t.id)}}),D=Object(c.a)(F,1)[0],U=Object(u.useCreateSkillReviewMutation)({refetchQueries:Ke}),z=Object(c.a)(U,1)[0],Q=Object(u.useSetPowerAsImprovementGoalMutation)({refetchQueries:Ke,onCompleted:function(e){var t=e.setPowerAsImprovementGoal.power;if(a&&t){var n="have"===t.type||"upgrade"===t.type?t.type:void 0;a({powerId:t.id,type:n})}}}),N=Object(c.a)(Q,1)[0],q=Object(u.useUnsetPowerAsImprovementGoalMutation)({refetchQueries:Ke,onCompleted:function(e){var t=e.unsetPowerAsImprovementGoal.power;if(a&&t){var n="have"===t.type||"upgrade"===t.type?t.type:void 0;a({powerId:t.id,type:n})}}}),V=Object(c.a)(q,1)[0],G=Object(u.useValidateSkillReviewMutation)({awaitRefetchQueries:!0,refetchQueries:Ke,onCompleted:function(e){var t,n=null===(t=e.validateSkillReview.skillReview)||void 0===t?void 0:t.power;a&&n&&a({powerId:n.id})}}),W=Object(c.a)(G,1)[0],H=Object(u.useAddSkillAppetenceMutation)({refetchQueries:Ke,onCompleted:function(e){var t,n,i=null===(t=e.setSkillAppetence)||void 0===t||null===(n=t.skillReview)||void 0===n?void 0:n.power;a&&i&&a({powerId:i.id})}}),Y=Object(c.a)(H,2),Z=Y[0],K=Y[1].loading,J=Object(u.useRemoveSkillAppetenceMutation)({refetchQueries:Ke,onCompleted:function(e){var t,n,i=null===(t=e.setSkillAppetence)||void 0===t||null===(n=t.skillReview)||void 0===n?void 0:n.power;a&&i&&a({powerId:i.id})}}),X=Object(c.a)(J,2),$=X[0],ee=X[1].loading,te=Object(u.useAddSkillRecommendationMutation)({refetchQueries:Ke}),ne=Object(c.a)(te,2),ie=ne[0],re=ne[1].loading,ae=Object(u.useRemoveSkillRecommendationMutation)({refetchQueries:Ke}),oe=Object(c.a)(ae,2),ce=oe[0],se=oe[1].loading,le=Object(u.useUpdatePowerDescriptionMutation)({refetchQueries:Ke}),de=Object(c.a)(le,1)[0];Object(l.useEffect)((function(){t&&P({variables:{skillId:t}})}),[t]);var ue="string"===typeof(null===g||void 0===g?void 0:g.id),be=Object(l.useMemo)((function(){var e;return Object(f.getSortedQualifiersByPriorityAndByName)(((null===R||void 0===R||null===(e=R.skill)||void 0===e?void 0:e.qualifiers.nodes)||[]).map((function(e){var t,n,i;return Object(s.a)(Object(s.a)({},{id:(i=e).id,name:i.name,description:i.description,fieldType:i.fieldType,comparators:Object(u.maybeToOptional)(i.comparators),fields:i.fields,defaultValue:i.defaultValue,priority:Object(u.maybeToOptional)(i.priority)}),{},{value:null===(t=O[e.id])||void 0===t?void 0:t.value,isValidated:(null===(n=O[e.id])||void 0===n?void 0:n.isValidated)||!1})})))}),[R,O]);return{power:g,skillRelatedObjects:Object(l.useMemo)((function(){var e,t,n=null===I||void 0===I||null===(e=I.user)||void 0===e||null===(t=e.pinnedTrainings)||void 0===t?void 0:t.nodes;if(n)return{trainings:n.map((function(e){return{id:e.id,name:e.name}})),experiences:[],projects:[]}}),[I]),isLoadingPower:y||T,isPower:ue,isAppetence:j,isRecommendedByMe:m.isRecommendedByMe,recommendationsCount:m.recommendationsCount,valuedQualifiers:be,createPower:function(e){var a=e.qualifiers,o=e.description;if(t&&n){var s={userId:n,skillId:t};"undefined"!==typeof a&&a.length>0&&(s.qualifiers=a),"undefined"!==typeof o&&o.trim().length>0&&(s.comment=o),A({variables:s,onCompleted:function(e){var t,n=null===(t=e.createSkillReview.skillReview)||void 0===t?void 0:t.power;if(n){var a=Ye(n,i);h(a),r&&a.power&&r({powerId:a.power.id,qualifiers:Object.entries(a.powerValuedQualifierFields).map((function(e){var t=Object(c.a)(e,2);return{id:t[0],value:t[1].value}}))})}}})}},validateReview:W,createReview:z,setImprovementGoal:function(e){var i=e.isUpgrade,r=e.description;t&&n&&(!0===i?N({variables:{skillId:t,userId:n,upgradeDescription:r}}):V({variables:{skillId:t,userId:n}}))},deletePower:D,addAppetence:Z,removeAppetence:$,addRecommendation:ie,removeRecommendation:ce,updatePowerDescription:de,isCreatingPower:B,isChangingAppetence:K||ee,isChangingRecommendation:re||se,fetchPower:function(){t&&n&&C({variables:{userId:n,skillId:t,isGetSkillRelatedObjects:!0}})}}},Xe=n(104),$e=n(96),et=n(23),tt=n(3),nt=["title","icon","isActive","onSetActive"],it=Object(k.default)(d.Line)((function(e){var t=e.theme;return{borderBottom:"1px solid ".concat(t.colors.grey[1])}})),rt=Object(k.default)(d.Line)((function(){return{borderBottom:"1px solid"}}),(function(e){var t=e.isActive,n=e.theme;return t?{backgroundColor:n.colors.primary[0],borderColor:n.colors.primary[2]}:{borderColor:n.colors.grey[1]}})),at=function(e){var t=e.title,n=e.icon,i=e.isActive,r=e.onSetActive,a=Object(g.a)(e,nt);return Object(h.jsxs)(rt,Object(s.a)(Object(s.a)({p:1,onClick:r,isActive:i},a),{},{children:[n&&Object(h.jsx)(d.Icon,{as:n,mr:1,size:14}),Object(h.jsx)(d.Text,{fontSize:"small",fontWeight:"semiBold",children:Object(et.maj)(t)})]}))},ot=["trainings","projects","experiences","onAddTraining","onAddProject","onAddExperience"],ct=function(e){var t,n=e.trainings,i=e.projects,r=e.experiences,a=e.onAddTraining,o=e.onAddProject,u=e.onAddExperience,p=Object(g.a)(e,ot),j=Object(l.useState)("trainings"),f=Object(c.a)(j,2),O=f[0],m=f[1],v=Object(d.useTranslate)(),x=Object(b.useAppContext)().checkLayout,y=Object(l.useMemo)((function(){return{trainings:{tabTitle:v("num_trainings",n.length),getRoute:function(e){var t=e.id;return tt.b.USER_ORGANIZATION_TRAINING_DETAILS.getRoute({trainingId:t})},addObjectButtonLabel:v("add_a_something",{object:v("a_training",1)}),addObjectButtonOnClick:a,isActive:"trainings"===O,icon:V.a,objectList:n},projects:{tabTitle:v("num_staffing_project",i.length),getRoute:function(e){e.id;return""},addObjectButtonLabel:v("add_a_something",{object:v("a_staffing_project",1)}),addObjectButtonOnClick:o,isActive:"projects"===O,icon:Xe.a,objectList:i},experiences:{tabTitle:v("num_experience",r.length),getRoute:function(e){e.id;return""},addObjectButtonLabel:v("add_a_something",{object:v("a_experience",1)}),addObjectButtonOnClick:u,isActive:"experiences"===O,icon:$e.a,objectList:i}}}),[n,i,r,O]);return x("trainings")?Object(h.jsxs)(d.Box,Object(s.a)(Object(s.a)({},p),{},{children:[Object(h.jsx)(it,{width:"100%",children:Object(h.jsx)(at,{title:y.trainings.tabTitle,isActive:y.trainings.isActive,onSetActive:(t="trainings",function(){m(t)}),icon:y.trainings.icon,width:"100%"})}),Object(h.jsxs)(d.Column,{px:1,py:15,alignItems:"flex-start",children:[y[O].objectList.length>0&&Object(h.jsx)(d.Column,{mb:1,children:y[O].objectList.map((function(e){return Object(h.jsx)(d.Link,{to:y[O].getRoute({id:e.id}),children:e.name},e.id)}))}),"trainings"===O&&Object(h.jsx)(d.TextButton,{onClick:y.trainings.addObjectButtonOnClick,color:"primary",children:Object(et.maj)(y.trainings.addObjectButtonLabel)})]})]})):null},st=n(758),lt=function(e){var t=e.description,n=e.contextDescription,i=e.contextLink;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(d.Text,{fontSize:"small",as:"span",children:t}),"undefined"!==typeof n&&Object(h.jsx)(d.Text,{fontSize:"small",as:"span",children:" ".concat(n," ")}),"undefined"!==typeof i&&("undefined"!==typeof i.to?Object(h.jsx)(d.Link,{fontSize:"small",to:i.to,children:i.label}):Object(h.jsx)(d.Text,{fontSize:"small",fontWeight:"semiBold",color:"grey.6",children:i.label}))]})},dt=["assessor","contextInfos","date","qualifiers","comment","attachmentUrl"],ut=Object(k.default)(d.Icon)((function(){return{"path:last-child":{fill:"black"}}})),bt=function(e){var t=e.assessor,n=e.contextInfos,i=e.date,r=e.qualifiers,a=e.comment,o=e.attachmentUrl,c=Object(g.a)(e,dt),l=Object(d.useTranslate)({capitalize:!0});return Object(h.jsxs)(d.Column,Object(s.a)(Object(s.a)({alignItems:"flex-start",width:"100%"},c),{},{children:[Object(h.jsx)(st.b,{user:t,date:i,children:"undefined"!==typeof n&&Object(h.jsx)(lt,{description:n.description,contextDescription:n.contextDescription,contextLink:n.contextLink})}),"undefined"!==typeof r&&r.length>0&&Object(h.jsx)(d.Column,{alignItems:"flex-start",pl:30,mb:"undefined"!==typeof a?1:"undefined",children:r.map((function(e){return Object(h.jsxs)(d.Line,{children:[Object(h.jsx)(d.Text,{fontWeight:"semiBold",fontSize:"small",mr:1,children:e.name}),Object(h.jsx)(R.QualifierValue,{qualifier:{fieldType:e.fieldType,fields:e.fields},value:e.value,fontSize:"small"}),e.isValidated&&Object(h.jsx)(d.Tooltip,{title:l("validated_qualifier"),children:Object(h.jsx)(ut,{as:Be,size:15,color:"success.2",ml:1})})]},e.id)}))}),"undefined"!==typeof a&&Object(h.jsx)(d.TextWithAutoTooltipOnEllipsis,{tooltipTitle:a,rows:5,pl:30,fontSize:"small",color:"grey.6",mb:"undefined"!==typeof o?1:void 0,children:a}),"undefined"!==typeof o&&Object(h.jsx)(d.FileName,{pl:30,mt:0,fontSize:"small",width:"100%",url:o})]}))},pt=["title","titleId"];function jt(){return(jt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function ft(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ot(e,t){var n=e.title,i=e.titleId,r=ft(e,pt);return l.createElement("svg",jt({id:"Calque_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 24 24",style:{enableBackground:"new 0 0 24 24"},xmlSpace:"preserve",ref:t,"aria-labelledby":i},r),n?l.createElement("title",{id:i},n):null,Me||(Me=l.createElement("style",{type:"text/css"})),Ae||(Ae=l.createElement("path",{d:"M17.6 0.199951C15.3 0.199951 13.3 1.23163 12 3.08864C10.7 1.23163 8.7 0.199951 6.5 0.199951C3.2 0.199951 0 2.36647 0 6.6995C0 10.9294 4.2 15.0561 9.4 20.3176C10.2 21.0398 10.9 21.8651 11.7 22.6904L12 23L12.3 22.6904C13.1 21.8651 13.9 21.1429 14.6 20.3176C19.9 15.0561 24 10.9294 24 6.6995C24 2.36647 20.8 0.199951 17.6 0.199951Z"})))}var mt,gt,ht=l.forwardRef(Ot),vt=(n.p,["appetence","assessor","date"]);!function(e){e.Like="like",e.Dislike="dislike",e.Neutral="neutral"}(gt||(gt={}));var xt,yt,wt,kt=(mt={},Object(j.a)(mt,gt.Like,"review_appetence_liked"),Object(j.a)(mt,gt.Dislike,"review_appetence_disliked"),Object(j.a)(mt,gt.Neutral,"review_appetence_neutral"),mt),Ct=function(e){return e===gt.Like?"error.3":"grey.3"},St=function(e){return e===gt.Like?"error.0":"none"},It=function(e){var t=e.appetence,n=e.assessor,i=e.date,r=Object(g.a)(e,vt),a=Object(d.useTranslate)();return Object(h.jsx)(d.Column,Object(s.a)(Object(s.a)({alignItems:"flex-start",width:"100%"},r),{},{children:Object(h.jsx)(st.b,{user:n,date:i,iconBgColor:St(t),icon:Object(h.jsx)(d.Icon,{as:ht,size:10,color:Ct(t)}),children:"string"===typeof t&&Object(h.jsx)(d.Text,{fontSize:"small",as:"span",children:a(kt[t])})})}))},Tt=["actionType","assessor","date","description"],_t=function(e){var t=e.actionType,n=e.assessor,i=e.date,r=e.description,a=Object(g.a)(e,Tt),o=Object(d.useTranslate)(),c=Object(l.useMemo)((function(){return t===Gt.GoalAdded}),[t]);return Object(h.jsxs)(d.Column,Object(s.a)(Object(s.a)({alignItems:"flex-start",width:"100%"},a),{},{children:[Object(h.jsx)(st.b,{user:n,date:i,iconBgColor:c?"success.2":"none",icon:Object(h.jsx)(d.Icon,{as:be,size:10,color:c?"black.3":"grey.3"}),children:Object(h.jsx)(d.Text,{fontSize:"small",as:"span",children:o(c?"review_goal_added":"review_goal_removed")})}),"string"===typeof r&&""!==r.trim()&&Object(h.jsx)(d.Text,{pl:39,fontSize:"small",color:"grey.6",children:r})]}))},Lt=["assessor","date"],Pt=function(e){var t=e.assessor,n=e.date,i=Object(g.a)(e,Lt),r=Object(d.useTranslate)();return Object(h.jsx)(d.Column,Object(s.a)(Object(s.a)({alignItems:"flex-start",width:"100%"},i),{},{children:Object(h.jsx)(st.b,{user:t,date:n,children:Object(h.jsx)(d.Text,{fontSize:"small",as:"span",children:r("review_skill_deleted")})})}))},Rt=["title","titleId"];function Et(){return(Et=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function Mt(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function At(e,t){var n=e.title,i=e.titleId,r=Mt(e,Rt);return l.createElement("svg",Et({viewBox:"0 0 14 16",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},r),n?l.createElement("title",{id:i},n):null,xt||(xt=l.createElement("path",{d:"M6 10.6L3.4 16L2.5 13.5L0 14.4L2.5 9.19995C2.8 9.49995 3.2 9.79995 3.7 9.99995L2.7 12.2L3.6 12.6L4.6 10.4C5 10.5 5.5 10.6 6 10.6Z"})),yt||(yt=l.createElement("path",{d:"M14 14.4L11.4 13.5L10.6 16L8 10.6C8.5 10.6 9 10.5 9.4 10.4L10.5 12.6L11.4 12.2L10.4 10.1C10.8 9.90005 11.2 9.60005 11.6 9.30005L14 14.4Z"})),wt||(wt=l.createElement("path",{d:"M7 0C4.2 0 2 2.3 2 5C2 7.8 4.2 10 7 10C9.8 10 12 7.7 12 5C12 2.2 9.8 0 7 0ZM8.6 7.5L7 6.6L5.4 7.5L5.6 5.8L4.3 4.4L6.1 4.2L7 2.5L7.9 4.2L9.7 4.4L8.3 5.7L8.6 7.5Z"})))}var Bt,Ft,Dt,Ut,zt=l.forwardRef(At),Qt=(n.p,["title","titleId"]);function Nt(){return(Nt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function qt(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Vt(e,t){var n=e.title,i=e.titleId,r=qt(e,Qt);return l.createElement("svg",Nt({viewBox:"0 0 14 16",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},r),n?l.createElement("title",{id:i},n):null,Bt||(Bt=l.createElement("path",{d:"M7 10C4.2 10 2 7.8 2 5C2 2.3 4.2 0 7 0C9.8 0 12 2.2 12 5C12 7.7 9.8 10 7 10ZM7 1.2C4.9 1.2 3.2 2.9 3.2 5C3.2 7.1 4.9 8.8 7 8.8C9.1 8.8 10.8 7.1 10.8 5C10.8 2.9 9.1 1.2 7 1.2Z"})),Ft||(Ft=l.createElement("path",{d:"M8.2001 5.70005L9.4001 4.50005L7.8001 4.30005L7.0001 2.80005L6.2001 4.30005L4.6001 4.50005L5.8001 5.70005L5.6001 7.20005L7.0001 6.50005L8.4001 7.20005L8.2001 5.70005Z"})),Dt||(Dt=l.createElement("path",{d:"M6 10.6L3.4 16L2.5 13.5L0 14.4L2.5 9.19995C2.8 9.49995 3.2 9.79995 3.7 9.99995L2.7 12.2L3.6 12.6L4.6 10.4C5 10.5 5.5 10.6 6 10.6Z"})),Ut||(Ut=l.createElement("path",{d:"M14 14.4L11.4 13.5L10.6 16L8 10.6C8.5 10.6 9 10.5 9.4 10.4L10.5 12.6L11.4 12.2L10.4 10.1C10.8 9.90005 11.2 9.60005 11.6 9.30005L14 14.4Z"})))}var Gt,Wt=l.forwardRef(Vt),Ht=(n.p,["actionType","assessor","date"]),Yt=function(e){var t=e.actionType,n=e.assessor,i=e.date,r=Object(g.a)(e,Ht),a=Object(d.useTranslate)(),o=Object(l.useMemo)((function(){return t===Gt.EndorsementAdded}),[t]);return Object(h.jsx)(d.Column,Object(s.a)(Object(s.a)({alignItems:"flex-start",width:"100%"},r),{},{children:Object(h.jsx)(st.b,{user:n,date:i,iconBgColor:o?"primary.1":"none",icon:Object(h.jsx)(d.Icon,{as:o?zt:Wt,size:10,color:o?"primary.3":"black.2"}),children:Object(h.jsx)(d.Text,{fontSize:"small",as:"span",children:a(o?"review_recommendation_added":"review_recommendation_removed")})})}))},Zt=["assessor","date","description"],Kt=function(e){var t=e.assessor,n=e.date,i=e.description,r=void 0===i?"":i,a=Object(g.a)(e,Zt),o=Object(d.useTranslate)();return Object(h.jsxs)(d.Column,Object(s.a)(Object(s.a)({alignItems:"flex-start",width:"100%"},a),{},{children:[Object(h.jsx)(st.b,{user:t,date:n,children:Object(h.jsx)(d.Text,{fontSize:"small",as:"span",children:o("review_skill_details_updated")})}),Object(h.jsx)(d.TextWithAutoTooltipOnEllipsis,{rows:5,tooltipTitle:r,pl:30,fontSize:"small",color:"grey.6",mb:1,children:r})]}))},Jt=["actionType","appetence","assessedUserId","assessor","comment","context","date","description","qualifiers","attachmentUrl"];!function(e){e.SkillSuggested="skillSuggested",e.SkillAdded="skillAdded",e.SkillDeleted="skillDeleted",e.SkillAssessed="skillAssessed",e.AppetenceUpdated="appetenceUpdated",e.DetailsUpdated="detailsUpdated",e.GoalAdded="goalAdded",e.GoalClosed="goalClosed",e.EndorsementAdded="endorsementAdded",e.EndorsementDeleted="endorsementDeleted"}(Gt||(Gt={}));var Xt=function(e){var t=e.actionType,n=e.appetence,i=e.assessedUserId,r=e.assessor,a=e.comment,o=e.context,c=e.date,l=e.description,u=e.qualifiers,b=e.attachmentUrl,p=Object(g.a)(e,Jt),j=function(e){var t=e.context,n=e.actionType,i=e.assessedUserId,r=Object(d.useTranslate)();if("assessment"===(null===t||void 0===t?void 0:t.type)){var a={description:r("has_reviewed_the_skill"),contextLink:{label:t.assessment.name||t.assessment.id,to:tt.b.USER_PROFILE_ASSESSMENT.getRoute({userId:i,assessmentId:t.assessment.id})}};return!0===t.isFinalResult?Object(s.a)(Object(s.a)({},a),{},{contextDescription:r("as_a_result_of_assessment")}):Object(s.a)(Object(s.a)({},a),{},{contextDescription:r("review_in_context_of")})}var o={description:r("skillAdded"===n?"has_added_the_skill":"has_reviewed_the_skill")};return(null===t||void 0===t?void 0:t.sourceTitle)&&(o.contextDescription=r("review_in_context_of"),o.contextLink={label:t.sourceTitle,to:t.sourceUrl}),o}({context:o,actionType:t,assessedUserId:i});switch(t){case Gt.SkillDeleted:return Object(h.jsx)(Pt,Object(s.a)({assessor:r,date:c},p));case Gt.EndorsementAdded:case Gt.EndorsementDeleted:return Object(h.jsx)(Yt,Object(s.a)({actionType:t,assessor:r,date:c},p));case Gt.GoalAdded:case Gt.GoalClosed:return Object(h.jsx)(_t,Object(s.a)({assessor:r,date:c,actionType:t,description:l},p));case Gt.AppetenceUpdated:return Object(h.jsx)(It,Object(s.a)({assessor:r,date:c,appetence:n},p));case Gt.DetailsUpdated:return Object(h.jsx)(Kt,{assessor:r,date:c,description:l});default:return Object(h.jsx)(bt,Object(s.a)({assessor:r,qualifiers:u,date:c,contextInfos:j,comment:a,attachmentUrl:b},p))}},$t=["skillId","userId"],en=function(e){var t=e.skillId,n=e.userId,i=Object(g.a)(e,$t),r=Object(l.useState)(!1),a=Object(c.a)(r,2),o=a[0],b=a[1],p=Object(d.useTranslate)({capitalize:!0}),j=Object(u.useGetSkillReviewsHistoryQuery)({variables:{skillId:t,userId:n},fetchPolicy:"no-cache",nextFetchPolicy:"network-only"}),f=j.data,O=j.loading,v=Object(l.useMemo)((function(){var e,t;if(null===f||void 0===f||null===(e=f.user)||void 0===e||null===(t=e.power)||void 0===t?void 0:t.skillReviews.nodes)return f.user.power.skillReviews.nodes.map((function(e){var t,n={id:e.assessor.id,displayName:e.assessor.displayName,avatarURL:Object(u.maybeToOptional)(e.assessor.avatarURL)};"User"===e.assessor.__typename&&(n.familyName=Object(u.maybeToOptional)(e.assessor.familyName),n.givenName=Object(u.maybeToOptional)(e.assessor.givenName));var i,r=(null===(i=e.context)||void 0===i?void 0:i.type)===u.SkillReviewContextType.Assessment?{type:"assessment",assessment:{id:i.sourceId,name:i.sourceTitle},isFinalResult:!0===i.isFinalResult}:{type:"standard",sourceTitle:Object(u.maybeToOptional)(null===i||void 0===i?void 0:i.sourceTitle),sourceUrl:Object(u.maybeToOptional)(null===i||void 0===i?void 0:i.sourceUrl)};return{assessor:n,appetence:Object(u.maybeToOptional)(e.appetence),actionType:e.actionType,date:e.createdAt,description:Object(u.maybeToOptional)(e.description),attachmentUrl:null===(t=e.attachment)||void 0===t?void 0:t.url,qualifiers:e.qualifiers.edges.map((function(e){return{id:e.node.id,name:e.node.name,fields:e.node.fields||void 0,fieldType:e.node.fieldType,defaultValue:e.node.defaultValue,comparators:Object(u.maybeToOptional)(e.node.comparators),value:e.value,isValidated:e.validated}})),context:r,comment:Object(u.maybeToOptional)(e.comment)}}))}),[f]),x=Object(l.useMemo)((function(){return v&&!o?v.slice(0,3):v}),[v,o]);return O||"undefined"===typeof v||"undefined"===typeof x||0===x.length?null:Object(h.jsx)(st.a,Object(s.a)(Object(s.a)({isExpanded:o,isShowMoreDisplayed:v.length>3&&!o,onClickShowLess:function(){b(!1)},onClickShowMore:function(){b(!0)},title:p("skill_review_history")},i),{},{children:x.map((function(e){return Object(h.jsx)(Xt,{assessedUserId:n,actionType:e.actionType,assessor:e.assessor,qualifiers:e.qualifiers,date:e.date,comment:e.comment,context:e.context,appetence:e.appetence,description:e.description,attachmentUrl:e.attachmentUrl,mb:2},"reviewHistory_".concat(Object(m.localeMoment)(e.date).format("x")))}))}))},tn={userId:void 0,skillId:void 0,isTrainingModalOpened:!1},nn=function(e,t){switch(t.type){case"setUserId":return Object(s.a)(Object(s.a)({},e),{},{userId:t.userId});case"setSkillId":return Object(s.a)(Object(s.a)({},e),{},{skillId:t.skillId});case"openTrainingModal":return Object(s.a)(Object(s.a)({},e),{},{isTrainingModalOpened:!0});case"closeTrainingModal":return Object(s.a)(Object(s.a)({},e),{},{isTrainingModalOpened:!1});case"reset":return Object(s.a)(Object(s.a)({},tn),{},{skillId:e.skillId,userId:e.userId})}},rn=function(e){var t=e.userId,n=e.skillId,i=e.isOpened,r=e.onClose,s=e.onPowerCreated,p=e.onPowerDeleted,j=e.onPowerUpdated,f=e.onChangeSkillId,O=Object(d.useTranslate)(),m=Object(d.useAlert)(),g=Object(d.useResponsive)().isMobile,v=Object(l.useReducer)(nn,tn),x=Object(c.a)(v,2),y=x[0],w=y.userId,k=y.skillId,C=y.isTrainingModalOpened,S=x[1],I=Object(b.useAppContext)(),T=I.getErrorMessage,_=I.topBarHeight,L=I.user.id,P=Je({skillId:k,userId:w,currentUserId:L,onPowerCreated:s,onPowerUpdated:j,onPowerDeleted:p}),R=P.power,E=P.skillRelatedObjects,M=P.isLoadingPower,A=P.isPower,B=P.isAppetence,F=P.isRecommendedByMe,D=P.recommendationsCount,U=P.valuedQualifiers,z=P.createPower,Q=P.createReview,N=P.validateReview,q=P.setImprovementGoal,V=P.deletePower,G=P.addAppetence,W=P.removeAppetence,H=P.addRecommendation,Y=P.removeRecommendation,Z=P.updatePowerDescription,K=P.isCreatingPower,ee=P.isChangingAppetence,te=P.isChangingRecommendation,ne=P.fetchPower,re=Object(u.usePinTrainingMutation)(),oe=Object(c.a)(re,2),ce=oe[0],se=oe[1].loading;Object(l.useEffect)((function(){t&&S({type:"setUserId",userId:t})}),[t]),Object(l.useEffect)((function(){n&&S({type:"setSkillId",skillId:n})}),[n]),Object(l.useEffect)((function(){f&&k&&f(k)}),[k]),Object(l.useEffect)((function(){i&&k&&w&&ne()}),[i,k,w]);var le=function(e){var t=e.description,n=e.qualifiers;k&&w&&z({qualifiers:n,description:t})},de=function(){(null===R||void 0===R?void 0:R.id)&&V({variables:{id:R.id},onCompleted:function(){m.success(O("modification_successful"))},onError:function(e){m.error(T(e)),console.error("Power deletion failed !!!",e)}})},ue=function(e){k&&w&&(e?G({variables:{skillId:k,userId:w},onError:function(e){console.error("Add appetence failed"),m.error(T(e))}}):W({variables:{skillId:k,userId:w},onError:function(e){console.error("Remove appetence failed"),m.error(T(e))}}))},be=function(e){k&&w&&(!0===e?H({variables:{skillId:k,userId:w},onError:function(e){console.error("Add recommendation failed"),m.error(T(e))}}):Y({variables:{skillId:k,userId:w},onError:function(e){console.error("Remove recommendation failed"),m.error(T(e))}}))},pe=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.isUpgrade,i=t.description,(null===R||void 0===R?void 0:R.id)&&q({isUpgrade:n,description:i});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)(d.RightPane.Container,{contentTop:g?0:_,fixed:!0,isOpened:i,isOverlayTransparent:!0,onClose:r,children:Object(h.jsx)(d.RightPane.Content,{bg:"white",height:g?"100%":"calc(100% - ".concat(_,"px)"),width:620,maxWidth:"100%",children:"undefined"!==typeof w&&"undefined"!==typeof k&&(M?Object(h.jsx)($.c,{}):Object(h.jsxs)($.e,{renderHeader:function(){return Object(h.jsx)(ie,{capabilities:R?R.capabilities:{canReadReviews:!0,canReview:!0,canUpdate:!0,canRecommend:!0,canDelete:!0,canSetAppetence:!0,canSetGoal:!0,canUpdateDetails:!0},skillId:k,userId:w,myUserId:L,isSkillPowered:A,isAppetence:B,isRecommendedByMe:F,recommendationsCount:D,onCreatePower:le,isCreatingPower:K,onDeletePower:de,onChangeIsAppetence:ue,isChangingAppetence:ee,onChangeIsRecommendedByMe:be,isChangingRecommendation:te,closePanel:r})},children:["undefined"!==typeof R&&(M?Object(h.jsx)($.a,{}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(ae,{isPower:A,capabilities:R.capabilities,powerDescription:R.description,onUpdateSkillDescription:function(e){w&&k&&Z({variables:{skillId:k,userId:w,description:e},onError:function(e){console.error("Update skill description failed",e),m.error(T(e))}})}}),Object(h.jsx)(qe,{capabilities:R.capabilities,onCreateReview:function(e){var t=e.qualifiers,n=e.description,i=e.attachment;if(w&&k){var r={qualifiers:t,userId:w,skillId:k};"undefined"!==typeof n&&n.length>0&&(r.comment=n),"undefined"!==typeof i&&i.url.length>0&&(r.attachment=i),Q({variables:r,onCompleted:function(){j&&(null===R||void 0===R?void 0:R.id)&&j({powerId:R.id,qualifiers:t})}})}},onValidateQualifier:function(e){if(w&&k&&U){var t,n=null===(t=U.find((function(t){return t.id===e})))||void 0===t?void 0:t.value;if(n)N({variables:{qualifiers:[{id:e,value:n}],userId:w,skillId:k},onError:function(e){console.error("Review validation failed !!",e)}})}},valuedQualifiers:U,isEditable:R.capabilities.canReview,mb:40,isPower:A}),(R.capabilities.canSetGoal||R.isUpgrade)&&Object(h.jsx)(we,{initialIsUpgrade:R.isUpgrade,initialDescription:R.upgradeDescription,onSubmit:pe,isActionDisabled:!R.capabilities.canSetGoal,mb:40},"".concat(R.id,"_").concat(R.isUpgrade,"_").concat(R.upgradeDescription)),"undefined"!==typeof E?Object(h.jsx)(ct,{trainings:E.trainings,projects:E.projects,experiences:E.experiences,onAddTraining:function(){S({type:"openTrainingModal"})},mb:40}):Object(h.jsx)(d.LoaderSkeleton.Line,{width:"100%"})]})),A&&Object(h.jsx)(en,{skillId:k,userId:w,mb:40}),Object(h.jsx)($.d,{title:O("skill_details"),children:Object(h.jsx)(X.a,{skillId:k,userId:w,onChangeSkill:function(e){S({type:"setSkillId",skillId:e})}})}),Object(h.jsx)(J,{isOpened:C,isLoading:se,onClose:function(){S({type:"reset"})},onSubmit:function(e){ce({variables:{input:{userId:e.userId,trainingId:e.trainingId,trainingName:e.trainingName,status:e.status,budgetYear:e.budgetYear,comment:e.comment,deadline:e.deadline,startDate:e.startDate,endDate:e.endDate,customFields:e.customFields}},update:function(){m.success(O("success")),S({type:"closeTrainingModal"}),ne()},onError:function(e){m.error(T(e)),console.error("Training application failed !!!",e)}})},skillId:k,userIds:[w]})]}))})})},an=function(e){var t=e.userId,n=e.skillId;return"undefined"!==typeof t&&"undefined"!==typeof n},on=function(e,t){switch(t.type){case"setIds":return Object(s.a)(Object(s.a)({},e),{},{skillId:t.skillId,userId:t.userId,isOpened:an({userId:t.userId,skillId:t.skillId})});case"setSkillId":return Object(s.a)(Object(s.a)({},e),{},{skillId:t.skillId,isOpened:an({userId:e.userId,skillId:t.skillId})});case"setUserId":return Object(s.a)(Object(s.a)({},e),{},{userId:t.userId,isOpened:an({userId:t.userId,skillId:e.skillId})});case"close":return Object(s.a)(Object(s.a)({},e),{},{isOpened:!1,skillId:void 0});case"open":return Object(s.a)(Object(s.a)({},e),{},{isOpened:an({userId:e.userId,skillId:e.skillId})});default:return e}},cn="skill",sn="user",ln=function(e){var t=Object(l.useReducer)(on,{userId:e.userId,skillId:e.skillId,isOpened:an({userId:e.userId})}),n=Object(c.a)(t,2),i=n[0],r=i.isOpened,a=i.skillId,o=i.userId,s=n[1],d=Object(_e.useHistory)(),u=Object(_e.useLocation)();Object(l.useEffect)((function(){r?d.replace("?".concat(cn,"=").concat(a,"&").concat(sn,"=").concat(o)):d.replace(u.pathname)}),[r,a,o]),Object(l.useEffect)((function(){var e=new URLSearchParams(u.search),t=e.get(cn),n=e.get(sn);t&&n&&(t!==a||n!==o)&&s({type:"setIds",skillId:t,userId:n})}),[u.search]);return{isOpened:r,setUserId:function(e){return s({type:"setUserId",userId:e})},setSkillId:function(e){return s({type:"setSkillId",skillId:e})},setUserAndSkillId:function(e){var t=e.userId,n=e.skillId;return s({type:"setIds",userId:t,skillId:n})},userId:o,skillId:a,open:function(){s({type:"open"})},close:function(){s({type:"close"})}}}},813:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i,r,a,o=n(0),c=["title","titleId"];function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function d(e,t){var n=e.title,d=e.titleId,u=l(e,c);return o.createElement("svg",s({id:"ICON",xmlns:"http://www.w3.org/2000/svg",x:0,y:0,viewBox:"0 0 180 180",xmlSpace:"preserve",ref:t,"aria-labelledby":d},u),n?o.createElement("title",{id:d},n):null,i||(i=o.createElement("style",null,".st0-clock{opacity:.9;enable-background:new}")),r||(r=o.createElement("path",{className:"st0-clock",d:"M90 0C40.3 0 0 40.3 0 90s40.3 90 90 90c49.7-.1 89.9-40.3 90-90 0-49.7-40.3-90-90-90zm0 165c-41.4 0-75-33.6-75-75s33.6-75 75-75 75 33.6 75 75c0 41.5-33.6 75-75 75z"})),a||(a=o.createElement("path",{className:"st0-clock",d:"M140 112.3L97.5 84.2v-41c0-4.1-3.4-7.5-7.5-7.5s-7.5 3.4-7.5 7.5v45c0 2.5 1.3 4.9 3.4 6.3l45.9 30.3c3.5 2.3 8.1 1.3 10.4-2.1 2.2-3.5 1.3-8.1-2.2-10.4z"})))}var u=o.forwardRef(d);n.p},843:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n(0),r=n(14),a=n(63),o=n(32),c=n(23),s=n(37),l=n(760),d=n(747),u=n(1),b=function(e){var t=e.pinnedTrainings,n=Object(r.useTranslate)(),b=Object(i.useMemo)((function(){return"undefined"!==typeof t?t.length>0&&t.length<=5?{displayedPins:t,otherPins:void 0}:{displayedPins:t.slice(0,5),otherPins:t.length-5}:{displayedPins:void 0,otherPins:void 0}}),[t]),p=b.displayedPins,j=b.otherPins;return"undefined"!==typeof p&&p.length>0?Object(u.jsxs)(r.Box,{bg:"alert.0",p:2,width:"100%",children:[Object(u.jsxs)(r.Line,{children:[Object(u.jsx)(a.ReasonCounter,{type:o.ReasonCounterTypeEnum.PARTIAL,mr:1}),Object(u.jsx)(r.Text,{fontSize:"small",fontWeight:"bold",children:Object(c.maj)(n("training_already_assigned_to_this_collaborator"))})]}),Object(u.jsxs)(r.Box,{pb:1,pl:3,ml:12,width:"100%",children:[p.map((function(e,t){return Object(u.jsxs)(r.Line,{display:"flex",flexWrap:"wrap",pt:1,children:[Object(u.jsx)(r.Text,{fontSize:"small",children:Object(c.maj)(n(d.b.get(e.status)))}),"undefined"!==typeof e.updatedAt&&Object(u.jsx)(r.Text,{fontSize:"small",ml:0,children:"- ".concat(Object(s.localeMoment)(e.updatedAt).format("DD MMMM YYYY"))}),"undefined"!==typeof e.updatedBy&&Object(u.jsxs)(r.Line,{ml:0,children:[Object(u.jsx)(r.Text,{fontSize:"small",children:"- ".concat(n("updated_by"))}),Object(u.jsx)(l.b,{avatarRightMargin:0,avatarSize:"small",fontSize:"small",user:e.updatedBy,width:"fit-content"})]})]},"".concat(e.id,"_").concat(t))})),"number"===typeof j&&Object(u.jsx)(r.Text,{fontSize:"small",pt:1,children:"+ ".concat(n("num_other",j))})]})]}):null}},874:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return v}));var i=n(17),r=n(285),a=n(0),o=n(14),c=n(63),s=n(65),l=n(749),d=n(1),u=function(e){var t=e.onDeletePower,n=e.capabilities,i=Object(s.h)().zIndexes,r=Object(o.useSwitch)(!1),a=r.active,c=r.on,u=r.off,b=Object(o.useTranslate)();return Object(d.jsxs)(o.MenuSelect.Target,{zIndex:i.PANEL_POPOVER,children:[Object(d.jsx)(o.IconButton,{iconAs:l.a,onClick:c,isActive:a}),Object(d.jsx)(o.MenuSelect,{onClose:u,isOpened:a,mt:0,children:n.canDelete?Object(d.jsx)(o.MenuOption,{onClick:function(){u(),t()},children:b("delete")}):null})]})},b=["capabilities","isSkillPowered","userId","myUserId","skillId","onCreatePower","isCreatingPower","onDeletePower","isAppetence","isRecommendedByMe","recommendationsCount","onChangeIsAppetence","isChangingAppetence","onChangeIsRecommendedByMe","isChangingRecommendation"],p=function(e){var t=e.capabilities,n=e.isSkillPowered,a=e.userId,s=e.myUserId,l=e.skillId,p=e.onCreatePower,j=e.isCreatingPower,f=e.onDeletePower,O=e.isAppetence,m=e.isRecommendedByMe,g=e.recommendationsCount,h=e.onChangeIsAppetence,v=e.isChangingAppetence,x=e.onChangeIsRecommendedByMe,y=e.isChangingRecommendation,w=Object(r.a)(e,b),k=Object(o.useTranslate)({capitalize:!0});return Object(d.jsxs)(o.Line,Object(i.a)(Object(i.a)({justifyContent:"space-between"},w),{},{children:[Object(d.jsx)(o.Tooltip,{title:k(n?"skill_possess":"add_skill_to_profile"),position:"bottom",children:Object(d.jsx)(c.SkillActionButtons.CreatePowerButton,{isPowered:n,skillId:l,userId:a,onCreatePower:p,isLoading:j,mr:2,disabled:!t.canSetPower})}),t.canSetAppetence?Object(d.jsx)(o.Tooltip,{title:k(O?"delete_appetite_for_the_skill":"add_appetite_for_the_skill"),position:"bottom",children:Object(d.jsx)(c.SkillActionButtons.SkillAppetenceButton,{isAppetence:O,onChange:h,isLoading:v,mr:2})}):Object(d.jsx)(o.Tooltip,{title:k(O?"this_skill_have_appetite":"this_skill_have_no_appetite"),position:"bottom",children:Object(d.jsx)(c.SkillActionButtons.SkillAppetenceButton,{isAppetence:O,mr:2})}),t.canRecommend?Object(d.jsx)(o.Tooltip,{title:k(!0===m?"unrecommend_skill":"recommend_skill"),position:"bottom",children:Object(d.jsx)(c.SkillActionButtons.SkillRecommendationButton,{isRecommended:m,isMe:a===s,recommendationsCount:g,onChange:x,isLoading:y,mr:2})}):Object(d.jsx)(o.Tooltip,{title:k("recommendation",g),position:"bottom",children:Object(d.jsx)(c.SkillActionButtons.SkillRecommendationButton,{isRecommended:m,isMe:a===s,recommendationsCount:g,mr:2})}),Object(d.jsx)(u,{capabilities:t,onDeletePower:f})]}))},j=n(53),f=n(139),O=n.n(f),m=n(286),g=n(19),h=function(e,t){return e.then((function(){if("undefined"!==typeof t)return t().then((function(){}))})).catch((function(e){throw new Error(e)}))},v=function(e){var t=e.skillId,n=e.userId,i=Object(g.useGetUserPowerMetaInfosQuery)({variables:{skillId:t,userId:n,skillIdString:t},fetchPolicy:"cache-first",nextFetchPolicy:"network-only"}),r=i.data,o=i.loading,c=i.refetch,s=function(){var e=Object(m.a)(O.a.mark((function e(){var i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=c({skillId:t,userId:n}))){e.next=3;break}return e.abrupt("return",i.then((function(){})));case 3:return e.abrupt("return");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=Object(g.useCreateSkillReviewMutation)({refetchQueries:g.refetchQueries.onMutatePower}),d=Object(j.a)(l,2),u=d[0],b=d[1].loading,p=Object(g.useDeletePowerMutation)({refetchQueries:g.refetchQueries.onMutatePower}),f=Object(j.a)(p,1)[0],v=Object(g.useAddSkillAppetenceMutation)({refetchQueries:g.refetchQueries.onMutatePower,awaitRefetchQueries:!0}),x=Object(j.a)(v,2),y=x[0],w=x[1].loading,k=Object(g.useRemoveSkillAppetenceMutation)({refetchQueries:g.refetchQueries.onMutatePower,awaitRefetchQueries:!0}),C=Object(j.a)(k,2),S=C[0],I=C[1].loading,T=Object(g.useAddSkillRecommendationMutation)({refetchQueries:g.refetchQueries.onMutatePower,awaitRefetchQueries:!0}),_=Object(j.a)(T,2),L=_[0],P=_[1].loading,R=Object(g.useRemoveSkillRecommendationMutation)({refetchQueries:g.refetchQueries.onMutatePower,awaitRefetchQueries:!0}),E=Object(j.a)(R,2),M=E[0],A=E[1].loading,B=Object(a.useMemo)((function(){var e,t,n=null===r||void 0===r||null===(e=r.user)||void 0===e?void 0:e.power,i=null===r||void 0===r?void 0:r.skill;if("undefined"!==typeof r)return(t=n?{canReadReviews:n.capabilities.canReadReviews,canReview:n.capabilities.canReview,canUpdate:n.capabilities.canUpdate,canRecommend:n.capabilities.canRecommend,canDelete:n.capabilities.canDelete,canSetAppetence:n.capabilities.canSetAppetence}:{canReadReviews:!1,canReview:!1,canUpdate:!1,canRecommend:!1,canDelete:!1,canSetAppetence:!1}).canSetPower=!!i&&i.isPowerable,t}),[r]),F=Object(a.useMemo)((function(){var e,t;return null===r||void 0===r||null===(e=r.user)||void 0===e||null===(t=e.power)||void 0===t?void 0:t.id}),[r]),D=Object(a.useMemo)((function(){return"string"===typeof F}),[F]),U=Object(a.useMemo)((function(){var e,t;return(null===r||void 0===r||null===(e=r.user)||void 0===e||null===(t=e.power)||void 0===t?void 0:t.appetence)===g.SkillAppetenceOpinion.Like}),[r]),z=Object(a.useMemo)((function(){var e,t,n,i;return{isRecommendedByMe:(null===r||void 0===r||null===(e=r.user)||void 0===e||null===(t=e.power)||void 0===t?void 0:t.skillRecommendations.isRecommendedByMe)||!1,recommendationsCount:(null===r||void 0===r||null===(n=r.user)||void 0===n||null===(i=n.power)||void 0===i?void 0:i.skillRecommendations.totalCount)||0}}),[r]),Q=function(){var e=Object(m.a)(O.a.mark((function e(i){var r,a,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.qualifiers,a=i.description,o={userId:n,skillId:t},"undefined"!==typeof r&&r.length>0&&(o.qualifiers=r),"undefined"!==typeof a&&a.trim().length>0&&(o.comment=a),e.abrupt("return",h(u({variables:o}),s));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(m.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F){e.next=2;break}return e.abrupt("return",h(f({variables:{id:F}}),s));case 2:return e.abrupt("return");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(m.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=2;break}return e.abrupt("return",h(y({variables:{skillId:t}}),s));case 2:return e.abrupt("return",h(S({variables:{skillId:t}}),s));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(m.a)(O.a.mark((function e(i){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=2;break}return e.abrupt("return",h(L({variables:{skillId:t,userId:n}}),s));case 2:return e.abrupt("return",h(M({variables:{skillId:t,userId:n}}),s));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{isLoading:o,isCreatingPower:b,isChangingAppetence:w||I,isChaningRecommendation:P||A,capabilities:B,isSkillPowered:D,isAppetence:U,isRecommendedByMe:z.isRecommendedByMe,recommendationsCount:z.recommendationsCount,createPower:Q,deletePower:N,changeIsAppetence:q,changeIsRecommendedByMe:V,refetchUserPowerMetaInfos:s}}},877:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i,r=n(0),a=["title","titleId"];function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function s(e,t){var n=e.title,s=e.titleId,l=c(e,a);return r.createElement("svg",o({id:"Icon",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 24 24",style:{enableBackground:"new 0 0 24 24"},xmlSpace:"preserve",ref:t,"aria-labelledby":s},l),n?r.createElement("title",{id:s},n):null,i||(i=r.createElement("g",null,r.createElement("path",{d:"M19.8,5.4H4.2C3.6,5.4,3,4.8,3,4.2S3.6,3,4.2,3h15.6C20.4,3,21,3.6,21,4.2S20.4,5.4,19.8,5.4z"}),r.createElement("g",null,r.createElement("path",{d:"M19.8,10.6H4.2C3.6,10.6,3,10.1,3,9.4c0-0.6,0.6-1.2,1.2-1.2h15.6c0.6,0,1.2,0.6,1.2,1.2 C21,10.1,20.4,10.6,19.8,10.6z"}),r.createElement("path",{d:"M19.8,15.9H4.2c-0.6,0-1.2-0.6-1.2-1.2s0.6-1.2,1.2-1.2h15.6c0.6,0,1.2,0.6,1.2,1.2S20.4,15.9,19.8,15.9z"})),r.createElement("path",{d:"M12.1,21H4.2C3.6,21,3,20.4,3,19.8c0-0.6,0.6-1.2,1.2-1.2h7.9c0.6,0,1.2,0.6,1.2,1.2 C13.3,20.4,12.7,21,12.1,21z"}))))}var l=r.forwardRef(s);n.p},878:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i,r=n(0),a=["title","titleId"];function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function s(e,t){var n=e.title,s=e.titleId,l=c(e,a);return r.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000",ref:t,"aria-labelledby":s},l),n?r.createElement("title",{id:s},n):null,i||(i=r.createElement("g",{transform:"translate(0,-52.362183)",id:"layer1"},r.createElement("path",{d:"m 572.19245,52.362163 -388.7206,536.364897 277.6553,52.5924 -89.557,411.04274 444.958,-568.80054 -310.9749,-31.5515 z",id:"path4052-5"}))))}var l=r.forwardRef(s);n.p},895:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var i=n(188),r=n(53),a=n(0),o=n(61),c=n(14),s=n(19),l=n(10),d=n(766),u=n(760),b=n(189),p=n(63),j=n(1),f=Object(o.default)(c.Text)((function(){return{padding:0,textDecoration:"underline",":hover":{background:"none"}}})),O=function(e){var t=e.skills,n=Object(c.useTranslate)({capitalize:!0}),i=Object(a.useState)(!1),o=Object(r.a)(i,2),s=o[0],l=o[1],d=Object(a.useState)(0),u=Object(r.a)(d,2),O=u[0],m=u[1],g=Object(a.useRef)(null);Object(a.useEffect)((function(){g.current&&m(g.current.offsetHeight)}),[g]);return Object(j.jsxs)(c.Box,{children:[Object(j.jsx)(c.Box,{as:b.motion.div,overflow:"hidden",variants:{open:{maxHeight:O},close:{maxHeight:110,overflow:"hidden"}},animate:s?"open":"close",children:Object(j.jsx)(c.Box,{ref:g,display:"flex",flexWrap:"wrap",mt:2,children:t.map((function(e){return Object(j.jsx)(p.PowerBrick,{mr:2,mb:2,power:e,width:"45%"},e.skill.id)}))})}),O>110&&Object(j.jsx)(f,{fontWeight:"semiBold",mt:1,onClick:function(){l(!s)},children:n(s?"show_less":"show_more")})]})},m=n(789),g=n(17),h=n(285),v=["title"],x=function(e){var t=e.title,n=Object(h.a)(e,v);return Object(j.jsx)(c.Column,Object(g.a)(Object(g.a)({width:"100%",display:"flex",alignItems:"center"},n),{},{children:Object(j.jsx)(l.NoDataToDisplay,{fontSize:"small",iconMaxHeightAndWidth:150,isText:!1,textMarginTop:1,title:t,textAlign:"center",width:"50%"})}))},y=Object(o.default)(c.Line)((function(e){var t=e.imageUrl;return{backgroundImage:"url(".concat(t,")"),backgroundSize:"cover",backgroundPosition:"50% 50%"}})),w=function(e){var t=e.trainingId,n=Object(c.useTranslate)({capitalize:!0}),o=Object(c.useAlert)(),b=Object(l.useAppContext)(),p=b.customFields,f=b.getErrorMessage,g=Object(s.useGetTrainingDetailsLazyQuery)({variables:{id:t},fetchPolicy:"cache-first",nextFetchPolicy:"cache-only",onError:function(e){return o.error(f(e))}}),h=Object(r.a)(g,2),v=h[0],w=h[1].data;Object(a.useEffect)((function(){"undefined"!==typeof t&&v()}),[t]);var k=Object(a.useMemo)((function(){var e=null===w||void 0===w?void 0:w.training;if(e){var t,n=Object(m.c)(e.pattern||{must:[],should:[]});return{id:e.id,name:e.name,imageUrl:Object(s.maybeToOptional)(null===(t=e.image)||void 0===t?void 0:t.url),isPatternEmpty:e.isPatternEmpty,description:Object(s.maybeToOptional)(e.description),pattern:n,userSuggestion:{comment:Object(s.maybeToOptional)(e.userSuggestion.comment),isNotRelevant:e.userSuggestion.isNotRelevant,isRelevant:e.userSuggestion.isRelevant,score:Object(s.maybeToOptional)(e.userSuggestion.score),status:e.userSuggestion.status,updatedAt:e.userSuggestion.updatedAt},customFields:e.customFields||{},pinnedUsers:(e.pinnedUsers.nodes||[]).map((function(e){return Object(s.getFormatedUserBasicFragment)(e)})),parents:(e.parents.nodes||[]).map((function(e){return{id:e.id,name:e.name}})),subTrainingsCount:e.subTrainings.totalCount,subTrainings:(e.subTrainings.nodes||[]).map((function(e){return{id:e.id,name:e.name,subTrainingsCount:e.subTrainings.totalCount,userSuggestion:{comment:Object(s.maybeToOptional)(e.userSuggestion.comment),isNotRelevant:e.userSuggestion.isNotRelevant,isRelevant:e.userSuggestion.isRelevant,score:Object(s.maybeToOptional)(e.userSuggestion.score),status:e.userSuggestion.status,updatedAt:e.userSuggestion.updatedAt}}})),allSubTrainings:(e.allSubTrainings.nodes||[]).map((function(e){return{id:e.id,name:e.name,description:Object(s.maybeToOptional)(e.description),isPatternEmpty:e.isPatternEmpty,matchingScore:Object(s.maybeToOptional)(e.matching.score)||0,subTrainingsCount:e.subTrainings.totalCount,userSuggestion:{comment:Object(s.maybeToOptional)(e.userSuggestion.comment),isNotRelevant:e.userSuggestion.isNotRelevant,isRelevant:e.userSuggestion.isRelevant,score:Object(s.maybeToOptional)(e.userSuggestion.score),status:e.userSuggestion.status,updatedAt:e.userSuggestion.updatedAt},pattern:{must:Object(m.c)(e.pattern).must,should:Object(m.c)(e.pattern).should}}})),skills:[].concat(Object(i.a)(n.should),Object(i.a)(n.must)).map((function(e){return{skill:(null===e||void 0===e?void 0:e.skill)||null,qualifiers:{edges:e.qualifiers.map((function(e){return{node:e.qualifier,value:e.value}}))}}}))}}}),[w]),C=Object(a.useMemo)((function(){return"undefined"!==typeof(null===k||void 0===k?void 0:k.description)&&k.description.trim().length>0}),[k]),S=Object(a.useMemo)((function(){return"undefined"===typeof(null===k||void 0===k?void 0:k.customFields)||p.trainingFields.some((function(e){return!Object(d.c)(k.customFields,e._key)}))}),[k]);return Object(a.useMemo)((function(){return"undefined"!==typeof k&&"undefined"===typeof k.imageUrl&&!C&&!S&&0===k.skills.length&&0===k.pinnedUsers.length}),[k,C,S])?Object(j.jsx)(x,{title:n("no_details")}):"undefined"!==typeof k?Object(j.jsxs)(c.Column,{alignItems:"flex-start",width:"100%",overflowY:"auto",children:["undefined"!==typeof k.imageUrl&&Object(j.jsx)(y,{imageUrl:k.imageUrl,height:220,mb:0,width:"100%"}),Object(j.jsxs)(c.Box,{children:[C&&Object(j.jsx)(c.Box,{mb:3,children:Object(j.jsx)(c.StringParser,{children:k.description})}),S&&Object(j.jsx)(d.b,{mb:3,customFields:k.customFields,customFieldsConfiguration:p.trainingFields,shouldHideUndefined:!0}),k.skills.length>0&&Object(j.jsxs)(c.Box,{mb:3,children:[Object(j.jsx)(c.Text,{fontSize:"large",fontWeight:"semiBold",children:n("targeted_skills")}),Object(j.jsx)(O,{skills:k.skills})]}),k.pinnedUsers.length>0&&Object(j.jsx)(c.Label,{width:"100%",fontWeight:"bold",mb:3,content:n("they_followed_the_training"),children:Object(j.jsx)(u.a,{users:k.pinnedUsers})})]})]}):Object(j.jsxs)(c.Column,{alignItems:"flex-start",width:"100%",children:[Object(j.jsx)(c.Box,{mb:2,width:"100%",children:Object(j.jsx)(c.LoaderSkeleton.Line,{width:"100%",pb:1})}),Object(j.jsx)(c.Box,{mb:2,width:"100%",children:Object(j.jsx)(c.LoaderSkeleton.Line,{width:"80%",pb:1})}),Object(j.jsx)(c.Box,{width:"100%",children:Object(j.jsx)(c.LoaderSkeleton.Line,{width:"90%",pb:1})})]})}},896:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return p})),n.d(t,"d",(function(){return g})),n.d(t,"c",(function(){return x}));var i=n(17),r=n(285),a=n(0),o=n(14),c=n(1),s=["icon","label","color"],l=function(e){var t=e.icon,n=e.label,a=e.color,l=Object(r.a)(e,s);return Object(c.jsxs)(o.Line,Object(i.a)(Object(i.a)({},l),{},{children:[Object(c.jsx)(o.Icon,{as:t,mr:1,size:16,color:a}),Object(c.jsx)(o.Text,{color:a,fontWeight:"semiBold",children:n})]}))},d=n(61),u=Object(d.default)(o.Text)((function(e){var t=e.isEnabled;return{padding:0,textDecoration:void 0!==t&&t?"underline":"none",":hover":{background:"none"}}})),b=["isEnabled","color","to","children"],p=function(e){var t=e.isEnabled,n=void 0===t||t,a=e.color,o=e.to,s=e.children,l=Object(r.a)(e,b);return Object(c.jsx)(u,Object(i.a)(Object(i.a)({color:a,isEnabled:n,to:n?o:void 0},l),{},{children:s}))},j=n(53),f=n(63),O=n(189),m=["skills","onClickSkill"],g=function(e){var t=e.skills,n=e.onClickSkill,s=Object(r.a)(e,m),l=Object(a.useState)(!1),d=Object(j.a)(l,2),b=d[0],p=d[1],g=Object(a.useState)(0),h=Object(j.a)(g,2),v=h[0],x=h[1],y=Object(o.useTranslate)({capitalize:!0}),w=Object(a.useRef)(null);Object(a.useEffect)((function(){w.current&&x(w.current.offsetHeight)}),[w]);var k=Object(a.useMemo)((function(){return t.map((function(e){return{_key:e.id,name:e.name,logo:e.logo,color:e.color}}))}),[t]);return Object(c.jsxs)(o.Box,Object(i.a)(Object(i.a)({},s),{},{children:[Object(c.jsx)(o.Box,{as:O.motion.div,overflow:"hidden",variants:{open:{maxHeight:v},close:{maxHeight:120,overflow:"hidden"}},animate:b?"open":"close",children:Object(c.jsx)(o.Box,{ref:w,display:"flex",flexWrap:"wrap",mb:0,children:k.map((function(e){return"undefined"===typeof e.name||null===e.name?null:Object(c.jsx)(f.SkillBrick,{skill:e,onClick:(t=e._key,function(){n(t)}),size:"small",mr:1,mb:1},e._key);var t}))})}),v>120&&Object(c.jsx)(u,{onClick:function(){p(!b)},children:y(b?"show_less":"show_more")})]}))},h=["onClickCreateNewSkill"],v=Object(d.default)(o.TextButton)((function(e){return{color:e.theme.colors.primary[3],textDecoration:"none"}})),x=function(e){var t=e.onClickCreateNewSkill,n=Object(r.a)(e,h),a=Object(o.useTranslate)({capitalize:!0});return Object(c.jsxs)(o.Line,Object(i.a)(Object(i.a)({flexWrap:"wrap"},n),{},{children:[Object(c.jsx)(o.Text,{as:"span",mr:1,flexGrow:1,children:a("dont_you_find_your_skill_question")}),Object(c.jsx)(v,{onClick:t,children:"".concat(a("create_it_now")," !")})]}))}},897:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return O}));var i,r=n(187),a=n(19),o=(i={},Object(r.a)(i,a.ValidationStatusEnum.Validated,"filter_power_validation_status_validated"),Object(r.a)(i,a.ValidationStatusEnum.PartiallyValidated,"filter_power_validation_status_partially_validated"),Object(r.a)(i,a.ValidationStatusEnum.NotValidated,"filter_power_validation_status_not_validated"),Object(r.a)(i,a.ValidationStatusEnum.NotConcerned,"filter_power_validation_status_not_concerned"),i),c=n(0),s=n(14),l=n(63),d=n(1),u=function(e){var t=e.isLoading,n=e.isOpened,i=e.onConfirm,r=e.onClose,a=e.qualifier,o=e.value,c=Object(s.useTranslate)({capitalize:!0});return Object(d.jsxs)(s.Modal,{isOpened:n,onClose:r,showCloseButton:!0,children:[Object(d.jsx)(s.Text,{fontWeight:"semiBold",pb:3,children:c("review_validation_question")}),Object(d.jsx)(l.Qualifier,{qualifier:a,value:o}),Object(d.jsx)(s.ButtonLine,{cancelButtonLabel:c("cancel"),confirmButtonLabel:c("submit"),isLoading:t,onConfirm:i,onCancel:r,pt:3})]})},b=n(53),p=n(17),j={isConfirmModalOpened:!1,valuedQualifierForModal:void 0,variables:void 0},f=function(e,t){switch(t.type){case"setIsConfirmModalOpened":return t.isConfirmModalOpened?Object(p.a)(Object(p.a)({},e),{},{isConfirmModalOpened:t.isConfirmModalOpened}):j;case"setVariablesAndValuedQualifier":return Object(p.a)(Object(p.a)({},e),{},{isConfirmModalOpened:"undefined"!==typeof t.variables,valuedQualifierForModal:t.valuedQualifierForModal,variables:t.variables});case"reset":return j;default:return e}},O=function(e){var t=e.onReviewCreated,n=Object(c.useReducer)(f,j),i=Object(b.a)(n,2),r=i[0],o=r.isConfirmModalOpened,s=r.valuedQualifierForModal,l=r.variables,d=i[1],u=Object(a.useCreateSkillReviewMutation)(),p=Object(b.a)(u,2),O=p[0],m=p[1].loading,g=function(){d({type:"reset"})};return{isConfirmModalOpened:o,isLoading:m,getValidationSkillIconProps:function(e){var t=e.canReview,n=e.isMyProfile,i=void 0!==n&&n,r=e.isValidated,a=e.qualifiers,o=e.skillId,c=e.translate,s=e.userId,l=e.valuedQualifierForModal;return r?{tooltipTitle:c("review_validated")}:!i&&t?{onClick:function(){d({type:"setVariablesAndValuedQualifier",valuedQualifierForModal:l,variables:{qualifiers:a,skillId:o,userId:s}})},tooltipTitle:c("validate_qualifier_action")}:{tooltipTitle:c("review_not_validated")}},onCloseModal:g,onConfirmReviewCreation:function(){O({variables:l,onCompleted:function(){"function"===typeof t&&t(),g()}})},valuedQualifierForModal:s}}},905:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(17),r=n(285),a=(n(0),n(63)),o=n(746),c=n(14),s=n(1),l=["name","color","logo","iconMarginRight"],d=function(e){var t=e.name,n=e.color,d=e.logo,u=e.iconMarginRight,b=Object(r.a)(e,l),p=d?Object(a.getIconComponent)(d):o.a;return Object(s.jsxs)(c.Line,Object(i.a)(Object(i.a)({},b),{},{children:[Object(s.jsx)(c.Icon,{as:p,size:20,color:n,mr:"undefined"!==typeof u?u:1}),Object(s.jsx)(c.Text,{fontWeight:"semiBold",fontSize:"medium",children:t})]}))}},909:function(e,t,n){"use strict";var i=n(874);n.d(t,"a",(function(){return i.a}))},935:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var i=n(17),r=n(285),a=n(0),o=n(15),c=n(65),s=n(19),l=n(14),d=n(877),u=n(833),b=n(878),p=n(56),j=n(123),f=n(745),O=n(104),m=n(10),g=n(759),h=n(3),v=n(1),x=["titleComponent","contentComponent"],y=function(e){var t=e.titleComponent,n=e.contentComponent,a=Object(r.a)(e,x);return Object(v.jsxs)(l.Line,Object(i.a)(Object(i.a)({width:"100%",py:1,alignItems:"normal",flexWrap:"wrap"},a),{},{children:[Object(v.jsx)(l.Box,{width:"27%",minWidth:150,pr:2,py:0,children:t}),Object(v.jsx)(l.Box,{flex:1,py:0,children:n})]}))},w=function(){return Object(v.jsx)(y,{display:"flex",alignItems:"flex-start",titleComponent:Object(v.jsxs)(l.Line,{pr:2,children:[Object(v.jsx)(l.LoaderSkeleton.Point,{}),Object(v.jsx)(l.LoaderSkeleton.Line,{width:"100%"})]}),contentComponent:Object(v.jsx)(l.LoaderSkeleton.Line,{width:"100%"})})},k=function(){return Object(v.jsxs)(l.Box,{width:"100%",children:[Object(v.jsx)(w,{}),Object(v.jsx)(w,{}),Object(v.jsx)(w,{}),Object(v.jsx)(w,{}),Object(v.jsx)(w,{})]})},C=n(896),S=["skillId","userId","onClickCreateNewSkill","onChangeSkill"],I=function(e){var t=e.skillId,n=(e.userId,e.onClickCreateNewSkill),x=e.onChangeSkill,w=Object(r.a)(e,S),I=Object(l.useTranslate)({capitalize:!0}),T=Object(c.h)(),_=Object(m.useAppContext)(),L=_.checkLayout,P=_.checkModule,R=Object(o.useHistory)(),E=Object(s.useGetSkillInfosQuery)({variables:{id:t},fetchPolicy:"cache-first"}),M=E.data,A=E.loading,B=Object(a.useMemo)((function(){if(null===M||void 0===M?void 0:M.skill)return Object(i.a)(Object(i.a)({},Object(s.getFormatedSkillBasicFragment)(M.skill)),{},{description:Object(s.maybeToOptional)(M.skill.description),subSkills:M.skill.subSkills.nodes.map((function(e){return Object(s.getFormatedSkillBasicFragment)(e)})),poweredUsers:{totalCount:M.skill.poweredUsers.totalCount,users:M.skill.poweredUsers.nodes.map((function(e){return Object(s.getFormatedUserBasicFragment)(e)}))}})}),[M]),F=Object(a.useMemo)((function(){return(null===M||void 0===M?void 0:M.skill)?{canCreateSkill:M.skill.capabilities.canCreateSkill}:{canCreateSkill:!0}}),[M]),D=function(e){return{color:0===e?T.colors.grey[5]:T.colors.black[2],count:e}},U=Object(a.useMemo)((function(){if(null===M||void 0===M?void 0:M.skill)return{assessmentForms:D(M.skill.assessmentForms.nodes.length),trainings:D(M.skill.trainings.nodes.length),projects:D(M.skill.projects.nodes.length),jobs:D(M.skill.jobs.nodes.length)}}),[M]);return!A&&B&&U?Object(v.jsxs)(l.Column,Object(i.a)(Object(i.a)({alignItems:"flex-start"},w),{},{children:[Object(v.jsx)(y,{titleComponent:Object(v.jsx)(C.a,{icon:d.a,label:I("definition"),color:T.colors.grey[6]}),contentComponent:Object(v.jsx)(l.StringParser,{children:"undefined"!==typeof B.description&&B.description.length>0?B.description:"-"})}),B.subSkills.length>0?Object(v.jsx)(y,{display:"flex",alignItems:"flex-start",titleComponent:Object(v.jsx)(C.a,{pt:0,icon:b.a,label:I("sub_skill",B.subSkills.length),color:T.colors.grey[6]}),contentComponent:Object(v.jsx)(C.d,{skills:B.subSkills,onClickSkill:x})}):Object(v.jsx)(y,{titleComponent:Object(v.jsx)(C.a,{icon:b.a,label:I("sub_skill",10),color:T.colors.grey[6]}),contentComponent:Object(v.jsx)(l.Text,{children:"-"})}),B.poweredUsers.users.length>0&&Object(v.jsx)(y,{titleComponent:Object(v.jsx)(C.a,{pt:"7.5px",icon:u.a,label:I("collaborators"),color:T.colors.grey[6]}),contentComponent:Object(v.jsx)(g.a,{users:B.poweredUsers.users,totalCount:B.poweredUsers.totalCount,isLink:!0,onClick:P(m.AppModule.PROFILE_SEARCH)?function(){var e;R.push(h.b.USER_PROFILE_SEARCH.getRoute({searchPatternString:JSON.stringify({must:[{skill:null===M||void 0===M||null===(e=M.skill)||void 0===e?void 0:e.id}]})}))}:void 0})}),L("trainings")&&Object(v.jsx)(y,{titleComponent:Object(v.jsx)(C.a,{icon:j.a,label:I("training",10),color:T.colors.grey[6]}),contentComponent:Object(v.jsx)(C.b,{color:U.trainings.color,isEnabled:!1,to:"",children:I("num_trainings",U.trainings.count)})}),L("projects")&&Object(v.jsx)(y,{titleComponent:Object(v.jsx)(C.a,{icon:O.a,label:I("staffing_projects",10),color:T.colors.grey[6]}),contentComponent:Object(v.jsx)(C.b,{color:U.projects.color,isEnabled:!1,to:"",children:I("num_staffing_project",U.projects.count)})}),L("jobs")&&Object(v.jsx)(y,{titleComponent:Object(v.jsx)(C.a,{icon:f.a,label:I("job",10),color:T.colors.grey[6]}),contentComponent:Object(v.jsx)(C.b,{color:U.jobs.color,isEnabled:!1,to:"",children:I("num_jobs",U.jobs.count)})}),L("assessments")&&Object(v.jsx)(y,{titleComponent:Object(v.jsx)(C.a,{icon:p.a,label:I("assessment_forms",10),color:T.colors.grey[6]}),contentComponent:Object(v.jsx)(C.b,{color:U.assessmentForms.color,isEnabled:!1,to:"",children:I("num_assessment_forms",U.assessmentForms.count)})}),"function"===typeof n&&F.canCreateSkill&&Object(v.jsx)(C.c,{onClickCreateNewSkill:n,mt:2})]})):Object(v.jsx)(k,{})}}}]);