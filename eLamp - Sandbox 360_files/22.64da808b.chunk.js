(this["webpackJsonp@elamp/main-app"]=this["webpackJsonp@elamp/main-app"]||[]).push([[22],{1007:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return f}));var i=n(17),r=n(285),o=(n(0),n(14)),a=n(1),s=["isShowLabel","title"],c=function(e){var t=e.isShowLabel,n=e.title,c=Object(r.a)(e,s);return t?Object(a.jsx)(o.Label,Object(i.a)(Object(i.a)({content:n},c),{},{children:c.children})):c.children?c.children:null},l=n(15),u=n(3),d=["elements","isJobDirectChildren"],f=function(e){var t=e.elements,n=e.isJobDirectChildren,s=Object(r.a)(e,d),c=Object(l.useHistory)();return Object(a.jsx)(o.Line,Object(i.a)(Object(i.a)({mt:2,px:20,flexWrap:"wrap"},s),{},{children:(t||[]).map((function(e){var t=e.id,i=e.name;return Object(a.jsx)(o.Button,{appearance:"outline",accent:"grey",mr:1,mt:1,isEllipsis:!0,onClick:function(){return c.push(n?u.b.USER_ORGANIZATION_JOB_DETAILS.getRoute({jobId:t}):u.b.USER_ORGANIZATION_TRAINING_DETAILS.getRoute({trainingId:t}))},children:i},t)}))}))}},1562:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return D}));var i=n(139),r=n.n(i),o=n(286),a=n(188),s=n(53),c=n(0),l=n(15),u=n(61),d=n(14),f=n(19),b=n(23),j=n(60),p=n(10),g=n(121),m=n(3),O=n(759),h=n(903),v=n(766),x=n(743),y=n(900),S=n(1007),T=n(902),I=n(856),_=n(853),w=n(781),k=n(761),A=n(17),C=n(285),N=n(894),E=n(1),R=["trainings","onIsInteresting","onIsNotInteresting"],P=function(e){var t=e.trainings,n=e.onIsInteresting,i=e.onIsNotInteresting,r=Object(C.a)(e,R),o=Object(l.useHistory)();return 0===t.length?null:Object(E.jsx)(d.Box,Object(A.a)(Object(A.a)({my:3,display:"flex",flexWrap:"wrap"},r),{},{children:t.map((function(e){var t=e.id,r=e.description,a=e.pattern,s=e.userSuggestion,c=e.name,l=e.isPatternEmpty;return Object(E.jsx)(d.Box,{pr:3,pb:3,children:Object(E.jsx)(N.a,{id:t,name:c,isPatternEmpty:l,pattern:a,description:Object(f.maybeToOptional)(r),onShowDetails:function(){return o.push(m.b.USER_ORGANIZATION_TRAINING_DETAILS.getRoute({trainingId:t}))},isMarkedAsInteresting:s.isRelevant,isMarkedAsNotInteresting:s.isNotRelevant,onIsInteresting:function(){return n({trainingId:t})},onIsNotInteresting:function(e){var n=e.feedback;return i({trainingId:t,feedback:n})},maxHeight:480})},t)}))}))},L=n(123),M=function(e){var t=e.headerProps,n=(e.onIsInteresting,e.onIsNotInteresting,e.onAddToMyTrainingsWishes),i=e.isShowAddToMyTrainingsWishesButton,r=void 0!==i&&i,o=Object(d.useTranslate)({capitalize:!0}),a=Object(d.useResponsive)().isMobile,s=(t.id,t.name);t.isMarkedAsInteresting,t.isMarkedAsNotInteresting;return Object(E.jsxs)(d.Box,{width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",px:a?1:3,flexWrap:"wrap",children:[Object(E.jsxs)(d.Line,{flexGrow:1,minWidth:"200px",py:0,children:[Object(E.jsx)(d.Icon,{as:L.a,size:25,mr:1}),Object(E.jsx)(d.TextWithAutoTooltipOnEllipsis,{tooltipTitle:s,fontWeight:"semiBold",fontSize:"large",rows:2,children:s})]}),r&&Object(E.jsx)(d.Line,{py:0,children:Object(E.jsx)(d.Button,{ml:1,onClick:n,children:o("add_to_my_trainings_wishes")})})]})},F=Object(u.default)(d.TextButton)((function(e){return{":hover":{color:e.theme.colors.primary[3],textDecoration:"underline"}}})),B={kind:"trainingTag",id:"NONE",name:"NONE"},D=function(){var e=Object(d.useTranslate)({capitalize:!0}),t=Object(l.useParams)().trainingId,n=Object(x.a)().redirectToEntity404,i=Object(d.useAlert)(),u=Object(w.a)().tabsOptions,A=Object(p.useAppContext)(),C=A.customFields,N=A.getErrorMessage,R=A.user,L=A.setBreadCrumb,D=A.setTabsOptions,q=Object(d.useResponsive)().isMobile,z=Object(f.useGetTrainingDetailsQuery)({variables:{id:t},fetchPolicy:"cache-first",nextFetchPolicy:"network-only",onError:function(e){return n({entity:g.d.Training,error:e})}}),U=z.data,W=z.loading,G=Object(d.useSwitch)(!1),Y=G.on,H=G.off,Z=G.active,V=Object(c.useState)(B),K=Object(s.a)(V,2),J=K[0],Q=K[1],X=Object(y.a)(),$=X.onIsInteresting,ee=X.onIsNotInteresting,te=Object(f.usePinTrainingMutation)(),ne=Object(s.a)(te,2),ie=ne[0],re=ne[1].loading,oe=Object(c.useMemo)((function(){var e=null===U||void 0===U?void 0:U.training;if(e){var t=Object(k.c)(e.pattern||{must:[],should:[]});return{id:e.id,name:e.name,isPatternEmpty:e.isPatternEmpty,description:Object(f.maybeToOptional)(e.description),pattern:t,userSuggestion:{comment:Object(f.maybeToOptional)(e.userSuggestion.comment),isNotRelevant:e.userSuggestion.isNotRelevant,isRelevant:e.userSuggestion.isRelevant,score:Object(f.maybeToOptional)(e.userSuggestion.score),status:e.userSuggestion.status,updatedAt:e.userSuggestion.updatedAt},customFields:e.customFields||{},pinnedUsers:(e.pinnedUsers.nodes||[]).map((function(e){return Object(f.getFormatedUserBasicFragment)(e)})),parents:(e.parents.nodes||[]).map((function(e){return{id:e.id,name:e.name}})),subTrainingsCount:e.subTrainings.totalCount,subTrainings:(e.subTrainings.nodes||[]).map((function(e){return{id:e.id,name:e.name,subTrainingsCount:e.subTrainings.totalCount,userSuggestion:{comment:Object(f.maybeToOptional)(e.userSuggestion.comment),isNotRelevant:e.userSuggestion.isNotRelevant,isRelevant:e.userSuggestion.isRelevant,score:Object(f.maybeToOptional)(e.userSuggestion.score),status:e.userSuggestion.status,updatedAt:e.userSuggestion.updatedAt}}})),allSubTrainings:(e.allSubTrainings.nodes||[]).map((function(e){return{id:e.id,name:e.name,description:Object(f.maybeToOptional)(e.description),isPatternEmpty:e.isPatternEmpty,matchingScore:Object(f.maybeToOptional)(e.matching.score)||0,subTrainingsCount:e.subTrainings.totalCount,userSuggestion:{comment:Object(f.maybeToOptional)(e.userSuggestion.comment),isNotRelevant:e.userSuggestion.isNotRelevant,isRelevant:e.userSuggestion.isRelevant,score:Object(f.maybeToOptional)(e.userSuggestion.score),status:e.userSuggestion.status,updatedAt:e.userSuggestion.updatedAt},pattern:{must:Object(k.c)(e.pattern).must,should:Object(k.c)(e.pattern).should}}})),skills:[].concat(Object(a.a)(t.should),Object(a.a)(t.must)).map((function(e){return{skill:(null===e||void 0===e?void 0:e.skill)||null,qualifiers:{edges:e.qualifiers.map((function(e){return{node:e.qualifier,value:e.value}}))}}}))}}}),[U]);Object(c.useEffect)((function(){return D(u),function(){D(void 0)}}),[]),Object(c.useEffect)((function(){if("undefined"!==typeof oe){var t=[{type:"text",text:e("hr_catalog"),icon:j.a,to:m.b.USER_ORGANIZATION_DASHBOARD.getRoute()},{type:"text",text:e("training",10),to:m.b.USER_ORGANIZATION_TRAINING.getRoute()}];Object(a.a)(oe.parents).reverse().forEach((function(e){t.push({type:"text",text:e.name,to:m.b.USER_ORGANIZATION_TRAINING_DETAILS.getRoute({trainingId:e.id})})})),t.push({type:"text",text:oe.name}),L(q?[t[0]]:t)}return function(){L(void 0)}}),[q,oe]);var ae=Object(c.useMemo)((function(){return"undefined"!==typeof(null===oe||void 0===oe?void 0:oe.description)&&oe.description.trim().length>0}),[oe]),se=Object(c.useMemo)((function(){return"undefined"===typeof(null===oe||void 0===oe?void 0:oe.customFields)||C.trainingFields.some((function(e){return!Object(v.c)(oe.customFields,e._key)}))}),[null===oe||void 0===oe?void 0:oe.customFields]),ce=function(){var t=Object(o.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ie({variables:{input:{userId:R.id,trainingId:"NO_REF"===n.trainingId?void 0:n.trainingId,trainingName:n.trainingName,status:n.status,budgetYear:n.budgetYear,comment:n.comment,deadline:n.deadline,startDate:n.startDate,endDate:n.endDate}}}).then((function(){i.success(e("success")),Q(B),H()})).catch((function(e){i.error(N(e)),console.error("Training application failed !!!",e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),le=Object(c.useMemo)((function(){var e,t;if(oe)return{id:oe.id,name:oe.name,isMarkedAsInteresting:null===oe||void 0===oe||null===(e=oe.userSuggestion)||void 0===e?void 0:e.isRelevant,isMarkedAsNotInteresting:null===oe||void 0===oe||null===(t=oe.userSuggestion)||void 0===t?void 0:t.isNotRelevant}}),[oe]),ue=Object(c.useMemo)((function(){return oe?(oe.subTrainings||[]).filter((function(e){return e.subTrainingsCount>0})).map((function(e){return{id:e.id,name:e.name}})).sort((function(e,t){return Object(b.sortByName)(e,t,(function(e){return e.name}))})):[]}),[oe]),de=Object(c.useMemo)((function(){return oe?((null===oe||void 0===oe?void 0:oe.allSubTrainings)||[]).filter((function(e){return!e.subTrainingsCount})).map((function(e){return{id:e.id,name:e.name,description:e.description,pattern:e.pattern,userSuggestion:e.userSuggestion,isPatternEmpty:e.isPatternEmpty}})).sort((function(e,t){return Object(b.sortByName)(e,t,(function(e){return e.name}))})):[]}),[oe]);return W||!le||"undefined"===typeof oe?Object(E.jsx)(I.b,{}):Object(E.jsxs)(p.PageLayout,{p:"0px",children:[Object(E.jsxs)(d.Line,{height:"100%",width:"100%",flexDirection:"column",alignItems:"flex-start",children:[Object(E.jsx)(_.a,{children:Object(E.jsx)(M,{onIsInteresting:$,onIsNotInteresting:ee,onAddToMyTrainingsWishes:function(){oe&&Q({kind:"trainingTag",id:oe.id,name:oe.name}),Y()},isShowAddToMyTrainingsWishesButton:0===oe.subTrainingsCount,headerProps:le})}),Object(E.jsx)(_.b,{mainContent:Object(E.jsxs)(d.Box,{children:[ae&&Object(E.jsx)(d.Box,{mb:3,children:Object(E.jsx)(d.StringParser,{children:oe.description})}),se&&Object(E.jsx)(v.b,{mb:3,customFields:oe.customFields,customFieldsConfiguration:C.trainingFields,shouldHideUndefined:!0})]}),listContent:Object(E.jsxs)(E.Fragment,{children:[(ue.length>0||de.length>0)&&Object(E.jsx)(S.b,{isShowLabel:ae||se||oe.pinnedUsers.length>0||oe.skills.length>0,title:e("related_trainings_list"),fontSize:"large",mt:ae||se||oe.pinnedUsers.length>0||oe.skills.length>0?3:1,children:Object(E.jsxs)(d.Box,{children:[(ue||[]).length>0&&Object(E.jsx)(S.a,{elements:ue,mb:20}),Object(E.jsx)(P,{onIsInteresting:$,onIsNotInteresting:ee,trainings:de})]})}),Object(E.jsxs)(d.Line,{flexWrap:"wrap",children:[Object(E.jsx)(d.Text,{as:"span",mr:1,flewGrow:1,children:e("dont_you_find_your_training_question")}),Object(E.jsx)(F,{onClick:function(){Q({kind:"trainingTag",id:"NO_REF",name:""}),Y()},children:"".concat(e("request_off_plan_training"))})]})]}),sideElements:(oe.pinnedUsers.length>0||oe.skills.length>0)&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(d.Label,{width:"100%",fontWeight:"bold",mb:3,content:e("two_points",{phrase:e("targeted_skills")}),children:Object(E.jsx)(h.a,{pattern:oe.pattern})}),oe.pinnedUsers.length>0&&Object(E.jsx)(d.Label,{width:"100%",fontWeight:"bold",mb:3,content:e("they_followed_the_training"),children:Object(E.jsx)(O.a,{users:oe.pinnedUsers})})]})})]}),Object(E.jsx)(T.a,{isOpened:Z,isLoading:re,trainingTag:J,onSubmit:ce,onClose:function(){Q(B),H()}})]})}},742:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(17),r=n(285),o=(n(0),n(14)),a=n(1),s=["children"],c=function(e){var t=e.children,n=Object(r.a)(e,s);return Object(a.jsx)(o.Box,Object(i.a)(Object(i.a)({boxSizing:"border-box",height:"100%",overflow:"hidden",width:"100%"},n),{},{children:t}))}},743:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(15),r=n(19),o=n(3),a=function(){var e=Object(i.useHistory)();return{redirectToEntity404:function(t){var n=t.entity;t.error.message===r.ErrorCodeEnum.NotFound&&e.push(o.b.PAGE_NOT_FOUND.getRoute({entity:n}))}}}},746:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i,r,o,a,s,c,l,u,d=n(0),f=["title","titleId"];function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function j(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function p(e,t){var n=e.title,p=e.titleId,g=j(e,f);return d.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 250 250",ref:t,"aria-labelledby":p},g),n?d.createElement("title",{id:p},n):null,i||(i=d.createElement("linearGradient",{id:"elamp_svg__a",gradientUnits:"userSpaceOnUse",x1:78.304,y1:198.938,x2:108.65,y2:235.103},d.createElement("stop",{offset:0,stopColor:"#3958ab"}),d.createElement("stop",{offset:.205,stopColor:"#3251a2"}),d.createElement("stop",{offset:.539,stopColor:"#203d8a"}),d.createElement("stop",{offset:.958,stopColor:"#031d62"}),d.createElement("stop",{offset:1,stopColor:"#00195e"}))),r||(r=d.createElement("circle",{cx:93.5,cy:217,r:23.6,fill:"url(#elamp_svg__a)"})),o||(o=d.createElement("linearGradient",{id:"elamp_svg__b",gradientUnits:"userSpaceOnUse",x1:127.443,y1:149.227,x2:177.472,y2:199.256},d.createElement("stop",{offset:.004,stopColor:"#ffbd41"}),d.createElement("stop",{offset:.276,stopColor:"#ffb439"}),d.createElement("stop",{offset:.719,stopColor:"#fe9c24"}),d.createElement("stop",{offset:1,stopColor:"#fe8914"}))),a||(a=d.createElement("circle",{cx:152.5,cy:174.2,r:35.4,fill:"url(#elamp_svg__b)"})),s||(s=d.createElement("linearGradient",{id:"elamp_svg__c",gradientUnits:"userSpaceOnUse",x1:33.708,y1:96.99,x2:106.037,y2:157.682},d.createElement("stop",{offset:0,stopColor:"#00cdc9"}),d.createElement("stop",{offset:.246,stopColor:"#00c4c2"}),d.createElement("stop",{offset:.646,stopColor:"#00acae"}),d.createElement("stop",{offset:1,stopColor:"#009199"}))),c||(c=d.createElement("circle",{cx:69.9,cy:127.3,r:47.2,fill:"url(#elamp_svg__c)"})),l||(l=d.createElement("linearGradient",{id:"elamp_svg__d",gradientUnits:"userSpaceOnUse",x1:138.149,y1:23.173,x2:213.975,y2:113.538},d.createElement("stop",{offset:0,stopColor:"#fd0d55"}),d.createElement("stop",{offset:.258,stopColor:"#f90d55"}),d.createElement("stop",{offset:.525,stopColor:"#ec0953"}),d.createElement("stop",{offset:.796,stopColor:"#d80451"}),d.createElement("stop",{offset:1,stopColor:"#c2014f"}))),u||(u=d.createElement("circle",{cx:176.1,cy:68.4,r:59,fill:"url(#elamp_svg__d)"})))}var g=d.forwardRef(p);n.p},747:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));new Map([["theme","theme_not_interesting"],["skills","skills_not_interesting"],["over_qualified","over_qualified"],["under_qualified","under_qualified"]]);var i=n(32),r=new Map([[i.PinTrainingStatus.Suggested,"training_status_suggested"],[i.PinTrainingStatus.Approved,"training_status_approved"],[i.PinTrainingStatus.Accepted,"training_status_accepted"],[i.PinTrainingStatus.Pending,"training_status_pending"],[i.PinTrainingStatus.Validated,"training_status_validated"],[i.PinTrainingStatus.Refused,"training_status_refused"],[i.PinTrainingStatus.Noshow,"training_status_noshow"],[i.PinTrainingStatus.Canceled,"training_status_canceled"]]),o=(new Map([[i.PinTrainingStatus.Suggested,"grey.1"],[i.PinTrainingStatus.Approved,"secondary.0"],[i.PinTrainingStatus.Accepted,"secondary.0"],[i.PinTrainingStatus.Pending,"secondary.0"],[i.PinTrainingStatus.Validated,"success.0"],[i.PinTrainingStatus.Refused,"error.0"],[i.PinTrainingStatus.Noshow,"error.0"],[i.PinTrainingStatus.Canceled,"error.0"]]),new Map([[i.PinTrainingStatus.Suggested,{labelKey:"training_status_suggested",color:"grey.1"}],[i.PinTrainingStatus.Approved,{labelKey:"training_status_approved",color:"secondary.0"}],[i.PinTrainingStatus.Accepted,{labelKey:"training_status_accepted",color:"secondary.0"}],[i.PinTrainingStatus.Pending,{labelKey:"training_status_pending",color:"secondary.0"}],[i.PinTrainingStatus.Validated,{labelKey:"training_status_validated",color:"success.0"}],[i.PinTrainingStatus.Refused,{labelKey:"training_status_refused",color:"error.0"}],[i.PinTrainingStatus.Noshow,{labelKey:"training_status_noshow",color:"error.0"}],[i.PinTrainingStatus.Canceled,{labelKey:"training_status_canceled",color:"error.0"}]]))},748:function(e,t,n){"use strict";function i(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,"a",(function(){return i}))},759:function(e,t,n){"use strict";n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return m}));var i=n(17),r=n(285),o=n(0),a=n.n(o),s=n(189),c=n(61),l=n(14),u=n(63),d=n(3),f=n(1),b=["users","isLink","maxDisplayCount","totalCount","mainTooltipPosition","offLimitTooltipPosition","size","isLoading","isOverLapped","urlNewTabOnPlusClick","onClick"],j=Object(c.default)(l.Box)((function(e){var t=e.onClick;return{background:e.theme.colors.grey[0],width:"35px",height:"35px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"50px",cursor:"default",":hover":{cursor:t?"pointer":"default"}}})),p=Object(c.default)(l.Box)((function(e){return{background:e.theme.colors.grey[0],width:"35px",height:"35px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"50px",cursor:"default",textDecoration:"none",":hover":{cursor:"pointer"}}})),g={y:-5,scale:1.15},m=a.a.forwardRef((function(e,t){var n=e.users,o=e.isLink,a=void 0!==o&&o,c=e.maxDisplayCount,m=void 0===c?7:c,O=e.totalCount,h=e.mainTooltipPosition,v=void 0===h?"bottom":h,x=e.offLimitTooltipPosition,y=void 0===x?"bottom":x,S=e.size,T=void 0===S?"small":S,I=e.isLoading,_=void 0!==I&&I,w=e.isOverLapped,k=void 0!==w&&w,A=e.urlNewTabOnPlusClick,C=e.onClick,N=Object(r.a)(e,b),E=Object(l.useTranslate)(),R="number"===typeof O?O:n.length,P=Math.min(n.length,m),L=n.length>P?Math.min(n.length-P,4):0,M=R-(P+L);return _?Object(f.jsx)(l.Loader,{}):0===n.length?null:Object(f.jsx)(l.Box,{ref:t,children:Object(f.jsxs)(l.Line,Object(i.a)(Object(i.a)({width:"100%"},N),{},{children:[n.slice(0,m).map((function(e){return Object(f.jsx)(l.Tooltip,{position:v,title:e.displayName,children:Object(f.jsx)(u.UserAvatar,{mr:k?-1:void 0,whileHover:k?g:void 0,user:e,size:T,linkTo:a?d.b.USER_PROFILE_DETAILS.getRoute({userId:e.id}):void 0,target:"_blank"})},e.displayName)})),(L>0||M>0)&&Object(f.jsx)(l.Tooltip,{position:y,title:Object(f.jsxs)(l.Column,{justifyContent:"flex-start",children:[L>0&&n.slice(P,P+L).map((function(e){var t=e.id,n=e.displayName;return Object(f.jsx)(l.Line,{display:"flex",justifyContent:"flex-start",width:"100%",children:Object(f.jsx)(l.Text,{mb:0,color:"white",fontSize:"small",children:n})},t)})),M>0&&Object(f.jsx)(l.Line,{display:"flex",justifyContent:"flex-start",width:"100%",children:Object(f.jsx)(l.Text,{color:"white",fontSize:"small",children:"+ ".concat(E("num_other",M))})})]}),children:A?Object(f.jsx)(p,{as:"a",href:A,onClick:C,target:"_blank",children:Object(f.jsx)(l.Text,{fontWeight:"bold",fontSize:12,children:"+".concat(L+M)})}):Object(f.jsx)(j,{as:s.motion.span,whileHover:g,onClick:C,children:Object(f.jsx)(l.Text,{fontWeight:"bold",fontSize:12,children:"+".concat(L+M)})})})]}))})}))},760:function(e,t,n){"use strict";n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return T})),n.d(t,"d",(function(){return A}));var i,r=n(759),o=n(17),a=n(285),s=n(0),c=n(14),l=n(63),u=n(23),d=n(1),f=["avatarRightMargin","avatarSize","fontSize","fontWeight","user"],b=function(e){var t=e.avatarRightMargin,n=void 0===t?2:t,i=e.avatarSize,r=void 0===i?"medium":i,s=e.fontSize,b=void 0===s?"medium":s,j=e.fontWeight,p=void 0===j?"semiBold":j,g=e.user,m=Object(a.a)(e,f);return Object(d.jsxs)(c.Line,Object(o.a)(Object(o.a)({width:"100%"},m),{},{children:[Object(d.jsx)(l.UserAvatar,{user:g,size:r,mr:n,ml:1}),Object(d.jsx)(c.TextWithAutoTooltipOnEllipsis,{fontWeight:p,fontSize:b,p:0,tooltipTitle:Object(u.maj)(g.displayName),children:Object(u.maj)(g.displayName)})]}))},j=n(139),p=n.n(j),g=n(286),m=n(61),O=["title","titleId"];function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function v(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function x(e,t){var n=e.title,r=e.titleId,o=v(e,O);return s.createElement("svg",h({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},o),n?s.createElement("title",{id:r},n):null,i||(i=s.createElement("path",{d:"M5 4h-3v-1h3v1zm12 9c0 2.206-1.794 4-4 4s-4-1.794-4-4 1.794-4 4-4 4 1.794 4 4zm-1 0c0-1.657-1.342-3-3-3s-3 1.343-3 3 1.342 3 3 3 3-1.343 3-3zm8-8v17h-24v-17h5.93c.669 0 1.293-.334 1.664-.891l1.406-2.109h8l1.406 2.109c.371.557.995.891 1.664.891h3.93zm-19 4c0-.552-.447-1-1-1s-1 .448-1 1 .447 1 1 1 1-.448 1-1zm14 4c0-3.314-2.687-6-6-6s-6 2.686-6 6 2.687 6 6 6 6-2.686 6-6z"})))}var y=s.forwardRef(x),S=(n.p,["linkTo","target","user","readOnly","onChangeAvatar"]),T=120,I=Object(m.default)(c.Box)((function(){return{width:T,height:T,display:"flex",alignItems:"center",justifyContent:"center",position:"relative"}})),_=Object(m.default)("input")((function(){return{width:1,height:1,position:"absolute"}})),w=Object(m.default)(c.Box)((function(e){var t=e.theme;return{position:"absolute",width:T,height:T,borderRadius:T,background:"none",display:"flex",alignItems:"center",justifyContent:"center",svg:{display:"none"},":hover":{background:t.colors.black[1],svg:{display:"block"}}}})),k=Object(m.default)(c.Icon)((function(){return{pointerEvents:"none"}})),A=function(e){var t=e.linkTo,n=e.target,i=e.user,r=e.readOnly,u=e.onChangeAvatar,f=Object(a.a)(e,S),b=Object(c.useTranslate)({capitalize:!0}),j=Object(s.useRef)(null),m=function(){var e=Object(g.a)(p.a.mark((function e(t){var n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"undefined"!==typeof(i=null===(n=t.target.files)||void 0===n?void 0:n[0])&&u&&u(i);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(I,Object(o.a)(Object(o.a)({},f),{},{children:[!r&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(_,{type:"file",ref:j,onChange:m}),Object(d.jsx)(c.Tooltip,{title:b("update_photo"),position:"bottom",children:Object(d.jsx)(w,{onClick:function(){j.current&&j.current.click()},children:Object(d.jsx)(k,{as:y,color:"white",size:60})})})]}),Object(d.jsx)(l.UserAvatar,{linkTo:t,target:n,user:i,size:"huge",margin:15})]}))}},761:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return c}));var i=n(19),r=n(23),o=function(e){return{must:(e.must||[]).map((function(e){return{skill:{id:e.skill.id,name:e.skill.name,logo:e.skill.logo,color:e.skill.color},qualifiers:(e.qualifiers||[]).map((function(e){var t;return{qualifier:{id:e.qualifier.id,name:e.qualifier.name,defaultValue:e.qualifier.defaultValue,description:Object(i.maybeToOptional)(e.qualifier.description),fieldType:e.qualifier.fieldType,comparators:Object(i.maybeToOptional)(e.qualifier.comparators),fields:((null===(t=e.qualifier)||void 0===t?void 0:t.fields)||[]).map((function(e){return{decorators:null===e||void 0===e?void 0:e.decorators,options:null===e||void 0===e?void 0:e.options,validators:null===e||void 0===e?void 0:e.validators}}))},value:e.value}}))}})),should:(e.should||[]).map((function(e){return{skill:{id:e.skill.id,name:e.skill.name,logo:e.skill.logo,color:e.skill.color},qualifiers:(e.qualifiers||[]).map((function(e){var t;return{qualifier:{id:e.qualifier.id,name:e.qualifier.name,defaultValue:e.qualifier.defaultValue,description:Object(i.maybeToOptional)(e.qualifier.description),fieldType:e.qualifier.fieldType,comparators:Object(i.maybeToOptional)(e.qualifier.comparators),fields:((null===(t=e.qualifier)||void 0===t?void 0:t.fields)||[]).map((function(e){return{decorators:null===e||void 0===e?void 0:e.decorators,options:null===e||void 0===e?void 0:e.options,validators:null===e||void 0===e?void 0:e.validators}}))},value:e.value}}))}}))}},a=function(e,t){var n=e||"x",i="abcdefghijklmnopqrstuvwxyz".split("");switch((i.indexOf(Object(r.removeAccents)(n.slice(0,1).toLowerCase()))+i.indexOf(n.slice(-1).toLowerCase()))%4){case 0:return t[0];case 1:return t[1];case 2:return t[2];case 3:return t[3];default:return t[2]}},s=function(e){var t=e.isMobile,n=e.isTablet;return t?"98%":n?"48%":"31%"},c=90},766:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return d.a}));var i=n(17),r=n(285),o=(n(0),n(14)),a=n(63),s=n(1),c=["customFields","customFieldsConfiguration","shouldHideUndefined"],l=function(e,t){return!(t in e)||void 0==e[t]||"string"===typeof e[t]&&0===e[t].length},u=function(e){var t=e.customFields,n=e.customFieldsConfiguration,u=e.shouldHideUndefined,d=void 0!==u&&u,f=Object(r.a)(e,c);return Object(s.jsx)(s.Fragment,{children:(null===n||void 0===n?void 0:n.length)>0&&t&&Object(s.jsx)(o.Box,Object(i.a)(Object(i.a)({},f),{},{children:n.map((function(e){return!0===d&&l(t,e._key)?null:Object(s.jsx)(a.CustomField,{mb:2,value:t[e._key],field:e,readOnly:!0,withLabel:!0},e._key)}))}))})},d=n(800)},781:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(65),r=n(14),o=n(10),a=n(3),s=function(){var e=Object(r.useTranslate)({capitalize:!0}),t=Object(o.useAppContext)().checkLayout,n=Object(i.h)().colors.primary[4],s=[{label:e("organization_home"),to:a.b.USER_ORGANIZATION_DASHBOARD.getRoute(),color:n,isUppercase:!1}];return t("skills")&&s.push({label:e("skills_library"),to:a.b.USER_ORGANIZATION_SKILLS_LIBRARY.getRoute(),color:n,isUppercase:!1}),t("jobs")&&s.push({label:e("jobs"),to:a.b.USER_ORGANIZATION_JOBS.getRoute(),color:n,isUppercase:!1}),t("trainings")&&s.push({label:e("training",8),to:a.b.USER_ORGANIZATION_TRAINING.getRoute(),color:n,isUppercase:!1}),t("jobOffers")&&s.push({label:e("job_offer",8),to:a.b.USER_ORGANIZATION_JOB_OFFERS.getRoute(),color:n,isUppercase:!1}),{tabsOptions:s}}},789:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l}));var i=n(19),r=n(37),o=n(747),a=function(e){var t=e.selectedIds,n=e.pinnedTrainings;if("undefined"!==typeof t){var i={},r=[];return t.forEach((function(e){var t=n.find((function(t){return t.id===e}));"undefined"!==typeof t&&r.push(t.capabilities.allowedStatuses)})),Array.from(new Set(r.flatMap((function(e){return e})))).filter((function(e){return r.every((function(t){return t.includes(e)}))})).forEach((function(e){i[e]=o.b.get(e)})),i}return{}},s="1870-01-00T12:00:00.000Z",c=function(e){if(e)return e.map((function(e){return{id:e.id,status:e.status,updatedAt:Object(i.maybeToOptional)(e.updatedAt),updatedBy:e.updatedBy?Object(i.getFormatedUserBasicFragment)(e.updatedBy):void 0}})).sort((function(e,t){var n=e.updatedAt||s,i=t.updatedAt||s;return Object(r.localeMoment)(n).isBefore(Object(r.localeMoment)(i))?1:Object(r.localeMoment)(i).isBefore(Object(r.localeMoment)(n))?-1:0}))},l=function(e){return{must:(e.must||[]).map((function(e){return{skill:Object(i.getFormatedSkillBasicFragment)(e.skill),qualifiers:(e.qualifiers||[]).map((function(e){return{qualifier:Object(i.getFormatedQualifierBasicFragment)(e.qualifier),value:e.value}}))}})),should:(e.should||[]).map((function(e){return{skill:Object(i.getFormatedSkillBasicFragment)(e.skill),qualifiers:(e.qualifiers||[]).map((function(e){return{qualifier:Object(i.getFormatedQualifierBasicFragment)(e.qualifier),value:e.value}}))}}))}}},800:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(187),r=n(17),o=n(285),a=(n(0),n(14)),s=n(63),c=n(1),l=["customFieldsConfiguration","value","onChange"],u=function(e){var t=e.customFieldsConfiguration,n=e.value,u=e.onChange,d=Object(o.a)(e,l);return Object(c.jsx)(a.Box,Object(r.a)(Object(r.a)({},d),{},{children:t.map((function(e){return Object(c.jsx)(s.CustomField,{field:e,value:null===n||void 0===n?void 0:n[e._key],onSubmit:(t=e._key,function(e){u(Object(r.a)(Object(r.a)({},n||{}),{},Object(i.a)({},t,e)))}),withLabel:!0,mb:1,width:d.width},e._key);var t}))}))}},843:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n(0),r=n(14),o=n(63),a=n(32),s=n(23),c=n(37),l=n(760),u=n(747),d=n(1),f=function(e){var t=e.pinnedTrainings,n=Object(r.useTranslate)(),f=Object(i.useMemo)((function(){return"undefined"!==typeof t?t.length>0&&t.length<=5?{displayedPins:t,otherPins:void 0}:{displayedPins:t.slice(0,5),otherPins:t.length-5}:{displayedPins:void 0,otherPins:void 0}}),[t]),b=f.displayedPins,j=f.otherPins;return"undefined"!==typeof b&&b.length>0?Object(d.jsxs)(r.Box,{bg:"alert.0",p:2,width:"100%",children:[Object(d.jsxs)(r.Line,{children:[Object(d.jsx)(o.ReasonCounter,{type:a.ReasonCounterTypeEnum.PARTIAL,mr:1}),Object(d.jsx)(r.Text,{fontSize:"small",fontWeight:"bold",children:Object(s.maj)(n("training_already_assigned_to_this_collaborator"))})]}),Object(d.jsxs)(r.Box,{pb:1,pl:3,ml:12,width:"100%",children:[b.map((function(e,t){return Object(d.jsxs)(r.Line,{display:"flex",flexWrap:"wrap",pt:1,children:[Object(d.jsx)(r.Text,{fontSize:"small",children:Object(s.maj)(n(u.b.get(e.status)))}),"undefined"!==typeof e.updatedAt&&Object(d.jsx)(r.Text,{fontSize:"small",ml:0,children:"- ".concat(Object(c.localeMoment)(e.updatedAt).format("DD MMMM YYYY"))}),"undefined"!==typeof e.updatedBy&&Object(d.jsxs)(r.Line,{ml:0,children:[Object(d.jsx)(r.Text,{fontSize:"small",children:"- ".concat(n("updated_by"))}),Object(d.jsx)(l.b,{avatarRightMargin:0,avatarSize:"small",fontSize:"small",user:e.updatedBy,width:"fit-content"})]})]},"".concat(e.id,"_").concat(t))})),"number"===typeof j&&Object(d.jsx)(r.Text,{fontSize:"small",pt:1,children:"+ ".concat(n("num_other",j))})]})]}):null}},853:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l}));n(0);var i=n(61),r=n(14),o=n(1),a=Object(i.default)(r.Column)((function(e){var t=e.theme;return{borderLeft:"1px solid ".concat(t.colors.grey[1])}})),s=function(e){var t=e.mainContent,n=e.sideElements,i=e.listContent;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(r.DesktopOrTablet,{children:Object(o.jsxs)(r.Line,{width:"100%",height:"100%",flexDirection:"row",children:[Object(o.jsxs)(r.Box,{height:"100%",overflowY:"auto",overflowX:"hidden",flexGrow:1,py:1,px:3,children:[t,i]}),n&&Object(o.jsx)(a,{flexGrow:0,flexShrink:0,width:320,overflowY:"auto",overflowX:"hidden",px:2,pt:2,height:"100%",children:n})]})}),Object(o.jsx)(r.Mobile,{children:Object(o.jsxs)(r.Column,{width:"100%",height:"100%",overflowY:"auto",overflowX:"hidden",p:1,children:[t,n,i]})})]})},c=Object(i.default)(r.Box)((function(e){var t=e.theme;return{borderBottom:"1px solid ".concat(t.colors.grey[1])}})),l=function(e){var t=e.children;return Object(o.jsx)(c,{width:"100%",minHeight:90,py:0,display:"flex",flexDirection:"column",justifyContent:"center",children:t})}},856:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return f}));n(0);var i=n(61),r=n(14),o=n(742),a=n(761),s=n(1),c=Object(i.default)(r.Box)((function(e){return{backgroundColor:e.theme.colors.grey[0]}})),l=function(e){var t=e.isMobile,n=e.isTablet;return Object(s.jsx)(r.Box,{pb:3,width:Object(a.d)({isMobile:t,isTablet:n}),margin:"0 1%",children:Object(s.jsxs)(r.Card,{as:r.Box,boxShadow:"small",children:[Object(s.jsx)(c,{height:190,width:"100%"}),Object(s.jsx)(r.Box,{width:"100%",p:3,children:Object(s.jsx)(r.LoaderSkeleton.Line,{width:"75%"})})]})})},u=function(){var e=Object(r.useResponsive)(),t=e.isMobile,n=e.isTablet;return Object(s.jsxs)(r.Box,{pt:2,children:[Object(s.jsx)(r.Text,{px:1,py:2,children:Object(s.jsx)(r.LoaderSkeleton.Line,{width:300})}),Object(s.jsxs)(r.Box,{mt:2,display:"flex",flexWrap:"wrap",children:[Object(s.jsx)(l,{isMobile:t,isTablet:n}),Object(s.jsx)(l,{isMobile:t,isTablet:n}),Object(s.jsx)(l,{isMobile:t,isTablet:n}),n&&Object(s.jsx)(l,{isMobile:t,isTablet:n})]})]})},d=Object(i.default)(r.Line)((function(e){var t=e.theme;return{borderBottom:"1px solid ".concat(t.colors.grey[1])}})),f=function(){return Object(s.jsx)(o.a,{pt:1,pl:2,children:Object(s.jsxs)(r.Line,{height:"100%",width:"100%",flexDirection:"column",alignItems:"flex-start",children:[Object(s.jsx)(d,{width:"100%",height:a.a,flexDirection:"column",justifyContent:"center",alignItems:"left",p:2,children:Object(s.jsx)(r.LoaderSkeleton.Line,{width:300})}),Object(s.jsxs)(r.Box,{display:"flex",height:"100%",flexDirection:"column",width:"100%",px:2,pt:3,children:[Object(s.jsx)(r.LoaderSkeleton.Line,{width:"75%",mb:2}),Object(s.jsx)(r.LoaderSkeleton.Line,{width:"50%",mb:2}),Object(s.jsx)(r.LoaderSkeleton.Line,{width:"33%"})]})]})})}},894:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var i,r=n(17),o=n(285),a=(n(0),n(61)),s=n(14),c=n(1),l=function(e){e.onIsInteresting,e.onIsNotInteresting,e.isMarkedAsInteresting,e.isMarkedAsNotInteresting;var t=e.onShowDetails,n=Object(s.useTranslate)();return Object(c.jsx)(s.Line,{justifyContent:"space-between",pt:1,children:Object(c.jsx)(s.Button,{appearance:"outline",onClick:t,children:n("show_details")})})},u=n(188),d=n(63),f=Object(a.default)(s.Line)((function(){return{":hover":{boxShadow:"none"}}})),b=function(e){var t=e.pattern,n=void 0===t?{}:t,i=e.onShowDetails,r=[].concat(Object(u.a)((null===n||void 0===n?void 0:n.should)||[]),Object(u.a)((null===n||void 0===n?void 0:n.must)||[])).map((function(e){var t;return{skill:(null===e||void 0===e?void 0:e.skill)||null,qualifiers:{edges:(null===e||void 0===e||null===(t=e.qualifiers)||void 0===t?void 0:t.map((function(e){return{node:e.qualifier,value:e.value}})))||[]}}})).filter((function(e){var t=e.skill;return!!t&&t.name&&t.id}));return Object(c.jsxs)(s.Line,{flexWrap:"wrap",children:[r.slice(0,2).map((function(e){return Object(c.jsx)(d.PowerBrick,{mr:1,mb:1,power:e},e.skill.id)})),r.slice(3).length>0?Object(c.jsx)(f,{onClick:i,children:Object(c.jsx)(s.CircleIndicator,{ml:2,mb:1,text:"+".concat(r.slice(2).length)})}):null]})},j=n(748),p=n(23),g=n(10),m=n(123),O=n(746),h=n(3),v=Object(a.default)(s.StringParser)(i||(i=Object(j.a)(["\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: pre-line;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n"]))),x=function(e){var t=Object.assign({},e);return Object(c.jsx)(s.Box,Object(r.a)(Object(r.a)({display:"flex",justifyContent:"center",alignItems:"center",bg:"primary.0",borderRadius:50,width:24,height:24,flexShrink:0},t),{},{children:Object(c.jsx)(s.Icon,{as:O.a,size:15})}))},y=function(e){var t=e.id,n=e.name,i=e.description,r=e.matchingScore,o=e.isPatternEmpty,a=Object(s.useTranslate)(),l=Object(g.useAppContext)().checkModule;return Object(c.jsxs)(s.Box,{overflow:"hidden",display:"flex",flexDirection:"column",children:[Object(c.jsxs)(s.Line,{justifyContent:"space-between",height:"45px",width:"100%",display:"flex",alignItems:"center",mb:2,children:[Object(c.jsxs)(s.Line,{overflow:"auto",children:[Object(c.jsx)(s.Icon,{size:18,mr:1,as:m.a}),l(g.AppModule.ORGANIZATION)?Object(c.jsx)(s.TextWithAutoTooltipOnEllipsis,{tooltipTitle:n,fontSize:"large",fontWeight:"semiBold",rows:2,as:s.Link,to:h.b.USER_ORGANIZATION_TRAINING_DETAILS.getRoute({trainingId:t}),target:"_self",children:n}):Object(c.jsx)(s.TextWithAutoTooltipOnEllipsis,{tooltipTitle:n,fontSize:"large",fontWeight:"semiBold",rows:2,children:n})]}),o||void 0===r||null===r||isNaN(r)?null:Object(c.jsxs)(s.Line,{flexShrink:0,children:[Object(c.jsx)(x,{size:16,mr:0}),Object(c.jsx)(s.Text,{fontSize:"small",children:a("affinity_score",{score:(100*r).toFixed()})})]})]}),i?Object(c.jsx)(s.Box,{mb:2,height:80,children:Object(c.jsx)(s.Box,{height:"75px",overflow:"hidden",mb:0,children:Object(p.getIsHTML)(i)?Object(c.jsx)(s.StringParser,{children:i}):Object(c.jsx)(v,{children:i})})}):Object(c.jsx)(s.Box,{height:80})]})},S=["id","name","description","pattern","matchingScore","isPatternEmpty","onIsInteresting","onIsNotInteresting","isMarkedAsInteresting","isMarkedAsNotInteresting","onShowDetails"],T=Object(a.default)(s.Card)((function(e){var t=e.isMarkedAsInteresting,n=e.isMarkedAsNotInteresting,i=e.theme,r=void 0;return t&&(r="2px solid ".concat(i.colors.primary[2])),n&&(r="2px solid ".concat(i.colors.grey[3])),{border:r}})),I=function(e){var t=e.id,n=e.name,i=void 0===n?"":n,a=e.description,s=e.pattern,u=e.matchingScore,d=e.isPatternEmpty,f=e.onIsInteresting,j=e.onIsNotInteresting,p=e.isMarkedAsInteresting,g=e.isMarkedAsNotInteresting,m=e.onShowDetails,O=Object(o.a)(e,S);return Object(c.jsxs)(T,Object(r.a)(Object(r.a)({boxShadow:"small",padding:3,pt:2,display:"flex",flexDirection:"column",justifyContent:"space-between",width:460,maxWidth:"100%",height:371,isMarkedAsInteresting:p||!1,isMarkedAsNotInteresting:g||!1},O),{},{children:[Object(c.jsx)(y,{id:t,name:i,description:a,matchingScore:u,isPatternEmpty:d}),Object(c.jsx)(b,{pattern:s,onShowDetails:m}),Object(c.jsx)(l,{onIsInteresting:f,onIsNotInteresting:j,isMarkedAsInteresting:p,isMarkedAsNotInteresting:g,onShowDetails:m})]}))}},900:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(53),r=n(0),o=n.n(r),a=n(19),s=n(10),c=function(){var e=Object(s.useAppContext)().user,t=Object(a.useSetUserTrainingSuggestionMutation)(),n=Object(i.a)(t,1)[0],r=o.a.useMemo((function(){return e.id}),[e]);return{onIsInteresting:function(e){var t=e.trainingId;n({variables:{input:{entity:r,suggestedEntity:t,isRelevant:!0}},refetchQueries:["getTrainingDetails","getTrainings"]})},onIsNotInteresting:function(e){var t=e.trainingId,i=e.feedback;n({variables:{input:{entity:r,suggestedEntity:t,isRelevant:!1,comment:i}},refetchQueries:["getTrainingDetails","getTrainings"]})}}}},902:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var i=n(223),r=n(53),o=n(285),a=n(187),s=n(188),c=n(17),l=n(0),u=n(15),d=n(61),f=n(65),b=n(14),j=n(10),p=n(19),g=n(37),m=n(63),O=n(32),h=n(747),v=n(843),x=n(789),y=n(1),S=["capabilities","initialValues","isOpened","isLoading","isModification","trainingTag","onSubmit","onClose"],T=Object(d.default)(b.TextArea)((function(){return{borderRadius:0}})),I={userId:"NONE",trainingPinId:"NONE",trainingName:"",freeRequestMode:!1,isAdvancedSettings:!1,status:O.PinTrainingStatus.Suggested,budgetYear:void 0,deadline:void 0,startDate:void 0,endDate:void 0,comment:void 0,customFields:void 0},_=function(e,t){var n;switch(t.type){case"init":return Object(c.a)(Object(c.a)({},e),{},{userId:t.userId,trainingPinId:t.trainingPinId,trainingName:t.trainingName,freeRequestMode:t.freeRequestMode,isAdvancedSettings:t.isAdvancedSettings,status:t.status,budgetYear:t.budgetYear,deadline:"undefined"!==typeof t.deadline?Object(g.localeMoment)(t.deadline).hour(12).toISOString():void 0,startDate:"undefined"!==typeof t.startDate?Object(g.localeMoment)(t.startDate).hour(12).toISOString():void 0,endDate:"undefined"!==typeof t.endDate?Object(g.localeMoment)(t.endDate).hour(12).toISOString():void 0,comment:t.comment,customFields:t.customFields});case"turnOnIsAdvancedSettings":return Object(c.a)(Object(c.a)({},e),{},{isAdvancedSettings:!0});case"setDate":return Object(c.a)(Object(c.a)({},e),{},{startDate:t.startDate,endDate:t.endDate});case"setCustomFields":var i=Object.keys(t.customField||[])[0],r=null===(n=e.customFields)||void 0===n?void 0:n.filter((function(e){return Object.keys(e||{})[0]!==i}));return Object(c.a)(Object(c.a)({},e),{},{customFields:[].concat(Object(s.a)(r||[]),[t.customField])});case"setState":return Object(c.a)(Object(c.a)({},e),{},Object(a.a)({},t.key,t.value));case"reset":return I}},w=function(e){var t=e.customFields,n=e.id;if(null===t||void 0===t?void 0:t.find((function(e){return Object.keys(e||{})[0]===n})))return Object.values(t.find((function(e){return Object.keys(e||{})[0]===n}))||[])[0]},k=function(e){var t=e.capabilities,n=e.initialValues,s=e.isOpened,d=e.isLoading,O=e.isModification,k=void 0!==O&&O,A=e.trainingTag,C=e.onSubmit,N=e.onClose,E=(Object(o.a)(e,S),Object(b.useTranslate)({capitalize:!0})),R=Object(f.h)(),P=Object(u.useParams)().userId,L=Object(l.useReducer)(_,I),M=Object(r.a)(L,2),F=M[0],B=F.userId,D=F.trainingPinId,q=F.trainingName,z=F.freeRequestMode,U=F.isAdvancedSettings,W=F.status,G=F.budgetYear,Y=F.deadline,H=F.startDate,Z=F.endDate,V=F.comment,K=F.customFields,J=M[1],Q=Object(j.useAppContext)(),X=Q.customFields.pinnedTrainingFields,$=P||Q.user.id,ee=Object(p.useGetPinnedTrainingsLazyQuery)({fetchPolicy:"cache-first",nextFetchPolicy:"cache-only"}),te=Object(r.a)(ee,2),ne=te[0],ie=te[1].data;Object(l.useEffect)((function(){"undefined"!==typeof B&&"NONE"!==B&&"undefined"!==typeof A&&"NO_REF"!==A.id&&"NONE"!==A.id&&ne({variables:{dataFilters:{user:{inUsers:[B]},training:{inValues:[A.id]}}}})}),[A,B]),Object(l.useEffect)((function(){var e="NO_REF"===A.id;if(k){var t=[];if(null===n||void 0===n?void 0:n.customFields)for(var i=0,o=Object.entries(n.customFields);i<o.length;i++){var s=Object(r.a)(o[i],2),l=s[0],u=s[1];t.push(Object(a.a)({},l,u))}J({type:"init",userId:null===n||void 0===n?void 0:n.userId,trainingPinId:null===n||void 0===n?void 0:n.trainingPinId,trainingName:(null===n||void 0===n?void 0:n.trainingName)||"",freeRequestMode:e,isAdvancedSettings:!0,status:(null===n||void 0===n?void 0:n.status)||I.status,budgetYear:null===n||void 0===n?void 0:n.budgetYear,deadline:null===n||void 0===n?void 0:n.deadline,startDate:null===n||void 0===n?void 0:n.startDate,endDate:null===n||void 0===n?void 0:n.endDate,comment:null===n||void 0===n?void 0:n.comment,customFields:t})}else J(Object(c.a)(Object(c.a)({type:"init"},I),{},{freeRequestMode:e,userId:$}))}),[n,!0===s]);var re=function(e){return function(t){J("deadline"!==e?{type:"setState",key:e,value:t}:{type:"setState",key:e,value:Object(g.localeMoment)(t).toISOString()})}},oe=function(){J({type:"reset"}),N()},ae=Object(l.useMemo)((function(){var e,n=[],r=Object(i.a)(h.b);try{var o=function(){var i=e.value;k?(W&&!((null===t||void 0===t?void 0:t.allowedStatuses)||[]).includes(W)&&i[0]===W&&n.push(i),((null===t||void 0===t?void 0:t.allowedStatuses)||[]).forEach((function(e){i[0]===e&&n.push(i)}))):n.push(i)};for(r.s();!(e=r.n()).done;)o()}catch(a){r.e(a)}finally{r.f()}return n}),[t]),se=Object(l.useMemo)((function(){return Object(x.b)(null===ie||void 0===ie?void 0:ie.pinnedTrainings.nodes)}),[ie]);return Object(y.jsx)(j.FormContainerModal,{title:E(k?"modify_training_application":"create_training_application"),confirmButtonLabel:E(k?"modify":"create"),maxHeight:"95vh",onClose:oe,onCancel:oe,onConfirm:function(){var e={};K?K.forEach((function(t){var n=Object(r.a)(Object.entries(t||[])[0],2),i=n[0],o=n[1];e=Object(c.a)(Object(c.a)({},e),{},Object(a.a)({},i,o))})):e=void 0,C({userId:B,trainingPinId:D,trainingId:A.id,trainingName:q,status:W,budgetYear:G,deadline:Y?Object(g.localeMoment)(Y).toISOString():void 0,startDate:H?Object(g.localeMoment)(H).toISOString():void 0,endDate:Z?Object(g.localeMoment)(Z).toISOString():void 0,comment:V,customFields:e})},isOpened:s,isLoading:d,width:596,children:Object(y.jsxs)(b.Column,{children:["undefined"!==typeof se&&se.length>0&&Object(y.jsx)(j.FormLine,{mt:0,children:Object(y.jsx)(v.a,{pinnedTrainings:se})}),Object(y.jsx)(j.FormLine,{children:Object(y.jsx)(j.FormLabel,{content:E("targeted_training"),children:z?Object(y.jsx)(b.Input,{type:"text",value:q,placeholder:E("training_request_name_placeholder"),onChange:k?void 0:re("trainingName"),disabled:k,width:"100%"}):Object(y.jsx)(m.ObjectTag,Object(c.a)({},A))})}),Object(y.jsx)(j.FormLine,{children:Object(y.jsx)(j.FormLabel,{name:"status",content:E("status"),children:Object(y.jsx)(b.SelectField,{value:W,onChange:re("status"),zIndex:R.zIndexes.MODAL_POPOVER,readOnly:1===ae.length,placeholder:"",source:ae.map((function(e){return{label:E(e[1]),value:e[0]}})),width:"100%"})})}),!k&&!U&&Object(y.jsx)(j.FormLine,{children:Object(y.jsx)(b.Box,{width:"fit-content",onClick:function(){J({type:"turnOnIsAdvancedSettings"})},children:Object(y.jsx)(b.Text,{fontWeight:"semiBold",color:R.colors.primary[3],children:"".concat(E("advanced_settings"),"...")})})}),(k||U)&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(j.FormLine,{children:Object(y.jsx)(j.FormLabel,{name:"budgetYear",content:E("budget_year"),mr:1,children:Object(y.jsx)(b.Input,{value:G,onChange:re("budgetYear"),placeholder:E("add_a_value")})})}),Object(y.jsx)(j.FormLine,{children:Object(y.jsx)(b.PeriodPicker,{startDate:H,endDate:Z,onChange:function(e){var t=e.startDate,n=e.endDate;t===H&&n===Z||J({type:"setDate",startDate:t||void 0,endDate:n||void 0})},isOneDayMinimumGap:!1})}),X.map((function(e){return Object(y.jsx)(j.FormLine,{children:Object(y.jsx)(m.CustomField,Object(c.a)({mr:1,field:e,withLabel:!0,value:w({customFields:K,id:e._key}),onSubmit:function(t){return function(e){var t=Object(a.a)({},e.id,e.value);J({type:"setCustomFields",customField:t})}({id:e._key,value:t,comparator:"DATE"===e.field_type?"BETWEEN":"IN_VALUES",fieldType:e.field_type})}},e),e._key)},e._key)}))]}),Object(y.jsx)(j.FormLine,{children:Object(y.jsx)(j.FormLabel,{name:"comment",content:E("comment"),children:Object(y.jsx)(T,{value:V,onChange:re("comment"),placeholder:E("add_comment")})})})]})})}},903:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n(17),r=n(188),o=n(53),a=n(285),s=n(0),c=n(189),l=n(61),u=n(63),d=n(14),f=n(1),b=["pattern"],j=Object(l.default)(d.Text)((function(){return{padding:0,textDecoration:"underline",":hover":{background:"none"}}})),p=function(e){var t=e.pattern,n=void 0===t?{}:t,l=Object(a.a)(e,b),p=Object(s.useState)(!1),g=Object(o.a)(p,2),m=g[0],O=g[1],h=Object(s.useState)(0),v=Object(o.a)(h,2),x=v[0],y=v[1],S=Object(d.useTranslate)({capitalize:!0}),T=Object(s.useRef)(null);Object(s.useEffect)((function(){T.current&&y(T.current.offsetHeight)}),[T]);var I=[].concat(Object(r.a)((null===n||void 0===n?void 0:n.should)||[]),Object(r.a)((null===n||void 0===n?void 0:n.must)||[])).map((function(e){var t;return{skill:(null===e||void 0===e?void 0:e.skill)||null,qualifiers:{edges:(null===e||void 0===e||null===(t=e.qualifiers)||void 0===t?void 0:t.map((function(e){return{node:e.qualifier,value:e.value}})))||[]}}})).filter((function(e){var t=e.skill;return!!t&&t.name&&t.id}));return Object(f.jsxs)(d.Box,Object(i.a)(Object(i.a)({},l),{},{children:[Object(f.jsx)(d.Box,{as:c.motion.div,overflow:"hidden",variants:{open:{maxHeight:x},close:{maxHeight:166,overflow:"hidden"}},animate:m?"open":"close",children:Object(f.jsx)(d.Box,{ref:T,display:"flex",flexWrap:"wrap",pt:1,children:I.map((function(e){var t=e.skill;return Object(f.jsx)(u.ObjectTag,{kind:"skillTag",id:t.id,name:t.name,color:t.color,logo:t.logo,mr:0,mb:0},t.id)}))})}),x>166&&Object(f.jsx)(j,{fontWeight:"semiBold",mt:1,onClick:function(){O(!m)},children:S(m?"show_less":"show_more")})]}))}}}]);