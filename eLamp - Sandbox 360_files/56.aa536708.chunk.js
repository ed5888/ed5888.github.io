(this["webpackJsonp@elamp/main-app"]=this["webpackJsonp@elamp/main-app"]||[]).push([[56],{1575:function(e,t,s){"use strict";s.r(t);var n=s(53),a=s(285),l=s(17),r=s(188),i=s(0),o=s(15),u=s(14),d=s(19),c=s(32),m=s(414),b=s(37),p=s(45),v=s(10),f=s(121),j=s(3),O=s(743),g=s(854),y=s(1),S=["isMyPendingAssessments"],C=function(e,t){var s;if("undefined"!==typeof e||"undefined"!==typeof t)return Array.from(new Set((s=e||[]).concat.apply(s,Object(r.a)(t||[]))))},h=function(e,t){var s;if("undefined"!==typeof e||"undefined"!==typeof t)return Array.from(new Set((s=e||[]).concat.apply(s,Object(r.a)(t||[]))))},x=function(e,t){var s;if("undefined"!==typeof e||"undefined"!==typeof t)return Array.from(new Set((s=e||[]).concat.apply(s,Object(r.a)(t||[]))))},F=function(e,t){var s=[{name:e("my_subalterns"),filters:{assessment:{evaluatedUser:{managedBy:["me"]}}}},{name:e("all_my_subalterns"),filters:{assessment:{evaluatedUser:{managedByWithHierarchy:["me"]}}}}];return t.length>0&&s.push({name:e("my_entities"),filters:{assessment:{evaluatedUser:{inGroups:t}}}}),s.push({name:e("my_pending_assessments"),filters:{assessment:{isMyPendingAssessments:!0}}}),s};t.default=function(){var e,t=Object(u.useTranslate)({capitalize:!0}),s=Object(v.useAppContext)(),r=s.customFields,_=s.getErrorMessage,k=s.userGroups,A=s.userPreferences,T=Object(u.useAlert)(),R=Object(o.useHistory)(),E=Object(O.a)().redirectToEntity404,P=Object(o.useParams)(),D=Object(v.useFilters)({category:v.UserSavedDataFiltersEnum.AssessmentsList,defaultEntity:"assessment",entities:["assessment"],defaultFilter:{assessment:{campaign:{inValues:"undefined"!==typeof P.parentCampaignId?[P.parentCampaignId]:void 0}}},defaultSelectedFilterName:"undefined"===typeof P.parentCampaignId?t("my_pending_assessments"):void 0,initialStandardFilters:F(t,k),mergeFilters:function(e,t){var s,n,a,r,i,o,u,d,c,m,b,p;return Object(l.a)(Object(l.a)({},e),{},{assessment:Object(l.a)(Object(l.a)({},e.assessment),{},{status:{inValues:C(null===(s=e.assessment)||void 0===s||null===(n=s.status)||void 0===n?void 0:n.inValues,null===(a=t.assessment)||void 0===a||null===(r=a.status)||void 0===r?void 0:r.inValues)},assessmentForm:{inValues:h(null===(i=e.assessment)||void 0===i||null===(o=i.assessmentForm)||void 0===o?void 0:o.inValues,null===(u=t.assessment)||void 0===u||null===(d=u.assessmentForm)||void 0===d?void 0:d.inValues)},campaign:{inValues:x(null===(c=e.assessment)||void 0===c||null===(m=c.campaign)||void 0===m?void 0:m.inValues,null===(b=t.assessment)||void 0===b||null===(p=b.campaign)||void 0===p?void 0:p.inValues)}})})},savedDataFilters:null===A||void 0===A?void 0:A.savedDataFilters}),I=D.createAdvancedFilter,M=D.dataFilters,L=D.deleteAdvancedFilter,N=D.filterNameToDelete,U=D.isDeletingAdvancedFilter,w=D.isOpenedDeleteConfirmModal,K=D.localStorageLabel,W=D.onCloseDeleteConfirmModal,V=D.openDeleteAdvancedFilterModal,z=D.quickFilters,B=D.selectedFilter,G=D.setQuickFilters,J=D.setSelectedFilter,q=D.standardFilters,Q=D.updateAdvancedFilter;Object(i.useEffect)((function(){"undefined"!==typeof P.parentCampaignId&&J(void 0)}),[P]),Object(i.useEffect)((function(){Object(m.setLocalStorage)({label:K,value:{dataFilters:M,quickFilters:z,selectedFilter:B,standardFilters:q}})}),[M,z,B,q]);var Y=Object(i.useMemo)((function(){var e,t;return((null===(e=M.assessment)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.inValues)||[]).length>0}),[M]),H=Object(i.useMemo)((function(){var e,t;return((null===(e=M.assessment)||void 0===e||null===(t=e.assessmentForm)||void 0===t?void 0:t.inValues)||[]).length>0}),[M]),X=Object(i.useMemo)((function(){var e,t;return((null===(e=M.assessment)||void 0===e||null===(t=e.campaign)||void 0===t?void 0:t.inValues)||[]).length>0}),[M]),Z=Object(i.useMemo)((function(){var e=M.assessment||{};return{isMyPendingAssessments:e.isMyPendingAssessments,queryDataFilters:Object(a.a)(e,S)}}),[M]),$=Object(d.useGetAssessmentCampaignNameLazyQuery)({fetchPolicy:"cache-first",onError:function(e){return E({entity:f.d.Assessment,error:e})}}),ee=Object(n.a)($,2),te=ee[0],se=ee[1].data,ne=Object(d.usePaginateGraphQLQuery)({query:d.GetAssessmentsDocument,variables:{first:0,after:"0",dataFilters:Z.queryDataFilters,isMyPendingAssessments:Z.isMyPendingAssessments},pageSize:200,getConnections:function(e){return e.assessments}}),ae=ne.nodes,le=ne.facets,re=ne.loading,ie=ne.isLoadingMore,oe=ne.error,ue=ne.totalCount,de=ne.loadMore,ce=ne.fetchMorePromise,me=function(e){var t,s,n="sharedForm"===((null===(t=e.assessmentForm)||void 0===t?void 0:t.assessmentType)||"individualForm")?1:(null===(s=e.assessors)||void 0===s?void 0:s.totalCount)||0;return{completed:(e.assessmentRows||[]).filter((function(e){return e.status===c.AssessmentRowStatus.DONE})).length,total:n}},be=function(e){return(null===e||void 0===e?void 0:e.nodes)?null===e||void 0===e?void 0:e.nodes.map((function(e){var t,s,n,a,r=[];"AssessmentSkillsFromList"===e.skillsScope.__typename&&e.skillsScope.selectedSkills?e.skillsScope.selectedSkills.forEach((function(e){r.push({kind:"skillTag",id:e.id,name:e.name,color:e.color,logo:e.logo})})):"AssessmentSkillsFromEvaluatedUserJobs"===e.skillsScope.__typename&&e.skillsScope.userJobs&&e.skillsScope.userJobs.forEach((function(e){r.push({kind:"jobTag",id:e.id,name:e.name})}));var i,o="AssessmentSkillsFromList"===(null===e||void 0===e?void 0:e.skillsScope.__typename)?"SELECTED_SKILLS":"USER_JOBS";return{id:e.id,name:e.name,status:e.status,updatedAt:e.updatedAt,startDate:e.startDate,approvers:((null===(t=e.approvers)||void 0===t?void 0:t.nodes)||[]).map((function(e){return Object(d.getFormatedUserBasicFragment)(e)})),approvalsProgress:{total:(null===(s=e.approvers)||void 0===s?void 0:s.totalCount)||0,approved:(null===(n=e.approvals)||void 0===n?void 0:n.length)||0},assessors:e.assessors.edges.map((function(e){return Object(l.a)(Object(l.a)({},Object(d.getFormatedUserBasicFragment)(e.node)),{},{updatedAt:e.updatedAt})})),evaluationsProgress:me(e),validators:e.validators.nodes.map((function(e){return Object(d.getFormatedUserBasicFragment)(e)})),validatedSkillsCount:(e.validatedSkills||[]).length,result:(i=e.result,null!==i&&"undefined"!==typeof i?i:""),rawResult:e.rawResult,evaluatedUser:Object(l.a)(Object(l.a)({},Object(d.getFormatedUserBasicFragment)(e.evaluatedUser)),{},{externalId:e.evaluatedUser.externalId||""}),evaluationObjects:r,evaluationObjectsType:o,campaignName:null===(a=e.campaign)||void 0===a?void 0:a.name}})):[]},pe=Object(i.useMemo)((function(){return be({nodes:ae})}),[ae]),ve=Object(i.useMemo)((function(){if(null===le||void 0===le?void 0:le.byStatus){var e={};return le.byStatus.map((function(t){if(t.status){var s=t.status;e[s]=g.b.get(s)}})),e}}),[le]),fe=Object(i.useMemo)((function(){if(null===le||void 0===le?void 0:le.byAssessmentForm){var e={};return le.byAssessmentForm.forEach((function(t){t.assessmentForm&&(e[t.assessmentForm.id]=t.assessmentForm.name)})),e}}),[le]),je=Object(i.useMemo)((function(){var e=null===se||void 0===se?void 0:se.assessmentCampaign;if(e&&"undefined"!==typeof P.parentCampaignId)return{id:e.id,name:e.name}}),[se,P]),Oe=Object(i.useMemo)((function(){if((null===le||void 0===le?void 0:le.byCampaign)&&("undefined"!==typeof P.parentCampaignId&&"undefined"!==typeof je||"undefined"===typeof P.parentCampaignId)){var e={};return le.byCampaign.forEach((function(t){t.assessmentCampaign&&(e[t.assessmentCampaign.id]=t.assessmentCampaign.name)})),"undefined"!==typeof je&&(e[je.id]=je.name),e}}),[le,je,P]);Object(i.useEffect)((function(){"undefined"!==typeof P.parentCampaignId&&te({variables:{id:P.parentCampaignId}})}),[P]);var ge=function(e){G({assessment:Object(l.a)(Object(l.a)({},z.assessment),{},{status:{inValues:e.length>0?e:void 0}})})},ye=function(){ge([])},Se=function(e){G({assessment:Object(l.a)(Object(l.a)({},z.assessment),{},{assessmentForm:{inValues:e.length>0?e:void 0}})})},Ce=function(){Se([])},he=function(e){G({assessment:Object(l.a)(Object(l.a)({},z.assessment),{},{campaign:{inValues:e.length>0?e:void 0}})})},xe=function(){he([])},Fe=Object(i.useMemo)((function(){var e,s,n,a;return"undefined"!==typeof ve&&"undefined"!==typeof fe&&"undefined"!==typeof Oe?[{id:"status",title:t("status"),type:v.QuickFilterTypes.MultiSelect,elements:ve,value:(null===(e=M.assessment)||void 0===e||null===(s=e.status)||void 0===s?void 0:s.inValues)||[],isSelected:Y,onApplyFilter:ge,onClearFilter:ye},{id:"assessmentForm",title:t("assessment_form"),type:v.QuickFilterTypes.MultiSelect,elements:fe,value:(null===(n=M.assessment)||void 0===n||null===(a=n.assessmentForm)||void 0===a?void 0:a.inValues)||[],isSelected:H,onApplyFilter:Se,onClearFilter:Ce},{id:"assessmentCampaign",title:t("campaign_title"),type:v.QuickFilterTypes.MultiSelect,elements:Oe,value:"undefined"!==typeof P.parentCampaignId?[P.parentCampaignId]:[],isSelected:X,onApplyFilter:he,onClearFilter:xe}]:[]}),[ve,Y,fe,H,Oe,X,P]);oe&&T.error(_(oe));var _e=[{dataKey:"assessmentId",headerTitle:t("assessmentId"),isSortable:!1,columnWidth:Object(p.b)("small"),cellRenderer:function(e){e.node;return Object(y.jsx)(y.Fragment,{})},xlsCellRenderer:function(e){var t=e.node;return Object(v.xlsStringCell)(t.id)},isExportOnly:!0},{dataKey:"assessmentTitle",headerTitle:t("assessment",{smart_count:1}),isSortable:!1,columnWidth:Object(p.b)("large"),cellRenderer:function(e){var t=e.node;return Object(y.jsx)(v.LongTextCell,{text:t.name,fontWeight:"semiBold",size:"large",isClickable:!0,isTwoLines:!0,onClick:function(){R.push(j.b.USER_PROFILE_ASSESSMENT.getRoute({userId:t.evaluatedUser.id,assessmentId:t.id}))}})},xlsCellRenderer:function(e){var t=e.node;return Object(v.xlsStringCell)(t.name)}},{dataKey:"evaluatedUserId",headerTitle:"".concat(t("population_evaluated_title",{smart_count:1})," - ").concat(t("id_short")),isSortable:!1,columnWidth:Object(p.b)("medium"),cellRenderer:function(e){e.node;return Object(y.jsx)(y.Fragment,{})},xlsCellRenderer:function(e){var t=e.node;return Object(v.xlsStringCell)(t.evaluatedUser.id)},isExportOnly:!0},{dataKey:"evaluatedUserExternalId",headerTitle:"".concat(t("population_evaluated_title",{smart_count:1})," - ").concat(t("external_id_short")),isSortable:!1,columnWidth:Object(p.b)("medium"),cellRenderer:function(e){e.node;return Object(y.jsx)(y.Fragment,{})},xlsCellRenderer:function(e){var t=e.node;return Object(v.xlsStringCell)(t.evaluatedUser.externalId)},isExportOnly:!0},{dataKey:"evaluatedUser",headerTitle:t("population_evaluated_title",{smart_count:1}),isSortable:!1,columnWidth:Object(p.b)("medium"),cellRenderer:function(e){var t=e.node;return Object(y.jsx)(v.SingleUserCell,{user:t.evaluatedUser,size:"medium"})},xlsCellRenderer:function(e){var t=e.node;return Object(v.xlsUserCell)(t.evaluatedUser)}},{dataKey:"status",headerTitle:t("status",{smart_count:1}),isSortable:!1,columnWidth:Object(p.b)("medium"),cellRenderer:function(e){var t=e.node;return Object(y.jsx)(v.GenericStatusCell,{statusObject:Object(p.g)(g.a,t.status),size:"medium"})},xlsCellRenderer:function(e){var s=e.node;return t(Object(v.xlsEnumCell)(s.status,g.b))}},{dataKey:"startDate",headerTitle:t("startDate"),isSortable:!1,isExportOnly:!0,columnWidth:Object(p.b)("small"),cellRenderer:function(e){e.node;return Object(y.jsx)(y.Fragment,{})},xlsCellRenderer:function(e){var t=e.node;return Object(v.xlsDateCell)(t.startDate)}},{dataKey:"updatedAt",headerTitle:t("last_update",{smart_count:1}),isSortable:!1,columnWidth:Object(p.b)("small"),cellRenderer:function(e){var t=e.node;return Object(y.jsx)(v.UpdatedAtCell,{updatedAt:t.updatedAt,size:"small"})},xlsCellRenderer:function(e){var t=e.node;return Object(v.xlsDateCell)(t.updatedAt)}},{dataKey:"skillScope",headerTitle:t("skill",8),isSortable:!1,columnWidth:Object(p.b)("large"),cellRenderer:function(e){var t=e.node;return Object(y.jsx)(v.SkillsScopeCell,{evaluationObjects:t.evaluationObjects,evaluationObjectsType:t.evaluationObjectsType,size:"large"})},xlsCellRenderer:function(e){var t=e.node;return Object(v.xlsObjectTagCell)(t.evaluationObjects)}},{dataKey:"evaluationsProgress",headerTitle:t("assessment_evaluationsProgress_title"),isSortable:!1,columnWidth:Object(p.b)("small"),cellRenderer:function(e){var t=e.node;return Object(y.jsx)(v.ProgressionStatusCell,{actualValue:t.evaluationsProgress.completed,attendedValue:t.evaluationsProgress.total,size:"small"})},xlsCellRenderer:function(e){var t=e.node;return Object(v.xlsNumberCell)(t.evaluationsProgress.completed)}},{dataKey:"evaluationsProgressTotal",headerTitle:t("assessment_evaluationsProgress_total_title"),isSortable:!1,columnWidth:Object(p.b)("small"),cellRenderer:function(e){e.node;return Object(y.jsx)(y.Fragment,{})},xlsCellRenderer:function(e){var t=e.node;return Object(v.xlsNumberCell)(t.evaluationsProgress.total)},isExportOnly:!0},{dataKey:"assessors",headerTitle:t("assessors",{smart_count:1}),isSortable:!1,columnWidth:Object(p.b)("large"),cellRenderer:function(e){var t=e.node;return Object(y.jsx)(v.MultipleUsersCell,{users:t.assessors,size:"large"})},xlsCellRenderer:function(e){var t=e.node;return Object(v.xlsUserCell)(t.assessors)}},{dataKey:"validatedSkillsCount",headerTitle:t("assessment_validatedSkillsCompleted"),isSortable:!1,columnWidth:Object(p.b)("small"),cellRenderer:function(e){var t=e.node;return Object(y.jsx)(v.BoolCell,{bool:t.validatedSkillsCount>0,displayLabel:!0})},xlsCellRenderer:function(e){return e.node.validatedSkillsCount>0}},{dataKey:"validators",headerTitle:t("validator",{smart_count:10}),isSortable:!1,columnWidth:Object(p.b)("large"),cellRenderer:function(e){var t=e.node;return Object(y.jsx)(v.MultipleUsersCell,{users:t.validators,size:"large"})},xlsCellRenderer:function(e){var t=e.node;return Object(v.xlsUserCell)(t.validators)}},{dataKey:"approvalsProgress",headerTitle:t("assessment_approvalsProgress_title"),isSortable:!1,columnWidth:Object(p.b)("small"),cellRenderer:function(e){var t=e.node;return Object(y.jsx)(v.ProgressionStatusCell,{actualValue:t.approvalsProgress.approved,attendedValue:t.approvalsProgress.total,size:"small"})},xlsCellRenderer:function(e){var t=e.node;return Object(v.xlsNumberCell)(t.approvalsProgress.approved)}},{dataKey:"approvalsProgressTotal",headerTitle:t("assessment_approvalsProgress_total_title"),isSortable:!1,columnWidth:Object(p.b)("small"),cellRenderer:function(e){e.node;return Object(y.jsx)(y.Fragment,{})},xlsCellRenderer:function(e){var t=e.node;return Object(v.xlsNumberCell)(t.approvalsProgress.total)},isExportOnly:!0},{dataKey:"approvers",headerTitle:t("approvers"),isSortable:!1,columnWidth:Object(p.b)("large"),cellRenderer:function(e){var t=e.node;return Object(y.jsx)(v.MultipleUsersCell,{users:t.approvers,size:"large"})},xlsCellRenderer:function(e){var t=e.node;return Object(v.xlsUserCell)(t.approvers)}},{dataKey:"result",headerTitle:t("result",{smart_count:1}),isSortable:!1,columnWidth:Object(p.b)("medium"),cellRenderer:function(e){var t=e.node;return Object(y.jsx)(v.ResultsCell,{result:null===t||void 0===t?void 0:t.result,size:"medium"})},xlsCellRenderer:function(e){var t=e.node;return(null===t||void 0===t?void 0:t.rawResult)?JSON.stringify(null===t||void 0===t?void 0:t.rawResult):""}},{dataKey:"assessmentCampaign",headerTitle:t("campaign_title"),isSortable:!1,columnWidth:Object(p.b)("large"),cellRenderer:function(e){var t=e.node;return Object(y.jsx)(v.ShortTextCell,{text:t.campaignName,fontWeight:"semiBold",size:"large"})},xlsCellRenderer:function(e){var t=e.node;return Object(v.xlsStringCell)(t.campaignName)}}],ke=Object(v.useExportTable)({worksheetName:"".concat(t("assessments"),"_").concat(Object(b.localeMoment)().format("DD-MM-YYYY")),columns:_e,fetchRowsPromise:ce,rowsMappingFn:function(e){return be(e.assessments)},pageSize:300,totalRowCount:ue,fixedColumnCount:1}),Ae=Object(n.a)(ke,2),Te=Ae[0],Re=Ae[1];return Object(y.jsxs)(v.PageLayout,{pr:"0px",pb:"0px",display:"flex",flexDirection:"column",children:[Object(y.jsx)(v.TableToolbox,{isLoading:re,totalCount:ue||0,quickFilters:Fe,advancedFilters:{advancedFilters:(null===A||void 0===A||null===(e=A.savedDataFilters)||void 0===e?void 0:e.assessmentsList)||[],advancedFiltersSchema:[d.AssessmentDataFiltersSchema],subFieldsCustomFieldsSchema:{evaluatedUser:Object(d.getDataFiltersCustomFields)(r.userFields)||[]},standardFilters:q,selectedFilter:B,onSelectFilter:J,onNewFilter:function(e){I(Object(l.a)(Object(l.a)({},e),{},{filters:e.filters[d.AssessmentDataFiltersSchema.entity]}))},onUpdateFilter:function(e){Q(Object(l.a)(Object(l.a)({},e),{},{filters:e.filters[d.AssessmentDataFiltersSchema.entity]}))},onDeleteFilter:function(e){V(e)}},menuActions:[{title:t("export_action"),onClick:function(){return Re()},disabled:Te}]}),Object(y.jsx)(v.TableContent,{rows:null===pe||void 0===pe?void 0:pe.map((function(e){return e})),columns:_e,isLoading:re,isLoadingMore:ie,loadMoreRows:function(e){var t=e.startIndex;de(t)},totalRowCount:ue,fixedColumnCount:2,noRowsRenderer:function(){return Object(y.jsx)(v.NoDataToDisplay,{})}}),Object(y.jsx)(v.DeleteAdvancedFilterConfirmModal,{filterName:N,isOpened:w,onConfirm:function(){L()},onCancel:W,isLoading:U})]})}},743:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s(15),a=s(19),l=s(3),r=function(){var e=Object(n.useHistory)();return{redirectToEntity404:function(t){var s=t.entity;t.error.message===a.ErrorCodeEnum.NotFound&&e.push(l.b.PAGE_NOT_FOUND.getRoute({entity:s}))}}}},794:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));s(0);var n=s(32),a=s(14),l=s(63),r=s(1),i={past:"job_status_past",have:"job_status_have",goal:"job_status_goal"},o=function(e){var t=e.skills,s=e.userJobsStatuses,o=e.noJobText,u=e.noSkillText,d=Object(a.useTranslate)({capitalize:!0});if("undefined"!==typeof s){if(null===s)return Object(r.jsx)(a.Text,{children:o||d("no_job")});var c=d("skills_from_their_jobs");if(s.length>0){var m=s.length<Object.keys(n.JobPinStatus).length?s.map((function(e){return d(i[e])})).join(", "):d("job_status_all");c+=" (".concat(m,")")}return Object(r.jsx)(l.ObjectTag,{kind:"jobTag",id:"userJobs",name:c})}return"undefined"===typeof t||0===t.length?Object(r.jsx)(a.Text,{children:u||d("no_skill_in_scope")}):t.length>0?Object(r.jsx)(l.SkillsSummary,{skills:t}):null}},798:function(e,t,s){"use strict";s.d(t,"a",(function(){return y}));var n=s(17),a=s(188),l=s(187),r=s(139),i=s.n(r),o=s(286),u=s(53),d=s(285),c=s(0),m=s(115),b=s(19),p=s(14),v=s(63),f=s(1),j=["isPopover","buttonLabel","onOpen","isOpened","onClose"],O=function(e){var t=e.isPopover,s=void 0===t||t,a=e.buttonLabel,l=e.onOpen,r=e.isOpened,i=e.onClose,o=Object(d.a)(e,j);return Object(f.jsx)(p.Box,Object(n.a)(Object(n.a)({},o),{},{children:s?Object(f.jsx)(p.Popover,{isOpened:r,onClose:i,content:Object(f.jsx)(f.Fragment,{children:o.children}),children:Object(f.jsx)(p.Button,{onClick:l,appearance:"clean",children:a})}):o.children}))},g=["skillsScopeType","skillsScope","onChange","isPopover"],y=function(e){var t=e.skillsScopeType,s=e.skillsScope,r=e.onChange,j=e.isPopover,y=void 0===j||j,S=Object(d.a)(e,g),C=Object(c.useState)(),h=Object(u.a)(C,2),x=h[0],F=h[1],_=Object(p.useTranslate)({capitalize:!0}),k=Object(p.useSwitch)(!1),A=k.active,T=k.off,R=k.on,E=Object(m.a)(),P=_("add_a_something","preselectedSkills"===t?{object:_("a_skill",10)}:{object:_("a_job",10)}),D=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.query({query:b.GetSkillsBasicInfosDocument,variables:{ids:t}}).then((function(e){var t,s=null===(t=e.data)||void 0===t?void 0:t.skills.nodes;s&&F(s.map((function(e){return{id:e.id,name:e.name}})))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.query({query:b.GetJobsBasicInfosDocument,variables:{ids:t}}).then((function(e){var t,s=null===(t=e.data)||void 0===t?void 0:t.jobs.nodes;s&&F(s.map((function(e){return{id:e.id,name:e.name}})))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){"undefined"!==typeof s.skillsIds?D(s.skillsIds):"undefined"!==typeof s.jobsIds&&I(s.jobsIds)}),[s]);return Object(f.jsxs)(p.Box,Object(n.a)(Object(n.a)({},S),{},{children:["undefined"!==typeof x&&x.length>0&&Object(f.jsx)(p.Box,{display:"flex",flexWrap:"wrap",children:x.map((function(e){return Object(f.jsx)(p.SelectedItem,{onRemove:(n=e.id,function(){var e,a="preselectedSkills"===t?"skillsIds":"jobsIds";"undefined"!==typeof s[a]&&r(Object(l.a)({},a,null===(e=s[a])||void 0===e?void 0:e.filter((function(e){return e!==n}))))}),mr:1,mb:1,children:"userEvaluatedJobs"===t?_("skills_of",{object:e.name}):e.name},"skillsScopeItem_".concat(e.id));var n}))}),Object(f.jsx)(O,{isOpened:A,onClose:T,onOpen:R,isPopover:y,buttonLabel:P,mb:1,children:"preselectedSkills"===t?Object(f.jsx)(v.SkillsNavigator,{multiple:!0,blockLibrarySelection:!0,isSkillWithChildrenSelectionBlocked:!0,buttonLabel:_("add"),onSubmit:function(e){var t=Array.from(new Set([].concat(Object(a.a)(s.skillsIds||[]),Object(a.a)(e.map((function(e){return e.id}))))));r({skillsIds:t}),T()}}):Object(f.jsx)(v.JobsNavigator,{multiple:!0,submitWithSubJobs:!1,onSubmit:function(e){var t,n=Array.from(new Set((t=s.jobsIds||[]).concat.apply(t,Object(a.a)(e.map((function(e){return e.id}))))));r({jobsIds:n}),T()},buttonLabel:_("add_job")})})]}))}},854:function(e,t,s){"use strict";s.d(t,"c",(function(){return n.a})),s.d(t,"d",(function(){return a.a})),s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return i}));var n=s(794),a=s(798),l=s(32),r=new Map([[l.AssessmentStatus.ONGOING,"progress"],[l.AssessmentStatus.PLANNED,"program"],[l.AssessmentStatus.VALIDATING,"waiting_for_evaluation_validation"],[l.AssessmentStatus.CLOSED,"training_status_validated"],[l.AssessmentStatus.CANCELED,"assessment_status_canceled"]]),i=new Map([[l.AssessmentStatus.CANCELED,{labelKey:"assessment_status_canceled",color:"error.0"}],[l.AssessmentStatus.CLOSED,{labelKey:"training_status_validated",color:"success.0"}],[l.AssessmentStatus.ONGOING,{labelKey:"progress",color:"secondary.0"}],[l.AssessmentStatus.PLANNED,{labelKey:"program",color:"grey.1"}],[l.AssessmentStatus.VALIDATING,{labelKey:"waiting_for_evaluation_validation",color:"alert.0"}]])}}]);