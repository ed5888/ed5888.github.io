(this["webpackJsonp@elamp/main-app"]=this["webpackJsonp@elamp/main-app"]||[]).push([[44],{1015:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i(17),r=(i(0),i(742)),l=i(1),a=function(e){var t=Object.assign({},e);return Object(l.jsx)(r.a,Object(n.a)(Object(n.a)({py:18,px:1,flexDirection:"column",overflow:"auto",width:"100%"},t),{},{children:t.children}))}},1018:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i(17),r=i(285),l=(i(0),i(14)),a=i(61),o=i(1),c=["imageElement","bottomElement","bottomElementPadding","imageHeight","onClick","isHoverEffect"],s=Object(a.default)(l.Card)((function(e){var t=e.theme;if(e.isHoverEffect)return{":hover":{backgroundColor:t.colors.grey[0]}}})),u=function(e){var t=e.imageElement,i=e.bottomElement,a=e.bottomElementPadding,u=void 0===a?20:a,d=e.imageHeight,b=e.onClick,f=(e.isHoverEffect,Object(r.a)(e,c));return Object(o.jsxs)(s,Object(n.a)(Object(n.a)({width:404,height:281,display:"flex",flexDirection:"column",justifyContent:"flex-start",boxShadow:"medium",as:l.Box,onClick:b},f),{},{children:[Object(o.jsx)(l.Line,{height:d,width:"100%",overflow:"hidden",flexShrink:0,flexGrow:0,children:t}),Object(o.jsx)(l.Line,{px:u,justifyContent:"flex-start",alignItems:"center",flexGrow:1,children:i})]}))}},1560:function(e,t,i){"use strict";i.r(t);var n=i(53),r=i(139),l=i.n(r),a=i(286),o=i(17),c=i(285),s=i(0),u=i(61),d=i(14),b=i(19),f=i(287),j=i(10),m=i(852),O=i(767),k=i(934),p=i(1015),g=i(1018),h=i.p+"static/media/library_default_cover.1c776f7b.svg",y=i(1),S=["color","imageURL"],v=Object(u.default)(d.Line)((function(e){var t=e.imageURL;return{backgroundImage:"url(".concat(t,")"),backgroundSize:"cover",backgroundPosition:"50% 50%",width:"100%",height:"100%",position:"absolute",top:0,left:0}})),x=Object(u.default)(d.Line)((function(e){var t=e.color;return{backgroundImage:"url(".concat(h,")"),backgroundColor:"string"===typeof t?t:void 0,backgroundSize:"80% auto",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%",width:"100%",height:"100%"}})),C=function(e){var t=e.color,i=e.imageURL,n=Object(c.a)(e,S);return Object(y.jsxs)(d.Box,Object(o.a)(Object(o.a)({position:"relative",width:"100%",height:"100%"},n),{},{children:[Object(y.jsx)(x,{color:t}),"undefined"!==typeof i&&Object(y.jsx)(v,{imageURL:i})]}))},w=["name","color","imageUrl","onClick"],I=function(e){var t=e.name,i=e.color,n=e.imageUrl,r=e.onClick,l=Object(c.a)(e,w);return Object(y.jsx)(g.a,Object(o.a)({width:"auto",height:188,imageElement:Object(y.jsx)(C,{color:i,imageURL:n}),imageHeight:130,bottomElement:Object(y.jsx)(d.Text,{fontWeight:"semiBold",children:t}),onClick:r},l))},T=["image"],E=Object(u.default)(d.Box)((function(e){var t=e.elementWidth,i=e.theme;return{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(".concat(t,"px, 1fr))"),gridColumnGap:i.space[3],gridRowGap:i.space[3]}}));t.default=function(){var e=Object(d.useTranslate)({capitalize:!0}),t=(Object(d.useAlert)(),Object(j.useAppContext)().user),i=Object(k.useSkillsLibraryContext)().navigateToSkill,r=Object(O.f)({userId:t.id}),u=r.isOpened,g=r.close,h=r.setSkillId,S=r.skillId,v=r.userId,x=Object(m.b)(),C=x.createSkillReview,w=x.selectedSuggestedSkillId,L=x.setSelectedSuggestedSkillId,A=Object(b.useGetAllLibrariesWithImageQuery)(),_=A.data,P=A.loading;Object(s.useEffect)((function(){u?"undefined"!==typeof S&&L(S):L(void 0)}),[u,S]),Object(s.useEffect)((function(){"undefined"!==typeof w&&h(w)}),[w]);var R=Object(s.useMemo)((function(){var e;if(null===_||void 0===_||null===(e=_.libraries)||void 0===e?void 0:e.nodes){var t=_.libraries.nodes.map((function(e){var t=e.image,i=Object(c.a)(e,T);return Object(o.a)(Object(o.a)({},Object(b.getFormatedLibraryBasicFragment)(i)),{},{imageUrl:Object(b.maybeToOptional)(null===t||void 0===t?void 0:t.url)})}));return Object(f.getNormalizedLibrariesByFamilyTag)(t,f.NO_FAMILY_TAG_NAME)}}),[_]),N=function(){var e=Object(a.a)(l.a.mark((function e(t){var i,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.skillId,n=t.qualifiers,e.abrupt("return",C({skillId:i,qualifiers:n}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(p.a,{children:[Object(y.jsx)(m.a,{onCreateSkillReview:N,onNavigateToSkill:i,selectedSkillId:w,onChangeSelectedSkillId:function(e){h(e)},width:"100%",mb:3}),P||"undefined"===typeof R?Object(y.jsx)(d.Loader,{}):Object(y.jsx)(d.Column,{justifyContent:"flex-start",width:"100%",children:Object.entries(R).map((function(t){var r=Object(n.a)(t,2),l=r[0],a=r[1];return Object(y.jsxs)(d.Column,{mb:20,width:"100%",alignItems:"flex-start",children:[Object(y.jsx)(d.Text,{fontWeight:"bold",fontSize:"big",mb:20,children:l!==f.NO_FAMILY_TAG_NAME?l:e("other",10)}),Object(y.jsx)(E,{width:"100%",elementWidth:220,children:a.map((function(e){return Object(y.jsx)(I,{name:e.name,color:e.color,imageUrl:e.imageUrl,onClick:(t=e.id,function(){i(t)})},e.id);var t}))})]},l)}))})]}),Object(y.jsx)(O.c,{isOpened:u,onClose:g,onChangeSkillId:h,skillId:S,userId:v},"UserSkillPanel_".concat(S,"_").concat(v))]})}},743:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i(15),r=i(19),l=i(3),a=function(){var e=Object(n.useHistory)();return{redirectToEntity404:function(t){var i=t.entity;t.error.message===r.ErrorCodeEnum.NotFound&&e.push(l.b.PAGE_NOT_FOUND.getRoute({entity:i}))}}}},770:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n,r=i(0),l=["title","titleId"];function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var i,n,r=function(e,t){if(null==e)return{};var i,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)i=l[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)i=l[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function c(e,t){var i=e.title,c=e.titleId,s=o(e,l);return r.createElement("svg",a({viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":c},s),i?r.createElement("title",{id:c},i):null,n||(n=r.createElement("path",{d:"M5.38073 12.3959C5.36306 12.1786 5.39045 11.96 5.4612 11.7538C5.53195 11.5475 5.64453 11.3581 5.79188 11.1974C5.95504 11.0512 6.14608 10.9393 6.35352 10.8687C6.56096 10.798 6.78054 10.77 6.99908 10.7863C7.2128 10.7724 7.42709 10.8025 7.62872 10.8747C7.83034 10.9469 8.015 11.0598 8.17129 11.2062C8.31865 11.3654 8.4319 11.5531 8.50411 11.7577C8.57632 11.9623 8.60595 12.1795 8.59119 12.3959C8.60206 12.6093 8.57055 12.8228 8.49849 13.024C8.42642 13.2252 8.31521 13.4101 8.17129 13.5681C8.01485 13.7148 7.83037 13.8284 7.62894 13.9021C7.42751 13.9757 7.21327 14.0079 6.99908 13.9968C6.78267 14.011 6.56563 13.9811 6.36112 13.9089C6.15661 13.8368 5.96889 13.7238 5.80937 13.5769C5.66198 13.4191 5.54802 13.2331 5.47436 13.0302C5.4007 12.8272 5.36885 12.6115 5.38073 12.3959ZM8.23252 8.82678H5.76563L5.24951 0.000213623H8.74865L8.23252 8.82678Z"})))}var s=r.forwardRef(c);i.p},777:function(e,t,i){"use strict";i.d(t,"a",(function(){return S})),i.d(t,"b",(function(){return E}));var n=i(53),r=i(285),l=i(17),a=i(0),o=i(751),c=i(14),s=i(63),u=i(19),d=i(10),b=i(791),f=i(61),j=i(770),m=i(1),O=["skills","onClickSkill"],k=Object(f.default)(c.Box)((function(e){return{width:20,height:20,borderRadius:20,backgroundColor:e.theme.colors.alert[2],display:"flex",justifyContent:"center",alignItems:"center"}})),p=function(e){var t=e.skills,i=e.onClickSkill,n=Object(r.a)(e,O),a=Object(c.useTranslate)({capitalize:!0});return Object(m.jsxs)(c.Column,Object(l.a)(Object(l.a)({alignItems:"flex-start"},n),{},{children:[Object(m.jsxs)(c.Line,{mb:1,children:[Object(m.jsx)(k,{mr:0,children:Object(m.jsx)(c.Icon,{as:j.a,size:12})}),Object(m.jsx)(c.Text,{fontSize:"small",children:a("already_existing_close_skills")})]}),Object(m.jsx)(c.Box,{display:"flex",flexWrap:"wrap",width:"100%",children:t.map((function(e){return Object(m.jsx)(s.ObjectTag,{kind:"skillTag",id:e.id,name:e.name,logo:e.logo,color:e.color,onClick:(t=e.id,function(){i(t)}),mr:0,mb:0},e.id);var t}))})]}))},g=["parentId","initialName","isAddableToMyProfile","onCreateSkill","onClickSuggestedSkill"],h=function(e){return{skillName:e.initialName,isAddToMyProfile:!0,isSubmitting:!1}},y=function(e,t){switch(t.type){case"setSkillName":return Object(l.a)(Object(l.a)({},e),{},{skillName:t.skillName});case"setIsAddToMyProfile":return Object(l.a)(Object(l.a)({},e),{},{isAddToMyProfile:t.isAddToMyProfile});case"setIsSubmitting":return Object(l.a)(Object(l.a)({},e),{},{isSubmitting:t.isSubmitting});case"reset":return h({initialName:t.initialName});default:return e}},S=function(e){var t=e.parentId,i=e.initialName,f=e.isAddableToMyProfile,j=void 0===f||f,O=e.onCreateSkill,k=e.onClickSuggestedSkill,S=Object(r.a)(e,g),v=Object(a.useReducer)(y,h({initialName:i})),x=Object(n.a)(v,2),C=x[0],w=C.skillName,I=C.isAddToMyProfile,T=C.isSubmitting,E=x[1],L=Object(c.useTranslate)({capitalize:!0}),A=Object(u.useSearchSkillsSuggestionsLazyQuery)(),_=Object(n.a)(A,2),P=_[0],R=_[1],N=R.data,M=R.loading,B=Object(b.a)({skillOrLibraryId:t,isGetSubSkillsCount:!1}),F=B.isLoading,G=B.skillOrLibrary;Object(a.useEffect)((function(){S.isOpened&&E({type:"reset",initialName:i})}),[S.isOpened]),Object(a.useEffect)((function(){"undefined"!==typeof w&&w.length>0&&z(w)}),[w]);var z=Object(a.useCallback)(Object(o.debounce)((function(e){P({variables:{searchQuery:e}})}),500),[]),U=Object(a.useMemo)((function(){var e=null===N||void 0===N?void 0:N.search.nodes;if(e){var t=[];return e.forEach((function(e){"Skill"===e.node.__typename&&t.push({id:e.node.id,name:e.node.name,logo:e.node.logo,color:e.node.color})})),t}}),[N]),W=Object(a.useMemo)((function(){return"undefined"===typeof w||0===w.length}),[w]);return Object(m.jsx)(d.StandardModal,Object(l.a)(Object(l.a)({title:L("create_an_object",{object:L("a_new_skill",1)}),confirmButtonLabel:L("create"),height:653,onConfirm:function(){"undefined"!==typeof w&&(E({type:"setIsSubmitting",isSubmitting:!0}),O({name:w,isAddToProfile:I}).then((function(){E({type:"setIsSubmitting",isSubmitting:!1})})).catch((function(){E({type:"setIsSubmitting",isSubmitting:!1})})))},onCancel:S.onClose,isDisabledSubmit:W,isLoading:T},S),{},{children:Object(m.jsxs)(c.Box,{height:"100%",children:[Object(m.jsx)(c.Text,{mb:20,children:L("fill_skill_form_desc")}),F?Object(m.jsx)(c.Loader,{}):"undefined"!==typeof G&&Object(m.jsxs)(c.Column,{alignItems:"flex-start",mb:20,children:[Object(m.jsx)(c.Text,{fontWeight:"bold",mb:0,children:L("you_will_create_a_skill_in")}),Object(m.jsx)(s.ObjectTag,{kind:"skillTag",id:G.id,name:G.name,color:G.color,logo:G.logo})]}),Object(m.jsx)(c.Label,{content:L("skill_name"),name:"skillName",mb:20,children:Object(m.jsx)(c.Input,{value:w,onChange:function(e){E({type:"setSkillName",skillName:e})},width:"100%"})}),j&&Object(m.jsxs)(c.Text,{as:"label",py:0,mb:20,children:[Object(m.jsx)(c.Checkbox,{checked:I,onChange:function(e){E({type:"setIsAddToMyProfile",isAddToMyProfile:!0===e})},mr:0}),L("add_to_my_profile")]}),M?Object(m.jsx)(c.Loader,{}):"undefined"!==typeof U&&U.length>0&&Object(m.jsx)(p,{skills:U,onClickSkill:k})]})}))},v=i(139),x=i.n(v),C=i(286),w=i(115),I=i(15),T=i(3),E=function(e){var t=e.parentId,i=Object(c.useSwitch)(!1),n=i.active,r=i.on,l=i.off,a=Object(I.useHistory)(),o=Object(d.useAppContext)().user,s=Object(w.a)();return{isOpened:n,close:l,open:r,createSkill:function(){var e=Object(C.a)(x.a.mark((function e(i){var n,r,l;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.name,r=i.isAddToProfile,e.next=3,s.mutate({mutation:u.CreateSkillDocument,variables:{name:n,parents:"undefined"!==typeof t?[t]:void 0}}).then((function(e){var t,i;if(null===(t=e.data)||void 0===t||null===(i=t.createSkill)||void 0===i?void 0:i.skill)return{id:e.data.createSkill.skill.id}}));case 3:if(l=e.sent,!r||"undefined"===typeof l){e.next=7;break}return e.next=7,s.mutate({mutation:u.CreateSkillReviewDocument,variables:{skillId:l.id,userId:o.id},refetchQueries:u.refetchQueries.onMutatePower,awaitRefetchQueries:!0});case 7:return e.abrupt("return");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),navigateToSuggestedSkill:function(e){l(),a.push(T.b.USER_ORGANIZATION_SKILL_DETAILS.getRoute({skillId:e}))}}}},788:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n,r,l,a=i(0),o=["title","titleId"];function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var i,n,r=function(e,t){if(null==e)return{};var i,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)i=l[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)i=l[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function u(e,t){var i=e.title,u=e.titleId,d=s(e,o);return a.createElement("svg",c({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",ref:t,"aria-labelledby":u},d),i?a.createElement("title",{id:u},i):null,n||(n=a.createElement("g",{transform:"translate(25 50)"},a.createElement("circle",{cx:0,cy:0,r:10,transform:"scale(0.429509 0.429509)"},a.createElement("animateTransform",{attributeName:"transform",type:"scale",begin:"-0.3333333333333333s",calcMode:"spline",keySplines:"0.3 0 0.7 1;0.3 0 0.7 1",values:"0;1;0",keyTimes:"0;0.5;1",dur:"1s",repeatCount:"indefinite"})))),r||(r=a.createElement("g",{transform:"translate(50 50)"},a.createElement("circle",{cx:0,cy:0,r:10,transform:"scale(0.0432413 0.0432413)"},a.createElement("animateTransform",{attributeName:"transform",type:"scale",begin:"-0.16666666666666666s",calcMode:"spline",keySplines:"0.3 0 0.7 1;0.3 0 0.7 1",values:"0;1;0",keyTimes:"0;0.5;1",dur:"1s",repeatCount:"indefinite"})))),l||(l=a.createElement("g",{transform:"translate(75 50)"},a.createElement("circle",{cx:0,cy:0,r:10,transform:"scale(0.129851 0.129851)"},a.createElement("animateTransform",{attributeName:"transform",type:"scale",begin:"0s",calcMode:"spline",keySplines:"0.3 0 0.7 1;0.3 0 0.7 1",values:"0;1;0",keyTimes:"0;0.5;1",dur:"1s",repeatCount:"indefinite"})))))}var d=a.forwardRef(u);i.p},791:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i(17),r=i(53),l=i(0),a=i(287),o=i(19),c=i(121),s=i(743),u=function(e){var t=e.isGetSubSkillsCount,i=e.skillOrLibraryId,u=Object(s.a)().redirectToEntity404,d=Object(o.useGetSkillWithSubSkillsCountLazyQuery)({fetchPolicy:"cache-and-network",nextFetchPolicy:"network-only",onError:function(e){return u({entity:c.d.Skill,error:e})}}),b=Object(r.a)(d,2),f=b[0],j=b[1],m=j.data,O=j.loading,k=Object(o.useGetLibraryWithSubSkillsCountLazyQuery)({fetchPolicy:"cache-and-network",nextFetchPolicy:"network-only",onError:function(e){return u({entity:c.d.Library,error:e})}}),p=Object(r.a)(k,2),g=p[0],h=p[1],y=h.data,S=h.loading,v=Object(l.useMemo)((function(){if("undefined"!==typeof i)return Object(a.getIsLibraryId)(i)}),[i]),x=Object(l.useCallback)((function(){"undefined"!==typeof i&&(v?g({variables:{libraryId:i,isGetSubSkillsCount:t}}):f({variables:{skillId:i,isGetSubSkillsCount:t}}))}),[v,i,t]);Object(l.useEffect)((function(){x()}),[x]);var C=Object(l.useMemo)((function(){if(null===m||void 0===m?void 0:m.skill)return Object(n.a)(Object(n.a)({},Object(o.getFormatedSkillBasicFragment)(m.skill)),{},{description:Object(o.maybeToOptional)(m.skill.description)})}),[m]),w=Object(l.useMemo)((function(){if(null===y||void 0===y?void 0:y.library)return Object(n.a)(Object(n.a)({},Object(o.getFormatedLibraryBasicFragment)(y.library)),{},{description:Object(o.maybeToOptional)(y.library.description)})}),[y]),I=Object(l.useMemo)((function(){var e,t;return v&&(null===y||void 0===y||null===(e=y.library)||void 0===e?void 0:e.subSkills)?y.library.subSkills.totalCount:!v&&(null===m||void 0===m||null===(t=m.skill)||void 0===t?void 0:t.subSkills)?m.skill.subSkills.totalCount:void 0}),[m,y,v]);return{skillOrLibrary:v?w:C,subSkillsCount:I,isLoading:S||O,isLibrary:v,refetch:x}}},826:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n,r=i(0),l=["title","titleId"];function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var i,n,r=function(e,t){if(null==e)return{};var i,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)i=l[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)i=l[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function c(e,t){var i=e.title,c=e.titleId,s=o(e,l);return r.createElement("svg",a({viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":c},s),i?r.createElement("title",{id:c},i):null,n||(n=r.createElement("path",{d:"M15.4771 9.54043C15.387 11.0741 14.7563 12.5176 13.5849 13.6904C10.9719 16.1263 6.91721 16.036 4.48441 13.51C2.0516 10.9839 2.0516 6.83393 4.57451 4.30786C7.09742 1.96222 10.8818 1.872 13.4047 4.21764L11.6026 6.02198L17.9099 7.01436L17.1891 0.699181L15.387 2.50352C11.7828 -0.834506 6.19638 -0.834506 2.77243 2.50352C-0.831729 5.93176 -0.921833 11.7056 2.50212 15.2241C5.92607 18.8328 11.6026 18.923 15.2969 15.4947C16.9188 13.9611 17.7297 11.9763 18 9.99152L15.4771 9.54043Z"})))}var s=r.forwardRef(c);i.p},852:function(e,t,i){"use strict";i.d(t,"a",(function(){return T})),i.d(t,"b",(function(){return A}));var n=i(187),r=i(139),l=i.n(r),a=i(286),o=i(188),c=i(285),s=i(17),u=i(53),d=i(0),b=i(115),f=i(287),j=i(19),m=i(63),O=i(14),k=i(826),p=i(788),g=i(10),h=i(777),y=i(189),S=i(1),v=function(e){var t=Object.assign({},e);return Object(S.jsx)(y.AnimatePresence,{initial:!0,children:t.children.map((function(e){return Object(S.jsx)(O.Box,Object(s.a)(Object(s.a)({initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8,position:"absolute"},transition:{type:"tween",duration:.2},as:y.motion.div},t),{},{children:e}),"".concat(e.key))}))})},x=["onCreateSkillReview","selectedSkillId","onChangeSelectedSkillId","onNavigateToSkill","parentSkillId"],C=function(e,t){return Object.fromEntries(Object.entries(e).filter((function(e){var i=Object(u.a)(e,2),n=i[0];i[1];return n!==t})))},w={skills:{},manuallyAddedSkills:{},isRefetching:!1,skillToCreate:void 0},I=function(e,t){switch(t.type){case"setSkills":return Object(s.a)(Object(s.a)({},e),{},{skills:t.skills});case"setManuallyAddedSkills":return Object(s.a)(Object(s.a)({},e),{},{manuallyAddedSkills:Object(s.a)(Object(s.a)({},e.manuallyAddedSkills),t.manuallyAddedSkills)});case"removeSkill":return Object(s.a)(Object(s.a)({},e),{},{skills:C(e.skills,t.skillId),manuallyAddedSkills:C(e.manuallyAddedSkills,t.skillId)});case"setIsRefetching":return Object(s.a)(Object(s.a)({},e),{},{isRefetching:t.isRefetching});case"setSkillToCreate":return Object(s.a)(Object(s.a)({},e),{},{skillToCreate:t.skillToCreate})}},T=function(e){var t=e.onCreateSkillReview,i=e.selectedSkillId,r=e.onChangeSelectedSkillId,y=e.onNavigateToSkill,C=e.parentSkillId,T=Object(c.a)(e,x),E=Object(O.useTranslate)({capitalize:!0}),L=Object(O.useAlert)(),A=Object(d.useReducer)(I,w),_=Object(u.a)(A,2),P=_[0],R=P.skills,N=P.manuallyAddedSkills,M=P.isRefetching,B=P.skillToCreate,F=_[1],G=Object(g.useAppContext)(),z=G.checkLayout,U=G.getErrorMessage,W=G.user,H=G.userCapabilities,D=Object(b.a)(),Q=Object(j.useGetSuggestedSkillsLazyQuery)({variables:{skillContext:C,size:10,minDepth:"undefined"!==typeof C?2:void 0},fetchPolicy:"no-cache"}),q=Object(u.a)(Q,2),Z=q[0],Y=q[1],J=Y.data,K=Y.loading,X=Object(h.b)({parentId:void 0}),V=X.isOpened,$=X.open,ee=X.close,te=X.createSkill,ie=X.navigateToSuggestedSkill;Object(d.useEffect)((function(){z("disableSkillsSuggestions")||Z()}),[]),Object(d.useEffect)((function(){V||F({type:"setSkillToCreate",skillToCreate:void 0})}),[V]),Object(d.useEffect)((function(){"undefined"!==typeof B&&$()}),[B]),Object(d.useEffect)((function(){if(null===J||void 0===J?void 0:J.skillsSuggestions.nodes){var e=J.skillsSuggestions.nodes.map((function(e){return Object(s.a)(Object(s.a)({},Object(j.getFormatedSkillBasicFragment)(e)),{},{subSkillsCount:e.subSkills.totalCount,isPowerable:e.isPowerable})}));F({type:"setSkills",skills:Object(s.a)({},Object.fromEntries(e.map((function(e){return[e.id,e]}))))})}}),[J]);var ne=Object(d.useMemo)((function(){var e=Object.values(R).slice(0,10).sort(f.getSortedSkillsByName);return e.concat.apply(e,Object(o.a)(Object.values(N)))}),[R,N]),re=function(){var e=Object(a.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D.query({query:j.GetSkillWithSubSkillsCountDocument,variables:{skillId:t,isGetSubSkillsCount:!0}}).then((function(e){var t,i,n=null===(t=e.data)||void 0===t?void 0:t.skill;if(n)return Object(s.a)(Object(s.a)({},Object(j.getFormatedSkillBasicFragment)(n)),{},{isPowerable:n.isPowerable,subSkillsCount:(null===(i=n.subSkills)||void 0===i?void 0:i.totalCount)||0})})).catch((function(){})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(e){F({type:"removeSkill",skillId:e})},ae=function(e){return function(){r&&r(e)}},oe=function(e){return function(){y&&y(e)}},ce=function(){var e=Object(a.a)(l.a.mark((function e(t){var i,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.name,n=t.isAddToProfile,e.abrupt("return",te({name:i,isAddToProfile:n}).then((function(){L.success(E("skill_created_msg")),ee()})).catch((function(e){L.error(U(e))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return K||0===ne.length&&!z("disableSkillsSuggestions")?null:Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(O.AssistantLayout,Object(s.a)(Object(s.a)({title:E(z("disableSkillsSuggestions")?"add_skills_to_your_profile":"suggested_skills"),rightElement:z("disableSkillsSuggestions")?void 0:Object(S.jsx)(O.IconButton,{iconAs:K||M?p.a:k.a,accent:"primary",onClick:function(){F({type:"setIsRefetching",isRefetching:!0}),Z().then((function(){F({type:"setIsRefetching",isRefetching:!1})}))},iconSize:18,disabled:K||M})},T),{},{children:Object(S.jsxs)(O.Column,{width:"100%",alignItems:"flex-start",overflow:"hidden",children:[Object(S.jsx)(O.Box,{display:"flex",flexWrap:"wrap",width:"100%",mb:20,children:Object(S.jsx)(v,{maxWidth:"100%",children:ne.map((function(e){return Object(S.jsx)(m.SkillPowerBrick,{onCreatePower:(n=e.id,function(){var e=Object(a.a)(l.a.mark((function e(i){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t({skillId:n,qualifiers:i}).then((function(){le(n)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),canAddPower:e.isPowerable,isSelected:i===e.id,onSelect:ae(e.id),skill:e,userId:W.id,subSkillsCount:e.subSkillsCount,onClickSubSkillsCount:oe(e.id),mr:1,mb:1},e.id);var n}))})}),Object(S.jsx)(m.SkillsSelector,{onSubmit:function(e){"undefined"!==typeof e&&(Object.keys(R).includes(e.id)||Object.keys(N).includes(e.id)||re(e.id).then((function(e){"undefined"!==typeof e&&F({type:"setManuallyAddedSkills",manuallyAddedSkills:Object(n.a)({},e.id,e)})})))},placeholder:E("search_a_skill"),isCreateNewSkillButtonEnabled:H.canCreateSkillNoLibrary,onCreateNewSkill:function(e){F({type:"setSkillToCreate",skillToCreate:e})}}),T.children&&Object(S.jsx)(O.Box,{mt:20,children:T.children})]})})),Object(S.jsx)(h.a,{isOpened:V,onClose:ee,onCreateSkill:ce,onClickSuggestedSkill:ie,initialName:B})]})},E=i(15),L=i(3),A=function(){var e=Object(d.useState)(),t=Object(u.a)(e,2),i=t[0],n=t[1],r=Object(E.useHistory)(),l=Object(g.useAppContext)().user,a=Object(j.useCreateSkillReviewMutation)(),o=Object(u.a)(a,2),c=o[0];return{createSkillReview:function(e){var t=e.skillId,i=e.qualifiers,n=e.onCompleted;return c({variables:{userId:l.id,skillId:t,qualifiers:i},onCompleted:function(){n&&n()}}).then((function(){}))},navigateToSkill:function(e){r.push(L.b.USER_ORGANIZATION_SKILL_DETAILS.getRoute({skillId:e}))},selectedSuggestedSkillId:i,setSelectedSuggestedSkillId:n,isCreatingSkillReview:o[1].loading}}}}]);