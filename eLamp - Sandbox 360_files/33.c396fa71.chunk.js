(this["webpackJsonp@elamp/main-app"]=this["webpackJsonp@elamp/main-app"]||[]).push([[33],{1561:function(e,t,n){"use strict";n.r(t);var s=n(139),r=n.n(s),i=n(286),l=n(53),o=n(188),a=n(187),c=n(17),u=n(0),d=n(15),b=n(19),j=n(14),p=n(860),m=n(749),O=n(63),f=n(10),h=n(121),v=n(743),x=n(854),g=n(3),S=n(61),y=Object(S.default)(j.Button)((function(e){return{color:e.theme.colors.grey[6],fontWeight:"bold",textTransform:"uppercase",height:"auto",":hover":{textDecoration:"underline",boxShadow:"none",background:"none"},background:"none",padding:0}})),k=n(285),w=n(1),_=["assessmentFormId","onEdit"],C=function(e){var t=e.assessmentFormId,n=e.onEdit,s=Object(k.a)(e,_),r=Object(j.useTranslate)(),i=Object(b.useGetAssessmentFormBasicInfosQuery)({variables:{id:t}}),l=i.data,o=i.loading,a=Object(u.useMemo)((function(){var e=null===l||void 0===l?void 0:l.assessmentForm;return e?e.name:void 0}),[l]);return Object(w.jsxs)(j.Box,Object(c.a)(Object(c.a)({},s),{},{children:[Object(w.jsx)(j.Text,{fontWeight:"bold",children:r("assessment_form")}),!o&&a?Object(w.jsxs)(j.Line,{justifyContent:"space-between",children:[Object(w.jsx)(j.Text,{children:Object(j.maj)(a)}),Object(w.jsx)(j.Button,{onClick:n,appearance:"outline",children:r("edit")})]}):Object(w.jsx)(j.Loader,{})]}))},A=n(803),E=n(788),M=n(940),I=["onSubmit"],T=["onSubmit"],L=["onSubmit"],F=["onSubmit"],U=function(e){var t=e.onSubmit,n=Object(k.a)(e,I),s=Object(j.useTranslate)(),o=Object(j.useSwitch)(),a=o.active,u=o.on,d=o.off,b=D(t),p=Object(l.a)(b,2),m=p[0],O=p[1].loading,f=function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m({relationships:t}),d();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(j.Button,Object(c.a)(Object(c.a)({appearance:"outline",onClick:u},n),{},{children:[s("my_subalterns"),O&&Object(w.jsx)(j.Icon,{as:E.a,ml:1})]})),Object(w.jsx)(j.Modal,{isOpened:a,onClose:d,children:Object(w.jsx)(M.b,{onSubmit:f})})]})},B=function(e){var t=e.onSubmit,n=Object(k.a)(e,T),s=Object(j.useTranslate)(),r=D(t),i=Object(l.a)(r,2),o=i[0],a=i[1].loading;return Object(w.jsxs)(O.GroupSelector,Object(c.a)(Object(c.a)({appearance:"outline",initiallySelectedGroups:[],onSubmit:function(e){var t=e.groups;o({groups:{ids:t}})},hideSelection:!0},n),{},{children:[s("groups_title"),Object(w.jsx)(j.Icon,{as:a?E.a:A.a,ml:1})]}))},N=function(e){var t=e.onSubmit,n=Object(k.a)(e,L),s=Object(j.useTranslate)(),r=Object(j.useSwitch)(),i=r.active,o=r.on,a=r.off,u=D(t),d=Object(l.a)(u,2),b=d[0],p=d[1].loading;return Object(w.jsx)(j.Popover,{isOpened:i,onClose:a,content:Object(w.jsx)(O.JobsNavigator,{buttonLabel:s("submit"),onSubmit:function(e){b({pinnedJobs:{ids:e.map((function(e){return e.id}))}}),a()}}),children:Object(w.jsxs)(j.Button,Object(c.a)(Object(c.a)({appearance:"outline",onClick:o},n),{},{children:[s("jobs_title"),Object(w.jsx)(j.Icon,{as:p?E.a:A.a,ml:1})]}))})},P=function(e){var t=e.onSubmit,n=Object(k.a)(e,F),s=Object(j.useTranslate)({capitalize:!0}),r=Object(u.useState)(),i=Object(l.a)(r,2),o=i[0],a=i[1],d=D(t),b=Object(l.a)(d,2),p=b[0],m=b[1].loading;return Object(w.jsxs)(j.Modal,Object(c.a)(Object(c.a)({},n),{},{children:[Object(w.jsx)(M.a,{onSubmit:a,disabledFilters:[O.SearchFilters.filterTypes.GROUPS,O.SearchFilters.filterTypes.JOBS]}),Object(w.jsx)(j.Line,{mt:1,justifyContent:"flex-end",children:Object(w.jsx)(j.Button,{onClick:function(){p(null===o||void 0===o?void 0:o.peopleFilters)},isLoading:m,children:s("submit")})})]}))};function D(e){var t=Object(b.useGetPeopleFiltersScopeLazyQuery)({onCompleted:function(t){var n=t.peopleFiltersScope;e(null===n||void 0===n?void 0:n.data)}}),n=Object(l.a)(t,2),s=n[0];return[function(e){s({variables:{peopleFilters:e}})},n[1]]}var z={form:{name:"",description:"",users:{ids:[],entities:{}},isSelectAllUsers:!1,startDate:void 0,endDate:void 0},customSkillsScope:{},isAddUsersOptionsMenuOpened:!1,isAdvancedSearchModalOpened:!1},J=function(e,t){switch(t.type){case"setField":return Object(c.a)(Object(c.a)({},e),{},{form:Object(c.a)(Object(c.a)({},e.form),{},Object(a.a)({},t.field,t.value))});case"selectAllUsers":return Object(c.a)(Object(c.a)({},e),{},{form:Object(c.a)(Object(c.a)({},e.form),{},{isSelectAllUsers:!0}),isAddUsersOptionsMenuOpened:!1});case"resetUsers":return Object(c.a)(Object(c.a)({},e),{},{form:Object(c.a)(Object(c.a)({},e.form),{},{isSelectAllUsers:z.form.isSelectAllUsers,users:z.form.users})});case"setCustomSkillsScope":return Object(c.a)(Object(c.a)({},e),{},{customSkillsScope:t.customSkillsScope});case"addUser":return Object(c.a)(Object(c.a)({},e),{},{form:Object(c.a)(Object(c.a)({},e.form),{},{users:{ids:Array.from(new Set([].concat(Object(o.a)(e.form.users.ids),[t.user.id]))),entities:Object(c.a)(Object(c.a)({},e.form.users.entities),{},Object(a.a)({},t.user.id,t.user))}})});case"removeUser":return Object(c.a)(Object(c.a)({},e),{},{form:Object(c.a)(Object(c.a)({},e.form),{},{users:Object(c.a)(Object(c.a)({},e.form.users),{},{ids:e.form.users.ids.filter((function(e){return e!==t.userId}))})})});case"setUsers":return Object(c.a)(Object(c.a)({},e),{},{form:Object(c.a)(Object(c.a)({},e.form),{},{users:{ids:Array.from(new Set([].concat(Object(o.a)(t.users.map((function(e){return e.id}))),Object(o.a)(e.form.users.ids)))),entities:Object(c.a)(Object(c.a)({},Object.fromEntries(t.users.map((function(e){return[e.id,e]})))),Object.fromEntries(Object.entries(e.form.users.entities)))}}),isAdvancedSearchModalOpened:!1});case"openAddUsersOptionsMenu":return Object(c.a)(Object(c.a)({},e),{},{isAddUsersOptionsMenuOpened:!0});case"closeAddUsersOptionsMenu":return Object(c.a)(Object(c.a)({},e),{},{isAddUsersOptionsMenuOpened:!1});case"openAdvancedSearchModal":return Object(c.a)(Object(c.a)({},e),{},{isAdvancedSearchModalOpened:!0,isAddUsersOptionsMenuOpened:!1});case"closeAdvancedSearchModal":return Object(c.a)(Object(c.a)({},e),{},{isAdvancedSearchModalOpened:!1});default:return e}},G=(t.default=function(){var e=Object(u.useReducer)(J,z),t=Object(l.a)(e,2),n=t[0],s=n.form,o=n.customSkillsScope,a=n.isAddUsersOptionsMenuOpened,c=n.isAdvancedSearchModalOpened,p=t[1],S=Object(f.useAppContext)().getErrorMessage,k=Object(d.useHistory)(),_=Object(v.a)().redirectToEntity404,A=Object(j.useAlert)(),E=Object(j.useTranslate)({capitalize:!0}),M=Object(j.useAutoFocus)(),I=Object(d.useParams)().formId,T=Object(b.useGetAssessmentFormSkillsScopeConfigurationQuery)({variables:{id:I},onError:function(e){return _({entity:h.d.Assessment,error:e})}}).data,L=Object(b.useCreateCampaignMutation)(),F=Object(l.a)(L,2),D=F[0],R=F[1].loading,W=Object(u.useMemo)((function(){return 0===s.name.trim().length||0===s.users.ids.length&&!1===s.isSelectAllUsers||void 0===s.startDate||void 0===s.endDate}),[s]),H=Object(u.useMemo)((function(){var e,t,n,s;return"AssessmentFormSkillsFromEvaluatedUserJobs"===(null===T||void 0===T||null===(e=T.assessmentForm)||void 0===e||null===(t=e.skillsScopeConfiguration)||void 0===t?void 0:t.__typename)&&!0===T.assessmentForm.skillsScopeConfiguration.isUserJobs?"userEvaluatedJobs":"AssessmentFormSkillsFromList"===(null===T||void 0===T||null===(n=T.assessmentForm)||void 0===n||null===(s=n.skillsScopeConfiguration)||void 0===s?void 0:s.__typename)&&(T.assessmentForm.skillsScopeConfiguration.skills||[]).length>0||(null===T||void 0===T?void 0:T.assessmentForm)?"preselectedSkills":void 0}),[T]),V=Object(u.useMemo)((function(){if("preselectedSkills"===H){var e=[],t=T.assessmentForm.skillsScopeConfiguration;return((null===t||void 0===t?void 0:t.skills)||[]).forEach((function(t){(null===t||void 0===t?void 0:t.skill)&&e.push({id:t.skill.id,name:t.skill.name,libraryContext:Object(b.getFormatedLibraryBasicFragment)(t.skill.libraryContext)})})),e}}),[T,H]),X=Object(u.useMemo)((function(){if("userEvaluatedJobs"===H){var e=T.assessmentForm.skillsScopeConfiguration.userJobsStatuses;return Array.isArray(e)?e:null}}),[T,H]),K=function(e){return function(t){p({type:"setField",field:e,value:t})}},Y=function(e){p({type:"setUsers",users:e})};function q(){return(q=Object(i.a)(r.a.mark((function e(t){var n,i,l,a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,l={name:s.name,description:s.description||void 0,startDate:s.startDate,endDate:s.endDate,assessmentFormId:I,users:!1===s.isSelectAllUsers?s.users.ids:[],isSelectAllUsers:s.isSelectAllUsers},"preselectedSkills"===H&&"undefined"!==typeof o.skillsIds&&o.skillsIds.length>0?l.customSkillScope={skillsIds:o.skillsIds}:"userEvaluatedJobs"===H&&"undefined"!==typeof o.jobsIds&&o.jobsIds.length>0&&(l.customSkillScope={jobsIds:o.jobsIds}),e.next=6,D({variables:{data:l}});case 6:a=e.sent,"undefined"!==typeof(c=null===a||void 0===a||null===(n=a.data)||void 0===n||null===(i=n.createAssessmentCampaign.assessmentCampaign)||void 0===i?void 0:i.id)&&k.push(g.b.ASSESSMENT_CAMPAIGN_DETAILS.getRoute({assessmentCampaignId:c})),A.success(E("created_campaign_success")),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),A.error(S(e.t0));case 15:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(j.Box,{height:"100%",children:Object(w.jsxs)(j.Gutter,{py:1,children:[Object(w.jsx)(j.Text,{fontWeight:"bold",fontSize:"big",mb:2,children:E("create_eval_campaign")}),Object(w.jsx)(C,{assessmentFormId:I,onEdit:function(){k.push(g.b.ASSESSMENT_CAMPAIGN.getRoute(),{openCreateModal:!0})},mb:0}),Object(w.jsx)(j.Label,{name:"name",content:E("name"),children:Object(w.jsx)(j.Input,{ref:M,onChange:K("name"),value:s.name,placeholder:E("campaign_name"),width:"100%"})}),Object(w.jsx)(j.Label,{mt:2,name:"description",content:E("description"),children:Object(w.jsx)(j.Wysiwyg,{onChange:K("description"),value:s.description,placeholder:E("campaign_description"),width:"100%"})}),"undefined"!==typeof H&&Object(w.jsxs)(j.Box,{as:"section",my:2,children:[Object(w.jsx)(j.Label,{mt:2,name:"skillsScope",content:E("skills_to_evaluate"),children:Object(w.jsx)(x.c,{skills:V,userJobsStatuses:X,noJobText:E("no_selected_jobs"),noSkillText:E("no_selected_skills")})}),Object(w.jsx)(x.d,{skillsScopeType:H,skillsScope:o,onChange:function(e){var t=e.jobsIds,n=e.skillsIds;p({type:"setCustomSkillsScope",customSkillsScope:{jobsIds:t,skillsIds:n}})},mt:1})]}),Object(w.jsxs)(j.Line,{as:"section",flexWrap:"wrap",mt:2,children:[Object(w.jsx)(j.Label,{name:"startDate",content:E("start"),mr:3,children:Object(w.jsx)(j.Input,{type:"date",width:["100%",null],value:s.startDate,onChange:K("startDate")})}),Object(w.jsx)(j.Label,{name:"endDate",content:E("end"),children:Object(w.jsx)(j.Input,{type:"date",width:["100%",null],value:s.endDate,onChange:K("endDate")})})]}),Object(w.jsxs)(j.Box,{as:"section",children:[Object(w.jsx)(j.Label,{mt:2,name:"population",content:E("population"),children:Object(w.jsxs)(j.Box,{children:[Object(w.jsx)(O.UsersSelector,{placeholder:E("search_user"),onSubmit:function(e){!function(e){p({type:"addUser",user:e})}(e)},disabled:s.isSelectAllUsers}),Object(w.jsxs)(j.Line,{mt:1,children:[Object(w.jsx)(B,{onSubmit:Y,maxWidth:"25%",disabled:s.isSelectAllUsers,mr:2}),Object(w.jsx)(N,{onSubmit:Y,disabled:s.isSelectAllUsers,mr:2}),Object(w.jsx)(U,{onSubmit:Y,disabled:s.isSelectAllUsers,mr:2}),Object(w.jsxs)(j.MenuSelect.Target,{children:[Object(w.jsx)(j.IconButton,{iconAs:m.a,onClick:function(){p({type:"openAddUsersOptionsMenu"})},isActive:a}),Object(w.jsxs)(j.MenuSelect,{onClose:function(){p({type:"closeAddUsersOptionsMenu"})},isOpened:a,children:[Object(w.jsx)(j.MenuOption,{onClick:function(){p({type:"openAdvancedSearchModal"})},disabled:s.isSelectAllUsers,children:E("advanced_search")}),Object(w.jsx)(j.MenuOption,{onClick:function(){p({type:"selectAllUsers"})},children:E("all_users")})]})]})]})]})}),!1===s.isSelectAllUsers&&Object(w.jsx)(G,{usersNormalized:s.users,onDeleteUser:function(e){p({type:"removeUser",userId:e.id})}}),Object(w.jsxs)(j.Line,{justifyContent:"space-between",alignItems:"baseline",mt:1,children:[s.isSelectAllUsers?Object(w.jsx)(j.Box,{bg:"grey.1",p:0,children:Object(w.jsx)(j.Text,{fontWeight:"semiBold",children:E("all_users")})}):Object(w.jsx)(j.Text,{fontSize:"small",children:E("x_selected_users",s.users.ids.length)}),Object(w.jsx)(y,{color:"grey.6",onClick:function(){p({type:"resetUsers"})},children:E("empty_selection")})]})]}),Object(w.jsxs)(j.Line,{py:3,justifyContent:"center",children:[Object(w.jsx)(j.Button,{mr:2,appearance:"outline",onClick:function(){return k.push(g.b.ASSESSMENT_CAMPAIGN.getRoute())},children:E("cancel")}),Object(w.jsx)(j.Button,{disabled:W,onClick:function(e){return q.apply(this,arguments)},isLoading:R,children:E("create")})]})]})}),Object(w.jsx)(P,{isOpened:c,onClose:function(){p({type:"closeAdvancedSearchModal"})},onSubmit:function(e){p({type:"setUsers",users:e})}})]})},function(e){var t=e.usersNormalized,n=e.onDeleteUser,s=Object(j.useTranslate)();return 0===t.ids.length?Object(w.jsx)(j.Column,{justifyContent:"center",border:"1px solid",width:"100%",height:200,overflowY:"auto",mt:1,pt:1,children:Object(w.jsx)(j.Text,{children:s("no_selected_users")})}):Object(w.jsx)(j.Column,{border:"1px solid",width:"100%",height:200,overflowY:"auto",mt:1,as:"ul",pt:1,children:Object(w.jsx)(j.Box,{width:"100%",children:t.ids.map((function(e){var s=t.entities[e];return Object(w.jsxs)(j.Line,{as:"li",justifyContent:"space-between",width:"100%",px:1,children:[Object(w.jsxs)(j.Line,{mb:1,children:[Object(w.jsx)(O.UserAvatar,{size:"small",user:s,mr:1}),Object(w.jsx)(j.Text,{children:s.displayName})]}),Object(w.jsx)(j.IconButton,{"aria-label":"delete",iconAs:p.a,onClick:function(){return n(s)}})]},e)}))})})})},743:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var s=n(15),r=n(19),i=n(3),l=function(){var e=Object(s.useHistory)();return{redirectToEntity404:function(t){var n=t.entity;t.error.message===r.ErrorCodeEnum.NotFound&&e.push(i.b.PAGE_NOT_FOUND.getRoute({entity:n}))}}}},749:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var s,r,i,l=n(0),o=["title","titleId"];function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,s,r=function(e,t){if(null==e)return{};var n,s,r={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function u(e,t){var n=e.title,u=e.titleId,d=c(e,o);return l.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 1000",ref:t,"aria-labelledby":u},d),n?l.createElement("title",{id:u},n):null,s||(s=l.createElement("circle",{cx:0,cy:500,r:128})),r||(r=l.createElement("circle",{cx:500,cy:500,r:128})),i||(i=l.createElement("circle",{cx:1e3,cy:500,r:128})))}var d=l.forwardRef(u);n.p},788:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var s,r,i,l=n(0),o=["title","titleId"];function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,s,r=function(e,t){if(null==e)return{};var n,s,r={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function u(e,t){var n=e.title,u=e.titleId,d=c(e,o);return l.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",ref:t,"aria-labelledby":u},d),n?l.createElement("title",{id:u},n):null,s||(s=l.createElement("g",{transform:"translate(25 50)"},l.createElement("circle",{cx:0,cy:0,r:10,transform:"scale(0.429509 0.429509)"},l.createElement("animateTransform",{attributeName:"transform",type:"scale",begin:"-0.3333333333333333s",calcMode:"spline",keySplines:"0.3 0 0.7 1;0.3 0 0.7 1",values:"0;1;0",keyTimes:"0;0.5;1",dur:"1s",repeatCount:"indefinite"})))),r||(r=l.createElement("g",{transform:"translate(50 50)"},l.createElement("circle",{cx:0,cy:0,r:10,transform:"scale(0.0432413 0.0432413)"},l.createElement("animateTransform",{attributeName:"transform",type:"scale",begin:"-0.16666666666666666s",calcMode:"spline",keySplines:"0.3 0 0.7 1;0.3 0 0.7 1",values:"0;1;0",keyTimes:"0;0.5;1",dur:"1s",repeatCount:"indefinite"})))),i||(i=l.createElement("g",{transform:"translate(75 50)"},l.createElement("circle",{cx:0,cy:0,r:10,transform:"scale(0.129851 0.129851)"},l.createElement("animateTransform",{attributeName:"transform",type:"scale",begin:"0s",calcMode:"spline",keySplines:"0.3 0 0.7 1;0.3 0 0.7 1",values:"0;1;0",keyTimes:"0;0.5;1",dur:"1s",repeatCount:"indefinite"})))))}var d=l.forwardRef(u);n.p},794:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(0);var s=n(32),r=n(14),i=n(63),l=n(1),o={past:"job_status_past",have:"job_status_have",goal:"job_status_goal"},a=function(e){var t=e.skills,n=e.userJobsStatuses,a=e.noJobText,c=e.noSkillText,u=Object(r.useTranslate)({capitalize:!0});if("undefined"!==typeof n){if(null===n)return Object(l.jsx)(r.Text,{children:a||u("no_job")});var d=u("skills_from_their_jobs");if(n.length>0){var b=n.length<Object.keys(s.JobPinStatus).length?n.map((function(e){return u(o[e])})).join(", "):u("job_status_all");d+=" (".concat(b,")")}return Object(l.jsx)(i.ObjectTag,{kind:"jobTag",id:"userJobs",name:d})}return"undefined"===typeof t||0===t.length?Object(l.jsx)(r.Text,{children:c||u("no_skill_in_scope")}):t.length>0?Object(l.jsx)(i.SkillsSummary,{skills:t}):null}},798:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var s=n(17),r=n(188),i=n(187),l=n(139),o=n.n(l),a=n(286),c=n(53),u=n(285),d=n(0),b=n(115),j=n(19),p=n(14),m=n(63),O=n(1),f=["isPopover","buttonLabel","onOpen","isOpened","onClose"],h=function(e){var t=e.isPopover,n=void 0===t||t,r=e.buttonLabel,i=e.onOpen,l=e.isOpened,o=e.onClose,a=Object(u.a)(e,f);return Object(O.jsx)(p.Box,Object(s.a)(Object(s.a)({},a),{},{children:n?Object(O.jsx)(p.Popover,{isOpened:l,onClose:o,content:Object(O.jsx)(O.Fragment,{children:a.children}),children:Object(O.jsx)(p.Button,{onClick:i,appearance:"clean",children:r})}):a.children}))},v=["skillsScopeType","skillsScope","onChange","isPopover"],x=function(e){var t=e.skillsScopeType,n=e.skillsScope,l=e.onChange,f=e.isPopover,x=void 0===f||f,g=Object(u.a)(e,v),S=Object(d.useState)(),y=Object(c.a)(S,2),k=y[0],w=y[1],_=Object(p.useTranslate)({capitalize:!0}),C=Object(p.useSwitch)(!1),A=C.active,E=C.off,M=C.on,I=Object(b.a)(),T=_("add_a_something","preselectedSkills"===t?{object:_("a_skill",10)}:{object:_("a_job",10)}),L=function(){var e=Object(a.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I.query({query:j.GetSkillsBasicInfosDocument,variables:{ids:t}}).then((function(e){var t,n=null===(t=e.data)||void 0===t?void 0:t.skills.nodes;n&&w(n.map((function(e){return{id:e.id,name:e.name}})))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(a.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I.query({query:j.GetJobsBasicInfosDocument,variables:{ids:t}}).then((function(e){var t,n=null===(t=e.data)||void 0===t?void 0:t.jobs.nodes;n&&w(n.map((function(e){return{id:e.id,name:e.name}})))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(d.useEffect)((function(){"undefined"!==typeof n.skillsIds?L(n.skillsIds):"undefined"!==typeof n.jobsIds&&F(n.jobsIds)}),[n]);return Object(O.jsxs)(p.Box,Object(s.a)(Object(s.a)({},g),{},{children:["undefined"!==typeof k&&k.length>0&&Object(O.jsx)(p.Box,{display:"flex",flexWrap:"wrap",children:k.map((function(e){return Object(O.jsx)(p.SelectedItem,{onRemove:(s=e.id,function(){var e,r="preselectedSkills"===t?"skillsIds":"jobsIds";"undefined"!==typeof n[r]&&l(Object(i.a)({},r,null===(e=n[r])||void 0===e?void 0:e.filter((function(e){return e!==s}))))}),mr:1,mb:1,children:"userEvaluatedJobs"===t?_("skills_of",{object:e.name}):e.name},"skillsScopeItem_".concat(e.id));var s}))}),Object(O.jsx)(h,{isOpened:A,onClose:E,onOpen:M,isPopover:x,buttonLabel:T,mb:1,children:"preselectedSkills"===t?Object(O.jsx)(m.SkillsNavigator,{multiple:!0,blockLibrarySelection:!0,isSkillWithChildrenSelectionBlocked:!0,buttonLabel:_("add"),onSubmit:function(e){var t=Array.from(new Set([].concat(Object(r.a)(n.skillsIds||[]),Object(r.a)(e.map((function(e){return e.id}))))));l({skillsIds:t}),E()}}):Object(O.jsx)(m.JobsNavigator,{multiple:!0,submitWithSubJobs:!1,onSubmit:function(e){var t,s=Array.from(new Set((t=n.jobsIds||[]).concat.apply(t,Object(r.a)(e.map((function(e){return e.id}))))));l({jobsIds:s}),E()},buttonLabel:_("add_job")})})]}))}},803:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var s,r,i,l,o,a,c,u,d,b,j,p,m,O,f,h,v=n(0),x=["title","titleId"];function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}function S(e,t){if(null==e)return{};var n,s,r=function(e,t){if(null==e)return{};var n,s,r={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function y(e,t){var n=e.title,y=e.titleId,k=S(e,x);return v.createElement("svg",g({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 255 255",ref:t,"aria-labelledby":y},k),n?v.createElement("title",{id:y},n):null,s||(s=v.createElement("g",null,v.createElement("g",{id:"arrow-drop-down"},v.createElement("polygon",{points:"0,63.75 127.5,191.25 255,63.75  "})))),r||(r=v.createElement("g",null)),i||(i=v.createElement("g",null)),l||(l=v.createElement("g",null)),o||(o=v.createElement("g",null)),a||(a=v.createElement("g",null)),c||(c=v.createElement("g",null)),u||(u=v.createElement("g",null)),d||(d=v.createElement("g",null)),b||(b=v.createElement("g",null)),j||(j=v.createElement("g",null)),p||(p=v.createElement("g",null)),m||(m=v.createElement("g",null)),O||(O=v.createElement("g",null)),f||(f=v.createElement("g",null)),h||(h=v.createElement("g",null)))}var k=v.forwardRef(y);n.p},820:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var s,r=n(0),i=["title","titleId"];function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,s,r=function(e,t){if(null==e)return{};var n,s,r={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function a(e,t){var n=e.title,a=e.titleId,c=o(e,i);return r.createElement("svg",l({viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,s||(s=r.createElement("path",{d:"M2.96979 17.0274H4.34865L12.8434 8.52055L11.4645 7.13973L2.96979 15.6466V17.0274ZM17.0538 7.09041L12.868 2.94795L14.2469 1.56712C14.6244 1.18904 15.0883 1 15.6385 1C16.1881 1 16.6516 1.18904 17.0292 1.56712L18.408 2.94795C18.7856 3.32603 18.9826 3.78236 18.999 4.31693C19.0154 4.85085 18.8348 5.30685 18.4573 5.68493L17.0538 7.09041ZM15.6257 8.54521L5.18581 19H1V14.8082L11.4399 4.35342L15.6257 8.54521Z"})))}var c=r.forwardRef(a);n.p},854:function(e,t,n){"use strict";n.d(t,"c",(function(){return s.a})),n.d(t,"d",(function(){return r.a})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return o}));var s=n(794),r=n(798),i=n(32),l=new Map([[i.AssessmentStatus.ONGOING,"progress"],[i.AssessmentStatus.PLANNED,"program"],[i.AssessmentStatus.VALIDATING,"waiting_for_evaluation_validation"],[i.AssessmentStatus.CLOSED,"training_status_validated"],[i.AssessmentStatus.CANCELED,"assessment_status_canceled"]]),o=new Map([[i.AssessmentStatus.CANCELED,{labelKey:"assessment_status_canceled",color:"error.0"}],[i.AssessmentStatus.CLOSED,{labelKey:"training_status_validated",color:"success.0"}],[i.AssessmentStatus.ONGOING,{labelKey:"progress",color:"secondary.0"}],[i.AssessmentStatus.PLANNED,{labelKey:"program",color:"grey.1"}],[i.AssessmentStatus.VALIDATING,{labelKey:"waiting_for_evaluation_validation",color:"alert.0"}]])},860:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var s,r=n(0),i=["title","titleId"];function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,s,r=function(e,t){if(null==e)return{};var n,s,r={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function a(e,t){var n=e.title,a=e.titleId,c=o(e,i);return r.createElement("svg",l({id:"Icon",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 24 24",style:{enableBackground:"new 0 0 24 24"},xmlSpace:"preserve",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,s||(s=r.createElement("g",null,r.createElement("g",null,r.createElement("path",{d:"M12,18.3L12,18.3c-0.4,0-0.8-0.3-0.8-0.8v-6c0-0.4,0.3-0.8,0.8-0.8h0c0.4,0,0.8,0.3,0.8,0.8v6C12.8,18,12.4,18.3,12,18.3z "}),r.createElement("path",{d:"M8.5,18.3L8.5,18.3c-0.4,0-0.8-0.3-0.8-0.8v-6c0-0.4,0.3-0.8,0.8-0.8h0c0.4,0,0.8,0.3,0.8,0.8v6C9.3,18,8.9,18.3,8.5,18.3 z"}),r.createElement("path",{d:"M15.5,18.3L15.5,18.3c-0.4,0-0.8-0.3-0.8-0.8v-6c0-0.4,0.3-0.8,0.8-0.8h0c0.4,0,0.8,0.3,0.8,0.8v6 C16.3,18,15.9,18.3,15.5,18.3z"})),r.createElement("path",{d:"M20.8,6.6h-3.9V3.5c0-0.8-0.7-1.5-1.5-1.5H8.6C7.8,2,7.1,2.7,7.1,3.5v3.1H3.3C2.6,6.6,2,7.2,2,7.9c0,0.7,0.6,1.3,1.3,1.3h1 v11.4c0,0.8,0.7,1.5,1.5,1.5h12.5c0.8,0,1.5-0.7,1.5-1.5V9.1h1c0.7,0,1.3-0.6,1.3-1.3C22,7.2,21.4,6.6,20.8,6.6z M9.1,4h5.8v2.6 H9.1V4z M17.8,20H6.3V9.1h11.5V20z"}))))}var c=r.forwardRef(a);n.p},875:function(e,t,n){"use strict";n(0);var s=n(14),r=n(820),i=n(61),l=n(1),o=Object(i.default)(s.Line)((function(e){return{svg:{opacity:0,transition:"0.15s"},"&:hover":{svg:{opacity:e.disabled?0:1}}}}));function a(e,t){var n=e.slice(0,1).map(t).join();return n.length>30&&(n="".concat(n.slice(0,30),"...")),e.length>1&&(n+="  (+".concat(e.length-1,")")),n}t.a=function(e){var t=e.filters,n=e.getFilterLabel,i=e.disabled,c=Object(s.useTranslate)();return 0===t.length?Object(l.jsx)(s.Text,{color:"grey.4",fontSize:"small",fontWeight:"semiBold",children:c("no_selection")}):Object(l.jsx)(s.Tooltip,{title:i?Object(l.jsx)(s.Text,{fontSize:"small",color:"white",children:c("cartography_disabled_filter_desc")}):t.map((function(e){return Object(l.jsxs)(s.Text,{fontSize:"small",color:"white",children:[t.length>1?"- ":"",n(e)]},e._key||e.id)})),position:"top",children:Object(l.jsx)(o,{disabled:i,children:Object(l.jsxs)(s.Line,{bg:i?"grey.1":"grey.0",py:1,px:2,children:[Object(l.jsx)(s.Text,{overflow:"hidden",fontSize:"small",width:150,ellipsis:!0,color:i?"grey.5":"black.3",children:a(t,n)}),Object(l.jsx)(s.Icon,{size:18,ml:1,as:r.a})]})})})}},940:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return O}));var s=n(188),r=n(53),i=n(0),l=n.n(i),o=n(14),a=n(288),c=n(63),u=n(10),d=n(875),b=n(1),j={N_MINUS_1:{label:"n1_only",value:"N_MINUS_1"},N_MINUS_X:{label:"all_n1",value:"N_MINUS_X"}};t.c=function(e){var t,n,a=e.nominativeSearch,c=void 0===a?{users:{ids:[],nodes:[]}}:a,f=e.relationships,h=e.advancedSearch,v=void 0===h?{}:h,x=e.onNominativeChange,g=e.onRelationshipsChange,S=e.onSearchChange,y=e.onReset,k=Object(o.useTranslate)(),w=Object(u.useAppContext)().disabledFilters,_=Object(o.useModalsFromPopover)(["n1Modal","nominativeModal","advancedModal"]),C=_.state,A=_.open,E=_.close,M=l.a.useState(),I=Object(r.a)(M,2),T=I[0],L=I[1],F=function(e,t){var n,s,r=t.nominativeFilters,i=t.relationshipsFilters,l=t.advancedSearchFilters;if(null!=i)return[{key:"relationships",label:e((i&&j[i]?j[i]:j.N_MINUS_1).label)}];if(((null===r||void 0===r||null===(n=r.users)||void 0===n?void 0:n.nodes)||[]).length>0)return[{key:"nominativeSearch",label:e("x_selected_users",((null===r||void 0===r||null===(s=r.users)||void 0===s?void 0:s.nodes)||[]).length)}];if(l){var o,a,c,u,d,b,p,m,O=(null===l||void 0===l||null===(o=l.groups)||void 0===o?void 0:o.nodes)||(null===l||void 0===l||null===(a=l.groups)||void 0===a?void 0:a.ids)||[],f=(null===l||void 0===l||null===(c=l.pinnedJobs)||void 0===c?void 0:c.nodes)||(null===l||void 0===l||null===(u=l.pinnedJobs)||void 0===u?void 0:u.ids)||[],h=(null===l||void 0===l||null===(d=l.users)||void 0===d?void 0:d.geolocation)||null,v=(null===l||void 0===l||null===(b=l.users)||void 0===b?void 0:b.customFieldsFilters)||null,x=[];return O.length>0&&x.push({key:"advancedSearchGroups",label:"".concat(e("groups",O.length)," ").concat((null===(p=O[0])||void 0===p?void 0:p.name)||""," ").concat(O.length>1?"("+O.length+")":"")}),f.length>0&&x.push({key:"advancedSearchPinnedJobs",label:"".concat(e("jobs",f.length)," ").concat((null===(m=f[0])||void 0===m?void 0:m.name)||""," ").concat(f.length>1?"("+f.length+")":"")}),h&&x.push({key:"advancedSearchGeolocation",label:"".concat(e("geolocation"))}),Array.isArray(v)&&v.length>0&&x.push({key:"advancedSearchCustomFields",label:e("advancedSearch")}),x}return[]}(k,{nominativeFilters:c,relationshipsFilters:f,advancedSearchFilters:v});0===F.length&&F.push({key:"allUsers",label:k("all_users")});var U=Object(i.useMemo)((function(){return Array.from(new Set(["availabilities"].concat(Object(s.a)(w))))}),[w]);return Object(b.jsxs)(o.Label,{ml:3,textTransform:"uppercase",fontSize:"small",content:k("population"),children:[Object(b.jsx)(o.Popover,{isOpened:C.popoverOpened,onClose:E("popover"),content:Object(b.jsxs)(o.Card,{bg:"white",boxShadow:"small",children:[Object(b.jsx)(o.MenuOption,{onClick:A("n1Modal"),children:k("my_subalterns")}),Object(b.jsx)(o.MenuOption,{onClick:A("nominativeModal"),children:k("nominative_search")}),Object(b.jsx)(o.MenuOption,{onClick:A("advancedModal"),children:k("advanced_search")}),Object(b.jsx)(o.Separator,{}),Object(b.jsx)(o.MenuOption,{disabled:0===(null===c||void 0===c||null===(t=c.users)||void 0===t?void 0:t.ids.length)&&null===f&&0===Object.keys(v||{}).length,onClick:y,children:k("reset_selection")})]}),children:Object(b.jsx)(o.Box,{onClick:A("popover"),children:Object(b.jsx)(d.a,{filters:F,getFilterLabel:function(e){return e&&e.label?e.label:null}})})}),Object(b.jsx)(o.Modal,{width:680,isOpened:C.n1ModalOpened,onClose:E("n1Modal"),children:Object(b.jsx)(p,{relationships:f,onSubmit:function(e){E("n1Modal")(),g(e)}})}),Object(b.jsx)(o.Modal,{width:680,isOpened:C.nominativeModalOpened,onClose:E("nominativeModal"),children:Object(b.jsx)(m,{selectedUsers:(null===c||void 0===c||null===(n=c.users)||void 0===n?void 0:n.nodes)||[],onSubmit:function(e){E("nominativeModal")(),x(e)}})}),Object(b.jsxs)(o.Modal,{width:800,isOpened:C.advancedModalOpened,onClose:E("advancedModal"),children:[Object(b.jsx)(O,{peopleFilters:v,onSubmit:L,disabledFilters:U}),Object(b.jsx)(o.Line,{mt:1,justifyContent:"flex-end",children:Object(b.jsx)(o.Button,{onClick:function(){E("advancedModal")(),(null===T||void 0===T?void 0:T.peopleFilters)&&S(null===T||void 0===T?void 0:T.peopleFilters)},children:k("submit")})})]})]})};var p=function(e){var t=e.relationships,n=void 0===t?"N_MINUS_1":t,s=e.onSubmit,i=Object(o.useTranslate)(),a=l.a.useState(n),c=Object(r.a)(a,2),u=c[0],d=c[1];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(o.Text,{textTransform:"uppercase",fontWeight:"semiBold",mb:1,children:i("filter_population")}),Object(b.jsx)(o.Line,{p:2,bg:"grey.0",children:Object(b.jsx)(o.Text,{fontSize:"huge",fontWeight:"bold",children:i("my_subalterns")})}),Object(b.jsxs)(o.Line,{my:2,px:2,children:[Object(b.jsx)(o.Text,{textTransform:"uppercase",color:"grey.4",fontWeight:"semiBold",children:i("display")}),Object(b.jsxs)(o.RadioGroup,{name:"n1",value:u,onChange:d,children:[Object(b.jsxs)(o.Text,{as:"label",ml:2,children:[Object(b.jsx)(o.RadioButton,{value:"N_MINUS_1"}),i("n1_only")]}),Object(b.jsxs)(o.Text,{as:"label",ml:2,children:[Object(b.jsx)(o.RadioButton,{value:"N_MINUS_X"}),i("all_n1")]})]})]}),Object(b.jsx)(o.Line,{mt:3,justifyContent:"flex-end",children:Object(b.jsx)(o.Button,{ml:3,onClick:function(){s(u)},children:i("submit")})})]})};function m(e){var t=e.selectedUsers,n=e.onSubmit,i=Object(o.useTranslate)(),u=l.a.useState(t||[]),d=Object(r.a)(u,2),j=d[0],p=d[1];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(o.Text,{textTransform:"uppercase",fontWeight:"semiBold",mb:1,children:i("filter_population")}),Object(b.jsx)(o.Line,{p:2,bg:"grey.0",children:Object(b.jsx)(o.Text,{fontSize:"huge",fontWeight:"bold",children:i("nominative_search")})}),Object(b.jsx)(c.UsersSelector,{autoFocusInput:!0,onSubmit:function(e){p((function(t){return t.find((function(t){return t.id===e.id}))?t:[].concat(Object(s.a)(t),[e])}))}}),Object(b.jsx)(o.Box,{height:300,overflowY:"auto",children:j.map((function(e){return Object(b.jsxs)(o.Line,{p:1,borderBottom:"2px solid",children:[Object(b.jsx)(c.UserAvatar,{size:"small",user:e}),Object(b.jsx)(o.Text,{fontWeight:"semiBold",ml:1,style:{flex:1},children:e.displayName}),Object(b.jsx)(o.IconButton,{iconAs:a.a,iconSize:25,onClick:function(){return function(e){p((function(t){return t.filter((function(t){return t.id!==e.id}))}))}(e)}})]},e.id)}))}),Object(b.jsxs)(o.Line,{borderTop:"2px solid",p:1,justifyContent:"flex-end",children:[Object(b.jsx)(o.Text,{textTransform:"uppercase",color:"grey.4",children:i("selected_collaborators",j.length)}),Object(b.jsx)(o.Button,{onClick:function(){n(j)},ml:3,children:i("submit")})]})]})}var O=function(e){var t=e.peopleFilters,n=e.onSubmit,s=e.disabledFilters,r=void 0===s?[]:s,i=Object(u.useAppContext)().checkLayout;return Object(b.jsx)(o.Box,{maxHeight:600,overflowY:"auto",children:Object(b.jsx)(c.SearchFilters,{suggestsOptions:{rawText:"",isInstantCriteria:!1},disabledFilters:r,useCase:"JOB_PAGE_FIND",initialPattern:{peopleFilters:t},onChange:function(e){var t=e.pattern;n(t)},checkLayout:i})})}}}]);