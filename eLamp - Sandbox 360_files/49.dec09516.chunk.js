(this["webpackJsonp@elamp/main-app"]=this["webpackJsonp@elamp/main-app"]||[]).push([[49],{1155:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(17),i=n(139),l=n.n(i),o=n(286),c=n(53),a=n(0),s=n(14),u=n(19),d=n(287),b=function(e){var t=e.id,n=e.isLibrary,i=Object(s.useTranslate)({capitalize:!0}),b=Object(s.useAlert)(),f=Object(u.useGetSkillSubSkillsLazyQuery)({fetchPolicy:"cache-first"}),h=Object(c.a)(f,2),j=h[0],O=h[1],p=O.data,x=O.loading,v=Object(u.useGetLibrarySubSkillsLazyQuery)({fetchPolicy:"cache-first"}),S=Object(c.a)(v,2),m=S[0],g=S[1],k=g.data,y=g.loading;return{getSubSkills:function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n?m({variables:{libraryId:t}}).catch((function(e){b.error(i(Object(u.getErrorMessage)(e)))})):j({variables:{skillId:t}}).catch((function(e){b.error(i(Object(u.getErrorMessage)(e)))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),isLoading:x||y,subSkills:Object(a.useMemo)((function(){var e=(null===p||void 0===p?void 0:p.skill)||(null===k||void 0===k?void 0:k.library);if(e)return e.subSkills.nodes.map((function(e){return Object(r.a)(Object(r.a)({},Object(u.getFormatedSkillBasicFragment)(e)),{},{subSkillsCount:e.subSkills.totalCount,isPowerable:e.isPowerable})})).sort(d.getSortedSkillsByName)}),[p,k]),capabilities:Object(a.useMemo)((function(){var e=(null===p||void 0===p?void 0:p.skill)||(null===k||void 0===k?void 0:k.library);return e?{canCreateSkill:e.capabilities.canCreateSkill}:{canCreateSkill:!0}}),[p,k])}}},742:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(17),i=n(285),l=(n(0),n(14)),o=n(1),c=["children"],a=function(e){var t=e.children,n=Object(i.a)(e,c);return Object(o.jsx)(l.Box,Object(r.a)(Object(r.a)({boxSizing:"border-box",height:"100%",overflow:"hidden",width:"100%"},n),{},{children:t}))}},752:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),i=["title","titleId"];function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function c(e,t){var n=e.title,c=e.titleId,a=o(e,i);return r.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 1000",ref:t,"aria-labelledby":c},a),n?r.createElement("title",{id:c},n):null,r.createElement("path",{d:"M444.144 230.551a40.004 40.004 0 0127.866 68.688L311.398 459.852h473.346a40.148 40.148 0 110 80.289H311.398L472.01 700.754a40.004 40.004 0 11-56.569 56.569L188.916 530.795a40.004 40.004 0 01-11.43-15.74 40.148 40.148 0 010-.002 40.004 40.004 0 01-1.156-3.32 40.148 40.148 0 01-.184-.559 40.004 40.004 0 01-.691-2.898 40.148 40.148 0 01-.023-.098 40.004 40.004 0 01-.112-.469 40.148 40.148 0 01-.105-.51 40.004 40.004 0 01-.283-2.064 40.004 40.004 0 01-.211-1.576 40.148 40.148 0 01-.034-.469 40.004 40.004 0 01-.043-1.074 40.004 40.004 0 01-.085-2.623 40.148 40.148 0 01.006-.12 40.004 40.004 0 01.019-.378 40.004 40.004 0 010-.012 40.004 40.004 0 01.002-.031 40.004 40.004 0 0114.436-29.762l226.42-226.42a40.004 40.004 0 0128.702-12.119z",style:{lineHeight:"normal",textIndent:0,textAlign:"start",textDecorationLine:"none",textDecorationStyle:"solid",textTransform:"none",blockProgression:"tb",whiteSpace:"normal",isolation:"auto",mixBlendMode:"normal",solidOpacity:1},fontWeight:400,fontFamily:"sans-serif",overflow:"visible",fillRule:"evenodd"}))}var a=r.forwardRef(c);n.p},781:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(65),i=n(14),l=n(10),o=n(3),c=function(){var e=Object(i.useTranslate)({capitalize:!0}),t=Object(l.useAppContext)().checkLayout,n=Object(r.h)().colors.primary[4],c=[{label:e("organization_home"),to:o.b.USER_ORGANIZATION_DASHBOARD.getRoute(),color:n,isUppercase:!1}];return t("skills")&&c.push({label:e("skills_library"),to:o.b.USER_ORGANIZATION_SKILLS_LIBRARY.getRoute(),color:n,isUppercase:!1}),t("jobs")&&c.push({label:e("jobs"),to:o.b.USER_ORGANIZATION_JOBS.getRoute(),color:n,isUppercase:!1}),t("trainings")&&c.push({label:e("training",8),to:o.b.USER_ORGANIZATION_TRAINING.getRoute(),color:n,isUppercase:!1}),t("jobOffers")&&c.push({label:e("job_offer",8),to:o.b.USER_ORGANIZATION_JOB_OFFERS.getRoute(),color:n,isUppercase:!1}),{tabsOptions:c}}},795:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r,i=n(0),l=["title","titleId"];function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function a(e,t){var n=e.title,a=e.titleId,s=c(e,l);return i.createElement("svg",o({viewBox:"0 0 10 16",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},s),n?i.createElement("title",{id:a},n):null,r||(r=i.createElement("path",{d:"M2.16667 0L0 2.27368L5.66667 8L0 13.7263L2.16667 16L10 8L2.16667 0Z"})))}var s=i.forwardRef(a);n.p},799:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(0);var r=n(14),i=n(1),l=function(e){var t=e.renderHeader,n=e.children;return Object(i.jsxs)(r.Box,{width:"100%",height:"100%",bg:"white",display:"flex",flexDirection:"column",backgroundColor:"white",children:[Object(i.jsx)(r.Box,{flexGrow:0,p:2,children:t()}),Object(i.jsx)(r.Box,{px:2,children:Object(i.jsx)(r.Separator,{width:"100%"})}),Object(i.jsx)(r.Box,{flexGrow:1,overflow:"auto",p:2,width:"100%",children:n})]})}},817:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r,i,l,o=n(0),c=["title","titleId"];function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function u(e,t){var n=e.title,u=e.titleId,d=s(e,c);return o.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 192",ref:t,"aria-labelledby":u},d),n?o.createElement("title",{id:u},n):null,r||(r=o.createElement("path",{d:"M54 4H6c-1.1 0-2 .9-2 2v180c0 1.1.9 2 2 2h48c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM16 160h28v16H16v-16zm0-12V44h28v104H16zm0-116V16h28v16H16z"})),i||(i=o.createElement("path",{d:"M186 4h-48c-1.1 0-2 .9-2 2v180c0 1.1.9 2 2 2h48c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-38 156h28v16h-28v-16zm0-12V44h28v104h-28zm0-116V16h28v16h-28z"})),l||(l=o.createElement("path",{d:"M123 38H69c-1.1 0-2 .9-2 2v146c0 1.1.9 2 2 2h54c1.1 0 2-.9 2-2V40c0-1.1-.9-2-2-2zM79 75.1h34v76H79v-76zm34-10H79V50h34v15.1zm-34 98h34V176H79v-12.9z"})))}var d=o.forwardRef(u);n.p},934:function(e,t,n){"use strict";n.r(t),n.d(t,"SkillsLibraryContext",(function(){return D})),n.d(t,"useSkillsLibraryContext",(function(){return V}));var r=n(53),i=n(17),l=n(0),o=n.n(l),c=n(15),a=n(14),s=n(752),u=n(817),d=n(10),b=n(742),f=n(3),h=n(146),j=n(285),O=n(799),p=n(1),x=["height","isCustom","isOpened","isOverlayTransparent","isMaxWidth","onClose","renderHeader","width"],v=function(e){var t=e.height,n=void 0===t?"100%":t,r=e.isCustom,i=e.isOpened,l=e.isOverlayTransparent,o=e.isMaxWidth,c=e.onClose,s=e.renderHeader,u=e.width,d=void 0===u?"100%":u,b=Object(j.a)(e,x);return Object(p.jsx)(a.LeftPane.Container,{height:n,isOpened:i,isOverlayTransparent:l,maxWidth:o?340:void 0,onClose:c,width:d,children:i&&Object(p.jsx)(a.LeftPane.Content,{bg:"white",height:n,maxWidth:o?340:void 0,width:"100%",children:r?b.children:Object(p.jsx)(O.a,{renderHeader:s,children:b.children})})})},S=n(781),m=n(19),g=n(287),k=function(e){var t=e.skillPaths,n=e.skillId;if("undefined"!==typeof t){var r=t.filter((function(e){return e[0]===n})),i=r.length>0,l=r.map((function(e){return e.slice(1)})).filter((function(e){return e.length>0}));return{nextSkillPaths:l.length>0?l:void 0,isInitiallyExpanded:i}}return{nextSkillPaths:void 0,isInitiallyExpanded:!1}},y=["name"],I=function(e){var t=e.name,n=Object(j.a)(e,y);return Object(p.jsx)(a.Box,Object(i.a)(Object(i.a)({py:1,px:15},n),{},{children:Object(p.jsx)(a.Text,{color:"grey.6",textTransform:"uppercase",children:t})}))},w=n(61),C=n(795),P=n(1155),L=n(63),T=["isSelected","name","logo","color"],E=Object(w.default)(a.Line)((function(e){return{transition:"all 0.2s",cursor:"pointer",":hover":{background:e.theme.colors.grey[0],boxShadow:"none"}}})),R=function(e){var t=e.isSelected,n=e.name,r=e.logo,l=e.color,o=Object(j.a)(e,T);return Object(p.jsxs)(E,Object(i.a)(Object(i.a)({backgroundColor:t?"primary.0":void 0},o),{},{children:[Object(p.jsx)(a.Icon,{as:Object(L.getIconComponent)(r),color:l,size:18,mr:1}),Object(p.jsx)(a.Text,{fontSize:"small",color:t?"primary":void 0,fontWeight:"semiBold",children:n})]}))},A=["closePanel","color","depth","expandedChildrenIdsPaths","id","isLibrary","isInitiallyExpanded","logo","name","parentId","subSkillsCount"],_=Object(w.default)(a.Icon)((function(){return{transition:"transform 0.2s, background 0.2s"}}),(function(e){if(e.isExpanded)return{transform:"rotate(90deg)"}})),z=Object(w.default)(a.Box)((function(){return{display:"flex",justifyContent:"center",alignItems:"center",width:24,height:24}}),(function(e){var t=e.isExpandable,n=e.theme;if(t)return{":hover":{background:n.colors.grey[1]}}})),B=function e(t){var n=t.closePanel,o=t.color,c=t.depth,s=void 0===c?0:c,u=t.expandedChildrenIdsPaths,d=t.id,b=t.isLibrary,f=void 0!==b&&b,h=t.isInitiallyExpanded,O=void 0!==h&&h,x=t.logo,v=t.name,S=t.parentId,m=t.subSkillsCount,g=Object(j.a)(t,A),y=Object(l.useState)(O),I=Object(r.a)(y,2),w=I[0],L=I[1],T=Object(l.useRef)(null),E=Object(a.useResponsive)().isMobile,B=V(),M=B.navigateToSkill,N=B.currentSkillId,G=B.currentSkillParentId,H=B.scrollToSelectedSkill,U=Object(P.a)({id:d,isLibrary:f}),F=U.getSubSkills,D=(U.isLoading,U.subSkills),Z=Object(l.useMemo)((function(){return"undefined"!==typeof D?D.length>0:m>0}),[m,D]),W=Object(l.useMemo)((function(){return"undefined"!==typeof G?d===N&&G===S:d===N}),[d,N,S,G]),Y=s<3?15:void 0,J=function(){Z&&L(!0)},K=function(){w?L(!1):J()};Object(l.useEffect)((function(){w&&F()}),[w]),Object(l.useEffect)((function(){W&&(J(),T.current&&H(T.current.offsetTop))}),[W,H]);return Object(p.jsxs)(a.Column,Object(i.a)(Object(i.a)({alignItems:"flex-start",width:"100%",ref:T},g),{},{children:[Object(p.jsxs)(a.Line,{alignItems:"center",width:"100%",children:[Object(p.jsx)(z,{size:24,isExpandable:Z,children:Object(p.jsx)(_,{as:C.a,color:Z?"black":"grey.2",onClick:Z?function(){K()}:void 0,isExpanded:w,size:24,mr:"0px",p:0})}),Object(p.jsx)(R,{width:"100%",p:0,onClick:function(){M(d,S),E&&"undefined"!==typeof n?n():J()},isSelected:W,name:v,logo:x,color:o})]}),w&&"undefined"!==typeof D&&D.length>0&&Object(p.jsx)(a.Column,{alignItems:"flex-start",ml:Y,width:"100%",children:D.map((function(t){var r=k({skillPaths:u,skillId:t.id}),i=r.isInitiallyExpanded,l=r.nextSkillPaths;return Object(p.jsx)(e,{closePanel:n,color:t.color,depth:s+1,expandedChildrenIdsPaths:l,id:t.id,isInitiallyExpanded:i,logo:t.logo,name:t.name,parentId:d,subSkillsCount:t.subSkillsCount},t.id)}))})]}))},M=["closePanel"],N=["subSkills"],G=o.a.forwardRef((function(e,t){var n=e.closePanel,o=Object(j.a)(e,M),c=Object(a.useTranslate)({capitalize:!0}),s=V().currentSkillId,u=Object(m.useGetAllLibrariesWithSubSkillsQuery)({fetchPolicy:"cache-first"}),d=u.data,b=u.loading,f=Object(m.useGetSkillPathsLazyQuery)({fetchPolicy:"cache-first"}),h=Object(r.a)(f,2),O=h[0],x=h[1].data;Object(l.useEffect)((function(){s&&O({variables:{id:s}})}),[s]);var v=Object(l.useMemo)((function(){var e;if(null===d||void 0===d||null===(e=d.libraries)||void 0===e?void 0:e.nodes){var t=d.libraries.nodes.map((function(e){e.subSkills;var t=Object(j.a)(e,N);return Object(i.a)(Object(i.a)({},Object(m.getFormatedLibraryBasicFragment)(t)),{},{subSkillsCount:e.subSkills.totalCount})}));return Object(g.getNormalizedLibrariesByFamilyTag)(t,g.NO_FAMILY_TAG_NAME)}}),[d]),S=Object(l.useMemo)((function(){var e;if(null===x||void 0===x||null===(e=x.skill)||void 0===e?void 0:e.skillPaths)return x.skill.skillPaths.map((function(e){return e.path.map((function(e){return e.id}))}))}),[x]);return Object(p.jsx)(a.Box,Object(i.a)(Object(i.a)({width:300,py:1,ref:t,position:"relative",overflowX:"hidden",overflowY:"auto"},o),{},{children:b||"undefined"===typeof v?Object(p.jsx)(a.Loader,{}):Object(p.jsx)(a.Column,{alignItems:"flex-start",width:"100%",children:Object.keys(v).length>0?Object.entries(v).map((function(e){var t=Object(r.a)(e,2),i=t[0],l=t[1];return Object(p.jsxs)(a.Box,{width:"100%",mb:15,children:[i!==g.NO_FAMILY_TAG_NAME&&Object(p.jsx)(I,{name:i}),l.map((function(e){var t=k({skillPaths:S,skillId:e.id}),r=t.isInitiallyExpanded,i=t.nextSkillPaths;return Object(p.jsx)(B,{closePanel:n,color:e.color,expandedChildrenIdsPaths:i,id:e.id,isInitiallyExpanded:r,isLibrary:!0,logo:e.logo,ml:15,name:e.name,subSkillsCount:e.subSkillsCount},e.id)}))]},i)})):Object(p.jsx)(a.Text,{children:c("no_skills")})})}))})),H=Object(l.lazy)((function(){return Promise.all([n.e(0),n.e(3),n.e(29)]).then(n.bind(null,1541))})),U=Object(l.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(5),n.e(44)]).then(n.bind(null,1560))})),F="parent",D=o.a.createContext({navigateToSkill:function(){},setCurrentSkillId:function(){},scrollToSelectedSkill:function(){}}),V=function(){return Object(l.useContext)(D)},Z=function(e,t){switch(t.type){case"setCurrentSkillId":return Object(i.a)(Object(i.a)({},e),{},{isShouldScrollToSelectedSkill:!0,currentSkillId:t.currentSkillId});case"setCurrentSkillParentId":return Object(i.a)(Object(i.a)({},e),{},{currentSkillParentId:t.currentSkillParentId});case"setScrollTop":return Object(i.a)(Object(i.a)({},e),{},{selectedSkillScrollTop:t.scrollTop,isShouldScrollToSelectedSkill:!1});default:return e}},W={isShouldScrollToSelectedSkill:!1,selectedSkillScrollTop:0},Y=(t.default=function(){var e=Object(d.useAppContext)().setTabsOptions,t=Object(l.useReducer)(Z,W),n=Object(r.a)(t,2),i=n[0],o=i.currentSkillId,h=i.currentSkillParentId,j=i.isShouldScrollToSelectedSkill,O=i.selectedSkillScrollTop,x=n[1],m=Object(a.useTranslate)({capitalize:!0}),g=Object(c.useHistory)(),k=Object(c.useLocation)(),y=Object(S.a)().tabsOptions,I=Object(a.useSwitch)(!1),w=I.active,C=I.off,P=I.on,L=Object(l.useRef)(null);Object(l.useEffect)((function(){return e(y),function(){e(void 0)}}),[]),Object(l.useEffect)((function(){var e=new URLSearchParams(k.search).get(F);e!==h&&x({type:"setCurrentSkillParentId",currentSkillParentId:e||void 0})}),[k.search]);return Object(l.useEffect)((function(){L.current&&L.current.scrollTo({behavior:"smooth",top:O})}),[O]),Object(p.jsx)(b.a,{children:Object(p.jsx)(D.Provider,{value:{navigateToSkill:function(e,t){var n="undefined"!==typeof t?"?".concat(F,"=").concat(t):"";g.push(f.b.USER_ORGANIZATION_SKILL_DETAILS.getRoute({skillId:e})+n)},currentSkillId:o,setCurrentSkillId:function(e){x({type:"setCurrentSkillId",currentSkillId:e})},currentSkillParentId:h,scrollToSelectedSkill:function(e){!0===j&&x({type:"setScrollTop",scrollTop:e})}},children:Object(p.jsxs)(a.Box,{display:"flex",flexDirection:"row",height:"100%",overflowY:"auto",width:"100%",children:[Object(p.jsxs)(a.DesktopOrTablet,{children:[Object(p.jsx)(G,{flexShrink:0,ref:L}),Object(p.jsx)(Y,{})]}),Object(p.jsxs)(a.Mobile,{children:[Object(p.jsx)(v,{height:"calc(100% - 70px)",isCustom:!0,isMaxWidth:!0,isOpened:w,onClose:C,renderHeader:function(){return Object(p.jsx)(p.Fragment,{})},children:Object(p.jsxs)(a.Box,{height:"100%",children:[Object(p.jsxs)(a.Line,{height:40,pt:0,pl:0,children:[Object(p.jsx)(a.ClickableIcon,{icon:s.a,onClick:C,mr:1}),Object(p.jsx)(a.Text,{children:m("back")})]}),Object(p.jsx)(a.Box,{height:"100%",overflowY:"auto",children:Object(p.jsx)(G,{flexShrink:0,closePanel:C,ref:L})})]})}),Object(p.jsxs)(a.Column,{height:"100%",width:"100%",alignItems:"flex-start",pt:2,children:[Object(p.jsx)(a.Button,{icon:u.a,appearance:"clean",onClick:P,children:m("skill_library_menu")}),Object(p.jsx)(Y,{})]})]})]})})})},function(){return Object(p.jsx)(a.Box,{flexGrow:1,overflow:"auto",width:"100%",children:Object(p.jsxs)(h.a,{children:[Object(p.jsx)(c.Route,{path:f.b.USER_ORGANIZATION_SKILLS_LIBRARY.path,exact:!0,component:U}),Object(p.jsx)(c.Route,{path:f.b.USER_ORGANIZATION_SKILL_DETAILS.path,exact:!0,component:H})]})})})}}]);