(this["webpackJsonp@elamp/main-app"]=this["webpackJsonp@elamp/main-app"]||[]).push([[30],{1539:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Ce}));var i,o=n(188),a=n(53),r=n(17),s=n(751),c=n(0),d=n(10),l=n(19),u=n(32),b=n(63),j=n(14),m=n(164),g=n(37),f=n(902),O=n(895),p=n(1),h=function(e){var t=e.actions;return t.length>0?Object(p.jsx)(d.TableToolboxActionsMenu,{actions:t,color:"grey.6",ml:1}):null},v=n(285),x=n(61),y=["isDraggable","isLoading"],T=Object(x.default)(j.Card)((function(e){var t=e.isDraggable,n=e.theme;return{alignItems:"center",border:"1px solid ".concat(n.colors.grey[2]),borderRadius:"3px",display:"flex",flexDirection:"column",justifyContent:"center",paddingBottom:n.space[2],paddingTop:n.space[2],":hover":t?{boxShadow:n.shadows.small}:void 0}})),E=function(e){var t=e.isDraggable,n=void 0===t||t,i=e.isLoading,o=Object(v.a)(e,y),a=o.children;return Object(p.jsx)(T,Object(r.a)(Object(r.a)({bg:"white",isDraggable:n,maxWidth:"680px",m:"0px auto 50px auto",width:"100%"},o),{},{children:i?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(j.Line,{px:1,width:"100%",children:Object(p.jsx)(j.LoaderSkeleton.Line,{width:"50%"})}),Object(p.jsx)(j.Line,{mt:1,px:1,width:"100%",children:Object(p.jsx)(j.LoaderSkeleton.Line,{width:"30%"})}),Object(p.jsx)(j.Line,{mt:1,px:1,width:"100%",children:Object(p.jsx)(j.LoaderSkeleton.Line,{width:"60%"})})]}):a}))},_=["children","isLoading","title","titleRightElement"],I=Object(x.default)(E)((function(){return{border:"none"}})),S=function(e){var t=e.children,n=e.isLoading,i=e.title,o=e.titleRightElement,a=Object(v.a)(e,_),s=Object(c.useMemo)((function(){return"undefined"!==typeof o}),[o]);return Object(p.jsxs)(I,Object(r.a)(Object(r.a)({bg:"primary.0",px:1},a),{},{children:[Object(p.jsxs)(j.Line,{display:"flex",justifyContent:"center",width:"100%",children:[Object(p.jsx)(j.AssistantLayoutTitleLine,{display:"flex",fontSize:"medium",fontWeight:"semiBold",justifyContent:s?void 0:"center",title:i,width:s?void 0:"100%"}),o]}),Object(p.jsx)(j.Box,{display:"flex",flexDirection:"column",alignItems:"center",mt:2,width:"100%",children:n?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(j.Line,{width:"100%",children:Object(p.jsx)(j.LoaderSkeleton.Line,{width:"70%"})}),Object(p.jsx)(j.Line,{mt:1,width:"100%",children:Object(p.jsx)(j.LoaderSkeleton.Line,{width:"50%"})})]}):Object(p.jsx)(p.Fragment,{children:t})})]}))},C=["isButtonLoading","isLoading","jobs","onPinJob"],w=function(e){var t=e.isButtonLoading,n=e.isLoading,i=e.jobs,o=e.onPinJob,a=Object(v.a)(e,C),s=Object(j.useTranslate)({capitalize:!0}),c=Object(d.useAppContext)().user,l=Object(j.useSwitch)(!1),u=l.active,m=l.off,g=l.on;return Object(p.jsxs)(E,Object(r.a)(Object(r.a)({},a),{},{children:[Object(p.jsx)(j.Line,{width:"100%",justifyContent:"center",pb:2,children:Object(p.jsx)(b.UserAvatar,{user:c,size:84})}),"undefined"===typeof i||n?Object(p.jsx)(j.LoaderSkeleton.Line,{width:"50%"}):Object(p.jsx)(p.Fragment,{children:i.length>0?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(j.Box,{bg:"primary.0",px:1,py:0,width:"fit-content",children:Object(p.jsx)(j.Text,{color:"primary.4",fontWeight:"semiBold",children:s("my_current_position",i.length)})}),Object(p.jsx)(G,{jobs:i,mt:2})]}):Object(p.jsx)(j.Popover,{isOpened:u,onClose:m,content:Object(p.jsx)(b.JobsNavigator,{buttonLabel:s("add"),isJobWithChildrenAndNoSkillsSelectionBlocked:!0,multiple:!1,onSubmit:function(e){var t=e[0].id;o(t),m()},submitWithSubJobs:!0}),children:Object(p.jsx)(j.Button,{isLoading:t,onClick:g,children:s("add_my_current_job")})})})]}))},k=["actions","customDetails"],M=function(e){var t=e.actions,n=e.customDetails,i=Object(v.a)(e,k);return Object(p.jsx)(E,Object(r.a)(Object(r.a)({px:2},i),{},{children:Object(p.jsxs)(j.Line,{display:"flex",justifyContent:"space-between",width:"100%",children:[Object(p.jsx)(j.Text,{fontWeight:"semiBold",children:n.title}),Object(p.jsx)(h,{actions:t})]})}))},D=["actions","children","element","icon","isLink","onElementClick","target","to"],L=function(e){var t=e.actions,n=e.children,i=e.element,o=e.icon,a=e.isLink,s=e.onElementClick,c=e.target,d=e.to,l=Object(v.a)(e,D);return Object(p.jsxs)(j.Line,Object(r.a)(Object(r.a)({alignItems:"center",display:"flex",height:"100%",justifyContent:"space-between",width:"100%"},l),{},{children:[Object(p.jsx)(j.Icon,{as:o,mr:1,mt:"2px",size:16}),Object(p.jsx)(j.Box,{width:"100%",mr:void 0!==typeof n&&null!==n||t.length>0?1:void 0,onClick:s,children:a?Object(p.jsx)(j.TextWithAutoTooltipOnEllipsis,{as:j.Link,fontWeight:"bold",rows:2,target:c,to:d,tooltipTitle:i.name,children:i.name}):Object(p.jsx)(j.TextWithAutoTooltipOnEllipsis,{fontWeight:"bold",rows:2,tooltipTitle:i.name,children:i.name})}),Object(p.jsx)(j.Box,{height:"100%",flexShrink:0,children:n}),Object(p.jsx)(h,{actions:t})]}))},A=["title","titleId"];function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function F(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function N(e,t){var n=e.title,o=e.titleId,a=F(e,A);return c.createElement("svg",P({id:"Calque_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 24 24",style:{enableBackground:"new 0 0 24 24"},xmlSpace:"preserve",ref:t,"aria-labelledby":o},a),n?c.createElement("title",{id:o},n):null,i||(i=c.createElement("path",{d:"M12,3c2.1,0,4,1.7,4,3.7c0,2.1-1.7,4.9-4,8.6c-2.3-3.6-4-6.5-4-8.6C8,4.7,9.9,3,12,3z M12,1C8.9,1,6,3.6,6,6.7 c0,3.1,2.6,6.9,6,12.3c3.4-5.4,6-9.1,6-12.3C18,3.6,15.1,1,12,1z M12,9c-1.1,0-2-0.9-2-2s0.9-2,2-2s2,0.9,2,2S13.1,9,12,9z M20,15 h-3.1c-0.4,0.6-0.8,1.3-1.2,2h3.1l0.5,1H15l-0.3,0.5L14.4,19h0.6l0.9,2H8.3l0.9-2h0.5l-0.3-0.5L9,18H7l-1-1h2.4 c-0.4-0.7-0.8-1.4-1.2-2H4l-4,8h24L20,15z M7.2,21h-4L5,17.5L6.5,19h1.5L7.2,21z M16,19h3.8l1,2h-3.9L16,19z"})))}var B,J,R=c.forwardRef(N),z=(n.p,["actions","geolocation"]),U=function(e){var t=e.actions,n=e.geolocation,i=Object(v.a)(e,z);return Object(p.jsx)(E,Object(r.a)(Object(r.a)({px:2},i),{},{children:Object(p.jsxs)(j.Line,{display:"flex",justifyContent:"space-between",width:"100%",children:[Object(p.jsxs)(j.Line,{children:[Object(p.jsx)(j.Icon,{as:R,mr:1,size:16}),Object(p.jsx)(j.Text,{fontWeight:"semiBold",children:"".concat(n.label," (").concat(n.radius," km)")})]}),Object(p.jsx)(h,{actions:t})]})}))},W=n(745),q=["jobs"],G=function(e){var t=e.jobs,n=Object(v.a)(e,q);return Object(p.jsx)(j.Box,Object(r.a)(Object(r.a)({alignItems:"flex-start",display:"flex",flexDirection:"column",maxWidth:"90%"},n),{},{children:t.map((function(e,t){return Object(p.jsx)(L,{actions:[],element:e,icon:W.a,mt:0!==t?0:void 0},"".concat(e.jobId,"_").concat(t))}))}))},H=["isAddJobLoading","isLoading","formattedJobsAndUserJobsSuggestions","onAddJob"],Y=function(e){var t=e.isAddJobLoading,n=e.isLoading,i=e.formattedJobsAndUserJobsSuggestions,o=e.onAddJob,a=Object(v.a)(e,H),s=Object(j.useTranslate)();return Object(p.jsx)(S,Object(r.a)(Object(r.a)({isDraggable:!1,isLoading:n,maxWidth:"640px",title:s("jobs_suggestions")},a),{},{children:Object(p.jsxs)(p.Fragment,{children:[i.jobsWithEvolutionAndProximityJobs.map((function(e,n){return Object(p.jsx)(ie,{isAddJobLoading:t,jobWithEvolutionAndProximityJobs:e,onAddJob:o},"".concat(e.id,"_").concat(n))})),Object(p.jsx)(fe,{isAddJobLoading:t,onAddJob:o,userSuggestedJobs:i.userSuggestedJobs})]})}))},V=n(23),Q=n(85),X=n(79),K=n(760),Z=n(3),$=["actions","comment","isAddTrainingLoading","isTrainingAssistantBlockDisplay","jobDetails","onAddTraining","onTrainingClick","onUpdateComment"],ee=Object(x.default)(j.Link)((function(){return{textDecoration:"none",":hover":{color:"black"}}})),te=function(e){var t,n,i=e.actions,o=e.comment,a=e.isAddTrainingLoading,s=e.isTrainingAssistantBlockDisplay,l=e.jobDetails,b=e.onAddTraining,m=e.onTrainingClick,g=e.onUpdateComment,f=Object(v.a)(e,$),O=Object(j.useTranslate)(),h=Object(d.useAppContext)().checkModule,x=Object(c.useRef)({}),y=Object(c.useMemo)((function(){return Z.b.USER_ORGANIZATION_JOB_DETAILS.getRoute({jobId:l.id})}),[l]),T=Object(c.useMemo)((function(){return Z.b.USER_PROFILE_SEARCH_V2.getRoute({searchPatternString:JSON.stringify({peopleFilters:{pinnedJobs:{ids:[l.id],statuses:[u.PinJobStatusEnum.Have]}}})})}),[l]),_=Object(c.useMemo)((function(){var e=l.matchingScore>0?l.matchingScore/10*9:0;return e<.5?Object(V.maj)(O("smart_affinity_low")):e<.8?Object(V.maj)(O("smart_affinity_medium")):Object(V.maj)(O("smart_affinity_high"))}),[l.matchingScore]);return Object(p.jsxs)(p.Fragment,{children:[s&&Object(p.jsx)(j.LinkArrow,{sourceRef:null===(t=x.current)||void 0===t?void 0:t.trainingSuggestionBloc,targetRef:null===(n=x.current)||void 0===n?void 0:n.jobBlock}),Object(p.jsx)(j.Box,{ref:function(e){return x.current.trainingSuggestionBloc=e},children:s&&Object(p.jsx)(me,{isAddTrainingLoading:a,isLoading:!1,jobName:l.name,onAddTraining:b,onTrainingClick:m,suggestedTrainings:l.jobTrainings})}),Object(p.jsx)(j.Box,{ref:function(e){return x.current.jobBlock=e},children:Object(p.jsxs)(E,Object(r.a)(Object(r.a)({px:1},f),{},{children:[Object(p.jsx)(j.Line,{mb:2,width:"100%",children:Object(p.jsx)(L,{actions:i,element:l,icon:W.a,isLink:!0,target:"_blank",to:y,children:Object(p.jsx)(d.SmartSearchScoreGauge,{flexShrink:0,onClick:function(){Object(Q.openNewTab)({route:y,tabName:"career_path_job_".concat(l.id)})},score:l.matchingScore,text:_})})}),l.linkedJobOffers.length>0&&Object(p.jsxs)(j.Line,{alignItems:"center",display:"flex",width:"100%",children:[Object(p.jsx)(j.Icon,{as:X.a,mr:0,size:16}),h(d.AppModule.ORGANIZATION)?Object(p.jsx)(ee,{fontWeight:"semiBold",fontSize:"small",to:Z.b.USER_ORGANIZATION_JOB_OFFERS.getRoute({jobId:l.id}),target:"_blank",children:O("num_related_job_openings",l.linkedJobOffers.length)}):Object(p.jsx)(j.Text,{fontWeight:"semiBold",fontSize:"small",children:O("num_related_job_openings",l.linkedJobOffers.length)})]}),Object(p.jsx)(j.Line,{width:"100%",children:Object(p.jsx)(j.Box,{flexGrow:1,children:Object(p.jsx)(j.TextEditableCancelable,{initialText:(null===o||void 0===o?void 0:o.content)||"",fontSize:"small",fontWeight:"semiBold",onSubmit:function(e){g({comment:e})},placeholder:O("add_a_note"),width:"100%"})})}),l.pinnedUsers.length>0&&Object(p.jsxs)(j.Line,{mt:0,width:"100%",children:[Object(p.jsx)(j.Text,{fontWeight:"semiBold",fontSize:"small",mr:1,children:O("two_points",{phrase:O("they_applied_to_this_job")})}),Object(p.jsx)(K.a,{isLink:!0,maxDisplayCount:5,urlNewTabOnPlusClick:T,users:l.pinnedUsers})]})]}))})]})},ne=["isAddJobLoading","jobWithEvolutionAndProximityJobs","onAddJob"],ie=function(e){var t=e.isAddJobLoading,n=e.jobWithEvolutionAndProximityJobs,i=e.onAddJob,o=Object(v.a)(e,ne),a=Object(j.useTranslate)({capitalize:!0}),s=Object(c.useMemo)((function(){return n.evolutionJobs.concat(n.proximityJobs)}),[n]);return s.length>0?Object(p.jsxs)(j.Box,Object(r.a)(Object(r.a)({mb:2,width:"100%"},o),{},{children:[Object(p.jsxs)(j.Line,{display:"flex",justifyContent:"center",width:"100%",children:[Object(p.jsx)(j.Text,{mr:1,children:a("two_points",{phrase:a("suggested_evolutions_from")})}),Object(p.jsx)(j.Icon,{as:X.a,mr:1,size:16}),Object(p.jsx)(j.Text,{fontWeight:"bold",children:n.name})]}),Object(p.jsx)(se,{icon:W.a,isAddElementLoading:t,onAddElement:i,suggestedElements:s})]})):null},oe=n(764),ae=n(788),re=["icon","isAddElementLoading","maxTagsDisplayed","onAddElement","onElementClick","suggestedElements"],se=function(e){var t=e.icon,n=e.isAddElementLoading,i=e.maxTagsDisplayed,o=e.onAddElement,a=e.onElementClick,s=e.suggestedElements,d=Object(v.a)(e,re),l=Object(c.useMemo)((function(){return"number"===typeof i?s.slice(0,i):s}),[i,s]),u=Object(c.useMemo)((function(){return"undefined"!==typeof a}),[a]);return Object(p.jsx)(j.Box,Object(r.a)(Object(r.a)({mt:1,width:"100%"},d),{},{children:Object(p.jsx)(j.Line,{display:"flex",justifyContent:"center",flexWrap:"wrap",width:"100%",children:l.map((function(e,i){return Object(p.jsx)(b.SkillBrick,{leftIcon:t,onClick:u?function(){return function(e){var t=e.id,n=e.name;"undefined"!==typeof a&&a({id:t,name:n})}({id:e.id,name:e.name})}:void 0,skill:Object(r.a)({_key:e.id},e),rightElement:n?Object(p.jsx)(j.Icon,{as:ae.a,color:"grey.5",size:16}):Object(p.jsx)(j.IconButton,{iconAs:oe.a,accent:"primary",onClick:function(){return o(e.id)}}),maxWidth:"45%",mr:1,mb:1},"".concat(e.id,"_").concat(i))}))})}))},ce=n(45),de=n(123),le=n(747),ue=["actions","isAddTrainingLoading","onRequestTraining","onTrainingClick","pinTrainingStatus","trainingDetails"],be=function(e){var t=e.actions,n=e.isAddTrainingLoading,i=e.onRequestTraining,o=e.onTrainingClick,a=e.pinTrainingStatus,s=e.trainingDetails,c=Object(v.a)(e,ue),l=Object(j.useTranslate)();return Object(p.jsx)(E,Object(r.a)(Object(r.a)({px:2},c),{},{children:Object(p.jsx)(j.Line,{display:"flex",height:"undefined"!==typeof a?"50px":void 0,justifyContent:"space-between",width:"100%",children:Object(p.jsx)(L,{actions:t,element:s,icon:de.a,mr:2,onElementClick:function(){o({id:s.id,name:s.name})},width:"fit-content",children:"undefined"===typeof a?Object(p.jsx)(j.Button,{appearance:"clean",isLoading:n,onClick:function(){i({trainingId:s.id,trainingName:s.name})},children:l("make_a_request")}):Object(p.jsx)(j.Box,{height:"100%",flexShrink:0,children:Object(p.jsx)(d.GenericStatusCell,{statusObject:Object(ce.g)(le.a,a)})})})})}))},je=["isAddTrainingLoading","isLoading","jobName","onAddTraining","onTrainingClick","suggestedTrainings"],me=function(e){var t=e.isAddTrainingLoading,n=e.isLoading,i=e.jobName,o=e.onAddTraining,a=e.onTrainingClick,s=e.suggestedTrainings,c=Object(v.a)(e,je),d=Object(j.useTranslate)();return Object(p.jsx)(S,Object(r.a)(Object(r.a)({isDraggable:!1,isLoading:n,maxWidth:"640px",title:d("two_points",{phrase:d("needed_trainings")}),titleRightElement:Object(p.jsx)(L,{actions:[],element:{name:i},icon:W.a,ml:1,width:"fit-content"})},c),{},{children:Object(p.jsx)(se,{icon:de.a,isAddElementLoading:t,onAddElement:o,onElementClick:a,suggestedElements:s})}))},ge=["isAddJobLoading","onAddJob","userSuggestedJobs"],fe=function(e){var t=e.isAddJobLoading,n=e.onAddJob,i=e.userSuggestedJobs,o=Object(v.a)(e,ge),a=Object(j.useTranslate)({capitalize:!0});return i.length>0?Object(p.jsxs)(j.Box,Object(r.a)(Object(r.a)({mb:2,width:"100%"},o),{},{children:[Object(p.jsx)(j.Line,{display:"flex",justifyContent:"center",width:"100%",children:Object(p.jsx)(j.Text,{mr:1,children:"".concat(a("customized_suggestion")," :")})}),Object(p.jsx)(se,{icon:W.a,isAddElementLoading:t,maxTagsDisplayed:3,onAddElement:n,suggestedElements:i})]})):null};!function(e){e.Past="past",e.Current="current",e.Future="future"}(B||(B={})),function(e){e.Custom="custom",e.GeoMobility="geo_mobility",e.Job="job",e.Other="other",e.Training="training"}(J||(J={}));var Oe={id:"NONE",kind:"trainingTag",name:"NONE"},pe={_numberOfElements:0,actionElementIndex:void 0,currentTrainingTag:Oe,customElementText:void 0,isAddButtonIsElementFixed:!0,isCustomElementModalOpened:!1,isDeleteElementModalOpened:!1,isGeolocationModalOpened:!1,isJobsNavigatorModalOpened:!1,isPastJobsDisplay:!0,isTrainingDetailsModalOpened:!1,isTrainingsNavigatorModalOpened:!1,isTrainingRequestFormOpened:!1,location:void 0,radius:50,trainingDetailsForModal:void 0,trainingRequestForm:{userId:"NONE",trainingPinId:"NONE",status:void 0,budgetYear:void 0,deadline:void 0,startDate:void 0,endDate:void 0,comment:void 0,trainingId:void 0,customFields:void 0}},he=function(e,t){switch(t.type){case"setNumberOfElements":return Object(r.a)(Object(r.a)({},e),{},{_numberOfElements:t.numberOfElements});case"setCustomElementText":return Object(r.a)(Object(r.a)({},e),{},{customElementText:t.customElementText});case"setGeolocation":return Object(r.a)(Object(r.a)({},e),{},{geolocation:t.geolocation});case"setActionElementIndex":return Object(r.a)(Object(r.a)({},e),{},{actionElementIndex:t.actionElementIndex});case"setIsAddButtonIsElementFixed":return Object(r.a)(Object(r.a)({},e),{},{isAddButtonIsElementFixed:t.isAddButtonIsElementFixed});case"setIsDeleteElementModalOpened":return Object(r.a)(Object(r.a)({},e),{},{actionElementIndex:!0===t.isDeleteElementModalOpened?t.actionElementIndex:void 0,isDeleteElementModalOpened:t.isDeleteElementModalOpened});case"setIsCustomElementModalOpened":return Object(r.a)(Object(r.a)({},e),{},{customElementText:void 0,actionElementIndex:!0===t.isCustomElementModalOpened?t.actionElementIndex:void 0,isCustomElementModalOpened:t.isCustomElementModalOpened});case"setIsGeolocationModalOpened":return Object(r.a)(Object(r.a)({},e),{},{geolocation:void 0,location:void 0,radius:50,actionElementIndex:!0===t.isGeolocationModalOpened?t.actionElementIndex:void 0,isGeolocationModalOpened:t.isGeolocationModalOpened});case"setIsJobsNavigatorModalOpened":return Object(r.a)(Object(r.a)({},e),{},{actionElementIndex:!0===t.isJobsNavigatorModalOpened?t.actionElementIndex:void 0,isJobsNavigatorModalOpened:t.isJobsNavigatorModalOpened});case"setIsTrainingDetailsModalOpened":return Object(r.a)(Object(r.a)({},e),{},{isTrainingDetailsModalOpened:t.isTrainingDetailsModalOpened,trainingDetailsForModal:!0===t.isTrainingDetailsModalOpened?t.trainingDetailsForModal:void 0});case"setIsTrainingsNavigatorModalOpened":return Object(r.a)(Object(r.a)({},e),{},{actionElementIndex:!0===t.isTrainingsNavigatorModalOpened?t.actionElementIndex:void 0,isTrainingsNavigatorModalOpened:t.isTrainingsNavigatorModalOpened});case"setIsTrainingRequestFormOpened":return t.isTrainingRequestFormOpened?Object(r.a)(Object(r.a)({},e),{},{currentTrainingTag:{id:t.trainingId,kind:"trainingTag",name:t.trainingName},isTrainingRequestFormOpened:t.isTrainingRequestFormOpened}):Object(r.a)(Object(r.a)({},e),{},{currentTrainingTag:Oe,isTrainingRequestFormOpened:t.isTrainingRequestFormOpened});case"setIsPastJobsDisplay":return Object(r.a)(Object(r.a)({},e),{},{isPastJobsDisplay:t.isPastJobsDisplay});case"setLocation":return Object(r.a)(Object(r.a)({},e),{},{geolocation:"undefined"!==typeof t.location?Object(r.a)(Object(r.a)({},t.location),{},{radius:e.radius}):void 0,location:t.location});case"setRadius":return Object(r.a)(Object(r.a)({},e),{},{geolocation:"undefined"!==typeof e.geolocation?Object(r.a)(Object(r.a)({},e.geolocation),{},{radius:t.radius}):void 0,radius:t.radius});case"reset":return pe;default:return e}},ve=function(e){var t=e.id,n=e.isAddButtonIsElementFixed?j.ADD_BUTTON_ID:j.DND_FIX_ELEMENT_ID;return[{id:"".concat(t,"_").concat(n),source:t,target:n}]},xe=function(e){var t=e.index,n=e.currentPositionMinIndex;return t<n?B.Past:t===n?B.Current:B.Future},ye=function(e){var t=e.findIndex((function(e){return e.position===B.Current}));return-1===t?0:t},Te=function(e){return e.map((function(t,n){return Object(r.a)(Object(r.a)({},t),{},{position:xe({index:n,currentPositionMinIndex:ye(e)})})}))},Ee=function(e){var t,n,i,o=e.job;if(o)return{id:o.id,matchingScore:Object(l.maybeToOptional)(null===(t=o.matching)||void 0===t?void 0:t.score)||0,name:o.name,jobTrainings:o.jobTrainings.edges.map((function(e){var t;return{id:e.node.id,name:e.node.name,matchingScore:Object(l.maybeToOptional)(null===(t=e.matching)||void 0===t?void 0:t.score)||0,relationId:e.relationId}})),linkedJobOffers:((null===(n=o.linkedJobOffers)||void 0===n?void 0:n.nodes)||[]).map((function(e){return{id:e.id,name:e.name}})),pinnedUsers:((null===(i=o.pinnedUsers)||void 0===i?void 0:i.nodes)||[]).map((function(e){return Object(l.getFormatedUserBasicFragment)(e)}))}},_e=function(e){var t=null===e||void 0===e?void 0:e.training;if(t)return{id:t.id,name:t.name,status:Object(l.maybeToOptional)(t.status)||u.PinTrainingStatus.Suggested}},Ie=function(e){var t=e.elements,n=e.userId,i=[],o=[];return t.forEach((function(e){e.linkTo.forEach((function(e){i.push({fromId:e.source,toId:e.target===j.DND_FIX_ELEMENT_ID||e.target===j.ADD_BUTTON_ID?null:e.target})}));var t={comment:"undefined"!==typeof e.comment?{commentedAt:e.comment.commentedAt,commentedBy:{uid:n},content:e.comment.content}:void 0,id:e.id,position:e.position,type:e.type};"undefined"!==typeof e.content&&(e.type===J.Custom||e.type===J.GeoMobility?o.push(Object(r.a)(Object(r.a)({},t),{},{content:e.content})):e.type===J.Job?e.position===B.Current?o.push(Object(r.a)(Object(r.a)({},t),{},{content:{pinnedJobIds:e.content.map((function(e){return e.id}))}})):o.push(Object(r.a)(Object(r.a)({},t),{},{content:{jobId:e.content.id}})):e.type===J.Training&&o.push(Object(r.a)(Object(r.a)({},t),{},{content:{trainingId:e.content.id}})))})),{edges:i,nodes:o,userId:n}},Se=[{id:j.DND_FIX_ELEMENT_ID,content:"job suggestion",linkTo:[{id:"".concat(j.DND_FIX_ELEMENT_ID,"_").concat(j.ADD_BUTTON_ID),source:j.DND_FIX_ELEMENT_ID,target:j.ADD_BUTTON_ID}],position:B.Future,type:J.Other},{id:j.ADD_BUTTON_ID,content:"",linkTo:[],position:B.Future,type:J.Other}],Ce=function(){var e=Object(j.useTranslate)({capitalize:!0}),t=Object(j.useAlert)(),n=Object(d.useAppContext)(),i=n.getErrorMessage,h=n.user,v=Object(c.useReducer)(he,pe),x=Object(a.a)(v,2),y=x[0],T=y.currentTrainingTag,E=y.customElementText,_=y.geolocation,I=y.actionElementIndex,S=y.isAddButtonIsElementFixed,C=y.isCustomElementModalOpened,k=y.isDeleteElementModalOpened,D=y.isGeolocationModalOpened,L=y.isJobsNavigatorModalOpened,A=y.isPastJobsDisplay,P=y.isTrainingDetailsModalOpened,F=y.isTrainingsNavigatorModalOpened,N=y.isTrainingRequestFormOpened,R=y.location,z=y.radius,W=y.trainingDetailsForModal,q=x[1],G=j.DragNDropToolbox.DragNDropBlockContainer,H=j.DragNDropToolbox.DragNDropBlockWithEdgeContainer,V=j.DragNDropToolbox.DragNDropColumn,Q=j.DragNDropToolbox.DragNDropZone,X=Object(l.useGetCareerPathPinnedJobsLazyQuery)({variables:{dataFilters:{status:{inValues:[u.PinJobStatusEnum.Have]},user:{id:{inValues:[h.id]}}}},fetchPolicy:"cache-first",nextFetchPolicy:"cache-only",onError:function(e){return t.error(i(e))}}),K=Object(a.a)(X,2),Z=K[0],$=K[1],ee=$.data,ne=$.loading,ie=Object(c.useCallback)(Object(s.debounce)((function(){return Z()}),500),[Z]),oe=Object(l.usePinJobMutation)({onError:function(e){return t.error(i(e))}}),ae=Object(a.a)(oe,2),re=ae[0],se=ae[1].loading,ce=Object(l.usePinTrainingMutation)({onCompleted:function(){return Ue()},onError:function(e){return t.error(i(e))}}),de=Object(a.a)(ce,2),le=de[0],ue=de[1].loading,je=Object(l.useGetCareerPathJobDetailsLazyQuery)({fetchPolicy:"cache-first",nextFetchPolicy:"cache-only",onCompleted:function(e){var t=Ee(e);"undefined"!==typeof t&&(mt({content:t,type:J.Job}),ft())},onError:function(e){return t.error(i(e))}}),me=Object(a.a)(je,2),ge=me[0],fe=me[1].loading,Oe=Object(l.useGetUserCareerPathLazyQuery)({fetchPolicy:"cache-first",nextFetchPolicy:"cache-only",onError:function(e){return t.error(i(e))}}),Ce=Object(a.a)(Oe,2),we=Ce[0],ke=Ce[1],Me=ke.data,De=ke.loading,Le=Object(l.useGetCareerPathTrainingDetailsLazyQuery)({fetchPolicy:"cache-first",nextFetchPolicy:"cache-only",onCompleted:function(e){var t=_e(e);"undefined"!==typeof t&&(mt({content:t,type:J.Training}),pt())},onError:function(n){return t.error(e(i(n)))}}),Ae=Object(a.a)(Le,2),Pe=Ae[0],Fe=Ae[1].loading,Ne=Object(l.useGetCareerPathPinnedTrainingsLazyQuery)({variables:{id:h.id},fetchPolicy:"cache-first",nextFetchPolicy:"cache-only",onError:function(n){return t.error(e(i(n)))}}),Be=Object(a.a)(Ne,2),Je=Be[0],Re=Be[1],ze=Re.data,Ue=Re.refetch,We=Object(c.useCallback)(Object(s.debounce)((function(){return Je()}),500),[Je]),qe=Object(l.useGetJobsEvolutionsAndUserSuggestedJobsLazyQuery)({fetchPolicy:"cache-first",nextFetchPolicy:"cache-only"}),Ge=Object(a.a)(qe,2),He=Ge[0],Ye=Ge[1],Ve=Ye.data,Qe=Ye.loading,Xe=Object(l.useUpsertCareerPathMutation)({onError:function(e){return console.error("UpsertError",e)}}),Ke=Object(a.a)(Xe,1)[0],Ze=Object(c.useCallback)(Object(s.debounce)((function(e){var t=e.variables;return Ke({variables:t})}),500),[Je]),$e=Object(c.useRef)({}),et=Object(c.useRef)(null),tt=Object(c.useMemo)((function(){var e,t,n,i=null===Ve||void 0===Ve||null===(e=Ve.jobs)||void 0===e?void 0:e.nodes,o=null===Ve||void 0===Ve||null===(t=Ve.user)||void 0===t||null===(n=t.suggestedJobs)||void 0===n?void 0:n.edges;return i&&o?{jobsWithEvolutionAndProximityJobs:i.map((function(e){var t;return{id:e.id,name:e.name,evolutionJobs:((null===(t=e.jobEvolutions)||void 0===t?void 0:t.edges)||[]).map((function(e){var t;return{id:e.node.id,name:e.node.name,matchingScore:Object(l.maybeToOptional)(null===(t=e.matching)||void 0===t?void 0:t.score)||0}})),proximityJobs:(e.jobProximities.nodes||[]).map((function(e){return{id:e.id,name:e.name,matchingScore:Object(l.maybeToOptional)(e.matching.score)||0}}))}})),userSuggestedJobs:o.map((function(e){return{id:e.node.id,name:e.node.name,matchingScore:e.score}}))}:{jobsWithEvolutionAndProximityJobs:[],userSuggestedJobs:[]}}),[Ve]),nt=Object(c.useMemo)((function(){var e,t,n=null===ze||void 0===ze||null===(e=ze.user)||void 0===e||null===(t=e.pinnedTrainings)||void 0===t?void 0:t.edges,i=new Map([]);return n&&n.forEach((function(e){i.set(e.node.id,{id:e.id,name:e.node.name,status:e.status,trainingId:e.node.id})})),i}),[ze]);Object(c.useEffect)((function(){var e=tt.jobsWithEvolutionAndProximityJobs.some((function(e){return e.evolutionJobs.length>0||e.proximityJobs.length>0})),t=tt.userSuggestedJobs.length>0;q({type:"setIsAddButtonIsElementFixed",isAddButtonIsElementFixed:!e&&!t})}),[tt]),Object(c.useEffect)((function(){We()}),[]);var it=Object(c.useMemo)((function(){var e=Object(m.generateUniqueId)();return[{id:e,content:void 0,linkTo:ve({id:e,isAddButtonIsElementFixed:S}),position:B.Current,type:J.Job}]}),[]),ot=Object(j.useDragNDropWithEdges)({initialElements:it,isLastElementFix:!0,isAddButtonIsElementFixed:S,otherReOrderTreatment:Te}),at=ot.addNewElement,rt=ot.draggedId,st=ot.elements,ct=ot.onDragEnd,dt=ot.onDragStart,lt=ot.setElements,ut=Object(c.useMemo)((function(){var e=new Set;return st.forEach((function(t){t.type===J.Training&&e.add(t.content.id)})),e}),[st]),bt=function(e){re({variables:{input:{userId:h.id,jobId:e,status:u.PinJobStatusEnum.Have}},onCompleted:function(e){var t=e.pinJob.pinnedJob;if(t){var n={id:t.id,jobId:t.job.id,name:t.job.name};jt(n)}}})},jt=function(e){var t=st.map((function(t){if(t.position===B.Current){var n=t.content||[];return n.some((function(t){return t.id===e.id})),Object(r.a)(Object(r.a)({},t),{},{content:[].concat(Object(o.a)(n),[e])})}return t}));lt(t),1===t.length&&Ze({variables:{input:Ie({elements:t,userId:h.id})}})},mt=function(e){var t=e.content,n=e.type;if("number"===typeof I){var i=ye(st),o={id:Object(m.generateUniqueId)(),content:t,linkTo:[],position:xe({index:I,currentPositionMinIndex:i}),type:n},a=Array.from(st);a.splice(I+1,0,o),at(Te(a))}},gt=function(){q({type:"setIsDeleteElementModalOpened",isDeleteElementModalOpened:!1})},ft=function(){q({type:"setIsJobsNavigatorModalOpened",isJobsNavigatorModalOpened:!1})},Ot=function(e){q({type:"setActionElementIndex",actionElementIndex:st.length-1}),ge({variables:{id:e}})},pt=function(){q({type:"setIsTrainingsNavigatorModalOpened",isTrainingsNavigatorModalOpened:!1})},ht=function(e){return function(t){q({type:"setActionElementIndex",actionElementIndex:e-1}),Pe({variables:{id:t}})}},vt=function(e){var t=e.id,n=e.name;q({type:"setIsTrainingDetailsModalOpened",isTrainingDetailsModalOpened:!0,trainingDetailsForModal:{id:t,name:n}})},xt=function(e){var t=e.trainingId,n=e.trainingName;q({type:"setIsTrainingRequestFormOpened",isTrainingRequestFormOpened:!0,trainingId:t,trainingName:n})},yt=function(){q({type:"setIsCustomElementModalOpened",isCustomElementModalOpened:!1})},Tt=function(){q({type:"setIsGeolocationModalOpened",isGeolocationModalOpened:!1})},Et=function(t){return[{title:e("delete"),onClick:function(){q({type:"setIsDeleteElementModalOpened",actionElementIndex:t,isDeleteElementModalOpened:!0})}}]},_t=function(t){return[{label:e("add_a_something",{object:e("a_job",1)}),onClick:function(){return q({type:"setIsJobsNavigatorModalOpened",actionElementIndex:t,isJobsNavigatorModalOpened:!0})}},{label:e("add_a_something",{object:e("a_training",1)}),onClick:function(){return q({type:"setIsTrainingsNavigatorModalOpened",actionElementIndex:t,isTrainingsNavigatorModalOpened:!0})}},{label:e("add_a_something",{object:e("a_geographic_mobility",1)}),onClick:function(){return q({type:"setIsGeolocationModalOpened",actionElementIndex:t,isGeolocationModalOpened:!0})}},{label:e("add_a_something",{object:e("a_free_text",1)}),onClick:function(){return q({type:"setIsCustomElementModalOpened",actionElementIndex:t,isCustomElementModalOpened:!0})}}]},It=function(){var t=st.length-1;return[{label:e("add_a_something",{object:e("a_job",1)}),onClick:function(){return q({type:"setIsJobsNavigatorModalOpened",actionElementIndex:t,isJobsNavigatorModalOpened:!0})}},{label:e("add_a_something",{object:e("a_training",1)}),onClick:function(){return q({type:"setIsTrainingsNavigatorModalOpened",actionElementIndex:t,isTrainingsNavigatorModalOpened:!0})}},{label:e("add_a_something",{object:e("a_geographic_mobility",1)}),onClick:function(){return q({type:"setIsGeolocationModalOpened",actionElementIndex:t,isGeolocationModalOpened:!0})}},{label:e("add_a_something",{object:e("a_free_text",1)}),onClick:function(){return q({type:"setIsCustomElementModalOpened",actionElementIndex:t,isCustomElementModalOpened:!0})}}]},St=Object(c.useMemo)((function(){var e=Object(o.a)(st).findLast((function(e){return e.type===J.Job}));return"undefined"!==typeof e?e.position===B.Current?(e.content||[]).map((function(e){return e.jobId})):[e.content.id]:[]}),[st]),Ct=Object(c.useMemo)((function(){var t=[];return A?t.push.apply(t,Object(o.a)(st.map((function(e,t){return Object(r.a)(Object(r.a)({},e),{},{actions:Et(t),options:S&&t+1===st.length?void 0:_t(t)})})))):st.forEach((function(e,n){e.type===J.Job&&e.position!==B.Past&&t.push(Object(r.a)(Object(r.a)({},e),{},{actions:Et(n),options:_t(n)}))})),S?t.concat([Object(r.a)(Object(r.a)({},Se[1]),{},{actions:[],options:It()})]):t.map((function(e,t){return Object(r.a)(Object(r.a)({},e),{},{actions:Et(t),options:t+1===st.length?void 0:_t(t)})})).concat([Object(r.a)(Object(r.a)({},Se[0]),{},{actions:[],options:[{label:e("add_a_something",{object:e("a_job",1)}),onClick:function(){}}]}),Object(r.a)(Object(r.a)({},Se[1]),{},{actions:[],options:It()})])}),[st,S,A]),wt=Object(c.useMemo)((function(){return st.some((function(e){return e.type===J.Job&&e.position===B.Past}))}),[st]),kt=Object(c.useMemo)((function(){var e=null===Me||void 0===Me?void 0:Me.user;if(e)return function(e){var t=e.data,n=e.isAddButtonIsElementFixed,i=null===t||void 0===t?void 0:t.careerPath;if(i){var o=i.edges;return i.nodes.map((function(e){var t,i=e.content;"CareerPathElementPastOrFutureJobContent"===i.__typename?t=Ee(i):"CareerPathElementCurrentJobsContent"===i.__typename?t=i.pinnedJobs.map((function(e){return{id:e.id,jobId:e.job.id,name:e.job.name}})):"CareerPathElementCustomContent"===i.__typename?t={title:i.title}:"CareerPathElementGeoMobilityContent"===i.__typename?t={label:i.place.label,location:{latitude:i.place.location.latitude,longitude:i.place.location.longitude},radius:i.place.radius}:"CareerPathElementTrainingContent"===i.__typename&&(t=_e(i));var a=n?j.ADD_BUTTON_ID:j.DND_FIX_ELEMENT_ID;return{id:e.id,comment:e.comment?{content:e.comment.content,commentedAt:e.comment.commentedAt,commentedBy:Object(l.getFormatedUserBasicFragment)({avatarURL:e.comment.commentedBy.avatarURL,displayName:e.comment.commentedBy.displayName,id:e.comment.commentedBy.id})}:void 0,content:t,type:e.type,linkTo:o.filter((function(t){return t.fromId===e.id})).map((function(e){return{id:"".concat(e.fromId,"_").concat(e.toId),source:e.fromId,target:Object(l.maybeToOptional)(e.toId)||a}})),position:e.position}}))}}({data:e,isAddButtonIsElementFixed:S})}),[Me]);return Object(c.useEffect)((function(){var e=st.length;Ct.length>0&&Ct.length!==st.length&&(e=Ct.length),q({type:"setNumberOfElements",numberOfElements:e})}),[Ct,st]),Object(c.useEffect)((function(){C&&(null===et||void 0===et?void 0:et.current)&&et.current.focus()}),[null===et||void 0===et?void 0:et.current]),Object(c.useEffect)((function(){var e,t=null===ee||void 0===ee||null===(e=ee.pinnedJobs)||void 0===e?void 0:e.nodes,n=void 0;if("undefined"!==typeof kt&&kt.length>1)lt(kt);else if(t){n=t.map((function(e){return{id:e.id,jobId:e.job.id,name:e.job.name}}));var i=st.map((function(e){return e.position!==B.Current?e:Object(r.a)(Object(r.a)({},e),{},{content:n})}));lt(i)}}),[kt,ee]),Object(c.useEffect)((function(){we({variables:{id:h.id}})}),[]),Object(c.useEffect)((function(){!De&&!ne&&st.length>1&&Ze({variables:{input:Ie({elements:st,userId:h.id})}})}),[st]),Object(c.useEffect)((function(){"undefined"!==typeof kt&&kt.length<=1&&"undefined"===typeof ee&&ie()}),[kt]),Object(c.useEffect)((function(){St.length>0&&He({variables:{jobsIds:St,userId:h.id}})}),[St]),Object(p.jsxs)(d.PageLayout,{children:[Object(p.jsxs)(j.Column,{height:"100%",overflowY:"auto",width:"100%",children:[wt&&!A&&Object(p.jsx)(j.Box,{display:"flex",justifyContent:"center",width:"100%",children:Object(p.jsx)(j.Button,{onClick:function(){return q({type:"setIsPastJobsDisplay",isPastJobsDisplay:!0})},children:e("my_career_show_past_jobs")})}),Object(p.jsx)(Q,{onDragEnd:ct,onDragStart:dt,children:Object(p.jsx)(V,{droppableId:"timeline",bg:"white",width:"100%",children:Ct.map((function(e,t){var n,i,o=rt===e.id;if(e.id===j.DND_FIX_ELEMENT_ID)return Object(p.jsx)(H,{draggableId:e.id,id:e.id,index:t,isDragDisabled:!0,linkTo:e.linkTo.map((function(t){var n,i;return{source:null===(n=$e.current)||void 0===n?void 0:n[e.id],target:null===(i=$e.current)||void 0===i?void 0:i[t.target]}})),width:"100%",children:Object(p.jsx)(j.Box,{ref:function(t){return $e.current[e.id]=t},children:Object(p.jsx)(Y,{isAddJobLoading:fe,isLoading:Qe,formattedJobsAndUserJobsSuggestions:tt,onAddJob:Ot})})});if(e.id===j.ADD_BUTTON_ID)return Object(p.jsx)(G,{draggableId:e.id,index:t,isDragDisabled:!0,width:"100%",children:Object(p.jsx)(j.Box,{display:"flex",justifyContent:"center",ref:function(t){return $e.current[e.id]=t},children:Object(p.jsx)(j.AddButton,{addButtonActions:e.options,mr:0})})});var a=t+1===st.length?50:100;if(e.type===J.Job&&(e.position===B.Past||e.position===B.Future)){var s=e.content.jobTrainings.filter((function(e){var t=nt.get(e.id);return"undefined"===typeof t||t.status!==u.PinTrainingStatus.Validated})).filter((function(e){return!ut.has(e.id)}));e.content.jobTrainings=s}var c,d=e.type===J.Job&&e.position===B.Future&&!o&&((null===(n=e.content)||void 0===n?void 0:n.jobTrainings)||[]).length>0;return Object(p.jsx)(H,{addButtonActions:e.options,draggableId:e.id,id:e.id,index:t,isDragDisabled:e.position===B.Current,isEdgesHidden:o||e.linkTo.some((function(e){return e.target===rt}))||e.position===B.Past&&!A,linkTo:e.linkTo.map((function(t){var n,i;return{source:null===(n=$e.current)||void 0===n?void 0:n[e.id],target:null===(i=$e.current)||void 0===i?void 0:i[t.target]}})),width:"100%",children:Object(p.jsxs)(j.Box,{mb:a,ref:function(t){return $e.current[e.id]=t},children:[(e.position===B.Past||e.position===B.Future)&&Object(p.jsxs)(p.Fragment,{children:[e.type===J.Job&&Object(p.jsx)(te,{actions:e.actions,comment:e.comment,isAddTrainingLoading:Fe,isTrainingAssistantBlockDisplay:d,jobDetails:e.content,onAddTraining:ht(t),onTrainingClick:vt,onUpdateComment:(c=e.id,function(e){var t=e.comment,n=st.map((function(e){return e.id!==c?e:Object(r.a)(Object(r.a)({},e),{},{comment:{content:t,commentedAt:Object(g.localeMoment)().hour(12).toISOString(),commentedBy:h.id},content:Object(r.a)({},e.content)})}));lt(n)})}),e.type===J.Training&&Object(p.jsx)(be,{actions:e.actions,isAddTrainingLoading:ue,onRequestTraining:xt,onTrainingClick:vt,pinTrainingStatus:null===(i=nt.get(e.content.id))||void 0===i?void 0:i.status,trainingDetails:e.content,width:"fit-content"}),e.type===J.Custom&&Object(p.jsx)(M,{actions:e.actions,customDetails:e.content,width:"fit-content"}),e.type===J.GeoMobility&&Object(p.jsx)(U,{actions:e.actions,geolocation:e.content,width:"fit-content"})]}),e.position===B.Current&&e.type===J.Job&&Object(p.jsx)(w,{isButtonLoading:se,isDraggable:!1,isLoading:De||ne,jobs:e.content,onPinJob:bt})]})},e.id)}))})})]}),Object(p.jsx)(d.StandardModal,{isOpened:L,onClose:ft,title:e("add_a_something",{object:e("a_job",1)}),width:"fit-content",children:Object(p.jsx)(b.JobsNavigator,{buttonLabel:e("add"),isJobWithChildrenSelectionBlocked:!0,isJobWithChildrenAndNoSkillsSelectionBlocked:!0,onSubmit:function(e){ge({variables:{id:e[0].id}})}})}),Object(p.jsx)(d.StandardModal,{isOpened:F,onClose:pt,title:e("add_a_something",{object:e("a_training",1)}),width:"fit-content",children:Object(p.jsx)(b.TrainingsNavigator,{buttonLabel:e("add"),isTrainingWithChildrenSelectionBlocked:!0,onSubmit:function(e){Pe({variables:{id:e[0].id}})}})}),Object(p.jsx)(d.StandardModal,{isOpened:P,onClose:function(){q({type:"setIsTrainingDetailsModalOpened",isTrainingDetailsModalOpened:!1})},title:null===W||void 0===W?void 0:W.name,children:Object(p.jsx)(O.a,{trainingId:null===W||void 0===W?void 0:W.id})}),Object(p.jsx)(d.StandardModal,{isDisabledSubmit:"undefined"===typeof E||0===E.trim().length,isOpened:C,onCancel:yt,onClose:yt,onConfirm:function(){"string"===typeof E&&(mt({content:{title:E},type:J.Custom}),yt())},title:e("add_a_something",{object:e("a_free_text",1)}),children:Object(p.jsx)(j.Input,{isAutoFocus:!0,onChange:function(e){q({type:"setCustomElementText",customElementText:e})},ref:et,value:E,width:"100%"})}),Object(p.jsxs)(d.StandardModal,{isDisabledSubmit:"undefined"===typeof _,isOpened:D,onCancel:Tt,onClose:Tt,onConfirm:function(){"undefined"!==typeof _&&(mt({content:_,type:J.GeoMobility}),Tt())},title:e("add_a_something",{object:e("a_geographic_mobility",1)}),children:[Object(p.jsx)(b.SearchLocation,{onUpdateLocation:function(e){q({type:"setLocation",location:e})},initialValue:null===R||void 0===R?void 0:R.label,width:"100%"}),Object(p.jsxs)(j.Line,{mt:2,children:[Object(p.jsx)(j.Text,{as:"label",mr:1,children:e("radius")}),Object(p.jsxs)(j.Line,{as:"span",children:[Object(p.jsx)(j.Input,{type:"number",extent:"small",width:80,value:z,onChange:function(e){q({type:"setRadius",radius:Number(e)})}}),Object(p.jsx)(j.Text,{as:"label",ml:1,children:"km"})]})]})]}),Object(p.jsx)(d.StandardModal,{isOpened:k,onCancel:gt,onClose:gt,onConfirm:function(){if("number"===typeof I){var e=Array.from(st);e.splice(I,1),at(e),1===e.length&&Ze({variables:{input:Ie({elements:e,userId:h.id})}}),gt()}},showCloseButton:!1,children:Object(p.jsx)(j.Line,{width:"100%",pt:1,px:1,children:Object(p.jsx)(j.Text,{fontWeight:"semiBold",children:e("career_path_element_deletion_confirmation")})})}),Object(p.jsx)(f.a,{isOpened:N,isLoading:ue,trainingTag:T,onSubmit:function(e){le({variables:{input:{userId:e.userId,trainingId:"NO_REF"===e.trainingId?void 0:e.trainingId,trainingName:e.trainingName,status:e.status,budgetYear:e.budgetYear,comment:e.comment,deadline:e.deadline,startDate:e.startDate,endDate:e.endDate,customFields:e.customFields}},onCompleted:function(){q({type:"setIsTrainingRequestFormOpened",isTrainingRequestFormOpened:!1})},onError:function(e){t.error(i(e)),console.error("Training application failed !!!",e)}})},onClose:function(){q({type:"setIsTrainingRequestFormOpened",isTrainingRequestFormOpened:!1})}})]})}},745:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i,o=n(0),a=["title","titleId"];function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function c(e,t){var n=e.title,c=e.titleId,d=s(e,a);return o.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 1000",ref:t,"aria-labelledby":c},d),n?o.createElement("title",{id:c},n):null,">",i||(i=o.createElement("path",{d:"M131.547 53.563c-40.01 0-72.22 32.21-72.22 72.221v748.43c0 40.01 32.21 72.222 72.22 72.222h736.906c40.01 0 72.22-32.211 72.22-72.222v-748.43c0-40.01-32.21-72.22-72.22-72.22H131.547zM500 182.648a179.773 179.773 0 01179.773 179.774A179.773 179.773 0 01500 542.194a179.773 179.773 0 01-179.773-179.773A179.773 179.773 0 01500 182.647zM250.527 638.692a40 40 0 0140 40 40 40 0 01-40 40 40 40 0 01-40-40 40 40 0 0140-40zm105.809 0h392.566a40.004 40.004 0 110 80H356.336a40.004 40.004 0 110-80zM250.527 758.54a40 40 0 0140 40 40 40 0 01-40 40 40 40 0 01-40-40 40 40 0 0140-40zm105.809 0H502.08a40.004 40.004 0 110 80H356.336a40.004 40.004 0 110-80z"})))}var d=o.forwardRef(c);n.p},747:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a}));new Map([["theme","theme_not_interesting"],["skills","skills_not_interesting"],["over_qualified","over_qualified"],["under_qualified","under_qualified"]]);var i=n(32),o=new Map([[i.PinTrainingStatus.Suggested,"training_status_suggested"],[i.PinTrainingStatus.Approved,"training_status_approved"],[i.PinTrainingStatus.Accepted,"training_status_accepted"],[i.PinTrainingStatus.Pending,"training_status_pending"],[i.PinTrainingStatus.Validated,"training_status_validated"],[i.PinTrainingStatus.Refused,"training_status_refused"],[i.PinTrainingStatus.Noshow,"training_status_noshow"],[i.PinTrainingStatus.Canceled,"training_status_canceled"]]),a=(new Map([[i.PinTrainingStatus.Suggested,"grey.1"],[i.PinTrainingStatus.Approved,"secondary.0"],[i.PinTrainingStatus.Accepted,"secondary.0"],[i.PinTrainingStatus.Pending,"secondary.0"],[i.PinTrainingStatus.Validated,"success.0"],[i.PinTrainingStatus.Refused,"error.0"],[i.PinTrainingStatus.Noshow,"error.0"],[i.PinTrainingStatus.Canceled,"error.0"]]),new Map([[i.PinTrainingStatus.Suggested,{labelKey:"training_status_suggested",color:"grey.1"}],[i.PinTrainingStatus.Approved,{labelKey:"training_status_approved",color:"secondary.0"}],[i.PinTrainingStatus.Accepted,{labelKey:"training_status_accepted",color:"secondary.0"}],[i.PinTrainingStatus.Pending,{labelKey:"training_status_pending",color:"secondary.0"}],[i.PinTrainingStatus.Validated,{labelKey:"training_status_validated",color:"success.0"}],[i.PinTrainingStatus.Refused,{labelKey:"training_status_refused",color:"error.0"}],[i.PinTrainingStatus.Noshow,{labelKey:"training_status_noshow",color:"error.0"}],[i.PinTrainingStatus.Canceled,{labelKey:"training_status_canceled",color:"error.0"}]]))},759:function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return O}));var i=n(17),o=n(285),a=n(0),r=n.n(a),s=n(189),c=n(61),d=n(14),l=n(63),u=n(3),b=n(1),j=["users","isLink","maxDisplayCount","totalCount","mainTooltipPosition","offLimitTooltipPosition","size","isLoading","isOverLapped","urlNewTabOnPlusClick","onClick"],m=Object(c.default)(d.Box)((function(e){var t=e.onClick;return{background:e.theme.colors.grey[0],width:"35px",height:"35px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"50px",cursor:"default",":hover":{cursor:t?"pointer":"default"}}})),g=Object(c.default)(d.Box)((function(e){return{background:e.theme.colors.grey[0],width:"35px",height:"35px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"50px",cursor:"default",textDecoration:"none",":hover":{cursor:"pointer"}}})),f={y:-5,scale:1.15},O=r.a.forwardRef((function(e,t){var n=e.users,a=e.isLink,r=void 0!==a&&a,c=e.maxDisplayCount,O=void 0===c?7:c,p=e.totalCount,h=e.mainTooltipPosition,v=void 0===h?"bottom":h,x=e.offLimitTooltipPosition,y=void 0===x?"bottom":x,T=e.size,E=void 0===T?"small":T,_=e.isLoading,I=void 0!==_&&_,S=e.isOverLapped,C=void 0!==S&&S,w=e.urlNewTabOnPlusClick,k=e.onClick,M=Object(o.a)(e,j),D=Object(d.useTranslate)(),L="number"===typeof p?p:n.length,A=Math.min(n.length,O),P=n.length>A?Math.min(n.length-A,4):0,F=L-(A+P);return I?Object(b.jsx)(d.Loader,{}):0===n.length?null:Object(b.jsx)(d.Box,{ref:t,children:Object(b.jsxs)(d.Line,Object(i.a)(Object(i.a)({width:"100%"},M),{},{children:[n.slice(0,O).map((function(e){return Object(b.jsx)(d.Tooltip,{position:v,title:e.displayName,children:Object(b.jsx)(l.UserAvatar,{mr:C?-1:void 0,whileHover:C?f:void 0,user:e,size:E,linkTo:r?u.b.USER_PROFILE_DETAILS.getRoute({userId:e.id}):void 0,target:"_blank"})},e.displayName)})),(P>0||F>0)&&Object(b.jsx)(d.Tooltip,{position:y,title:Object(b.jsxs)(d.Column,{justifyContent:"flex-start",children:[P>0&&n.slice(A,A+P).map((function(e){var t=e.id,n=e.displayName;return Object(b.jsx)(d.Line,{display:"flex",justifyContent:"flex-start",width:"100%",children:Object(b.jsx)(d.Text,{mb:0,color:"white",fontSize:"small",children:n})},t)})),F>0&&Object(b.jsx)(d.Line,{display:"flex",justifyContent:"flex-start",width:"100%",children:Object(b.jsx)(d.Text,{color:"white",fontSize:"small",children:"+ ".concat(D("num_other",F))})})]}),children:w?Object(b.jsx)(g,{as:"a",href:w,onClick:k,target:"_blank",children:Object(b.jsx)(d.Text,{fontWeight:"bold",fontSize:12,children:"+".concat(P+F)})}):Object(b.jsx)(m,{as:s.motion.span,whileHover:f,onClick:k,children:Object(b.jsx)(d.Text,{fontWeight:"bold",fontSize:12,children:"+".concat(P+F)})})})]}))})}))},760:function(e,t,n){"use strict";n.d(t,"a",(function(){return o.a})),n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return E})),n.d(t,"d",(function(){return w}));var i,o=n(759),a=n(17),r=n(285),s=n(0),c=n(14),d=n(63),l=n(23),u=n(1),b=["avatarRightMargin","avatarSize","fontSize","fontWeight","user"],j=function(e){var t=e.avatarRightMargin,n=void 0===t?2:t,i=e.avatarSize,o=void 0===i?"medium":i,s=e.fontSize,j=void 0===s?"medium":s,m=e.fontWeight,g=void 0===m?"semiBold":m,f=e.user,O=Object(r.a)(e,b);return Object(u.jsxs)(c.Line,Object(a.a)(Object(a.a)({width:"100%"},O),{},{children:[Object(u.jsx)(d.UserAvatar,{user:f,size:o,mr:n,ml:1}),Object(u.jsx)(c.TextWithAutoTooltipOnEllipsis,{fontWeight:g,fontSize:j,p:0,tooltipTitle:Object(l.maj)(f.displayName),children:Object(l.maj)(f.displayName)})]}))},m=n(139),g=n.n(m),f=n(286),O=n(61),p=["title","titleId"];function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function v(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function x(e,t){var n=e.title,o=e.titleId,a=v(e,p);return s.createElement("svg",h({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",ref:t,"aria-labelledby":o},a),n?s.createElement("title",{id:o},n):null,i||(i=s.createElement("path",{d:"M5 4h-3v-1h3v1zm12 9c0 2.206-1.794 4-4 4s-4-1.794-4-4 1.794-4 4-4 4 1.794 4 4zm-1 0c0-1.657-1.342-3-3-3s-3 1.343-3 3 1.342 3 3 3 3-1.343 3-3zm8-8v17h-24v-17h5.93c.669 0 1.293-.334 1.664-.891l1.406-2.109h8l1.406 2.109c.371.557.995.891 1.664.891h3.93zm-19 4c0-.552-.447-1-1-1s-1 .448-1 1 .447 1 1 1 1-.448 1-1zm14 4c0-3.314-2.687-6-6-6s-6 2.686-6 6 2.687 6 6 6 6-2.686 6-6z"})))}var y=s.forwardRef(x),T=(n.p,["linkTo","target","user","readOnly","onChangeAvatar"]),E=120,_=Object(O.default)(c.Box)((function(){return{width:E,height:E,display:"flex",alignItems:"center",justifyContent:"center",position:"relative"}})),I=Object(O.default)("input")((function(){return{width:1,height:1,position:"absolute"}})),S=Object(O.default)(c.Box)((function(e){var t=e.theme;return{position:"absolute",width:E,height:E,borderRadius:E,background:"none",display:"flex",alignItems:"center",justifyContent:"center",svg:{display:"none"},":hover":{background:t.colors.black[1],svg:{display:"block"}}}})),C=Object(O.default)(c.Icon)((function(){return{pointerEvents:"none"}})),w=function(e){var t=e.linkTo,n=e.target,i=e.user,o=e.readOnly,l=e.onChangeAvatar,b=Object(r.a)(e,T),j=Object(c.useTranslate)({capitalize:!0}),m=Object(s.useRef)(null),O=function(){var e=Object(f.a)(g.a.mark((function e(t){var n,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"undefined"!==typeof(i=null===(n=t.target.files)||void 0===n?void 0:n[0])&&l&&l(i);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)(_,Object(a.a)(Object(a.a)({},b),{},{children:[!o&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(I,{type:"file",ref:m,onChange:O}),Object(u.jsx)(c.Tooltip,{title:j("update_photo"),position:"bottom",children:Object(u.jsx)(S,{onClick:function(){m.current&&m.current.click()},children:Object(u.jsx)(C,{as:y,color:"white",size:60})})})]}),Object(u.jsx)(d.UserAvatar,{linkTo:t,target:n,user:i,size:"huge",margin:15})]}))}},764:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i,o=n(0),a=["title","titleId"];function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function c(e,t){var n=e.title,c=e.titleId,d=s(e,a);return o.createElement("svg",r({id:"Icon",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 24 24",style:{enableBackground:"new 0 0 24 24"},xmlSpace:"preserve",ref:t,"aria-labelledby":c},d),n?o.createElement("title",{id:c},n):null,i||(i=o.createElement("path",{d:"M20.5,10H14V3.5C14,3.2,13.8,3,13.5,3h-3C10.2,3,10,3.2,10,3.5V10H3.5C3.2,10,3,10.2,3,10.5v3C3,13.8,3.2,14,3.5,14H10v6.5 c0,0.3,0.2,0.5,0.5,0.5h3c0.3,0,0.5-0.2,0.5-0.5V14h6.5c0.3,0,0.5-0.2,0.5-0.5v-3C21,10.2,20.8,10,20.5,10z"})))}var d=o.forwardRef(c);n.p},766:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return u.a}));var i=n(17),o=n(285),a=(n(0),n(14)),r=n(63),s=n(1),c=["customFields","customFieldsConfiguration","shouldHideUndefined"],d=function(e,t){return!(t in e)||void 0==e[t]||"string"===typeof e[t]&&0===e[t].length},l=function(e){var t=e.customFields,n=e.customFieldsConfiguration,l=e.shouldHideUndefined,u=void 0!==l&&l,b=Object(o.a)(e,c);return Object(s.jsx)(s.Fragment,{children:(null===n||void 0===n?void 0:n.length)>0&&t&&Object(s.jsx)(a.Box,Object(i.a)(Object(i.a)({},b),{},{children:n.map((function(e){return!0===u&&d(t,e._key)?null:Object(s.jsx)(r.CustomField,{mb:2,value:t[e._key],field:e,readOnly:!0,withLabel:!0},e._key)}))}))})},u=n(800)},788:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i,o,a,r=n(0),s=["title","titleId"];function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function d(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function l(e,t){var n=e.title,l=e.titleId,u=d(e,s);return r.createElement("svg",c({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",ref:t,"aria-labelledby":l},u),n?r.createElement("title",{id:l},n):null,i||(i=r.createElement("g",{transform:"translate(25 50)"},r.createElement("circle",{cx:0,cy:0,r:10,transform:"scale(0.429509 0.429509)"},r.createElement("animateTransform",{attributeName:"transform",type:"scale",begin:"-0.3333333333333333s",calcMode:"spline",keySplines:"0.3 0 0.7 1;0.3 0 0.7 1",values:"0;1;0",keyTimes:"0;0.5;1",dur:"1s",repeatCount:"indefinite"})))),o||(o=r.createElement("g",{transform:"translate(50 50)"},r.createElement("circle",{cx:0,cy:0,r:10,transform:"scale(0.0432413 0.0432413)"},r.createElement("animateTransform",{attributeName:"transform",type:"scale",begin:"-0.16666666666666666s",calcMode:"spline",keySplines:"0.3 0 0.7 1;0.3 0 0.7 1",values:"0;1;0",keyTimes:"0;0.5;1",dur:"1s",repeatCount:"indefinite"})))),a||(a=r.createElement("g",{transform:"translate(75 50)"},r.createElement("circle",{cx:0,cy:0,r:10,transform:"scale(0.129851 0.129851)"},r.createElement("animateTransform",{attributeName:"transform",type:"scale",begin:"0s",calcMode:"spline",keySplines:"0.3 0 0.7 1;0.3 0 0.7 1",values:"0;1;0",keyTimes:"0;0.5;1",dur:"1s",repeatCount:"indefinite"})))))}var u=r.forwardRef(l);n.p},789:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return d}));var i=n(19),o=n(37),a=n(747),r=function(e){var t=e.selectedIds,n=e.pinnedTrainings;if("undefined"!==typeof t){var i={},o=[];return t.forEach((function(e){var t=n.find((function(t){return t.id===e}));"undefined"!==typeof t&&o.push(t.capabilities.allowedStatuses)})),Array.from(new Set(o.flatMap((function(e){return e})))).filter((function(e){return o.every((function(t){return t.includes(e)}))})).forEach((function(e){i[e]=a.b.get(e)})),i}return{}},s="1870-01-00T12:00:00.000Z",c=function(e){if(e)return e.map((function(e){return{id:e.id,status:e.status,updatedAt:Object(i.maybeToOptional)(e.updatedAt),updatedBy:e.updatedBy?Object(i.getFormatedUserBasicFragment)(e.updatedBy):void 0}})).sort((function(e,t){var n=e.updatedAt||s,i=t.updatedAt||s;return Object(o.localeMoment)(n).isBefore(Object(o.localeMoment)(i))?1:Object(o.localeMoment)(i).isBefore(Object(o.localeMoment)(n))?-1:0}))},d=function(e){return{must:(e.must||[]).map((function(e){return{skill:Object(i.getFormatedSkillBasicFragment)(e.skill),qualifiers:(e.qualifiers||[]).map((function(e){return{qualifier:Object(i.getFormatedQualifierBasicFragment)(e.qualifier),value:e.value}}))}})),should:(e.should||[]).map((function(e){return{skill:Object(i.getFormatedSkillBasicFragment)(e.skill),qualifiers:(e.qualifiers||[]).map((function(e){return{qualifier:Object(i.getFormatedQualifierBasicFragment)(e.qualifier),value:e.value}}))}}))}}},800:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(187),o=n(17),a=n(285),r=(n(0),n(14)),s=n(63),c=n(1),d=["customFieldsConfiguration","value","onChange"],l=function(e){var t=e.customFieldsConfiguration,n=e.value,l=e.onChange,u=Object(a.a)(e,d);return Object(c.jsx)(r.Box,Object(o.a)(Object(o.a)({},u),{},{children:t.map((function(e){return Object(c.jsx)(s.CustomField,{field:e,value:null===n||void 0===n?void 0:n[e._key],onSubmit:(t=e._key,function(e){l(Object(o.a)(Object(o.a)({},n||{}),{},Object(i.a)({},t,e)))}),withLabel:!0,mb:1,width:u.width},e._key);var t}))}))}},843:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n(0),o=n(14),a=n(63),r=n(32),s=n(23),c=n(37),d=n(760),l=n(747),u=n(1),b=function(e){var t=e.pinnedTrainings,n=Object(o.useTranslate)(),b=Object(i.useMemo)((function(){return"undefined"!==typeof t?t.length>0&&t.length<=5?{displayedPins:t,otherPins:void 0}:{displayedPins:t.slice(0,5),otherPins:t.length-5}:{displayedPins:void 0,otherPins:void 0}}),[t]),j=b.displayedPins,m=b.otherPins;return"undefined"!==typeof j&&j.length>0?Object(u.jsxs)(o.Box,{bg:"alert.0",p:2,width:"100%",children:[Object(u.jsxs)(o.Line,{children:[Object(u.jsx)(a.ReasonCounter,{type:r.ReasonCounterTypeEnum.PARTIAL,mr:1}),Object(u.jsx)(o.Text,{fontSize:"small",fontWeight:"bold",children:Object(s.maj)(n("training_already_assigned_to_this_collaborator"))})]}),Object(u.jsxs)(o.Box,{pb:1,pl:3,ml:12,width:"100%",children:[j.map((function(e,t){return Object(u.jsxs)(o.Line,{display:"flex",flexWrap:"wrap",pt:1,children:[Object(u.jsx)(o.Text,{fontSize:"small",children:Object(s.maj)(n(l.b.get(e.status)))}),"undefined"!==typeof e.updatedAt&&Object(u.jsx)(o.Text,{fontSize:"small",ml:0,children:"- ".concat(Object(c.localeMoment)(e.updatedAt).format("DD MMMM YYYY"))}),"undefined"!==typeof e.updatedBy&&Object(u.jsxs)(o.Line,{ml:0,children:[Object(u.jsx)(o.Text,{fontSize:"small",children:"- ".concat(n("updated_by"))}),Object(u.jsx)(d.b,{avatarRightMargin:0,avatarSize:"small",fontSize:"small",user:e.updatedBy,width:"fit-content"})]})]},"".concat(e.id,"_").concat(t))})),"number"===typeof m&&Object(u.jsx)(o.Text,{fontSize:"small",pt:1,children:"+ ".concat(n("num_other",m))})]})]}):null}},895:function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var i=n(188),o=n(53),a=n(0),r=n(61),s=n(14),c=n(19),d=n(10),l=n(766),u=n(760),b=n(189),j=n(63),m=n(1),g=Object(r.default)(s.Text)((function(){return{padding:0,textDecoration:"underline",":hover":{background:"none"}}})),f=function(e){var t=e.skills,n=Object(s.useTranslate)({capitalize:!0}),i=Object(a.useState)(!1),r=Object(o.a)(i,2),c=r[0],d=r[1],l=Object(a.useState)(0),u=Object(o.a)(l,2),f=u[0],O=u[1],p=Object(a.useRef)(null);Object(a.useEffect)((function(){p.current&&O(p.current.offsetHeight)}),[p]);return Object(m.jsxs)(s.Box,{children:[Object(m.jsx)(s.Box,{as:b.motion.div,overflow:"hidden",variants:{open:{maxHeight:f},close:{maxHeight:110,overflow:"hidden"}},animate:c?"open":"close",children:Object(m.jsx)(s.Box,{ref:p,display:"flex",flexWrap:"wrap",mt:2,children:t.map((function(e){return Object(m.jsx)(j.PowerBrick,{mr:2,mb:2,power:e,width:"45%"},e.skill.id)}))})}),f>110&&Object(m.jsx)(g,{fontWeight:"semiBold",mt:1,onClick:function(){d(!c)},children:n(c?"show_less":"show_more")})]})},O=n(789),p=n(17),h=n(285),v=["title"],x=function(e){var t=e.title,n=Object(h.a)(e,v);return Object(m.jsx)(s.Column,Object(p.a)(Object(p.a)({width:"100%",display:"flex",alignItems:"center"},n),{},{children:Object(m.jsx)(d.NoDataToDisplay,{fontSize:"small",iconMaxHeightAndWidth:150,isText:!1,textMarginTop:1,title:t,textAlign:"center",width:"50%"})}))},y=Object(r.default)(s.Line)((function(e){var t=e.imageUrl;return{backgroundImage:"url(".concat(t,")"),backgroundSize:"cover",backgroundPosition:"50% 50%"}})),T=function(e){var t=e.trainingId,n=Object(s.useTranslate)({capitalize:!0}),r=Object(s.useAlert)(),b=Object(d.useAppContext)(),j=b.customFields,g=b.getErrorMessage,p=Object(c.useGetTrainingDetailsLazyQuery)({variables:{id:t},fetchPolicy:"cache-first",nextFetchPolicy:"cache-only",onError:function(e){return r.error(g(e))}}),h=Object(o.a)(p,2),v=h[0],T=h[1].data;Object(a.useEffect)((function(){"undefined"!==typeof t&&v()}),[t]);var E=Object(a.useMemo)((function(){var e=null===T||void 0===T?void 0:T.training;if(e){var t,n=Object(O.c)(e.pattern||{must:[],should:[]});return{id:e.id,name:e.name,imageUrl:Object(c.maybeToOptional)(null===(t=e.image)||void 0===t?void 0:t.url),isPatternEmpty:e.isPatternEmpty,description:Object(c.maybeToOptional)(e.description),pattern:n,userSuggestion:{comment:Object(c.maybeToOptional)(e.userSuggestion.comment),isNotRelevant:e.userSuggestion.isNotRelevant,isRelevant:e.userSuggestion.isRelevant,score:Object(c.maybeToOptional)(e.userSuggestion.score),status:e.userSuggestion.status,updatedAt:e.userSuggestion.updatedAt},customFields:e.customFields||{},pinnedUsers:(e.pinnedUsers.nodes||[]).map((function(e){return Object(c.getFormatedUserBasicFragment)(e)})),parents:(e.parents.nodes||[]).map((function(e){return{id:e.id,name:e.name}})),subTrainingsCount:e.subTrainings.totalCount,subTrainings:(e.subTrainings.nodes||[]).map((function(e){return{id:e.id,name:e.name,subTrainingsCount:e.subTrainings.totalCount,userSuggestion:{comment:Object(c.maybeToOptional)(e.userSuggestion.comment),isNotRelevant:e.userSuggestion.isNotRelevant,isRelevant:e.userSuggestion.isRelevant,score:Object(c.maybeToOptional)(e.userSuggestion.score),status:e.userSuggestion.status,updatedAt:e.userSuggestion.updatedAt}}})),allSubTrainings:(e.allSubTrainings.nodes||[]).map((function(e){return{id:e.id,name:e.name,description:Object(c.maybeToOptional)(e.description),isPatternEmpty:e.isPatternEmpty,matchingScore:Object(c.maybeToOptional)(e.matching.score)||0,subTrainingsCount:e.subTrainings.totalCount,userSuggestion:{comment:Object(c.maybeToOptional)(e.userSuggestion.comment),isNotRelevant:e.userSuggestion.isNotRelevant,isRelevant:e.userSuggestion.isRelevant,score:Object(c.maybeToOptional)(e.userSuggestion.score),status:e.userSuggestion.status,updatedAt:e.userSuggestion.updatedAt},pattern:{must:Object(O.c)(e.pattern).must,should:Object(O.c)(e.pattern).should}}})),skills:[].concat(Object(i.a)(n.should),Object(i.a)(n.must)).map((function(e){return{skill:(null===e||void 0===e?void 0:e.skill)||null,qualifiers:{edges:e.qualifiers.map((function(e){return{node:e.qualifier,value:e.value}}))}}}))}}}),[T]),_=Object(a.useMemo)((function(){return"undefined"!==typeof(null===E||void 0===E?void 0:E.description)&&E.description.trim().length>0}),[E]),I=Object(a.useMemo)((function(){return"undefined"===typeof(null===E||void 0===E?void 0:E.customFields)||j.trainingFields.some((function(e){return!Object(l.c)(E.customFields,e._key)}))}),[E]);return Object(a.useMemo)((function(){return"undefined"!==typeof E&&"undefined"===typeof E.imageUrl&&!_&&!I&&0===E.skills.length&&0===E.pinnedUsers.length}),[E,_,I])?Object(m.jsx)(x,{title:n("no_details")}):"undefined"!==typeof E?Object(m.jsxs)(s.Column,{alignItems:"flex-start",width:"100%",overflowY:"auto",children:["undefined"!==typeof E.imageUrl&&Object(m.jsx)(y,{imageUrl:E.imageUrl,height:220,mb:0,width:"100%"}),Object(m.jsxs)(s.Box,{children:[_&&Object(m.jsx)(s.Box,{mb:3,children:Object(m.jsx)(s.StringParser,{children:E.description})}),I&&Object(m.jsx)(l.b,{mb:3,customFields:E.customFields,customFieldsConfiguration:j.trainingFields,shouldHideUndefined:!0}),E.skills.length>0&&Object(m.jsxs)(s.Box,{mb:3,children:[Object(m.jsx)(s.Text,{fontSize:"large",fontWeight:"semiBold",children:n("targeted_skills")}),Object(m.jsx)(f,{skills:E.skills})]}),E.pinnedUsers.length>0&&Object(m.jsx)(s.Label,{width:"100%",fontWeight:"bold",mb:3,content:n("they_followed_the_training"),children:Object(m.jsx)(u.a,{users:E.pinnedUsers})})]})]}):Object(m.jsxs)(s.Column,{alignItems:"flex-start",width:"100%",children:[Object(m.jsx)(s.Box,{mb:2,width:"100%",children:Object(m.jsx)(s.LoaderSkeleton.Line,{width:"100%",pb:1})}),Object(m.jsx)(s.Box,{mb:2,width:"100%",children:Object(m.jsx)(s.LoaderSkeleton.Line,{width:"80%",pb:1})}),Object(m.jsx)(s.Box,{width:"100%",children:Object(m.jsx)(s.LoaderSkeleton.Line,{width:"90%",pb:1})})]})}},902:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var i=n(223),o=n(53),a=n(285),r=n(187),s=n(188),c=n(17),d=n(0),l=n(15),u=n(61),b=n(65),j=n(14),m=n(10),g=n(19),f=n(37),O=n(63),p=n(32),h=n(747),v=n(843),x=n(789),y=n(1),T=["capabilities","initialValues","isOpened","isLoading","isModification","trainingTag","onSubmit","onClose"],E=Object(u.default)(j.TextArea)((function(){return{borderRadius:0}})),_={userId:"NONE",trainingPinId:"NONE",trainingName:"",freeRequestMode:!1,isAdvancedSettings:!1,status:p.PinTrainingStatus.Suggested,budgetYear:void 0,deadline:void 0,startDate:void 0,endDate:void 0,comment:void 0,customFields:void 0},I=function(e,t){var n;switch(t.type){case"init":return Object(c.a)(Object(c.a)({},e),{},{userId:t.userId,trainingPinId:t.trainingPinId,trainingName:t.trainingName,freeRequestMode:t.freeRequestMode,isAdvancedSettings:t.isAdvancedSettings,status:t.status,budgetYear:t.budgetYear,deadline:"undefined"!==typeof t.deadline?Object(f.localeMoment)(t.deadline).hour(12).toISOString():void 0,startDate:"undefined"!==typeof t.startDate?Object(f.localeMoment)(t.startDate).hour(12).toISOString():void 0,endDate:"undefined"!==typeof t.endDate?Object(f.localeMoment)(t.endDate).hour(12).toISOString():void 0,comment:t.comment,customFields:t.customFields});case"turnOnIsAdvancedSettings":return Object(c.a)(Object(c.a)({},e),{},{isAdvancedSettings:!0});case"setDate":return Object(c.a)(Object(c.a)({},e),{},{startDate:t.startDate,endDate:t.endDate});case"setCustomFields":var i=Object.keys(t.customField||[])[0],o=null===(n=e.customFields)||void 0===n?void 0:n.filter((function(e){return Object.keys(e||{})[0]!==i}));return Object(c.a)(Object(c.a)({},e),{},{customFields:[].concat(Object(s.a)(o||[]),[t.customField])});case"setState":return Object(c.a)(Object(c.a)({},e),{},Object(r.a)({},t.key,t.value));case"reset":return _}},S=function(e){var t=e.customFields,n=e.id;if(null===t||void 0===t?void 0:t.find((function(e){return Object.keys(e||{})[0]===n})))return Object.values(t.find((function(e){return Object.keys(e||{})[0]===n}))||[])[0]},C=function(e){var t=e.capabilities,n=e.initialValues,s=e.isOpened,u=e.isLoading,p=e.isModification,C=void 0!==p&&p,w=e.trainingTag,k=e.onSubmit,M=e.onClose,D=(Object(a.a)(e,T),Object(j.useTranslate)({capitalize:!0})),L=Object(b.h)(),A=Object(l.useParams)().userId,P=Object(d.useReducer)(I,_),F=Object(o.a)(P,2),N=F[0],B=N.userId,J=N.trainingPinId,R=N.trainingName,z=N.freeRequestMode,U=N.isAdvancedSettings,W=N.status,q=N.budgetYear,G=N.deadline,H=N.startDate,Y=N.endDate,V=N.comment,Q=N.customFields,X=F[1],K=Object(m.useAppContext)(),Z=K.customFields.pinnedTrainingFields,$=A||K.user.id,ee=Object(g.useGetPinnedTrainingsLazyQuery)({fetchPolicy:"cache-first",nextFetchPolicy:"cache-only"}),te=Object(o.a)(ee,2),ne=te[0],ie=te[1].data;Object(d.useEffect)((function(){"undefined"!==typeof B&&"NONE"!==B&&"undefined"!==typeof w&&"NO_REF"!==w.id&&"NONE"!==w.id&&ne({variables:{dataFilters:{user:{inUsers:[B]},training:{inValues:[w.id]}}}})}),[w,B]),Object(d.useEffect)((function(){var e="NO_REF"===w.id;if(C){var t=[];if(null===n||void 0===n?void 0:n.customFields)for(var i=0,a=Object.entries(n.customFields);i<a.length;i++){var s=Object(o.a)(a[i],2),d=s[0],l=s[1];t.push(Object(r.a)({},d,l))}X({type:"init",userId:null===n||void 0===n?void 0:n.userId,trainingPinId:null===n||void 0===n?void 0:n.trainingPinId,trainingName:(null===n||void 0===n?void 0:n.trainingName)||"",freeRequestMode:e,isAdvancedSettings:!0,status:(null===n||void 0===n?void 0:n.status)||_.status,budgetYear:null===n||void 0===n?void 0:n.budgetYear,deadline:null===n||void 0===n?void 0:n.deadline,startDate:null===n||void 0===n?void 0:n.startDate,endDate:null===n||void 0===n?void 0:n.endDate,comment:null===n||void 0===n?void 0:n.comment,customFields:t})}else X(Object(c.a)(Object(c.a)({type:"init"},_),{},{freeRequestMode:e,userId:$}))}),[n,!0===s]);var oe=function(e){return function(t){X("deadline"!==e?{type:"setState",key:e,value:t}:{type:"setState",key:e,value:Object(f.localeMoment)(t).toISOString()})}},ae=function(){X({type:"reset"}),M()},re=Object(d.useMemo)((function(){var e,n=[],o=Object(i.a)(h.b);try{var a=function(){var i=e.value;C?(W&&!((null===t||void 0===t?void 0:t.allowedStatuses)||[]).includes(W)&&i[0]===W&&n.push(i),((null===t||void 0===t?void 0:t.allowedStatuses)||[]).forEach((function(e){i[0]===e&&n.push(i)}))):n.push(i)};for(o.s();!(e=o.n()).done;)a()}catch(r){o.e(r)}finally{o.f()}return n}),[t]),se=Object(d.useMemo)((function(){return Object(x.b)(null===ie||void 0===ie?void 0:ie.pinnedTrainings.nodes)}),[ie]);return Object(y.jsx)(m.FormContainerModal,{title:D(C?"modify_training_application":"create_training_application"),confirmButtonLabel:D(C?"modify":"create"),maxHeight:"95vh",onClose:ae,onCancel:ae,onConfirm:function(){var e={};Q?Q.forEach((function(t){var n=Object(o.a)(Object.entries(t||[])[0],2),i=n[0],a=n[1];e=Object(c.a)(Object(c.a)({},e),{},Object(r.a)({},i,a))})):e=void 0,k({userId:B,trainingPinId:J,trainingId:w.id,trainingName:R,status:W,budgetYear:q,deadline:G?Object(f.localeMoment)(G).toISOString():void 0,startDate:H?Object(f.localeMoment)(H).toISOString():void 0,endDate:Y?Object(f.localeMoment)(Y).toISOString():void 0,comment:V,customFields:e})},isOpened:s,isLoading:u,width:596,children:Object(y.jsxs)(j.Column,{children:["undefined"!==typeof se&&se.length>0&&Object(y.jsx)(m.FormLine,{mt:0,children:Object(y.jsx)(v.a,{pinnedTrainings:se})}),Object(y.jsx)(m.FormLine,{children:Object(y.jsx)(m.FormLabel,{content:D("targeted_training"),children:z?Object(y.jsx)(j.Input,{type:"text",value:R,placeholder:D("training_request_name_placeholder"),onChange:C?void 0:oe("trainingName"),disabled:C,width:"100%"}):Object(y.jsx)(O.ObjectTag,Object(c.a)({},w))})}),Object(y.jsx)(m.FormLine,{children:Object(y.jsx)(m.FormLabel,{name:"status",content:D("status"),children:Object(y.jsx)(j.SelectField,{value:W,onChange:oe("status"),zIndex:L.zIndexes.MODAL_POPOVER,readOnly:1===re.length,placeholder:"",source:re.map((function(e){return{label:D(e[1]),value:e[0]}})),width:"100%"})})}),!C&&!U&&Object(y.jsx)(m.FormLine,{children:Object(y.jsx)(j.Box,{width:"fit-content",onClick:function(){X({type:"turnOnIsAdvancedSettings"})},children:Object(y.jsx)(j.Text,{fontWeight:"semiBold",color:L.colors.primary[3],children:"".concat(D("advanced_settings"),"...")})})}),(C||U)&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(m.FormLine,{children:Object(y.jsx)(m.FormLabel,{name:"budgetYear",content:D("budget_year"),mr:1,children:Object(y.jsx)(j.Input,{value:q,onChange:oe("budgetYear"),placeholder:D("add_a_value")})})}),Object(y.jsx)(m.FormLine,{children:Object(y.jsx)(j.PeriodPicker,{startDate:H,endDate:Y,onChange:function(e){var t=e.startDate,n=e.endDate;t===H&&n===Y||X({type:"setDate",startDate:t||void 0,endDate:n||void 0})},isOneDayMinimumGap:!1})}),Z.map((function(e){return Object(y.jsx)(m.FormLine,{children:Object(y.jsx)(O.CustomField,Object(c.a)({mr:1,field:e,withLabel:!0,value:S({customFields:Q,id:e._key}),onSubmit:function(t){return function(e){var t=Object(r.a)({},e.id,e.value);X({type:"setCustomFields",customField:t})}({id:e._key,value:t,comparator:"DATE"===e.field_type?"BETWEEN":"IN_VALUES",fieldType:e.field_type})}},e),e._key)},e._key)}))]}),Object(y.jsx)(m.FormLine,{children:Object(y.jsx)(m.FormLabel,{name:"comment",content:D("comment"),children:Object(y.jsx)(E,{value:V,onChange:oe("comment"),placeholder:D("add_comment")})})})]})})}}}]);