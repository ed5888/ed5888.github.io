(this["webpackJsonp@elamp/main-app"]=this["webpackJsonp@elamp/main-app"]||[]).push([[21,5,59],{1141:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return fi}));var i,r,a,s=n(0),o=n.n(s),c=n(15),l=n(19),u=n(14),d=n(774),b=n(770),j=n(63),f=n(10),p=n(121),O=n(3),m=n(743),h=n(146),v=n(802),x=n(933),g=n(1),y=function(){var e=Object(u.useSwitch)(!0),t=e.active,n=e.off,i=Object(c.useParams)(),r=i.userId,a=i.formId,s=Object(c.useHistory)(),o=function(){n(),s.push(O.b.USER_PROFILE_ASSESSMENTS.getRoute({userId:r}),{openCreateModal:!0})};return Object(g.jsxs)(h.a,{children:[Object(g.jsx)(c.Route,{exact:!0,path:O.b.USER_PROFILE_ASSESSMENT_CREATION_STEPS.path,render:function(){return Object(g.jsx)(x.a,{isOpened:t,onClose:o,userId:r,assessmentFormId:a})}}),Object(g.jsx)(c.Route,{path:O.b.USER_PROFILE_ASSESSMENT_CREATION.path,render:function(){return Object(g.jsx)(c.Redirect,{to:O.b.USER_PROFILE_ASSESSMENT_CREATION_STEPS.getRoute({userId:r,formId:a,step:x.b[0]})})}})]})},S=n(17),k=n(285),w=n(139),I=n.n(w),C=n(286),E=n(53),T=n(37),L=n(65),_=n(288),A=n(878),P=n(788),D=["title","titleId"];function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function R(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function B(e,t){var n=e.title,o=e.titleId,c=R(e,D);return s.createElement("svg",M({viewBox:"0 0 34 34",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":o},c),n?s.createElement("title",{id:o},n):null,i||(i=s.createElement("path",{d:"M0 2.43585C0.00398474 2.11201 0.0721063 1.79211 0.200518 1.49444C0.32893 1.19676 0.515114 0.927133 0.7484 0.700956C0.981686 0.474779 1.25752 0.296483 1.56016 0.176245C1.86279 0.0560059 2.1863 -0.00381966 2.5122 0.000188899H31.4878C31.8137 -0.00381966 32.1372 0.0560059 32.4398 0.176245C32.7425 0.296483 33.0183 0.474779 33.2516 0.700956C33.4849 0.927133 33.671 1.19676 33.7994 1.49444C33.9278 1.79211 33.996 2.11201 34 2.43585V31.5641C33.996 31.888 33.9278 32.2079 33.7994 32.5056C33.671 32.8032 33.4849 33.0729 33.2516 33.299C33.0183 33.5252 32.7425 33.7035 32.4398 33.8238C32.1372 33.944 31.8137 34.0038 31.4878 33.9998H2.5122C2.1863 34.0038 1.86279 33.944 1.56016 33.8238C1.25752 33.7035 0.981686 33.5252 0.7484 33.299C0.515114 33.0729 0.32893 32.8032 0.200518 32.5056C0.0721063 32.2079 0.00398474 31.888 0 31.5641V2.43585Z",fill:"#2962FF"})),r||(r=s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3053 28.4629V13.11H5.16961V28.4629H10.3053ZM7.73634 11.0145C8.10588 11.0457 8.47789 11.0003 8.82884 10.8812C9.17979 10.7621 9.50205 10.5718 9.77513 10.3225C10.0482 10.0731 10.2661 9.7701 10.4152 9.43265C10.5643 9.09521 10.6412 8.73069 10.6411 8.36217C10.6422 7.99623 10.567 7.63402 10.4203 7.29834C10.2737 6.96267 10.0587 6.66077 9.78897 6.41165C9.51922 6.16253 9.20056 5.97157 8.85293 5.85078C8.5053 5.73 8.13629 5.682 7.76909 5.70981C7.39962 5.67893 7.02769 5.72457 6.67689 5.84382C6.32608 5.96308 6.00401 6.15336 5.731 6.40264C5.458 6.65193 5.24 6.95479 5.09082 7.29208C4.94164 7.62937 4.86451 7.99374 4.86431 8.36217C4.862 8.72525 4.93504 9.0849 5.07887 9.41867C5.22271 9.75244 5.43426 10.0532 5.70029 10.3021C5.96632 10.551 6.28114 10.7427 6.62508 10.8653C6.96902 10.9879 7.33469 11.0387 7.69927 11.0145H7.73634Z",fill:"white"})),a||(a=s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.1484 28.4633H18.2841V19.8973C18.2639 19.4753 18.3208 19.0531 18.452 18.6513C18.6443 18.1085 19.0005 17.638 19.472 17.3041C19.9436 16.9701 20.5074 16.789 21.0864 16.7855C22.9444 16.7855 23.688 18.194 23.688 20.2527V28.4654H28.8237V19.6632C28.8237 14.9479 26.2896 12.7528 22.9117 12.7528C21.9701 12.7156 21.0365 12.9375 20.2138 13.394C19.391 13.8506 18.7112 14.524 18.2492 15.3402H18.2841V13.1125H13.1484C13.216 14.5535 13.1484 28.4654 13.1484 28.4654V28.4633Z",fill:"white"})))}var F,U,N,z,W,q,H,V,G,J,Q,Z,Y,K,X,$,ee,te=s.forwardRef(B),ne=(n.p,n(23)),ie=n(778),re=n(61),ae=["isCentered"],se=["isCentered","dontPropagate","onClick"],oe=Object(re.default)(u.Button)((function(e){var t=e.isCentered;Object(k.a)(e,ae);return{display:"-webkit-box",height:"fit-content",maxHeight:62,overflow:"hidden",textOverflow:"ellipsis",WebkitBoxOrient:"vertical",WebkitLineClamp:2,whiteSpace:"pre-line",width:"fit-content",maxWidth:"100%",textAlign:t?"center":"left"}})),ce=function(e){var t=e.isCentered,n=void 0===t||t,i=e.dontPropagate,r=e.onClick,a=Object(k.a)(e,se);return Object(g.jsx)(oe,Object(S.a)({isCentered:n,onClick:r,dontPropagate:i},a))},le=function(e){var t,n,i,r,a,s=e.locale,o=e.selectedElement,c=e.targetUserLocale,l="string"===typeof(null===(t=o.titleI18N)||void 0===t?void 0:t.default)&&o.titleI18N.default.trim().length>0&&0===((null===(n=o.titleI18N)||void 0===n?void 0:n[s])||"").trim().length,u="string"===typeof(null===(i=o.descriptionI18N)||void 0===i?void 0:i.default)&&o.descriptionI18N.default.trim().length>0&&0===((null===(r=o.descriptionI18N)||void 0===r?void 0:r[s])||"").trim().length;return("string"!==typeof c||c!==s)&&("string"===typeof(null===(a=o.titleI18N)||void 0===a?void 0:a.default)&&o.titleI18N.default.trim().length>0&&l&&u)},ue=n(187),de=n(164),be=["isError","label","name","required"],je=function(e){var t=e.isError,n=e.label,i=e.name,r=e.required,a=Object(k.a)(e,be);return Object(g.jsx)(u.Line,Object(S.a)(Object(S.a)({width:"100%"},a),{},{children:Object(g.jsx)(u.Label,{content:n,name:i,width:"100%",color:t?"red":void 0,required:r,children:a.children})}))},fe=["initialValue","isDisabled","isReadOnly","onSubmit"],pe=Array.from({length:12},(function(e,t){return{label:Object(ne.maj)(T.localeMoment.months(t)),value:t}})),Oe=Object(T.localeMoment)().year(),me=Array.from({length:50},(function(e,t){var n=Oe-t;return{label:n.toString(),value:n}})),he=function(e){var t=e.initialValue,n=e.isDisabled,i=e.isReadOnly,r=e.onSubmit,a=Object(k.a)(e,fe),o=Object(s.useState)(function(e){if("undefined"!==typeof e){var t,n,i=Object(T.localeMoment)(e);return{month:null===(t=pe.find((function(e){return e.value===i.month()})))||void 0===t?void 0:t.value,year:null===(n=me.find((function(e){return e.value===i.year()})))||void 0===n?void 0:n.value}}return{month:void 0,year:void 0}}(t)),c=Object(E.a)(o,2),l=c[0],d=c[1];Object(s.useEffect)((function(){var e=function(e){var t=Object(T.localeMoment)();if("undefined"!==typeof e.month&&"undefined"!==typeof e.year)return t.set("date",1),t.set("month",e.month),t.set("year",e.year),t.toISOString()}(l);"undefined"!==typeof e&&r(e)}),[l]);var b=Object(s.useMemo)((function(){var e,t;if("undefined"!==typeof l){var n,i;if("undefined"!==typeof l.month)e=null===(n=pe.find((function(e){return e.value===(null===l||void 0===l?void 0:l.month)})))||void 0===n?void 0:n.label,t=me[0].label;if("undefined"!==typeof l.year)t=null===(i=me.find((function(e){return e.value===(null===l||void 0===l?void 0:l.year)})))||void 0===i?void 0:i.label}return{month:e,year:t}}),[l]),j=b.month,f=b.year,p=function(e){return function(t){d(Object(S.a)(Object(S.a)({},l),{},Object(ue.a)({},e,t)))}};return Object(g.jsx)(u.Box,Object(S.a)(Object(S.a)({display:"flex",flexDirection:"row",width:"100%",justifyContent:"space-between"},a),{},{children:i?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(u.Input,{bg:"grey.1",value:j,readOnly:!0,flex:1,mr:0}),Object(g.jsx)(u.Input,{bg:"grey.1",value:f,readOnly:!0,flex:1,ml:0})]}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(u.SelectField,{value:l.month,onChange:p("month"),isDisabled:n,source:pe,width:"49%",mr:0}),Object(g.jsx)(u.SelectField,{value:l.year,onChange:p("year"),isDisabled:n,source:me,width:"49%",ml:0})]})}))},ve=["onSubmit","onDelete","onClose","tabsOptions","targetUserLocale","userExperience"],xe="grey.1",ge=Object(re.default)(u.Box)((function(e){var t=e.theme;return{backgroundColor:t.colors.error[1],marginBottom:t.space[1],padding:t.space[1],width:"100%","& > *":{fontSize:t.fontSizes.small,fontWeight:t.fontWeights.semiBold}}})),ye=function(e){var t,n,i,r,a=e.onSubmit,o=e.onDelete,l=e.onClose,d=e.tabsOptions,b=e.targetUserLocale,p=e.userExperience,O=Object(k.a)(e,ve),m=Object(s.useState)(!1),h=Object(E.a)(m,2),v=h[0],x=h[1],y=Object(s.useState)(!1),w=Object(E.a)(y,2),I=w[0],C=w[1],L=Object(s.useState)(function(e){return"undefined"!==typeof e?Object(S.a)(Object(S.a)({},e),{},{sharedForm:Object(S.a)(Object(S.a)({},e.sharedForm),{},{isCurrentJob:!0})}):{localisedForm:{},sharedForm:{isCurrentJob:!0}}}(p)),_=Object(E.a)(L,2),A=_[0],P=_[1],D=Object(u.useTranslate)({capitalize:!0}),M=Object(c.useParams)().locale,R="undefined"!==typeof p,B=A.sharedForm,F=Object(s.useMemo)((function(){var e,t="undefined"!==typeof B.startDate&&"undefined"!==typeof B.endDate&&Object(T.localeMoment)(B.endDate).isBefore(Object(T.localeMoment)(B.startDate));return{isDisabledSubmit:"undefined"!==typeof b&&0===((null===(e=A.localisedForm[b])||void 0===e?void 0:e.title)||"").trim().length||0===(B.company||"").trim().length||"undefined"===typeof B.startDate||!B.isCurrentJob&&"undefined"===typeof B.endDate||t,isInvalidDate:t}}),[A]),U=F.isDisabledSubmit,N=F.isInvalidDate,z=Object(s.useMemo)((function(){return M!==b}),[M,b]),W=function(e){return function(t){P("title"!==e&&"description"!==e||"string"!==typeof M?function(n){return Object(S.a)(Object(S.a)({},n),{},{sharedForm:Object(S.a)(Object(S.a)({},n.sharedForm),{},Object(ue.a)({},e,t))})}:function(n){return Object(S.a)(Object(S.a)({},n),{},{localisedForm:Object(S.a)(Object(S.a)({},n.localisedForm),{},Object(ue.a)({},M,Object(S.a)(Object(S.a)({},n.localisedForm[M]),{},Object(ue.a)({},e,t))))})})}},q=function(){P({localisedForm:{},sharedForm:{isCurrentJob:!1}})},H=function(){q(),l()};return"undefined"===typeof typeof M?null:Object(g.jsx)(f.StandardModal,Object(S.a)(Object(S.a)({title:D(R?"edit_an_object":"add_a_something",{object:D("a_experience",1).toLowerCase()}),width:650,p:20,customButtons:Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(u.Button,{appearance:"clean",accent:"grey",onClick:H,children:D("cancel")}),R&&Object(g.jsx)(u.Button,{appearance:"outline",accent:"grey",onClick:function(){C(!0),o().then((function(){return C(!1)})).catch((function(){return C(!1)}))},isLoading:I,disabled:v,children:D("delete_experience")}),Object(g.jsx)(u.Button,{appearance:"normal",onClick:function(){if(!U&&"undefined"!==typeof M&&"undefined"!==typeof b){x(!0);var e=A.sharedForm,t=e.company,n=e.endDate,i=e.location,r=e.startDate,s=A.localisedForm[b],o=s.description,c=s.title;if("string"===typeof t){var l={default:A.localisedForm[b].title},u={default:A.localisedForm[b].description};Object.entries(A.localisedForm).forEach((function(e){var t=Object(E.a)(e,2),n=t[0],i=t[1],r=i.title;b!==n&&A.localisedForm[n].title===A.localisedForm[b].title&&(r=void 0),l[n]=r,u[n]=i.description})),Object.values(l).some((function(e){return"string"===typeof e}))&&(l.isI18N=!0),Object.values(u).some((function(e){return"string"===typeof e}))&&(u.isI18N=!0);var d=Object(de.getCleanInputObjectRecursive)(u);a({title:c,titleI18N:Object(de.getCleanInputObjectRecursive)(l),company:t,startDate:r,endDate:n,description:o,descriptionI18N:Object.keys(d).length>0?d:void 0,location:i}).then((function(){x(!1),q()})).catch((function(){return x(!1)}))}}},isLoading:v,disabled:U||I,children:D(R?"modify":"add")})]}),onClose:H,overflow:"auto"},O),{},{children:Object(g.jsxs)(u.Column,{alignItems:"flex-start",width:"100%",overflow:"auto",children:[Object(g.jsx)(f.Tabs,{isArrowsDisplayable:!0,tabsOptions:d,mb:2,width:"100%"}),Object(g.jsx)(je,{label:D("experience_title"),name:"title",required:!0,mb:2,children:Object(g.jsx)(u.Input,{value:(null===(t=A.localisedForm[M])||void 0===t?void 0:t.title)||"string"===typeof b&&(null===(n=A.localisedForm[b])||void 0===n?void 0:n.title)||void 0,onChange:W("title"),width:"100%"})}),Object(g.jsxs)(u.Box,{width:"100%",children:[Object(g.jsx)(je,{label:D("company_organisation"),name:"company",mb:2,required:!0,children:Object(g.jsx)(u.Input,{disabled:z,bg:z?xe:void 0,onChange:W("company"),value:B.company,width:"100%"})}),Object(g.jsx)(je,{label:D("place"),name:"location",mb:20,children:Object(g.jsx)(j.SearchLocation,{initialValue:B.location,inputBg:z?xe:void 0,isDisabled:z,onUpdateLocation:function(e){P(Object(S.a)(Object(S.a)({},A),{},{sharedForm:Object(S.a)(Object(S.a)({},A.sharedForm),{},{location:null===e||void 0===e?void 0:e.label})}))},width:"100%"})}),!z&&Object(g.jsx)(u.Line,{width:"100%",mb:2,children:Object(g.jsxs)(u.Text,{as:"label",fontWeight:"semiBold",children:[Object(g.jsx)(u.Checkbox,{mr:1,checked:B.isCurrentJob,onChange:function(e){P(!0===e?Object(S.a)(Object(S.a)({},A),{},{sharedForm:Object(S.a)(Object(S.a)({},A.sharedForm),{},{isCurrentJob:!0,endDate:void 0})}):Object(S.a)(Object(S.a)({},A),{},{sharedForm:Object(S.a)(Object(S.a)({},A.sharedForm),{},{isCurrentJob:!1})}))}}),D("ongoing_experience_label")]})}),Object(g.jsx)(je,{isError:N,label:D("start_date"),name:"startDate",mb:2,required:!0,children:Object(g.jsx)(he,{initialValue:B.startDate,isDisabled:z,onSubmit:W("startDate")})}),!B.isCurrentJob&&Object(g.jsx)(je,{isError:N,label:D("end_date"),name:"endDate",mb:2,children:Object(g.jsx)(he,{initialValue:B.endDate,isDisabled:z,onSubmit:W("endDate")})}),N&&Object(g.jsx)(ge,{children:Object(g.jsx)(u.Text,{children:D("error_end_date_before_start_date")})})]}),Object(g.jsx)(je,{label:D("description"),name:"description",mb:2,children:Object(g.jsx)(u.TextArea,{width:"100%",value:M?null===(i=A.localisedForm)||void 0===i||null===(r=i[M])||void 0===r?void 0:r.description:void 0,onChange:W("description")},M||"")})]})}))},Se=n(748),ke=n(820),we=["title","company","description","startDate","endDate","location","isEditable","onClickEdit"],Ie=["title","company","startDate","endDate","location","isEditable","onClickEdit"],Ce=["description"],Ee=Object(re.default)(u.Box)((function(e){var t=e.isErrorHover,n=e.theme;return{alignItems:"center",backgroundColor:t?n.colors.error[2]:n.colors.error[1],borderRadius:15,display:"flex",height:21,justifyContent:"center",width:21}})),Te=Object(re.default)(u.Line)(F||(F=Object(Se.a)(["\n  border-left: 1px solid ",";\n"])),(function(e){return e.theme.colors.grey[5]})),Le=function(e){var t=e.title,n=e.company,i=e.startDate,r=e.endDate,a=e.location,o=e.isEditable,c=e.onClickEdit,l=Object(k.a)(e,Ie),d=Object(u.useTranslate)(),j=Object(s.useMemo)((function(){if("string"===typeof i){var e=Object(T.localeMoment)(i).startOf("month"),t=Object(T.localeMoment)(r).endOf("month");return T.localeMoment.duration(t.diff(e))}}),[i,r]),f=Object(s.useState)(!1),p=Object(E.a)(f,2),O=p[0],m=p[1],h=Object(s.useState)(!1),v=Object(E.a)(h,2),x=v[0],y=v[1];return Object(g.jsx)(Te,Object(S.a)(Object(S.a)({flex:1,pl:2,onMouseEnter:function(){m(!0)},onMouseLeave:function(){m(!1)}},l),{},{children:Object(g.jsxs)(u.Box,{flex:1,position:"relative",children:[Object(g.jsx)(u.Text,{fontSize:"large",fontWeight:"bold",children:Object(g.jsxs)(u.Box,{children:[Object(ne.maj)(t),o&&O&&Object(g.jsx)(u.IconButton,{position:"absolute",top:"0px",right:0,iconAs:ke.a,iconSize:16,mr:0,onClick:function(){c&&c()}})]})}),n&&Object(g.jsx)(u.Text,{fontWeight:"semiBold",my:0,children:Object(ne.maj)(n)}),"undefined"!==typeof a&&a.length>0&&Object(g.jsx)(u.Text,{fontWeight:"semiBold",mb:0,children:Object(ne.maj)(a)}),i&&Object(g.jsxs)(u.Line,{width:"100%",children:[Object(g.jsxs)(u.Text,{color:"grey.5",fontWeight:"semiBold",children:[Object(T.localeMoment)(i).format("MMM YYYY")," - ","undefined"!==typeof r&&Object(T.localeMoment)(r).isValid()?Object(T.localeMoment)(r).format("MMM YYYY"):d("today")," \xb7 ","(".concat(Object(T.humanizeDuration)(j,d),")")]}),"1900-01-01T12:59:59.000Z"===i&&Object(g.jsx)(u.Line,{ml:1,flexGrow:1,children:Object(g.jsx)(u.Tooltip,{title:d("experience_date_error"),children:Object(g.jsx)(u.Box,{children:Object(g.jsx)(Ee,{onMouseEnter:function(){y(!0)},onMouseLeave:function(){y(!1)},isErrorHover:x,children:Object(g.jsx)(u.Icon,{color:"error.3",size:13,as:b.a})})})})})]})]})}))},_e=Object(re.default)(u.Text)((function(){return{whiteSpace:"pre-line"}})),Ae=function(e){var t=e.description,n=Object(k.a)(e,Ce);return Object(g.jsx)(u.Box,Object(S.a)(Object(S.a)({},n),{},{children:Object(g.jsx)(_e,{children:t})}))},Pe=function(e){var t=e.title,n=e.company,i=e.description,r=e.startDate,a=e.endDate,s=e.location,o=e.isEditable,c=e.onClickEdit,l=Object(k.a)(e,we);return Object(g.jsxs)(u.Box,Object(S.a)(Object(S.a)({},l),{},{children:[Object(g.jsx)(Le,{title:t,company:n,startDate:r,endDate:a,location:s,isEditable:o,onClickEdit:c,mb:2}),"undefined"!==typeof i&&i.length>0&&Object(g.jsx)(Ae,{description:i})]}))},De=n(85),Me=Object(re.default)("input")((function(){return{width:1,height:1,position:"absolute"}})),Re=n(793),Be=["feedbackType","title","description"],Fe=Object(re.default)(u.Box)((function(){return{width:34,height:34,borderRadius:34,display:"flex",justifyContent:"center",alignItems:"center"}}),(function(e){var t=e.theme;return e.isSuccess?{backgroundColor:t.colors.success[2]}:{backgroundColor:t.colors.error[2]}})),Ue=function(e){var t=e.feedbackType,n=e.title,i=e.description,r=Object(k.a)(e,Be),a=Object(L.h)();return Object(g.jsxs)(u.Line,Object(S.a)(Object(S.a)({p:15,pr:50,alignItems:"center",bg:"success"===t?a.colors.success[0]:a.colors.error[0]},r),{},{children:[Object(g.jsx)(Fe,{isSuccess:"success"===t,flexGrow:0,flexShrink:0,mr:2,children:Object(g.jsx)(u.Icon,{as:"success"===t?Re.a:_.a,size:16})}),Object(g.jsxs)(u.Column,{alignItems:"flex-start",justifyContent:"center",children:[Object(g.jsx)(u.Text,{fontSize:"large",fontWeight:"bold",mb:0,children:n}),"undefined"!==typeof i&&Object(g.jsx)(u.Text,{fontWeight:"semiBold",children:i})]})]}))},Ne=function(e){var t=Object.assign({},e),n=Object(u.useTranslate)({capitalize:!0});return Object(g.jsx)(f.StandardModal,Object(S.a)(Object(S.a)({title:n("profile_import"),confirmButtonLabel:n("try_again"),onConfirm:t.onConfirm,onCancel:t.onClose,width:650},t),{},{children:Object(g.jsx)(u.Box,{children:Object(g.jsx)(Ue,{feedbackType:"error",title:n("the_profile_import_got_nothing"),width:"100%"})})}))},ze=["importProgressRate","onClickImport"],We=function(e){return"https://elamp-prd.s3.eu-west-1.amazonaws.com/Linkedin-tuto-2".concat("undefined"===typeof e||"fr"===e?"":"_en",".png")},qe=Object(re.default)("img")((function(){return{width:"100%"}})),He=function(e){var t,n=e.importProgressRate,i=e.onClickImport,r=Object(k.a)(e,ze),a=Object(u.useTranslate)({capitalize:!0}),s=Object(f.useAppContext)().user;return Object(g.jsx)(f.StandardModal,Object(S.a)(Object(S.a)({title:a("import_linkedin_title"),titleIcon:te,width:600,height:"90vh",onConfirm:void 0,onCancel:void 0},r),{},{children:Object(g.jsxs)(u.Column,{alignItems:"flex-start",overflow:"auto",height:"100%",mx:-15,px:15,children:[Object(g.jsx)(u.Text,{mb:20,children:a("linkedin_import_description")}),Object(g.jsx)(u.Line,{width:"100%",justifyContent:"center",my:1,children:"undefined"!==typeof n?Object(g.jsx)(u.ProgressBar,{value:n,format:"none",width:"25%"}):Object(g.jsx)(u.Button,{onClick:i,children:a("import")})}),Object(g.jsx)(u.Text,{fontWeight:"bold",my:20,children:a("linkedin_howto_title")}),Object(g.jsx)(u.Text,{mb:20,children:a("linkedin_howto_step1")}),Object(g.jsx)(qe,{src:(t=s.locale,"https://elamp-prd.s3.eu-west-1.amazonaws.com/Linkedin-tuto-1".concat("undefined"===typeof t||"fr"===t?"":"_en",".png"))}),Object(g.jsx)(u.Text,{my:20,children:a("linkedin_howto_step2")}),Object(g.jsx)(qe,{src:We(s.locale)})]})}))},Ve=["experiences"],Ge=function(e){var t=e.experiences,n=Object(k.a)(e,Ve),i=Object(u.useTranslate)({capitalize:!0});return Object(g.jsx)(f.StandardModal,Object(S.a)(Object(S.a)({title:i("import_linkedin_title"),titleIcon:te,confirmButtonLabel:i("import"),onCancel:n.onClose,width:650,height:"90vh",overflow:"hidden"},n),{},{children:"undefined"!==typeof t&&Object(g.jsxs)(u.Column,{alignItems:"flex-start",height:"100%",children:[Object(g.jsx)(Ue,{feedbackType:"success",title:i("import_successful"),description:"".concat(i("the_profile_import_got")," ").concat(i("num_experience",t.length),"."),width:"100%",mb:15}),Object(g.jsx)(u.Box,{overflow:"auto",flexShrink:1,mx:-20,px:20,width:"100%",children:t.map((function(e,n){return Object(g.jsxs)(u.Box,{mb:3,children:[Object(g.jsx)(Pe,{title:e.title,company:e.company,description:e.description,startDate:e.startDate,endDate:e.endDate,location:e.location,isEditable:!1,mb:3}),n<t.length-1&&Object(g.jsx)(u.Separator,{width:"100%"})]},e.id)}))})]})}))},Je=["isEditable","targetUserLocale","userId"],Qe={isOpenedErrorModal:!1,isOpenedExperiencesReviewModal:!1,isOpenedTutorialModal:!1},Ze=function(e,t){switch(t.type){case"openTutorialModal":return Object(S.a)(Object(S.a)({},e),{},{isOpenedErrorModal:!1,isOpenedExperiencesReviewModal:!1,isOpenedTutorialModal:!0});case"closeTutorialModal":return Object(S.a)(Object(S.a)({},e),{},{isOpenedTutorialModal:!1});case"openErrorModal":return Object(S.a)(Object(S.a)({},e),{},{isOpenedErrorModal:!0,isOpenedExperiencesReviewModal:!1,isOpenedTutorialModal:!1});case"closeErrorModal":return Object(S.a)(Object(S.a)({},e),{},{isOpenedErrorModal:!1});case"openReviewExperiencesModal":return Object(S.a)(Object(S.a)({},e),{},{isOpenedErrorModal:!1,isOpenedExperiencesReviewModal:!0,isOpenedTutorialModal:!1});case"closeReviewExperiencesModal":return Object(S.a)(Object(S.a)({},e),{},{isOpenedExperiencesReviewModal:!1});default:return e}},Ye=function(e){var t=e.isEditable,n=e.targetUserLocale,i=e.userId,r=Object(k.a)(e,Je),a=Object(s.useReducer)(Ze,Qe),o=Object(E.a)(a,2),d=o[0],b=d.isOpenedErrorModal,p=d.isOpenedExperiencesReviewModal,m=d.isOpenedTutorialModal,h=o[1],v=Object(u.useTranslate)(),x=Object(c.useHistory)(),y=Object(L.h)().colors,w=Object(u.useAlert)(),T=Object(f.useAppContext)(),D=T.getErrorMessage,M=T.locales,R=T.user,B=Object(l.useGetUserExperiencesQuery)({variables:{id:i},fetchPolicy:"cache-first",nextFetchPolicy:"cache-only"}).data,F=Object(l.useUpdateUserExperienceMutation)(),U=Object(E.a)(F,1)[0],N=Object(l.useCreateSkillReviewMutation)(),z=Object(E.a)(N,1)[0],W=Object(l.useCreateUserExperienceMutation)(),q=Object(E.a)(W,1)[0],H=Object(l.useDeleteUserExperienceMutation)(),V=Object(E.a)(H,1)[0],G=function(e){var t=e.userId,n=Object(s.useState)(),i=Object(E.a)(n,2),r=i[0],a=i[1],o=Object(l.useRemoveSkillFromUserExperienceMutation)(),c=Object(E.a)(o,1)[0];return{removeSkillFromExperience:function(e){var n=e.experienceId,i=e.skillId,r=e.onCompleted;a(i),c({variables:{input:{userId:t,experienceId:n,skillId:i}},onCompleted:function(){a(void 0),r&&r()}})},skillIdBeingRemoved:r}}({userId:i}),J=G.removeSkillFromExperience,Q=G.skillIdBeingRemoved,Z=function(){var e=Object(s.useState)({active:!1}),t=Object(E.a)(e,2),n=t[0],i=t[1];return{experienceId:n.experienceId,active:n.active,on:function(e){i({experienceId:e,active:!0})},off:function(){i(Object(S.a)(Object(S.a)({},n),{},{active:!1,experienceId:void 0}))}}}(),Y=function(e){var t=e.userId,n=Object(s.useState)(!1),i=Object(E.a)(n,2),r=i[0],a=i[1],o=Object(l.useParseResumeMutation)(),c=Object(E.a)(o,2),u=c[0],d=c[1],b=d.data,f=d.loading,p=d.reset,O=Object(l.useMergeUserExperiencesMutation)(),m=Object(E.a)(O,2),h=m[0],v=m[1],x=v.loading,g=v.reset,y=Object(j.useUploadResume)(),S=function(){var e=Object(C.a)(I.a.mark((function e(n){var i,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.next=3,y(n);case 3:if(i=e.sent,a(!1),"undefined"===typeof(null===i||void 0===i?void 0:i.files)||"undefined"===typeof i.files[0]){e.next=8;break}return r=Object(De.getUrlRoot)()+i.files[0].url,e.abrupt("return",u({variables:{userId:t,resumeUrl:r}}).then((function(){})));case 8:return e.abrupt("return");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(C.a)(I.a.mark((function e(){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof w){e.next=3;break}return n=w.map((function(e){return{title:e.title,company:e.company,startDate:"undefined"!==typeof e.startDate?new Date(e.startDate).toISOString():void 0,endDate:"undefined"!==typeof e.endDate?new Date(e.endDate).toISOString():void 0,description:e.description,location:e.location}})),e.abrupt("return",h({variables:{userId:t,experiences:n}}).then((function(){})));case 3:return e.abrupt("return");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=Object(s.useMemo)((function(){var e,t=null===b||void 0===b||null===(e=b.parseResume.parsedResume)||void 0===e?void 0:e.experiences;if(t)return t.map((function(e,t){return{id:"parsedUserExperience_".concat(t),company:e.company,startDate:e.startDate,endDate:"string"===typeof e.endDate?e.endDate:void 0,title:e.title,description:e.description,location:Object(l.maybeToOptional)(e.location)}}))}),[b]),T=Object(s.useMemo)((function(){var e,t=null===b||void 0===b||null===(e=b.parseResume.parsedResume)||void 0===e?void 0:e.skills;if(t)return t.length}),[b]);return{importLinkedInProfile:S,mergeUserExperiences:k,reset:function(){a(!1),p(),g()},isImporting:r,isUpdatingUserExperiences:x,isParsing:f,parsedExperiences:w,parsedSkillsCount:T}}({userId:i}),K=Y.importLinkedInProfile,X=Y.mergeUserExperiences,$=Y.reset,ee=Y.isImporting,re=Y.isParsing,ae=Y.isUpdatingUserExperiences,se=Y.parsedExperiences,oe=Y.parsedSkillsCount,ue=Object(s.useMemo)((function(){var e,t=null===B||void 0===B||null===(e=B.user)||void 0===e?void 0:e.experiences;if(t)return t.map((function(e){var t;return{id:e.id,title:e.title,titleI18N:e.titleI18n,description:Object(l.maybeToOptional)(e.description),descriptionI18N:Object(l.maybeToOptional)(e.descriptionI18n),company:e.company,location:Object(l.maybeToOptional)(e.location),startDate:e.startDate,endDate:Object(l.maybeToOptional)(e.endDate),skills:null===(t=e.skills)||void 0===t?void 0:t.map((function(e){var t;return Object(S.a)(Object(S.a)({},Object(l.getFormatedSkillBasicFragment)(e.skill)),{},{qualifiers:null===(t=e.qualifiers)||void 0===t?void 0:t.edges.map((function(e){return{id:e.node.id,value:e.value}}))})}))}}))||[]}),[B]),de=function(e){var t=e.onSubmitFile,n=Object(s.useRef)(null),i=function(e){var n,i=null===(n=e.target.files)||void 0===n?void 0:n[0];"undefined"!==typeof i&&t(i)};return{InputFile:function(){return Object(g.jsx)(Me,{ref:n,onChange:i,type:"file"})},openFileSelector:function(){n.current&&n.current.click()}}}({onSubmitFile:function(e){K(e).then((function(){w.success(v("success"))})).catch((function(e){h({type:"openErrorModal"}),w.error(D(e))}))}}),be=de.InputFile,je=de.openFileSelector;Object(s.useEffect)((function(){"undefined"!==typeof se&&"undefined"!==typeof oe&&h({type:"openReviewExperiencesModal"})}),[se,oe]);var fe=Object(s.useMemo)((function(){return ee&&!re?1/3:re?2/3:"undefined"!==typeof se?1:void 0}),[ee,re,se]),pe=Object(s.useMemo)((function(){var e=[],t=y.primary[4];if("undefined"!==typeof n&&e.push({color:t,id:n,isUppercase:!1,label:Object(ne.maj)(v("lang_".concat(n)))+" (".concat(v("main_language"),")"),to:O.b.USER_PROFILE_DETAILS.getRoute({locale:n,userId:i})}),(M||[]).filter((function(e){return e!==n})).forEach((function(n){e.push({color:t,id:n,isNew:!0,isUppercase:!1,label:Object(ne.maj)(v("lang_".concat(n))),to:O.b.USER_PROFILE_DETAILS.getRoute({locale:n,userId:i})})})),"undefined"!==typeof ue&&"undefined"!==typeof Z.experienceId){var r=ue.find((function(e){return e.id===Z.experienceId}));if("undefined"!==typeof r)return e.map((function(e){return Object(S.a)(Object(S.a)({},e),{},{isNew:le({locale:e.id,selectedElement:r,targetUserLocale:n})})}))}return e}),[Z.experienceId,M,n]),Oe=Object(s.useMemo)((function(){if("undefined"!==typeof ue&&"undefined"!==typeof Z.experienceId){var e=ue.find((function(e){return e.id===Z.experienceId}));if("undefined"!==typeof e&&"undefined"!==typeof n&&"undefined"!==typeof pe&&pe.length>0){var t={};return pe.forEach((function(n){var i,r,a,s;"string"===typeof n.id&&(t[n.id]={description:null===(i=e.descriptionI18N)||void 0===i?void 0:i[n.id],title:"string"===typeof(null===(r=e.titleI18N)||void 0===r?void 0:r[n.id])?null===(a=e.titleI18N)||void 0===a?void 0:a[n.id]:(null===(s=e.titleI18N)||void 0===s?void 0:s.default)||e.title})})),{localisedForm:t,sharedForm:{company:e.company,startDate:"1900-01-01T12:59:59.000Z"===e.startDate?void 0:e.startDate,endDate:e.endDate,location:e.location}}}}}),[Z.experienceId,pe]),me=function(e){return function(){var t=Object(C.a)(I.a.mark((function t(n){var r;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"!==typeof ue){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,U({variables:{input:{experienceId:e,userId:i,skills:((null===(r=ue.find((function(t){return t.id===e})))||void 0===r?void 0:r.skills)||[]).map((function(e){return{skill:e.id}})).concat({skill:n})}}});case 5:return t.next=7,z({variables:{skillId:n,userId:i},refetchQueries:l.refetchQueries.onMutatePower});case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),w.error(D(t.t0));case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()},he=function(e){return function(){switch(e){case"error":h({type:"closeErrorModal"});break;case"reviewExperiences":h({type:"closeReviewExperiencesModal"});break;case"tutorial":h({type:"closeTutorialModal"})}}},ve=function(){var e=Object(C.a)(I.a.mark((function e(t){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof ue){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,"undefined"!==typeof Z.experienceId||"string"!==typeof t.title||"string"!==typeof t.company){e.next=8;break}return e.next=6,q({variables:{input:{userId:i,titleI18n:t.titleI18N,company:t.company,startDate:t.startDate,endDate:t.endDate||null,descriptionI18n:t.descriptionI18N,location:t.location}}});case 6:e.next=12;break;case 8:if("undefined"===typeof(n=ue.find((function(e){return e.id===Z.experienceId})))){e.next=12;break}return e.next=12,U({variables:{input:{experienceId:n.id,userId:i,titleI18n:Object(S.a)(Object(S.a)({},n.titleI18N),t.titleI18N),company:t.company,startDate:t.startDate,endDate:t.endDate||null,descriptionI18n:Object(S.a)(Object(S.a)({},n.descriptionI18N),t.descriptionI18N),location:t.location,skills:null===(r=n.skills)||void 0===r?void 0:r.map((function(e){var t;return{skill:e.id,qualifiers:null===(t=e.qualifiers)||void 0===t?void 0:t.map((function(e){return{id:e.id,value:e.value}}))}}))}}});case 12:Z.off(),w.success(v("success")),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),w.error(D(e.t0));case 19:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=Object(C.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof Z.experienceId){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,V({variables:{id:Z.experienceId,userId:i},onCompleted:function(){Z.off(),w.success(v("success"))}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),w.error(D(e.t0));case 10:return e.abrupt("return");case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(){return e.apply(this,arguments)}}(),ge=function(e){null===e?x.push(O.b.USER_PROFILE_DETAILS.getRoute({userId:i})):x.push(O.b.USER_PROFILE_DETAILS.getRoute({locale:null===pe||void 0===pe?void 0:pe[0].id,userId:i}))};return"undefined"===typeof ue?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(u.LoaderSkeleton.Line,{width:"66%",mb:1}),Object(g.jsx)(u.LoaderSkeleton.Line,{width:"33%",mb:1}),Object(g.jsx)(u.LoaderSkeleton.Line,{width:"50%",mb:1})]}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(u.Box,Object(S.a)(Object(S.a)({position:"relative"},r),{},{children:[t&&Object(g.jsxs)(u.Column,{alignItems:"flex-start",bg:"primary.0",mb:20,children:[Object(g.jsx)(u.AssistantLayout,{title:v("question_add_experience"),rightElement:Object(g.jsx)(ce,{onClick:function(){Z.on(void 0),ge()},children:v("add_experience")})}),0===ue.length&&Object(g.jsxs)(u.Line,{width:"100%",justifyContent:"space-between",px:2,pb:2,children:[Object(g.jsxs)(u.Line,{children:[Object(g.jsx)(u.Icon,{as:te,color:"blue",mr:15}),Object(g.jsx)(u.Text,{fontWeight:"bold",fontSize:"large",children:v("import_linkedin_title")})]}),Object(g.jsx)(u.Button,{onClick:function(){h({type:"openTutorialModal"})},children:v("import")})]})]}),ue.length>0?ue.map((function(e,n){return Object(g.jsxs)(u.Box,{mb:4,children:[Object(g.jsx)(Pe,{title:e.title,company:e.company,description:e.description,startDate:e.startDate,endDate:e.endDate,location:e.location,isEditable:t,onClickEdit:(r=e.id,function(){Z.on(r),ge()}),mb:2}),e.skills&&e.skills.length>0&&Object(g.jsxs)(u.Box,{mb:1,children:[Object(g.jsxs)(u.Line,{width:"100%",bg:"grey.0",p:0,mb:1,children:[Object(g.jsx)(u.Icon,{as:A.a,size:16,mr:0}),Object(g.jsx)(u.Text,{fontWeight:"semiBold",children:v("two_points",{phrase:v("developed_skills")})})]}),Object(g.jsx)(u.Line,{flexWrap:"wrap",children:e.skills.map((function(t){return Object(g.jsx)(j.SkillBrick,{skill:Object(S.a)({_key:t.id},t),mr:1,mb:1,isRightElementDisplayedOnHover:!0,rightElementWidth:"15px",rightElement:Q===t.id?Object(g.jsx)(u.Icon,{as:P.a,size:14}):Object(g.jsx)(u.Box,{onClick:function(n){n.stopPropagation(),function(e,t){J({experienceId:e,skillId:t})}(e.id,t.id)},children:Object(g.jsx)(u.Icon,{as:_.a,size:14})})},t.id)}))})]}),R.id===i&&Object(g.jsx)(ie.a,{isExpandedInitialValue:!e.skills||0===e.skills.length,title:v("add_skills_to_your_experience"),skillsToIgnore:(e.skills||[]).map((function(e){return e.id})),onAddSkill:me(e.id),searchQuery:"".concat(e.title," ").concat(e.company," ").concat(e.description||"").trim()})]},e.title+":"+n);var r})):Object(g.jsx)(u.Text,{color:"grey.6",children:v("no_experiences_filled")}),Object(g.jsx)(be,{})]})),Object(g.jsx)(He,{isOpened:m,onClickImport:function(){je()},onClose:he("tutorial"),importProgressRate:fe}),Object(g.jsx)(Ne,{isOpened:b,onClose:he("error"),onConfirm:function(){h({type:"openTutorialModal"})}}),Object(g.jsx)(Ge,{isOpened:p,onClose:he("reviewExperiences"),experiences:se,onConfirm:function(){X().then((function(){w.success(v("success")),h({type:"closeReviewExperiencesModal"}),$()}))},isLoading:ae}),Object(g.jsx)(ye,{isOpened:Z.active,locales:M,onClose:function(){Z.off(),x.push(O.b.USER_PROFILE_DETAILS.getRoute({userId:i}))},onSubmit:ve,onDelete:xe,tabsOptions:pe,targetUserLocale:n,userExperience:Oe},"experienceModal_".concat(Z.experienceId))]})},Ke=n(767),Xe=n(852),$e=n(873),et=n(32),tt=n(759),nt=["assessmentsCount","onClick","users"],it=function(e){var t=e.assessmentsCount,n=e.onClick,i=e.users,r=Object(k.a)(e,nt),a=Object(u.useTranslate)({capitalize:!0}),s=Object(u.useResponsive)().isMobile;return Object(g.jsx)(u.AssistantLayoutContainer,Object(S.a)(Object(S.a)({appearance:"alert"},r),{},{children:Object(g.jsx)(u.AssistantLayoutTitleLine,{iconElement:Object(g.jsx)(j.ReasonCounter,{type:et.ReasonCounterTypeEnum.PARTIAL}),rightElement:s?Object(g.jsx)(ce,{onClick:n,appearance:"normal",children:a("consult_label")}):Object(g.jsx)(u.Button,{onClick:n,appearance:"normal",children:a("consult_label")}),title:a("num_my_team_waiting_assessments",{smart_count:t}),titleComplement:Object(g.jsx)(tt.a,{users:i,maxDisplayCount:5,isLink:!0,size:26,offLimitTooltipPosition:"right"})})}))},rt=["assessmentsCount","onClick"],at=function(e){var t=e.assessmentsCount,n=e.onClick,i=Object(k.a)(e,rt),r=Object(u.useTranslate)({capitalize:!0}),a=Object(u.useResponsive)().isMobile;return Object(g.jsx)(u.AssistantLayoutContainer,Object(S.a)(Object(S.a)({appearance:"alert"},i),{},{children:Object(g.jsx)(u.AssistantLayoutTitleLine,{iconElement:Object(g.jsx)(j.ReasonCounter,{type:et.ReasonCounterTypeEnum.PARTIAL}),rightElement:a?Object(g.jsx)(ce,{onClick:n,appearance:"normal",children:r("consult_my_assessments_label")}):Object(g.jsx)(u.Button,{onClick:n,appearance:"normal",children:r("consult_my_assessments_label")}),title:r("num_my_waiting_assessments",{smart_count:t})})}))},st=["onClickEvaluateJobs","onClickEvaluateSkills","skillsCount"],ot=function(e){var t=e.onClickEvaluateJobs,n=e.onClickEvaluateSkills,i=e.skillsCount,r=void 0===i?0:i,a=Object(k.a)(e,st),s=Object(u.useTranslate)(),o=Object(u.useResponsive)().isMobile;return Object(g.jsxs)(u.AssistantLayoutContainer,Object(S.a)(Object(S.a)({},a),{},{children:["undefined"!==typeof t&&Object(g.jsx)(u.AssistantLayoutTitleLine,{title:Object(ne.maj)(s("evaluate_on_job_skills")),rightElement:o?Object(g.jsx)(ce,{onClick:t,appearance:"normal",children:Object(ne.maj)(s("evaluate_myself_now"))}):Object(g.jsx)(u.Button,{onClick:t,appearance:"normal",children:Object(ne.maj)(s("evaluate_myself_now"))})}),"undefined"!==typeof n&&Object(g.jsx)(u.AssistantLayoutTitleLine,{title:Object(ne.maj)(s("you_have_non_evaluated_skills_num",r)),rightElement:o?Object(g.jsx)(ce,{onClick:n,appearance:"outline",children:Object(ne.maj)(s("fill_my_skills",{skills:s("skill_review",10)}))}):Object(g.jsx)(u.Button,{onClick:n,appearance:"outline",children:Object(ne.maj)(s("fill_my_skills",{skills:s("skill_review",10)}))}),mt:"undefined"!==typeof t?1:void 0})]}))},ct=["title","titleId"];function lt(){return(lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function ut(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function dt(e,t){var n=e.title,i=e.titleId,r=ut(e,ct);return s.createElement("svg",lt({id:"Capa_1",style:{transform:"rotate(90deg)"},xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 255 255",ref:t,"aria-labelledby":i},r),n?s.createElement("title",{id:i},n):null,U||(U=s.createElement("g",null,s.createElement("g",{id:"arrow-drop-down"},s.createElement("polygon",{points:"0,63.75 127.5,191.25 255,63.75  "})))),N||(N=s.createElement("g",null)),z||(z=s.createElement("g",null)),W||(W=s.createElement("g",null)),q||(q=s.createElement("g",null)),H||(H=s.createElement("g",null)),V||(V=s.createElement("g",null)),G||(G=s.createElement("g",null)),J||(J=s.createElement("g",null)),Q||(Q=s.createElement("g",null)),Z||(Z=s.createElement("g",null)),Y||(Y=s.createElement("g",null)),K||(K=s.createElement("g",null)),X||(X=s.createElement("g",null)),$||($=s.createElement("g",null)),ee||(ee=s.createElement("g",null)))}var bt=s.forwardRef(dt),jt=(n.p,n(861)),ft=function(e,t){var n=t.rate,i=t.isAbsence,r=t.isTraining,a=t.theme.colors,s=a.black,o=a.error,c=a.grey,l=a.secondary,u=a.success;return n>=100&&i?"bg"===e?c[2]:c[6]:n>0&&n<=100&&r?"bg"===e?"#FF57B2":s[3]:n>0&&n<100?"bg"===e?l[1]:s[3]:100===n?"bg"===e?l[4]:"white":n>100?"bg"===e?o[3]:"white":"bg"===e?u[3]:s[3]},pt=re.default.div((function(e){var t=e.color,n=e.rate,i=e.theme,r=e.disabled,a=i.colors.grey,s={width:28,height:28,margin:3,borderRadius:2,transition:"all 150ms ease-in-out"};if(r)return Object(S.a)(Object(S.a)({},s),{},{border:0,background:a[0]});var o=t;return 0===n&&(o=a[3]),Object(S.a)(Object(S.a)({},s),{},{border:"1px solid ".concat(o),background:t,cursor:"pointer",":hover":{opacity:.5}})})),Ot=Object(re.default)(u.Text)((function(){return{cursor:"default"}})),mt=function(e){var t=e.date,n=e.tasks,i=e.onTaskClick,r=e.totalLabel,a=e.addLabel,s=e.disabled,o=Object(u.useSwitch)(),c=o.active,d=o.on,b=o.off,j=n.reduce((function(e,t){return t.rate+e}),0),f=Object(L.h)(),p=[],O=[];n.forEach((function(e){p.push(e.type),"absence"===e.type&&O.push(e.rate)}));var m=function(e,t){var n=e.includes("absence"),i=t.reduce((function(e,t){return e+t}),0);return n&&i>=100}(p,O);var h=!p.includes("project")&&p.includes("training");return Object(g.jsx)(u.Popover,{isOpened:c,onClose:b,content:Object(g.jsxs)(u.Card,{bg:"white",boxShadow:"small",children:[n.map((function(e){return Object(g.jsx)(u.MenuOption,{disabled:e.type===l.ScheduledPeriodType.Project,onClick:function(){return n=e.id,i({taskId:n,date:t}),void b();var n},children:Object(g.jsxs)(u.Text,{as:"span",maxWidth:300,ellipsis:!0,children:[e.name," - ",Math.round(e.rate),"%"]})},e.id)})),Object(g.jsx)(u.Separator,{}),Object(g.jsxs)(Ot,{px:"20px",py:1,color:"black.1",fontWeight:2,children:[r," - ",Math.round(j),"%"]}),Object(g.jsx)(u.Text,{p:2,color:"primary",onClick:function(){i({taskId:void 0,date:t}),b()},children:a})]}),children:Object(g.jsx)(pt,{color:ft("bg",{rate:j,isAbsence:m,isTraining:h,theme:f}),rate:j,onClick:s?void 0:d,disabled:s,children:Object(g.jsx)(u.Text,{textAlign:"center",color:s?"grey.3":ft("text",{rate:j,isAbsence:m,isTraining:h,theme:f}),style:{lineHeight:"28px"},children:t.getDate()})})})},ht=n(889),vt=["label","isActive"],xt=function(e){var t=e.task,n=e.date,i=e.variables,r=e.onCancel,a=Object(f.useAppContext)().getErrorMessage,o=null===t,c=Object(u.useTranslate)(),d=Object(u.useAlert)(),b=Object(s.useState)(o||null===t?function(e){return{type:l.ScheduledPeriodType.Absence,description:"",name:"",startDate:new Date(e).toISOString(),endDate:new Date(e).toISOString(),rate:100}}(n):t),j=Object(E.a)(b,2),p=j[0],O=j[1],m=Object(u.useSwitch)(),h=Object(u.useAutoFocus)();function v(e){return function(){return x("type")(e)}}function x(e){return function(t){return O((function(n){return Object(S.a)(Object(S.a)({},n),{},Object(ue.a)({},e,t))}))}}var y=function(e,t,n){var i=Object(l.useCreateScheduledPeriodMutation)({refetchQueries:["GetPeriods"]}),r=Object(E.a)(i,1)[0],a=Object(l.useUpdatePeriodMutation)({refetchQueries:["GetPeriods"]}),s=Object(E.a)(a,1)[0];return function(){var i=Object(C.a)(I.a.mark((function i(a){var o,c,l;return I.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o=a.onError,c=a.onSuccess,e?l=r({variables:{input:Object(S.a)(Object(S.a)({userId:n.userId},t),{},{startDate:Object(T.setTimeToNoon)(t.startDate),endDate:Object(T.setTimeToNoon)(t.endDate)})}}):"undefined"!==typeof t.id&&(l=s({variables:{input:{id:t.id,name:t.name,description:t.description,entityId:t.entityId,startDate:Object(T.setTimeToNoon)(t.startDate),endDate:Object(T.setTimeToNoon)(t.endDate),rate:t.rate,type:t.type}}})),i.prev=2,i.next=5,l;case 5:c&&c(),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(2),o&&o(i.t0);case 11:case"end":return i.stop()}}),i,null,[[2,8]])})));return function(e){return i.apply(this,arguments)}}()}(o,p,i);function k(){return(k=Object(C.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({onError:function(e){return d.error(a(e))},onSuccess:function(){return d.success(c("your_availability_has_been_updated"))}});case 2:r();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=function(e,t){var n=Object(l.useDeleteScheduledPeriodMutation)({refetchQueries:["GetPeriods"]}),i=Object(E.a)(n,1)[0];return function(){return i({variables:{input:{id:e.id}}})}}(t);function L(){return(L=Object(C.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:r();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(u.Line,{children:[Object(g.jsx)(u.Label,{width:"100%",content:c("unavailability_title"),required:!0,children:Object(g.jsx)(u.Input,{ref:h,width:"100%",value:p.name||"",onChange:x("name"),mr:2})}),!o&&Object(g.jsxs)(u.MenuSelect.Target,{mt:"20px",px:1,children:[Object(g.jsx)(u.IconButton,{iconAs:ht.a,onClick:m.on}),Object(g.jsx)(u.MenuSelect,{onClose:m.off,isOpened:m.active,children:Object(g.jsx)(u.MenuOption,{onClick:function(){return L.apply(this,arguments)},children:c("delete")})})]})]}),Object(g.jsxs)(u.Line,{justifyContent:"space-around",my:2,children:[Object(g.jsx)(gt,{label:Object(ne.maj)(c("absence")),onClick:v(l.ScheduledPeriodType.Absence),isActive:p.type===l.ScheduledPeriodType.Absence}),Object(g.jsx)(gt,{label:Object(ne.maj)(c("training",1)),onClick:v(l.ScheduledPeriodType.Training),isActive:p.type===l.ScheduledPeriodType.Training})]}),Object(g.jsx)(u.TextArea,{mb:2,value:p.description,onChange:x("description"),placeholder:c("details")}),Object(g.jsx)(u.PeriodPicker,{startDate:p.startDate,endDate:p.endDate,startDateLabel:c("from"),endDateLabel:c("to"),onChange:function(e){O((function(t){return Object(S.a)(Object(S.a)({},t),e)}))},mb:2,width:"100%",isOneDayMinimumGap:!1}),Object(g.jsx)(u.Label,{mb:2,content:Object(ne.maj)(c("affectation")),children:Object(g.jsxs)(u.Line,{children:[Object(g.jsx)(u.Input,{mr:2,width:100,min:0,max:100,type:"number",rightElement:Object(g.jsx)(u.Text,{as:"span",children:"%"}),value:p.rate,onChange:function(e){return x("rate")(Number(e))}}),Object(g.jsx)(u.Slider,{flex:1,graduations:null,value:p.rate,max:100,onChange:function(e){return x("rate")(Number(e))}})]})}),Object(g.jsxs)(u.Line,{justifyContent:"flex-end",children:[Object(g.jsx)(u.Text,{textTransform:"uppercase",color:"grey",onClick:r,children:c("cancel")}),Object(g.jsx)(u.Button,{ml:2,disabled:!p.name||!p.type,onClick:function(){return k.apply(this,arguments)},children:c(o?"add_unavailability":"edit_unavailability")})]})]})},gt=function(e){var t=e.label,n=e.isActive,i=Object(k.a)(e,vt);return Object(g.jsx)(u.Text,Object(S.a)(Object(S.a)({active:n,fontWeight:n?"bold":"normal"},i),{},{children:t}))};var yt=["userId"],St=["color","children"],kt=new Date,wt=function(e){var t,n,i,r,a,c,d=e.userId,b=Object(k.a)(e,yt),f=Object(u.useTranslate)({capitalize:!0}),p=Object(s.useState)({taskId:void 0,date:void 0}),O=Object(E.a)(p,2),m=O[0],h=O[1],v=Object(s.useState)((function(){return Object(T.setTimeToNoon)(Object(T.localeMoment)().date(0).toDate()).subtract(1,"month")})),x=Object(E.a)(v,2),y=x[0],w=x[1],I=o.a.useMemo((function(){return y.clone().add(5,"month")}),[y]),C={userId:d,startDate:y.toDate(),endDate:I.toDate(),disableSimulatedAndProvisionalAssignments:!0},L=Object(l.useGetPeriodsQuery)({variables:C,fetchPolicy:"cache-first"}),_=L.data,A=L.loading,P=function(e){return e.reduce((function(e,t){var n;return e.periods[t.id]={id:t.id,name:t.name||"",description:Object(l.maybeToOptional)(t.description)||"",type:t.type,rate:t.rate,startDate:t.startDate,endDate:t.endDate,entityId:Object(l.maybeToOptional)(null===(n=t.entity)||void 0===n?void 0:n.id)},function(e,t){for(var n=new Date(e),i=(new Date(t).getTime()-n.getTime())/864e5,r=[],a=0;a<=i;a+=1){var s=new Date(n);s.setDate(s.getDate()+a),r.push(Object(T.setTimeToNoon)(s))}return r}(t.startDate,t.endDate).forEach((function(n){var i=n.toISOString();e.days[i]?e.days[i].push(t.id):e.days[i]=[t.id]})),e}),{periods:{},days:{}})}((null===_||void 0===_||null===(t=_.user)||void 0===t||null===(n=t.scheduledPeriods)||void 0===n?void 0:n.nodes)||[]),D=P.periods,M=P.days,R=o.a.useRef(),B=o.a.useRef(),F=o.a.useRef();function U(){h({taskId:void 0,task:void 0,date:void 0})}function N(e){var t=e.taskId,n=e.date,i=t?D[t]:void 0;h({taskId:t,task:i,date:n.toISOString()})}o.a.useLayoutEffect((function(){F.current&&void 0===B.current&&(B.current=F.current.offsetLeft-5),!A&&R.current&&void 0!==B.current&&(R.current.scrollLeft=B.current)}),[A,y]);var z=function(){h(Object(S.a)(Object(S.a)({},m),{},{date:Object(T.localeMoment)(new Date).toISOString()}))},W=(null===_||void 0===_||null===(i=_.user)||void 0===i?void 0:i.workingDays)&&Array.isArray(null===_||void 0===_||null===(r=_.user)||void 0===r?void 0:r.workingDays)?_.user.workingDays:[],q=function(e,t){var n=e.clone(),i=[];for(;t.diff(n,"month")>0;)i.push({month:n.month(),year:n.year()}),n.add(1,"month");return i}(y,I),H=Object.freeze(["L","M","M","J","V","S","D"]),V=f("add_unavailability"),G=f("total_unavailability"),J=Object(T.localeMoment)(null===_||void 0===_||null===(a=_.user)||void 0===a?void 0:a.nextAvailability);return Object(g.jsxs)(u.Box,Object(S.a)(Object(S.a)({},b),{},{children:[Object(g.jsx)(u.DesktopOrTablet,{children:Object(g.jsxs)(u.Line,{width:"100%",display:"flex",justifyContent:"space-between",pb:0,children:[Object(g.jsx)(j.NextAvailability,{date:J,bg:"grey.1",mr:1}),Object(g.jsx)(u.Button,{onClick:z,children:f(V)})]})}),Object(g.jsx)(u.Mobile,{children:Object(g.jsxs)(u.Column,{alignItems:"flex-start",children:[Object(g.jsx)(j.NextAvailability,{date:J,bg:"grey.1",mr:1}),Object(g.jsx)(u.Button,{mt:2,onClick:z,children:f(V)})]})}),Object(g.jsx)(u.Line,{height:310,children:A?Object(g.jsx)(u.Loader,{}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(u.Modal,{isOpened:!!m.date&&(null===m||void 0===m||null===(c=m.task)||void 0===c?void 0:c.type)!==l.ScheduledPeriodType.Project,onClose:U,children:Object(g.jsx)(xt,{task:m.taskId?D[m.taskId]:null,date:m.date||(new Date).toISOString(),variables:{userId:C.userId,startDate:C.startDate.toISOString(),endDate:C.endDate.toISOString()},onCancel:U})}),Object(g.jsxs)(u.Line,{overflowX:"scroll",ref:R,children:[Object(g.jsx)(u.IconButton,{onClick:function(){w((function(e){return Object(T.setTimeToNoon)(e.clone().startOf("month").subtract(5,"month").toDate())})),B.current=1e3},iconAs:bt}),Object(g.jsx)(u.Line,{p:2,position:"relative",alignItems:"flex-start",children:q.map((function(e){var t=e.year,n=e.month,i=function(e,t){var n=new Date(e,t,1,12),i=[];for(;n.getMonth()===t;){var r=n.getDay()-1;r<0&&(r=6),i.push({day:r,date:Object(T.setTimeToNoon)(n).toDate()}),n.setDate(n.getDate()+1)}return i}(t,n),r=Array.from({length:i[0].day});return Object(g.jsxs)(u.Box,{ref:n===kt.getMonth()&&t===kt.getFullYear()?F:void 0,children:[Object(g.jsxs)(u.Line,{width:238,mb:1,justifyContent:"space-between",children:[Object(g.jsx)(u.Text,{fontSize:"large",fontWeight:"semiBold",children:Object(ne.maj)(Object(T.localeMoment)(n+1,"MM").format("MMMM"))}),Object(g.jsx)(u.Text,{fontSize:"large",color:"black.2",fontWeight:"semiBold",children:t})]}),Object(g.jsx)(u.Line,{mb:1,px:1,width:238,justifyContent:"space-between",borderBottom:"1px solid",children:H.map((function(e){return Object(g.jsx)(u.Text,{color:"black.2",children:e},e)}))}),Object(g.jsxs)(u.Box,{mr:2,display:"flex",width:252,flexWrap:"wrap",children:[r.map((function(e,t){return Object(g.jsx)(u.Box,{size:28,bg:"transparent",m:"3px"},t)})),i.map((function(e,t){var n,i=e.date,r=e.day,a=i.toISOString(),s=(null===(n=M[a])||void 0===n?void 0:n.map((function(e){return D[e]})))||[],o=!W.includes(r+1);return Object(g.jsx)(mt,{tasks:s,date:i,addLabel:V,totalLabel:G,disabled:o,onTaskClick:N},a)}))]})]},[t,n].join())}))}),Object(g.jsx)(u.IconButton,{onClick:function(){w((function(e){return Object(T.setTimeToNoon)(e.clone().startOf("month").add(5,"month").toDate())})),B.current=0},iconAs:jt.a})]})]})}),Object(g.jsxs)(u.Line,{width:"100%",mt:1,flexWrap:"wrap",children:[Object(g.jsx)(It,{color:"success.3",border:"1px solid",children:f("day_availability_empty")}),Object(g.jsx)(It,{color:"secondary.1",children:f("day_availability_partial")}),Object(g.jsx)(It,{color:"secondary.4",children:f("day_availability_full")}),Object(g.jsx)(It,{color:"#FF57B2",children:f("training",1)}),Object(g.jsx)(It,{color:"error.3",children:f("day_availability_too_much")}),Object(g.jsx)(It,{color:"grey.2",children:f("day_availability_absence")})]})]}))},It=function(e){var t=e.color,n=e.children,i=Object(k.a)(e,St);return Object(g.jsxs)(u.Line,{mr:3,mb:1,children:[Object(g.jsx)(u.Box,Object(S.a)({size:16,bg:t,mr:1},i)),Object(g.jsx)(u.Text,{color:"black.2",children:n})]})};var Ct,Et,Tt=function(e){var t=e.headline,n=e.readOnly,i=void 0===n||n,r=e.onChangeHeadline,a=Object(u.useTranslate)({capitalize:!0});return Object(g.jsx)(u.TextEditableCancelable,{isReadOnly:i,initialText:t||"",placeholder:a("add_a_headline"),onSubmit:r})},Lt=n(766),_t=["email","place","phoneNumber","customFields"],At=function(e){var t=e.email,n=e.place,i=e.phoneNumber,r=e.customFields,a=Object(k.a)(e,_t),s=Object(u.useTranslate)(),o=Object(f.useAppContext)().customFields;return Object(g.jsxs)(u.Box,Object(S.a)(Object(S.a)({},a),{},{children:[t&&Object(g.jsx)(u.Label,{content:s("email_address"),mb:2,children:Object(g.jsx)(u.Text,{children:t})}),n&&Object(g.jsx)(u.Label,{content:s("address"),mb:2,children:Object(g.jsx)(u.Text,{children:n})}),i&&Object(g.jsx)(u.Label,{content:s("phone"),mb:2,children:Object(g.jsx)(u.Text,{children:i})}),Object(g.jsx)(Lt.b,{customFields:r||{},customFieldsConfiguration:o.userFields,shouldHideUndefined:!0})]}))},Pt=n(787),Dt=["userId","pinnedTrainings"],Mt=["name","budgetYear","startDate","endDate","status","customFields"],Rt=function(e){var t=e.userId,n=e.pinnedTrainings,i=Object(k.a)(e,Dt),r=Object(u.useTranslate)({capitalize:!0}),a=n.slice(0,5);return Object(g.jsxs)(u.Column,Object(S.a)(Object(S.a)({display:"flex",alignItems:"flex-start"},i),{},{children:[Object(g.jsx)(u.Box,{mb:1,children:a.map((function(e){return Object(g.jsx)(Bt,{name:e.name,startDate:e.startDate,endDate:e.endDate,status:e.status,customFields:e.customFields,mb:20},e.id)}))}),n.length>a.length&&Object(g.jsx)(u.Link,{to:O.b.USER_PROFILE_TRAININGS.getRoute({userId:t}),children:r("show_all")})]}))},Bt=function(e){var t=e.name,n=e.budgetYear,i=e.startDate,r=e.endDate,a=e.status,s=e.customFields,o=Object(k.a)(e,Mt),c=Object(f.useAppContext)().customFields;return Object(g.jsxs)(u.Column,Object(S.a)(Object(S.a)({display:"flex",alignItems:"flex-start"},o),{},{children:[Object(g.jsxs)(u.Line,{alignItems:"center",mb:0,width:"100%",children:[Object(g.jsx)(u.Text,{fontSize:"large",fontWeight:"bold",mr:20,children:t}),Object(g.jsx)(Pt.a,{status:a})]}),Object(g.jsx)(u.Line,{width:"100%",children:Object(g.jsxs)(u.Text,{color:"grey.6",children:["undefined"!==typeof n&&Object(g.jsx)(u.Text,{as:"span",children:n}),("undefined"!==typeof i||"undefined"!==typeof r)&&" \xb7 ","undefined"!==typeof i&&Object(g.jsx)(u.Text,{as:"span",children:Object(T.localeMoment)(i).format("DD/MM/YYYY")})," - ","undefined"!==typeof r&&Object(g.jsx)(u.Text,{as:"span",children:Object(T.localeMoment)(r).format("DD/MM/YYYY")})]})}),Object(g.jsx)(Lt.b,{customFields:s,customFieldsConfiguration:c.trainingFields,shouldHideUndefined:!0})]}))},Ft=n(140),Ut=n(745),Nt=n(96),zt=["icon","title","suggestionType","searchQuery","render"],Wt={Skill:l.SearchType.SkillAndLibrary,Job:l.SearchType.Job},qt=function(e){e.icon,e.title;var t=e.suggestionType,n=e.searchQuery,i=(e.render,Object(k.a)(e,zt)),r=Object(l.useSearchSuggestionsQuery)({variables:{searchType:Wt[t],searchQuery:n}}),a=r.data;r.loading,Object(s.useMemo)((function(){var e;return((null===a||void 0===a||null===(e=a.search)||void 0===e?void 0:e.nodes)||[]).map((function(e){return e.node}))}),[a]);return Object(g.jsx)(u.Box,Object(S.a)({borderRadius:2,bg:"primary"},i))},Ht=["text","isEditable","placeholder","icon","iconSize","iconTitle","isFixedWidth","fontSize","fontWeight","maxWidth","onChange"],Vt=function(e){var t=e.text,n=e.isEditable,i=e.placeholder,r=void 0===i?"-":i,a=e.icon,s=e.iconSize,o=void 0===s?24:s,c=e.iconTitle,l=e.isFixedWidth,d=void 0!==l&&l,b=e.fontSize,j=e.fontWeight,f=void 0===j?"bold":j,p=e.maxWidth,O=void 0===p?"auto":p,m=e.onChange,h=Object(k.a)(e,Ht),v=Object(u.useTranslate)(),x="-";return"string"===typeof t&&""!==t.trim()&&(x=t),Object(g.jsxs)(u.Box,Object(S.a)(Object(S.a)({display:"flex",flexDirection:"row",alignItems:"center",width:"100%"},h),{},{children:[a&&(c?Object(g.jsx)(u.Tooltip,{position:"top",title:c,children:Object(g.jsx)(u.Icon,{as:a,size:o,mr:1})},c):Object(g.jsx)(u.Icon,{as:a,size:o,mr:1})),Object(g.jsx)(u.Box,{flexGrow:1,children:Object(g.jsx)(u.TextEditable,{value:x,placeholder:r,isFixedWidth:d,onSubmit:m,readOnly:!n,tooltipText:v("edit"),fontSize:b,fontWeight:f,maxWidth:O,width:"100%"})})]}))},Gt=["jobs","userTitle","userId","isEditable","onChange"],Jt=Object(re.default)(Ft.Link)((function(e){return{textDecoration:"none",":hover":{background:e.theme.colors.grey[1],borderRadius:2}}})),Qt=function(e){var t=e.name,n=e.linkToJob,i=Object(u.useTranslate)();return Object(g.jsx)(u.Tooltip,{title:i("go_to_job"),position:"bottom",children:Object(g.jsxs)(u.Line,{as:Jt,to:n,mr:1,mb:0,p:0,children:[Object(g.jsx)(u.Icon,{as:Ut.a,size:16,mr:0}),Object(g.jsx)(u.Text,{fontWeight:"bold",fontSize:"small",children:t})]})})},Zt=function(e){var t=e.jobs,n=void 0===t?[]:t,i=e.userTitle,r=e.userId,a=e.isEditable,s=void 0!==a&&a,o=(e.onChange,Object(k.a)(e,Gt)),c=Object(u.useTranslate)({capitalize:!0}),d=Object(l.useUpdateUserTitleMutation)(),b=Object(E.a)(d,1)[0],j=function(){var e=Object(C.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b({variables:{id:r,title:t}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)(u.Box,Object(S.a)(Object(S.a)({pl:0},o),{},{children:[(s||!s&&!!i)&&Object(g.jsx)(Vt,{icon:Nt.a,text:i||"",placeholder:c("add_user_jobtitle"),onChange:j,isEditable:s,mb:2,pl:0}),n.length>0&&Object(g.jsxs)(u.Box,{display:"flex",flexWrap:"wrap",mt:0,children:[Object(g.jsx)(u.Text,{color:"grey.6",textTransform:"uppercase",fontWeight:"semiBold",mr:1,mb:0,p:0,children:c("two_points",{phrase:c("linked_job",n.length)})}),n.map((function(e){return Object(g.jsx)(Qt,{name:e.name,linkToJob:O.b.USER_PROFILE_JOBS_JOB_DETAILS.getRoute({userId:r,jobId:e.id})},e.id)}))]}),Object(g.jsx)(qt,{searchQuery:"test",suggestionType:"Job",render:function(e){e.foundObjects;return Object(g.jsx)(g.Fragment,{})}})]}))},Yt=n(188);!function(e){e.UPCOMING="upcoming",e.ONGOING="ongoing",e.PAST="past"}(Ct||(Ct={})),function(e){e.Simulated="simulated",e.Provisional="provisional",e.Planned="planned",e.Confirmed="confirmed",e.Completed="completed"}(Et||(Et={}));var Kt=n(804),Xt=n(813),$t=["placeLabel","startDate","endDate","customer"],en=["icon","text","iconSize"],tn=function(e){var t=e.icon,n=e.text,i=e.iconSize,r=void 0===i?16:i,a=Object(k.a)(e,en);return Object(g.jsxs)(u.Line,Object(S.a)(Object(S.a)({},a),{},{children:[Object(g.jsx)(u.Icon,{as:t,mr:1,size:r}),Object(g.jsx)(u.Text,{fontSize:12,fontWeight:"semiBold",children:n})]}))},nn=function(e){var t=e.placeLabel,n=e.startDate,i=e.endDate,r=e.customer,a=Object(k.a)(e,$t),s=Object(u.useTranslate)();return Object(g.jsxs)(u.Box,Object(S.a)(Object(S.a)({width:"100%"},a),{},{children:[n&&i&&Object(g.jsx)(tn,{text:s("from_date_to_date",{start_date:Object(T.localeMoment)(n).format("DD/MM/YYYY"),end_date:Object(T.localeMoment)(i).format("DD/MM/YYYY")}),icon:Xt.a,mr:1,mb:1}),Object(g.jsxs)(u.Line,{children:[t&&Object(g.jsx)(tn,{text:t,icon:Kt.a,mr:3}),r&&Object(g.jsx)(tn,{text:Object(ne.maj)(r),icon:Nt.a})]})]}))},rn=["must","should"],an=function(e){var t=e.must,n=void 0===t?[]:t,i=e.should,r=void 0===i?[]:i,a=Object(k.a)(e,rn),s=[].concat(Object(Yt.a)(n),Object(Yt.a)(r)).map((function(e){var t=e.skill;return{key:t.id,name:t.name,logo:t.logo,color:t.color}}));return Object(g.jsx)(u.Line,Object(S.a)(Object(S.a)({display:"flex",flexDirection:"row",flexWrap:"wrap"},a),{},{children:s.map((function(e){return Object(g.jsx)(j.SkillBrick,{skill:e,mb:0,mr:0},e.key)}))}))},sn=["userId"],on=Object(re.default)(u.Text)((function(e){return{fontWeight:"bold",color:e.theme.colors.primary,textTransform:"uppercase",padding:0,":hover":{textDecoration:"underline",background:"none"}}}));function cn(e){var t=Object.assign({},e),n=Object(u.useTranslate)();return Object(g.jsx)(u.Line,Object(S.a)(Object(S.a)({},t),{},{display:"flex",children:Object(g.jsx)(u.Text,{color:"grey.6",children:n("no_staffing_project")})}))}var ln,un=function(e){var t=e.userId,n=Object(k.a)(e,sn),i=Object(l.useGetProjectAssignmentsQuery)({variables:{userId:t}}),r=i.data,a=i.loading,o=Object(s.useMemo)((function(){var e;return(Object(Yt.a)(Object(l.maybeToOptional)(null===r||void 0===r||null===(e=r.projectAssignments)||void 0===e?void 0:e.nodes)||[])||[]).sort((function(e,t){var n=new Date(e.projectNeed.startDate).getTime(),i=new Date(e.projectNeed.endDate).getTime(),r=new Date(t.projectNeed.startDate).getTime(),a=new Date(t.projectNeed.endDate).getTime();return i>a||i===a&&n>r?-1:i<a||i===a&&n<r?1:0}))}),[r]);return a?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(u.LoaderSkeleton.Line,{width:"66%",mb:1}),Object(g.jsx)(u.LoaderSkeleton.Line,{width:"33%",mb:1}),Object(g.jsx)(u.LoaderSkeleton.Line,{width:"50%",mb:1})]}):Object(g.jsx)(u.Box,Object(S.a)(Object(S.a)({},n),{},{children:Object(g.jsx)(u.Box,{children:o.length>0?o.map((function(e){var t;return Object(g.jsxs)(u.Box,{mb:3,children:[Object(g.jsxs)(u.Column,{mb:3,children:[Object(g.jsx)(u.Desktop,{children:Object(g.jsxs)(u.Line,{display:"flex",width:"100%",mb:2,children:[Object(g.jsx)(u.Text,{fontWeight:"bold",mr:1,children:Object(ne.maj)(e.projectNeed.name)}),Object(g.jsxs)(u.Text,{fontWeight:"bold",children:["@",Object(ne.maj)(e.project.name)]}),Object(g.jsx)(j.ProjectStatus,{status:e.project.status,ml:2})]})}),Object(g.jsx)(u.Mobile,{children:Object(g.jsxs)(u.Column,{alignItems:"flex-start",mb:2,children:[Object(g.jsxs)(u.Line,{display:"flex",width:"100%",mb:0,children:[Object(g.jsx)(u.Text,{fontWeight:"bold",mr:1,children:Object(ne.maj)(e.projectNeed.name)}),Object(g.jsxs)(u.Text,{fontWeight:"bold",children:["@",Object(ne.maj)(e.project.name)]})]}),Object(g.jsx)(u.Line,{width:"100%",display:"flex",justifyContent:"flex-end",children:Object(g.jsx)(j.ProjectStatus,{status:e.project.status})})]})}),Object(g.jsx)(nn,{placeLabel:null===(t=e.project.place)||void 0===t?void 0:t.label,startDate:e.projectNeed.startDate,endDate:e.projectNeed.endDate,customer:e.project.customer}),Object(g.jsx)(an,{must:e.projectNeed.must,should:e.projectNeed.should}),e.projectNeed.description&&Object(g.jsx)(u.BlockExpandable,{width:"100%",mt:2,showMoreRender:function(e){var t=e.onClick,n=e.t;return Object(g.jsx)(u.Box,{display:"flex",onClick:t,children:Object(g.jsx)(on,{onClick:t,mt:0,children:n("more_details")})})},children:e.projectNeed.description})]}),Object(g.jsx)(u.Separator,{width:"100%"})]},e.id)})):Object(g.jsx)(cn,{})})}))},dn=n(850),bn=["title","titleId"];function jn(){return(jn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function fn(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pn(e,t){var n=e.title,i=e.titleId,r=fn(e,bn);return s.createElement("svg",jn({xmlns:"http://www.w3.org/2000/svg",width:"635.000000pt",height:"540.000000pt",viewBox:"0 0 635.000000 540.000000",preserveAspectRatio:"xMidYMid meet",ref:t,"aria-labelledby":i},r),n?s.createElement("title",{id:i},n):null,ln||(ln=s.createElement("g",{transform:"translate(0.000000,540.000000) scale(0.100000,-0.100000)",fill:"#2268C8",stroke:"none"},s.createElement("path",{d:"M278 5376 c-105 -38 -201 -127 -240 -224 l-23 -57 0 -2375 0 -2375 23 -57 c31 -76 105 -156 184 -199 l63 -34 2400 0 2400 0 62 34 c77 41 146 113 181 189 l27 57 0 2385 0 2385 -27 57 c-35 76 -109 153 -183 192 l-60 31 -2385 2 c-1945 2 -2392 0 -2422 -11z m1051 -735 c84 -26 137 -59 202 -128 63 -66 89 -111 114 -197 23 -77 16 -199 -14 -278 -96 -249 -387 -368 -624 -255 -294 139 -358 521 -126 747 119 115 295 159 448 111z m2538 -1207 c45 -8 120 -28 167 -45 285 -103 437 -316 509 -714 22 -117 22 -139 22 -980 l0 -860 -395 0 -395 0 -6 780 c-5 710 -7 785 -23 840 -28 93 -66 162 -113 206 -65 60 -121 81 -235 87 -223 11 -360 -58 -438 -223 -64 -137 -64 -135 -70 -950 l-5 -740 -395 0 -395 0 -3 1278 -2 1277 385 0 385 0 0 -177 0 -178 27 40 c135 202 357 342 590 374 84 12 280 4 390 -15z m-2269 -1321 l-3 -1278 -395 0 -395 0 -3 1278 -2 1277 400 0 400 0 -2 -1277z"}),s.createElement("path",{d:"M5813 695 c-43 -21 -87 -53 -109 -78 -146 -167 -114 -425 66 -546 73 -48 140 -65 235 -59 272 18 423 327 274 560 -37 57 -74 90 -143 125 -43 23 -67 28 -151 31 -99 4 -101 3 -172 -33z m290 -28 c74 -34 131 -88 164 -155 24 -48 28 -70 28 -137 0 -66 -5 -90 -27 -137 -117 -250 -466 -252 -588 -3 -34 68 -35 197 -4 266 77 166 266 240 427 166z"}),s.createElement("path",{d:"M5850 370 l0 -190 25 0 c25 0 25 1 25 85 l0 85 34 0 c31 0 37 -6 87 -85 47 -74 57 -85 82 -85 32 0 34 -6 -34 97 l-48 71 27 7 c65 16 96 83 68 148 -20 48 -45 57 -167 57 l-99 0 0 -190z m202 133 c10 -9 18 -30 18 -49 0 -47 -29 -64 -107 -64 l-63 0 0 65 0 65 67 0 c48 0 72 -5 85 -17z"}))))}var On,mn,hn=s.forwardRef(pn),vn=(n.p,["title","titleId"]);function xn(){return(xn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function gn(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function yn(e,t){var n=e.title,i=e.titleId,r=gn(e,vn);return s.createElement("svg",xn({id:"Icon",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 24 24",style:{enableBackground:"new 0 0 24 24"},xmlSpace:"preserve",ref:t,"aria-labelledby":i},r),n?s.createElement("title",{id:i},n):null,On||(On=s.createElement("style",{type:"text/css"},"\r\n\t.st0{fill:#FAB922;}\r\n\t.st1{fill:#1E85C4;}\r\n")),mn||(mn=s.createElement("g",null,s.createElement("g",{id:"Groupe_2604",transform:"translate(0 0)"},s.createElement("path",{id:"path900",className:"st0",d:"M18.3,6c0,1.3-0.5,2.6-1.4,3.6c-1.5,1.6-3,3.2-4.7,4.6c-0.1,0.1-0.3,0.3-0.4,0.4 c-0.4,0.4-0.4,0.4-0.8,0c-1-1-2.1-2-3.2-2.9c-1.1-1-2.1-2.2-2.9-3.5c-1.1-2-0.3-4.6,1.8-5.7c1.3-0.7,2.9-0.7,4.2,0 c0.3,0.2,0.6,0.2,0.8,0c2.1-1.1,4.8-0.4,6,1.7C18.2,4.8,18.4,5.4,18.3,6L18.3,6z M6.1,6.3c0.1,0.7,0.3,1.4,0.8,2 c1.2,1.5,2.5,2.8,3.9,4c0.2,0.2,0.4,0.5,0.7,0.5s0.5-0.3,0.7-0.5c1.2-1,2.4-2.2,3.4-3.4c1-0.9,1.4-2.2,1.1-3.5 c-0.3-1.1-1.4-1.9-2.6-2c-0.9,0-1.7,0.3-2.3,1c-0.2,0.3-0.4,0.3-0.7,0c-0.3-0.4-0.8-0.7-1.4-0.9c-1.5-0.5-3,0.3-3.5,1.7 C6.1,5.6,6.1,5.9,6.1,6.3L6.1,6.3z"})),s.createElement("g",null,s.createElement("path",{className:"st1",d:"M8.4,20.4c0,0.5-0.2,0.9-0.6,1.2C7.4,21.9,6.9,22,6.2,22c-0.6,0-1.2-0.1-1.7-0.3v-1.1c0.4,0.2,0.8,0.3,1,0.3 C5.8,21,6.1,21,6.3,21c0.3,0,0.5,0,0.6-0.1c0.1-0.1,0.2-0.2,0.2-0.4c0-0.1,0-0.2-0.1-0.3C7,20.1,6.9,20,6.8,19.9 c-0.1-0.1-0.4-0.2-0.8-0.4c-0.4-0.2-0.6-0.3-0.8-0.5C5,19,4.8,18.8,4.7,18.6c-0.1-0.2-0.2-0.4-0.2-0.7c0-0.5,0.2-0.9,0.5-1.1 c0.4-0.3,0.9-0.4,1.5-0.4c0.3,0,0.6,0,0.9,0.1c0.3,0.1,0.6,0.2,0.9,0.3L8,17.7c-0.3-0.1-0.6-0.2-0.8-0.3c-0.2,0-0.4-0.1-0.6-0.1 c-0.2,0-0.4,0.1-0.6,0.2c-0.1,0.1-0.2,0.2-0.2,0.4c0,0.1,0,0.2,0.1,0.3c0.1,0.1,0.1,0.1,0.2,0.2c0.1,0.1,0.4,0.2,0.8,0.4 c0.6,0.2,0.9,0.5,1.2,0.7C8.3,19.8,8.4,20.1,8.4,20.4z"}),s.createElement("path",{className:"st1",d:"M13.2,21.9l-0.4-1.3h-2.2l-0.4,1.3H8.8l2.1-5.5h1.6l2.1,5.5H13.2z M12.5,19.7c-0.4-1.2-0.6-1.8-0.7-2 c-0.1-0.2-0.1-0.3-0.1-0.4c-0.1,0.3-0.4,1.1-0.8,2.4H12.5z"}),s.createElement("path",{className:"st1",d:"M19.5,18.2c0,0.6-0.2,1-0.6,1.3c-0.4,0.3-1,0.5-1.7,0.5h-0.5v1.9h-1.3v-5.5h1.9c0.7,0,1.3,0.1,1.7,0.4 C19.3,17.2,19.5,17.6,19.5,18.2z M16.6,19H17c0.4,0,0.7-0.1,0.9-0.2c0.2-0.1,0.3-0.3,0.3-0.6c0-0.3-0.1-0.5-0.2-0.6 c-0.2-0.1-0.4-0.2-0.8-0.2h-0.6V19z"})))))}var Sn,kn=s.forwardRef(yn),wn=(n.p,n(104)),In=n(890),Cn=["title","titleId"];function En(){return(En=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function Tn(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ln(e,t){var n=e.title,i=e.titleId,r=Tn(e,Cn);return s.createElement("svg",En({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 1000",ref:t,"aria-labelledby":i},r),n?s.createElement("title",{id:i},n):null,s.createElement("text",{style:{lineHeight:"125%",InkscapeFontSpecification:"Roboto"},x:439.921,y:215.198,fontWeight:400,fontSize:10,fontFamily:"Roboto",letterSpacing:0,wordSpacing:0,transform:"translate(0 -52.362)"}),Sn||(Sn=s.createElement("path",{d:"M436.001 847.938v-58.001H468.002V738.18l-9.5-1.259c-71.146-9.46-135.173-41.34-186.515-92.874-46.24-46.413-74.453-98.366-88.267-162.539-5.238-24.336-7.208-79.67-3.801-106.744 11.5-91.365 65.51-177.403 143.08-227.932 111.43-72.583 255.062-70.1 364.002 6.288 14.021 9.833 48.179 41.524 60.049 55.714 38.76 46.338 64.802 104.897 72.82 163.748 4.468 32.808 1.505 92.9-5.937 120.356-16.968 62.589-46.493 113.92-89.207 155.082-50.871 49.027-112.864 79.09-183.226 88.847l-9.5 1.311v51.756h32v116.001H436v-58zm104.58-186.982c50.012-8.723 97.562-33.085 132.59-67.932 43.324-43.104 67.673-94.84 73.287-155.715 11.651-126.326-78.19-242.555-204.456-264.511-28.016-4.869-76.102-3.11-102.267 3.74-87.356 22.881-155.625 90.19-178.914 176.395-29.014 107.4 18.78 221.534 116.723 278.733 23.733 13.862 58.712 26.097 86.086 30.112 18.977 2.784 58.695 2.358 76.952-.828zm-80.579-42.659c-37.755-7.894-72.424-25.885-100.5-52.155l-7.5-7.02V504.853l48.262-9.596c26.544-5.279 48.931-8.859 49.749-7.958.819.9 9.32 13.788 18.896 28.637 24.23 37.578 29.93 45.993 31.165 45.998.592 0 12.202-17.085 25.807-37.971l24.735-37.975 7.32 1.17c4.023.648 25.712 4.908 48.193 9.475l40.874 8.302.558 26.809c.654 31.262 1.804 28.98-24.56 48.788-19.912 14.962-50.675 29.905-73 35.461-24.21 6.027-66.962 7.12-90 2.305zm12.367-175.447c-37.22-12.681-60.367-44.913-60.367-84.065 0-71.22 78.07-112.551 137.56-72.825 40.982 27.366 51.11 86.184 21.581 125.32-24.064 31.896-62.117 44.056-98.774 31.57zM50.001 825.436c0-.284-3.598-33.35-8-73.497-4.403-40.151-8-74.004-8-75.236 0-1.221-7.65-8.3-17.001-15.708L0 647.522V585.73c0-33.987.54-61.792 1.193-61.792.658 0 12.809-2.3 27.006-5.115 14.197-2.812 26.538-4.668 27.424-4.119.885.559 7.278 10.05 14.204 21.115 6.926 11.067 13.263 20.118 14.08 20.118.819 0 7.546-9.449 14.953-20.997 7.406-11.551 14.247-21 15.201-21 .956 0 12.805 2.248 26.334 4.999 13.53 2.75 25.276 5 26.102 5 .829 0 1.505 27.906 1.505 62.009v62.011l-11.273 8.49c-6.2 4.673-13.797 10.74-16.882 13.49l-5.607 5.002-7.113 66.997c-3.91 36.853-7.62 70.827-8.241 75.502l-1.127 8.5H83.881c-18.632 0-33.878-.236-33.878-.501zm191.116-7.998c-.62-4.677-2.954-25.601-5.18-46.501-2.23-20.899-4.925-45.117-5.993-53.818-1.07-8.699-1.94-18.471-1.94-21.715v-5.895l11.8 10.923c16.118 14.921 46.862 37.805 63.47 47.245l13.73 7.798-.63 9.733c-.332 5.35-1.922 20.503-3.499 33.67-1.576 13.165-2.868 24.644-2.868 25.5 0 .862-15.245 1.567-33.878 1.567h-33.877l-1.132-8.501zm448.885 7.404c0-2.476-6.128-56.378-7.062-62.12-.956-5.868-.284-6.637 11.974-13.81 15.884-9.288 45.424-31.316 63.59-47.42 11.015-9.765 13.5-11.216 13.5-7.884 0 4.043-10.96 107.466-13.122 123.83l-1.122 8.5h-33.878c-18.633 0-33.878-.482-33.878-1.097zm191.122-7.404c-1.145-8.638-6.272-55.375-12.238-111.501-2.144-20.176-4.289-32.048-6.143-34-1.567-1.651-8.899-7.52-16.294-13.044l-13.446-10.045-.53-62.457c-.284-34.35.095-62.454.895-62.454.781 0 13.092-2.348 27.354-5.22l25.932-5.22 3.63 4.72c1.998 2.594 8.283 12.146 13.967 21.222 5.684 9.073 11.009 16.498 11.833 16.498.824 0 7.199-9.106 14.166-20.238 6.968-11.131 13.632-20.609 14.81-21.06 1.179-.474 13.346 1.458 27.04 4.241 13.693 2.784 25.573 5.06 26.4 5.06.828 0 1.5 27.764 1.5 61.698v61.698l-17 13.317c-9.735 7.625-17 14.807-17 16.802 0 1.918-2.248 23.736-4.999 48.486-2.75 24.749-5.936 53.548-7.08 63.999-1.146 10.45-2.6 22.826-3.23 27.5l-1.145 8.502h-67.3l-1.127-8.501zM66 489.321c-10.406-3.28-27.174-20.9-30.069-31.603-3.54-13.077-1.415-31.892 4.79-42.486 13.02-22.216 46.98-30.374 68.884-16.547 34.598 21.84 32.077 71.476-4.492 88.501-11.095 5.168-26.774 6.026-39.112 2.135zm830.554-.7c-10.425-3.693-24.865-19.184-28.173-30.222-6.129-20.457-1.037-39.992 13.96-53.539 10.455-9.445 19.048-12.933 31.866-12.933 15.166 0 25.012 3.682 35.82 13.4 20.172 18.136 21.795 49 3.66 69.653-13.659 15.555-36.393 20.985-57.134 13.64z"})))}var _n=s.forwardRef(Ln),An=(n.p,n(893)),Pn=n(760),Dn=n(857),Mn=["value","isEditable","icon","iconTitle","isFixedWidth","iconSize","fontSize","fontWeight","maxWidth","onChange"],Rn=function(e){var t=e.value,n=e.isEditable,i=e.icon,r=e.iconTitle,a=e.isFixedWidth,s=e.iconSize,o=void 0===s?24:s,c=e.fontSize,d=e.fontWeight,b=e.maxWidth,f=e.onChange,p=Object(k.a)(e,Mn);return Object(l.getIsFieldValueReadingAllowed)(t.label)?Object(g.jsxs)(u.Box,Object(S.a)(Object(S.a)({display:"flex",flexDirection:"row",alignItems:"center"},p),{},{children:[i&&(r?Object(g.jsx)(u.Tooltip,{position:"top",title:r,children:Object(g.jsx)(u.Icon,{as:i,size:o,mr:1})},r):Object(g.jsx)(u.Icon,{as:i,size:o,mr:1})),Object(g.jsx)(j.SearchLocationEditable,{value:t,placeholder:"-",fontSize:c,isFixedWidth:a,fontWeight:d,maxWidth:b,onSubmit:f,readOnly:!n})]})):null},Bn=["userId","isEditable","isGenerateAuthorized"],Fn=["groups","limit"],Un=["user"],Nn=["managers","limit"],zn=["hrManagers","limit"],Wn=["socialAccounts"],qn=["projects","limit"];function Hn(e){var t=e.user,n=e.isEditable,i=e.isGenerateAuthorized,r=e.loading,a=e.onUpdateTitle,o=e.onUpdateLocation,c=e.onUpdateAvatar,l=e.addons,d=e.onSelectAddon,b=Object(u.useTranslate)(),p=Object(f.useAppContext)(),m=p.checkLayout,h=p.checkModule,v=p.user,x=Object(u.useResponsive)(),y=x.isTabletOrMobile,S=x.isDesktop,k=(Object(s.useMemo)((function(){return S?{display:"flex",flexDirection:"column",ml:2,justifyContent:"flex-start"}:y?{display:"flex",flexDirection:"row",mt:2}:void 0}),[y,S]),function(e){return function(){d(e)}});return r||"undefined"===typeof t?Object(g.jsx)(Dn.c,{}):Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(u.Line,{width:"100%",display:"flex",flexWrap:"wrap",alignItems:"flex-start",justifyContent:"space-between",children:[Object(g.jsxs)(u.Line,{display:"flex",flexWrap:"wrap",children:[Object(g.jsx)(Pn.d,{user:{displayName:t.displayName,familyName:t.familyName,givenName:t.givenName,avatarURL:t.avatarURL},readOnly:!n,onChangeAvatar:c}),Object(g.jsxs)(u.Box,{ml:2,maxWidth:"230px",children:[Object(g.jsxs)(u.Line,{alignItems:"center",width:"100%",children:[Object(g.jsx)(u.Box,{width:"100%",children:Object(g.jsx)(u.TextWithAutoTooltipOnEllipsis,{tooltipTitle:t.displayName,textAlign:"start",fontSize:"big",fontWeight:"bold",children:t.displayName})}),Object(g.jsx)(Yn,{socialAccounts:t.socialAccounts,ml:0})]}),Object(g.jsx)(Vt,{icon:Nt.a,iconSize:16,iconTitle:b("current_position"),fontSize:"small",fontWeight:"semiBold",width:"180px",text:t.title,onChange:a,isEditable:n,isFixedWidth:!0,mt:0}),Object(g.jsx)(Rn,{icon:Kt.a,width:"180px",iconSize:16,iconTitle:b("location"),isFixedWidth:!0,fontSize:"small",fontWeight:"semiBold",value:t.place,onChange:o,isEditable:n,mt:0})]})]}),m("availabilities")&&(t.projects.length>0||t.nextAvailability)&&Object(g.jsxs)(u.Box,{minWidth:"100px",maxWidth:"240px",ml:2,children:[h(f.AppModule.STAFFING)&&Object(g.jsx)($n,{my:1,projects:t.projects,limit:1}),m("availabilities")&&t.nextAvailability&&Object(g.jsx)(j.NextAvailability,{date:t.nextAvailability,textSize:"small",pl:"0px"})]}),Object(g.jsxs)(u.Box,{ml:2,minWidth:"100px",maxWidth:"240px",children:[Object(g.jsx)(Vn,{groups:t.groups,limit:1,mt:1}),Object(g.jsx)(u.Box,{mt:2,children:Object(g.jsx)(Jn,{managers:t.managers,limit:3,p:0})}),t.hrManagers.length>0&&Object(g.jsx)(u.Box,{mt:2,children:Object(g.jsx)(Qn,{hrManagers:t.hrManagers,limit:3,p:0})})]}),S&&Object(g.jsxs)(u.Column,{ml:2,children:[(null===t||void 0===t?void 0:t.id)!==v.id&&"undefined"!==t.email&&void 0!==t.email&&"{****}"!==t.email&&Object(g.jsx)(u.Button,{as:"a",appearance:"outline",href:"mailto:".concat(t.email),target:"_blank",fontWeight:"semiBold",color:"primary",textTransform:"uppercase",children:b("contact")}),i&&Object(g.jsx)(u.Button,{as:"a",appearance:"clean",href:O.b.RESUME_BUILDER.getRoute({userId:t.id}),target:"_blank",fontWeight:"semiBold",color:"primary",textTransform:"uppercase",mt:1,children:b("build_resume")}),"undefined"!==typeof l&&l.map((function(e){return Object(g.jsx)(ce,{appearance:"clean",mt:1,onClick:k(e.id),children:e.title},e.id)}))]}),y&&Object(g.jsxs)(u.Line,{mt:2,width:"100%",flexWrap:"wrap",children:[(null===t||void 0===t?void 0:t.id)!==v.id&&"undefined"!==t.email&&void 0!==t.email&&"{****}"!==t.email&&Object(g.jsx)(u.Button,{as:"a",appearance:"outline",href:"mailto:".concat(t.email),target:"_blank",fontWeight:"semiBold",color:"primary",textTransform:"uppercase",mr:1,mb:1,children:b("contact")}),i&&Object(g.jsx)(u.Button,{as:"a",appearance:"clean",href:O.b.RESUME_BUILDER.getRoute({userId:t.id}),target:"_blank",fontWeight:"semiBold",color:"primary",textTransform:"uppercase",mr:1,mb:1,children:b("build_resume")}),"undefined"!==typeof l&&l.map((function(e){return Object(g.jsx)(ce,{appearance:"clean",isCentered:!1,onClick:k(e.id),mr:1,mb:1,children:e.title},e.id)}))]})]})})}function Vn(e){var t=e.groups,n=e.limit,i=Object(k.a)(e,Fn),r=t.map((function(e){return e.name})).slice(0,n),a=t.slice(n),s=Object(u.useTranslate)();return Object(g.jsxs)(u.Line,Object(S.a)(Object(S.a)({display:"flex",alignItems:"center",width:"100%"},i),{},{children:[Object(g.jsx)(u.Tooltip,{position:"top",title:s("groups_title"),children:Object(g.jsx)(u.Icon,{as:dn.a,size:16,mr:1})},"groupsTitleTooltip"),0===t.length?Object(g.jsx)(u.Text,{fontSize:"small",fontWeight:"semiBold",children:"-"}):Object(g.jsx)(u.Box,{width:"100%",children:Object(g.jsx)(u.TextWithAutoTooltipOnEllipsis,{fontSize:"small",fontWeight:"bold",rows:2,tooltipTitle:r.join(", "),children:r.join(", ")})}),a.length>0&&Object(g.jsx)(u.Tooltip,{title:Object(g.jsx)(u.Box,{as:"ul",children:a.map((function(e){return Object(g.jsx)(u.Text,{as:"li",color:"white",children:e.name},e.id)}))}),position:"right",children:Object(g.jsx)(u.CircleIndicator,{text:"+".concat(a.length),ml:1})})]}))}function Gn(e){var t=e.user,n=Object(k.a)(e,Un);return Object(g.jsxs)(u.Line,Object(S.a)(Object(S.a)({},n),{},{children:[Object(g.jsx)(j.UserAvatar,{linkTo:O.b.USER_PROFILE_DETAILS.getRoute({userId:t.id}),size:26,user:t,mr:1}),Object(g.jsx)(u.Text,{fontSize:"small",fontWeight:"semiBold",children:t.displayName})]}))}function Jn(e){var t=e.managers,n=e.limit,i=Object(k.a)(e,Nn),r=Object(u.useSwitch)(!1),a=r.active,s=r.on,o=r.off,c=t.slice(n),l=Object(u.useTranslate)();return Object(g.jsxs)(u.Line,{alignItems:"center",children:[Object(g.jsx)(u.Tooltip,{position:"top",title:l("managers_title"),children:Object(g.jsx)(u.Icon,{as:In.a,mr:1,size:16})},"managersIconTooltip"),0===t.length?Object(g.jsx)(u.Text,{fontSize:"small",fontWeight:"semiBold",children:"-"}):Object(g.jsx)(u.Popover,{isOpened:a,onClose:o,content:Object(g.jsx)(u.Card,{boxShadow:"small",p:2,bg:"white",children:c.map((function(e){return Object(g.jsx)(Gn,Object(S.a)({user:e},i),e.id)}))}),children:Object(g.jsx)(tt.a,{users:t,maxDisplayCount:n,isLink:!0,size:26,offLimitTooltipPosition:"right",onClick:s})})]})}function Qn(e){var t=e.hrManagers,n=e.limit,i=Object(k.a)(e,zn),r=Object(u.useSwitch)(!1),a=r.active,s=r.on,o=r.off,c=t.slice(n),l=Object(u.useTranslate)();return Object(g.jsxs)(u.Line,{alignItems:"center",children:[Object(g.jsx)(u.Tooltip,{position:"top",title:l("hrManagers_title"),children:Object(g.jsx)(u.Icon,{as:_n,mr:1,size:16})},"hrManagersIconTooltip"),0===t.length?Object(g.jsx)(u.Text,{fontSize:"small",fontWeight:"semiBold",children:"-"}):Object(g.jsx)(u.Popover,{isOpened:a,onClose:o,content:Object(g.jsx)(u.Card,{boxShadow:"small",p:2,bg:"white",children:c.map((function(e){return Object(g.jsx)(Gn,Object(S.a)({user:e},i),e.id)}))}),children:Object(g.jsx)(tt.a,{users:t,maxDisplayCount:n,isLink:!0,size:26,offLimitTooltipPosition:"right",onClick:s})})]})}var Zn={linkedin:{icon:hn,title:"LinkedIn"},successfactors:{icon:kn,title:"SuccessFactors",size:24}};function Yn(e){var t=e.socialAccounts,n=void 0===t?[]:t,i=Object(k.a)(e,Wn),r=n.filter((function(e){return Object.keys(Zn).includes(e.socialNetwork)}));return r.length?Object(g.jsx)(u.Line,Object(S.a)(Object(S.a)({},i),{},{children:r.map((function(e){return Object(g.jsx)(u.IconButton,{as:"a",target:"_blank",href:e.profileUrl,iconAs:Zn[e.socialNetwork].icon,iconSize:Zn[e.socialNetwork].size,title:Zn[e.socialNetwork].title||e.socialNetwork},"".concat(e.socialNetwork,"_").concat(e.profileId))}))})):null}var Kn=Object(re.default)(u.Text)((function(){return{textDecoration:"underline"}})),Xn=Object(re.default)(u.Icon)((function(){return{position:"relative",top:1}})),$n=function(e){var t=e.projects,n=e.limit,i=Object(k.a)(e,qn),r=Object(u.useTranslate)({capitalize:!0}),a=t.slice(0,n),s=t.slice(n);return Object(g.jsxs)(u.Box,Object(S.a)(Object(S.a)({display:"flex",flexDirection:"column"},i),{},{children:[0===t.length&&Object(g.jsxs)(u.Box,{display:"flex",position:"relative",alignItems:"flex-start",children:[Object(g.jsx)(Xn,{as:wn.a,size:16,mr:0}),Object(g.jsx)(u.Text,{fontSize:"small",color:"grey.5",children:r("no_affected_project")})]}),t.length>0&&a.map((function(e){return Object(g.jsxs)(u.Box,{display:"flex",position:"relative",alignItems:"flex-start",children:[Object(g.jsx)(u.Tooltip,{position:"top",title:r("user_current_assignments_title"),children:Object(g.jsx)(Xn,{as:wn.a,size:16,mr:0})},"userProjectsTitleTooltip"),Object(g.jsxs)(u.Box,{width:"100%",children:[Object(g.jsx)(u.TextWithAutoTooltipOnEllipsis,{tooltipTitle:e.name,fontWeight:"semiBold",fontSize:"small",children:e.name}),s.length>0&&Object(g.jsx)(u.Tooltip,{title:Object(g.jsx)(u.Box,{as:"ul",children:s.map((function(e){return Object(g.jsx)(u.Text,{as:"li",color:"white",children:e.name},e.id)}))}),position:"right",children:Object(g.jsx)(Kn,{fontWeight:"semiBold",fontSize:"small",children:"+".concat(r("num_staffing_project",{smart_count:s.length}))})})]})]},e.id)}))]}))},ei=function(e){var t=e.userId,n=e.isEditable,i=e.isGenerateAuthorized,r=Object(k.a)(e,Bn),a=Object(f.useAppContext)().user,o=Object(l.useGetUserInfoQuery)({variables:{id:t},fetchPolicy:"cache-first",nextFetchPolicy:"cache-only"}),c=o.data,d=o.loading,b=o.refetch,p=Object(An.c)({userLocale:a.locale}),O=p.addons,m=p.isLoading,h=p.close,v=p.isOpened,x=p.requestsHandlers,y=p.selectAddon,w=p.addonData,T=Object(s.useMemo)((function(){var e=null===c||void 0===c?void 0:c.user;if(e){var t,n,i,r,a,s,o=[];e.socialAccounts.forEach((function(e){e&&o.push({profileId:Object(l.maybeToOptional)(e.profileId),profileUrl:Object(l.maybeToOptional)(e.profileUrl),socialNetwork:e.socialNetwork})}));var u=null===c||void 0===c||null===(t=c.projectAssignments)||void 0===t?void 0:t.nodes,d=[];return u&&u.forEach((function(e){d.push({id:e.project.id,name:e.project.name})})),Object(S.a)(Object(S.a)({},Object(l.getFormatedUserBasicFragment)(e)),{},{email:Object(l.maybeToOptional)(e.email),groups:(e.groups.nodes||[]).map((function(e){return{id:e.id,name:e.name}})),managers:(e.managers.nodes||[]).map((function(e){return Object(l.getFormatedUserBasicFragment)(e)})),hrManagers:(e.hrManagers.nodes||[]).map((function(e){return Object(l.getFormatedUserBasicFragment)(e)})),nextAvailability:e.nextAvailability,place:{label:null===(n=e.place)||void 0===n?void 0:n.label,location:{longitude:(null===(i=e.place)||void 0===i||null===(r=i.location)||void 0===r?void 0:r.longitude)||0,latitude:(null===(a=e.place)||void 0===a||null===(s=a.location)||void 0===s?void 0:s.latitude)||0}},socialAccounts:o,title:Object(l.maybeToOptional)(e.title),projects:d.sort((function(e,t){return Object(ne.sortByName)(e,t,(function(e){return e.name.toLowerCase()}))}))})}}),[c]),L=Object(l.useUpdateUserTitleMutation)(),_=Object(E.a)(L,1)[0],A=Object(l.useUpdateUserPlaceMutation)(),P=Object(E.a)(A,1)[0],D=Object(l.useUpdateUserAvatarMutation)(),M=Object(E.a)(D,1)[0],R=Object(j.useUploadAvatar)(),B=function(){var e=Object(C.a)(I.a.mark((function e(n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_({variables:{id:t,title:n}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(C.a)(I.a.mark((function e(n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof n||"undefined"===typeof n.location){e.next=3;break}return e.next=3,P({variables:{id:t,place:{label:n.label,location:{latitude:n.location.latitude,longitude:n.location.longitude,altitude:n.location.altitude}}}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(C.a)(I.a.mark((function e(n){var i,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(n);case 2:return i=e.sent,r=i.avatar.url,e.next=6,M({variables:{id:t,avatarURL:r}});case 6:b();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(u.Card,Object(S.a)(Object(S.a)({as:u.Line,justifyContent:"space-between",boxShadow:"medium",py:25,px:35,alignItems:"flex-start"},r),{},{children:Object(g.jsx)(Hn,{user:T,isEditable:n,isGenerateAuthorized:i,loading:d||m,onUpdateTitle:B,onUpdateLocation:F,onUpdateAvatar:U,addons:O,onSelectAddon:function(e){y(e)}})})),Object(g.jsx)(An.b,{isOpened:v,onClose:h,aoData:w,requestsHandlers:x,userKey:(null===T||void 0===T?void 0:T.id)||""})]})},ti=["title","content"],ni=function(e){var t=e.title,n=e.content,i=Object(k.a)(e,ti);return Object(g.jsxs)(u.Box,Object(S.a)(Object(S.a)({},i),{},{children:[Object(g.jsx)(u.Text,{fontSize:"big",fontWeight:"bold",mb:2,children:Object(ne.maj)(t)}),n]}))},ii=["userId"],ri=o.a.createContext(null),ai=function(e){var t=e.userId,n=Object(k.a)(e,ii),i=Object(u.useTranslate)(),r=Object(l.useGetPinnedJobsQuery)({variables:{id:t,statuses:[l.PinJobStatusEnum.Have]}}),a=r.data,o=r.loading,c=Object(l.useUpdateUserTitleMutation)(),d=Object(E.a)(c,2),b=d[0],j=d[1].data,f=Object(s.useContext)(ri),p=function(){var e=Object(C.a)(I.a.mark((function e(n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b({variables:{id:t,title:n}});case 2:f&&f.onUpdateProfile();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(s.useMemo)((function(){var e,t;return(null===a||void 0===a||null===(e=a.user)||void 0===e||null===(t=e.pinnedJobs)||void 0===t?void 0:t.edges.map((function(e){var t;return{id:e.job.id,name:e.job.name,status:null===(t=e.data)||void 0===t?void 0:t.status}})).slice(0,5))||[]}),[a]),m=Object(s.useMemo)((function(){var e,t;return Object(l.maybeToOptional)((null===j||void 0===j||null===(e=j.updateUser.user)||void 0===e?void 0:e.title)||(null===a||void 0===a||null===(t=a.user)||void 0===t?void 0:t.title))}),[a]);return o||(null===O||void 0===O?void 0:O.length)>0||m?Object(g.jsx)(ni,Object(S.a)({title:i("current_position"),content:o?Object(g.jsx)(Dn.b,{}):Object(g.jsx)(Zt,{jobs:O,userId:t,userTitle:m,onChange:p,isEditable:null===f||void 0===f?void 0:f.isProfileEditable}),mb:4},n)):null},si=function(e){var t=e.tabsOptions,n=e.userId,i=Object(s.useState)(),r=Object(E.a)(i,2),a=r[0],d=r[1],b=Object(u.useTranslate)(),p=Object(c.useHistory)(),m=Object(u.useAlert)(),h=Object(u.useSwitch)(!1),v=Object(f.useAppContext)(),x=v.checkLayout,y=v.setTabsOptions,S=v.topBarHeight,k=v.user,w=v.usersManagedByMe,L=Object(s.useMemo)((function(){return k.id===n}),[n,k]),_=Object(s.useMemo)((function(){return w.map((function(e){return e.id}))}),[w]),A=Object(l.useGetUserProfileQuery)({variables:{id:n},fetchPolicy:"cache-first"}),P=A.data,D=A.loading,M=A.refetch,R=Object(s.useMemo)((function(){var e;return Object(l.maybeToOptional)(null===P||void 0===P||null===(e=P.user)||void 0===e?void 0:e.locale)}),[P]),B=Object(l.useGetUserAssessmentsAlertsLazyQuery)({variables:{userId:k.id,isAssessmentsRequired:_.length>0,usersManagedByMeIds:_},fetchPolicy:"network-only",nextFetchPolicy:"no-cache"}),F=Object(E.a)(B,2),U=F[0],N=F[1],z=N.data,W=(N.loading,Object(l.useUpdateUserHeadlineMutation)()),q=Object(E.a)(W,1)[0],H=Object(Ke.f)({userId:n}),V=H.isOpened,G=H.setSkillId,J=H.close,Q=H.skillId,Z=Object(Xe.b)(),Y=Z.createSkillReview,K=Z.navigateToSkill,X=Z.selectedSuggestedSkillId,$=Z.setSelectedSuggestedSkillId,ee=Object($e.d)({userId:n,isIgnoreSkillsWithAtLeastOneValuedQualifier:!0}),te=ee.changeComment,ne=ee.createReviews,ie=ee.isCreatingReviews,re=ee.isLoading,ae=ee.removeSkill,se=ee.reset,oe=ee.setSkillsIds,le=ee.updateQualifier,ue=ee.actualPowers,de=ee.skills,be=function(e){var t=e.isMyProfile,n=Object(s.useState)({pinnedJobsSkillsIdsToEvaluate:void 0,skillsIdsToEvaluate:void 0}),i=Object(E.a)(n,2),r=i[0],a=i[1],o=Object(l.useGetPinnedJobsSkillsAndPoweredSkillsLazyQuery)(),c=Object(E.a)(o,2),u=c[0],d=c[1].data;return Object(s.useEffect)((function(){t?u():a({skillsIdsToEvaluate:[],pinnedJobsSkillsIdsToEvaluate:[]})}),[t,u]),Object(s.useEffect)((function(){var e=null===d||void 0===d?void 0:d.me;if(e){var t=e.notEvaluatedPoweredSkills.nodes.map((function(e){return e.id})),n=Array.from(new Set(e.pinnedJobs.nodes.flatMap((function(e){return e.skills.nodes.map((function(e){return{id:e.id,qualifiersCount:e.qualifiers.totalCount}}))})))),i=e.evaluatedPoweredSkills.nodes.map((function(e){return e.id})),r=[];n.forEach((function(e){e.qualifiersCount>0&&!i.some((function(t){return t===e.id}))&&r.push(e.id)})),a({pinnedJobsSkillsIdsToEvaluate:r,skillsIdsToEvaluate:t})}}),[d]),{skillsIdsToEvaluate:r.skillsIdsToEvaluate,pinnedJobsSkillsIdsToEvaluate:r.pinnedJobsSkillsIdsToEvaluate}}({isMyProfile:L}),je=be.pinnedJobsSkillsIdsToEvaluate,fe=be.skillsIdsToEvaluate;Object(s.useEffect)((function(){return y(t),function(){y(void 0)}}),[]),Object(s.useEffect)((function(){L&&U()}),[L]),Object(s.useEffect)((function(){V||(d(void 0),$(void 0))}),[V]),Object(s.useEffect)((function(){"undefined"!==typeof X&&G(X)}),[X]);var pe=Object(s.useMemo)((function(){var e,t,n,i,r=null===z||void 0===z||null===(e=z.user)||void 0===e||null===(t=e.assessments)||void 0===t?void 0:t.nodes,a=null===z||void 0===z||null===(n=z.assessments)||void 0===n?void 0:n.nodes,s=[],o=[];if(r&&(i=r.map((function(e){return{id:e.id,name:e.name}}))),a){var c=new Map([]);a.forEach((function(e){var t=Object(l.getFormatedUserBasicFragment)(e.evaluatedUser);c.set(t.id,t),s.push({id:e.id,name:e.name,evaluatedUser:Object(l.getFormatedUserBasicFragment)(e.evaluatedUser)})})),o=Array.from(c.values())}return{myPendingAssessments:i,myTeamPendingAssessments:s,myTeamPendingEvaluatedUsers:o}}),[z]),Oe=pe.myPendingAssessments,me=pe.myTeamPendingAssessments,he=pe.myTeamPendingEvaluatedUsers,ve=o.a.useMemo((function(){return(null===P||void 0===P?void 0:P.user)?{email:Object(l.maybeToOptional)(P.user.email),phoneNumber:Object(l.maybeToOptional)(P.user.phoneNumber),headline:Object(l.maybeToOptional)(P.user.headline),customFields:P.user.customFields}:null}),[P]),xe=Object(s.useMemo)((function(){var e,t;if(null===P||void 0===P||null===(e=P.user)||void 0===e||null===(t=e.pinnedTrainings)||void 0===t?void 0:t.edges)return P.user.pinnedTrainings.edges.filter((function(e){return e.status===l.PinTrainingStatusEnum.Validated})).sort((function(e,t){return(t.data.endDate?Number(Object(T.localeMoment)(t.data.endDate).format("X")):0)-(e.data.endDate?Number(Object(T.localeMoment)(e.data.endDate).format("X")):0)})).map((function(e){var t;return{id:e.id,name:(null===(t=e.training)||void 0===t?void 0:t.name)||"",status:e.status,startDate:e.data.startDate,endDate:e.data.endDate,customFields:e.customFields}}))}),[P]),ge=Object(s.useMemo)((function(){var e;return!!(null===P||void 0===P||null===(e=P.user)||void 0===e?void 0:e.capabilities)&&P.user.capabilities.canUpdate}),[P]),ye=Object(s.useMemo)((function(){var e;return!!(null===P||void 0===P||null===(e=P.user)||void 0===e?void 0:e.capabilities)&&P.user.capabilities.canGenerateTemplate}),[P]),Se=Object(s.useMemo)((function(){return"undefined"!==typeof je&&je.length>0}),[je]),ke=Object(s.useMemo)((function(){return"undefined"!==typeof fe&&fe.length>0}),[fe]);Object(s.useEffect)((function(){h.active||se()}),[h.active]);var we=function(e){"undefined"!==typeof e&&q({variables:{id:n,headline:e},update:function(){M()}})},Ie=function(){p.push(O.b.USER_ORGANIZATION_SKILLS_LIBRARY.getRoute())},Ce=function(){var e=Object(C.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ne().then((function(){m.success(b("success")),h.off(),M()})).catch((function(){m.error(b("error"))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ee=function(){"undefined"!==typeof je&&je.length>0&&(oe(je),h.on())},Te=function(){!0===ke&&(oe(fe),h.on())};if(D)return Object(g.jsx)(Dn.a,{});if(!ve)return null;var Le=function(e){var t=e.power;G(t.skill.id),d(t.id)};return Object(g.jsxs)(f.PageLayout,{p:"0px",children:[Object(g.jsx)(u.Box,{overflowX:"hidden",overflowY:"auto",display:"flex",alignItems:"top",flexWrap:"wrap",height:["100%","100%","calc(100vh - ".concat(S,"px)")],children:Object(g.jsx)(u.Box,{p:1,flex:1,overflowX:"hidden",overflowY:"auto",children:Object(g.jsxs)(ri.Provider,{value:{onUpdateProfile:function(){M()},isProfileEditable:ge},children:[L&&Object(g.jsxs)(g.Fragment,{children:["undefined"!==typeof me&&me.length>0&&Object(g.jsx)(it,{assessmentsCount:me.length,mb:1,onClick:function(){p.push(O.b.ASSESSMENT_MONITORING.getRoute())},users:he}),"undefined"!==typeof Oe&&Oe.length>0&&Object(g.jsx)(at,{assessmentsCount:Oe.length,mb:1,onClick:function(){p.push(O.b.USER_PROFILE_ASSESSMENTS.getRoute({userId:k.id}))}})]}),Object(g.jsx)(ei,{userId:n,isEditable:ge,isGenerateAuthorized:ye}),Object(g.jsx)(u.Desktop,{children:Object(g.jsxs)(u.Line,{flex:1,mt:3,alignItems:"flex-start",children:[Object(g.jsxs)(u.Column,{width:"33%",mr:4,alignItems:"flex-start",children:[L&&x("skills")&&Object(g.jsx)(Xe.a,{onCreateSkillReview:Y,onNavigateToSkill:K,selectedSkillId:X,onChangeSelectedSkillId:function(e){return $(e)},width:"100%",mb:3,children:Object(g.jsx)(u.Button,{appearance:"clean",onClick:Ie,children:b("discover_skills_library")})}),Object(g.jsx)(j.UserTopLibraries,{onPowerClick:Le,routeToUserSkills:function(e,t){return O.b.USER_PROFILE_SKILLS.getRoute({userId:e,skillsOrLibrariesIds:"undefined"!==typeof t?[t]:void 0})},userId:n,selectedPowerId:a,width:"100%"})]}),Object(g.jsxs)(u.Box,{flex:1,overflow:"auto",width:"66%",children:[L&&(Se||ke)&&Object(g.jsx)(ot,{onClickEvaluateJobs:Se?Ee:void 0,onClickEvaluateSkills:ke?Te:void 0,skillsCount:null===fe||void 0===fe?void 0:fe.length,mb:4}),Object(g.jsx)(ai,{userId:n}),(ge||!ge&&!!ve.headline)&&Object(g.jsx)(ni,{title:b("user_headline"),content:Object(g.jsx)(Tt,{headline:ve.headline,readOnly:!ge,onChangeHeadline:we}),mb:4}),x("availabilities")&&Object(g.jsx)(ni,{title:b("calendar"),content:Object(g.jsx)(wt,{userId:n}),mb:4}),x("projects")&&Object(g.jsx)(ni,{title:b("projects_and_missions"),content:Object(g.jsx)(un,{userId:n}),mb:4}),Object(g.jsx)(ni,{title:b("experience",5),content:Object(g.jsx)(Ye,{isEditable:ge,targetUserLocale:R,userId:n}),mb:4}),x("trainings")&&"undefined"!==typeof xe&&xe.length>0&&Object(g.jsx)(ni,{title:b("pinned_trainings"),content:Object(g.jsx)(Rt,{userId:n,pinnedTrainings:xe}),mb:4}),Object(g.jsx)(ni,{title:b("information"),content:Object(g.jsx)(At,{email:ve.email,phoneNumber:ve.phoneNumber,customFields:ve.customFields||{}})})]})]})}),Object(g.jsx)(u.TabletOrMobile,{children:Object(g.jsxs)(u.Box,{children:[Object(g.jsxs)(u.Box,{py:3,flex:1,overflow:"auto",width:"100%",children:[L&&(Se||ke)&&Object(g.jsx)(ot,{onClickEvaluateJobs:Se?Ee:void 0,onClickEvaluateSkills:ke?Te:void 0,skillsCount:null===fe||void 0===fe?void 0:fe.length,mb:4}),Object(g.jsx)(ai,{userId:n}),(ge||!ge&&!!ve.headline)&&Object(g.jsx)(ni,{title:b("user_headline"),content:Object(g.jsx)(Tt,{headline:ve.headline,readOnly:!ge,onChangeHeadline:we}),mb:4}),x("availabilities")&&Object(g.jsx)(ni,{title:b("calendar"),content:Object(g.jsx)(wt,{userId:n}),mb:4}),x("projects")&&Object(g.jsx)(ni,{title:b("projects_and_missions"),content:Object(g.jsx)(un,{userId:n}),mb:4}),Object(g.jsx)(ni,{title:b("experience",5),content:Object(g.jsx)(Ye,{userId:n,isEditable:ge}),mb:4}),x("trainings")&&"undefined"!==typeof xe&&xe.length>0&&Object(g.jsx)(ni,{title:b("pinned_trainings"),content:Object(g.jsx)(Rt,{userId:n,pinnedTrainings:xe}),mb:4}),Object(g.jsx)(ni,{title:b("information"),content:Object(g.jsx)(At,{email:ve.email,phoneNumber:ve.phoneNumber,customFields:ve.customFields||{}})})]}),L&&x("skills")&&Object(g.jsxs)(Xe.a,{onCreateSkillReview:Y,onNavigateToSkill:K,selectedSkillId:X,onChangeSelectedSkillId:function(e){return $(e)},width:"100%",mb:3,children:[Object(g.jsx)(u.Tablet,{children:Object(g.jsx)(u.Button,{appearance:"clean",onClick:Ie,children:b("discover_skills_library")})}),Object(g.jsx)(u.Mobile,{children:Object(g.jsx)(ce,{appearance:"clean",onClick:Ie,children:b("discover_skills_library")})})]}),Object(g.jsx)(j.UserTopLibraries,{onPowerClick:Le,userId:n,selectedPowerId:a,width:"100%",py:3})]})})]})})}),Object(g.jsx)(Ke.c,{userId:n,skillId:Q,onChangeSkillId:G,isOpened:V,onClose:J},"UserSkillPanel_".concat(Q,"_").concat(n)),Object(g.jsx)($e.c,{onClose:h.off,isOpened:h.active,onCommentChange:te,onQualifierChange:le,actualPowers:ue,skills:de,onConfirm:Ce,isLoading:re,isDisabledSubmit:ie,onRemove:ae})]})},oi=Object(s.lazy)((function(){return n.e(52).then(n.bind(null,1532))})),ci=Object(s.lazy)((function(){return n.e(55).then(n.bind(null,1533))})),li=Object(s.lazy)((function(){return n.e(53).then(n.bind(null,1574))})),ui=Object(s.lazy)((function(){return n.e(51).then(n.bind(null,1548))})),di=Object(s.lazy)((function(){return Promise.all([n.e(2),n.e(4),n.e(62)]).then(n.bind(null,1546))})),bi=Object(s.lazy)((function(){return Promise.all([n.e(2),n.e(4),n.e(10),n.e(47)]).then(n.bind(null,1534))})),ji=function(e){var t=e.error,n=Object(u.useTranslate)(),i=Object(c.useHistory)();return"PERMISSION_DENIED"===t.message?Object(g.jsxs)(u.Line,{flexDirection:"column",width:"100%",justifyContent:"center",alignItems:"center",mt:3,children:[Object(g.jsx)(u.Icon,{as:d.a,mb:2,size:40,color:"error"}),Object(g.jsx)(u.Text,{children:n("you_have_no_access_to_profile")}),Object(g.jsx)(u.Button,{mt:2,onClick:i.goBack,children:n("go_back")})]}):Object(g.jsxs)(u.Line,{flexDirection:"column",width:"100%",justifyContent:"center",alignItems:"center",mt:3,children:[Object(g.jsx)(u.Icon,{as:b.a,mb:2,size:40,color:"alert"}),Object(g.jsx)(u.Text,{children:n("error")}),Object(g.jsx)(u.Button,{mt:2,onClick:i.goBack,children:n("go_back")})]})},fi=function(e){var t=e.userId,n=Object(c.useHistory)(),i=Object(m.a)().redirectToEntity404,r=Object(f.useAppContext)().checkLayout,a=Object(l.useGetUserToTestAccessQuery)({variables:{id:t},fetchPolicy:"cache-first",nextFetchPolicy:"cache-only",onError:function(e){return i({entity:p.d.User,error:e})}}),s=a.error,o=a.loading,d=function(e){var t=Object(u.useTranslate)({capitalize:!0}),n=Object(f.useAppContext)().checkLayout,i=Object(L.h)().colors.primary[3],r=[{label:"CV",to:O.b.USER_PROFILE_DETAILS.getRoute({userId:e}),color:i,isUppercase:!1},{label:t("skills_title"),to:O.b.USER_PROFILE_SKILLS.getRoute({userId:e}),color:i,isUppercase:!1}];return n("jobs")&&r.push({label:t("job",8),to:O.b.USER_PROFILE_JOBS.getRoute({userId:e}),color:i,isUppercase:!1}),n("assessments")&&r.push({label:t("assessments"),to:O.b.USER_PROFILE_ASSESSMENTS.getRoute({userId:e}),color:i,isUppercase:!1}),n("trainings")&&r.push({label:t("training",8),to:O.b.USER_PROFILE_TRAININGS.getRoute({userId:e}),color:i,isUppercase:!1}),{tabsOptions:r}}(t).tabsOptions;return Object(g.jsxs)(g.Fragment,{children:[s&&Object(g.jsx)(ji,{error:s}),!s&&!o&&Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(h.a,{children:[Object(g.jsx)(c.Route,{path:O.b.USER_PROFILE.path,exact:!0,render:function(){var e=function(){switch(Object(j.checkLayout)("default_resource_thumb")){case"resume":default:return"cv";case"skills":return"skills";case"jobs":return"jobs";case"trainings":return"trainings";case"assessments":return"assessments"}}();return n.push(function(e){var t=e.userId;switch(e.thumb){case"cv":default:return O.b.USER_PROFILE_DETAILS.getRoute({userId:t});case"jobs":return O.b.USER_PROFILE_JOBS.getRoute({userId:t});case"skills":return O.b.USER_PROFILE_SKILLS.getRoute({userId:t});case"trainings":return O.b.USER_PROFILE_TRAININGS.getRoute({userId:t});case"assessments":return O.b.USER_PROFILE_ASSESSMENTS.getRoute({userId:t})}}({userId:t,thumb:e})),null}}),Object(g.jsx)(c.Route,{path:O.b.USER_PROFILE_DETAILS.path,exact:!0,render:function(){return Object(g.jsx)(si,{tabsOptions:d,userId:t})}}),Object(g.jsx)(c.Route,{path:O.b.USER_PROFILE_SKILLS.path,exact:!0,render:function(){return Object(g.jsx)(di,{tabsOptions:d})}}),Object(g.jsx)(c.Route,{exact:!0,path:O.b.USER_PROFILE_JOBS.path,render:function(){return r("jobs")?Object(g.jsx)(ui,{tabsOptions:d}):Object(g.jsx)(v.default,{})}}),r("jobs")&&Object(g.jsx)(c.Route,{path:O.b.USER_PROFILE_JOBS_JOB_DETAILS.path,render:function(){return Object(g.jsx)(bi,{tabsOptions:d})}}),r("trainings")&&Object(g.jsx)(c.Route,{path:O.b.USER_PROFILE_TRAININGS.path,render:function(){return Object(g.jsx)(oi,{tabsOptions:d})}}),r("assessments")&&Object(g.jsx)(c.Route,{path:O.b.USER_PROFILE_ASSESSMENTS.path,exact:!0,render:function(){return Object(g.jsx)(ci,{tabsOptions:d})}}),r("assessments")&&Object(g.jsx)(c.Route,{path:O.b.USER_PROFILE_ASSESSMENT_CREATION.path,render:function(){return Object(g.jsx)(y,{})}}),r("assessments")&&Object(g.jsx)(c.Route,{path:O.b.USER_PROFILE_ASSESSMENT.path,render:function(){return Object(g.jsx)(li,{tabsOptions:d})}})]})})]})}},743:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(15),r=n(19),a=n(3),s=function(){var e=Object(i.useHistory)();return{redirectToEntity404:function(t){var n=t.entity;t.error.message===r.ErrorCodeEnum.NotFound&&e.push(a.b.PAGE_NOT_FOUND.getRoute({entity:n}))}}}},748:function(e,t,n){"use strict";function i(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,"a",(function(){return i}))},752:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(0),r=["title","titleId"];function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function o(e,t){var n=e.title,o=e.titleId,c=s(e,r);return i.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 1000",ref:t,"aria-labelledby":o},c),n?i.createElement("title",{id:o},n):null,i.createElement("path",{d:"M444.144 230.551a40.004 40.004 0 0127.866 68.688L311.398 459.852h473.346a40.148 40.148 0 110 80.289H311.398L472.01 700.754a40.004 40.004 0 11-56.569 56.569L188.916 530.795a40.004 40.004 0 01-11.43-15.74 40.148 40.148 0 010-.002 40.004 40.004 0 01-1.156-3.32 40.148 40.148 0 01-.184-.559 40.004 40.004 0 01-.691-2.898 40.148 40.148 0 01-.023-.098 40.004 40.004 0 01-.112-.469 40.148 40.148 0 01-.105-.51 40.004 40.004 0 01-.283-2.064 40.004 40.004 0 01-.211-1.576 40.148 40.148 0 01-.034-.469 40.004 40.004 0 01-.043-1.074 40.004 40.004 0 01-.085-2.623 40.148 40.148 0 01.006-.12 40.004 40.004 0 01.019-.378 40.004 40.004 0 010-.012 40.004 40.004 0 01.002-.031 40.004 40.004 0 0114.436-29.762l226.42-226.42a40.004 40.004 0 0128.702-12.119z",style:{lineHeight:"normal",textIndent:0,textAlign:"start",textDecorationLine:"none",textDecorationStyle:"solid",textTransform:"none",blockProgression:"tb",whiteSpace:"normal",isolation:"auto",mixBlendMode:"normal",solidOpacity:1},fontWeight:400,fontFamily:"sans-serif",overflow:"visible",fillRule:"evenodd"}))}var c=i.forwardRef(o);n.p},762:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return U}));var i=n(285),r=n(17),a=n(53),s=n(0),o=n(14),c=n(19),l=n(32),u=n(10),d=["status","comment","customFields","trainingTag"],b=function(e){var t=e.onBulkStatusUpdateCompleted,n=e.onUpdateCompleted,b=e.pinnedTrainingId,j=(e.onBulkDeletionCompleted,Object(u.useAppContext)().getErrorMessage),f=Object(o.useAlert)(),p=Object(c.useGetPinnedTrainingDataLazyQuery)(),O=Object(a.a)(p,2),m=O[0],h=O[1],v=h.data,x=h.loading,g=Object(c.useUpdateTrainingPinMutation)(),y=Object(a.a)(g,2),S=y[0],k=y[1].loading,w=Object(c.usePinTrainingsStatusBulkUpdateMutation)(),I=Object(a.a)(w,2),C=I[0],E=I[1].loading;Object(s.useEffect)((function(){"undefined"!==typeof b&&m({variables:{id:b}})}),[b]);var T=Object(s.useMemo)((function(){var e=null===v||void 0===v?void 0:v.pinnedTraining;if(e){if("undefined"===typeof e.user||null===e.user||"undefined"===typeof e.training||null===e.training)return;return Object(r.a)({id:e.id,status:e.status,capabilities:{canDelete:e.capabilities.canDelete,canUpdate:e.capabilities.canUpdate,allowedStatuses:e.capabilities.allowedStatuses},trainingTag:{id:e.training.id,name:e.training.name,kind:"trainingTag"},user:Object(c.getFormatedUserBasicFragment)(e.user),updatedAt:e.updatedAt},Object(c.getFormatedPinTrainingData)(e.data))}}),[v]),L=Object(s.useMemo)((function(){for(var e={},t=0,n=Object.values(l.PinTrainingStatus);t<n.length;t++){var i=n[t];(null===T||void 0===T?void 0:T[i])&&(e[i]=T[i])}return e}),[v]);return{isPinnedTrainingDataLoading:x,isPinnedTrainingUpdateLoading:k,isPinTrainingsStatusBulkUpdateLoading:E,onPinnedTrainingUpdate:function(e){if("undefined"!==typeof b){e.status;var t=e.comment,a=e.customFields,s=e.trainingTag,o=Object(i.a)(e,d),c={id:b,status:e.status,comment:t,trainingId:s.id};"undefined"!==typeof a&&(c.customFields=a),c=Object(r.a)(Object(r.a)({},c),o),S({variables:{input:c},onCompleted:n,onError:function(e){f.error(j(e)),console.error("Training application failed !!!",e)}})}},onPinnedTrainingBulkDeletion:function(e){},onPinnedTrainingBulkStatusUpdate:function(e){var n=e.comment,i=e.updatedStatus,r=e.selectedIds;"undefined"!==typeof i&&"undefined"!==typeof r&&C({variables:{input:{ids:r,comment:n,status:i}},onCompleted:t,onError:function(e){return f.error(j(e))}})},pinnedTraining:T,pinnedTrainingHistory:L}},j=n(15),f=function(e){var t=e.userId,n=e.pinnedTrainingId;return"undefined"!==typeof t&&"undefined"!==typeof n},p=function(e,t){switch(t.type){case"setIds":return Object(r.a)(Object(r.a)({},e),{},{pinnedTrainingId:t.pinnedTrainingId,userId:t.userId,isOpened:f({userId:t.userId,pinnedTrainingId:t.pinnedTrainingId})});case"setPinnedTrainingId":return Object(r.a)(Object(r.a)({},e),{},{pinnedTrainingId:t.pinnedTrainingId,isOpened:f({userId:e.userId,pinnedTrainingId:t.pinnedTrainingId})});case"setUserId":return Object(r.a)(Object(r.a)({},e),{},{userId:t.userId,isOpened:f({userId:t.userId,pinnedTrainingId:e.pinnedTrainingId})});case"close":return Object(r.a)(Object(r.a)({},e),{},{isOpened:!1,pinnedTrainingId:void 0});case"open":return Object(r.a)(Object(r.a)({},e),{},{isOpened:f({userId:e.userId,pinnedTrainingId:e.pinnedTrainingId})});default:return e}},O="pinnedTraining",m="user",h=function(e){var t=Object(s.useReducer)(p,{userId:e.userId,pinnedTrainingId:e.pinnedTrainingId,isOpened:f({userId:e.userId})}),n=Object(a.a)(t,2),i=n[0],r=i.isOpened,o=i.pinnedTrainingId,c=i.userId,l=n[1],u=Object(j.useHistory)(),d=Object(j.useLocation)();Object(s.useEffect)((function(){r?u.replace("?".concat(O,"=").concat(o,"&").concat(m,"=").concat(c)):u.replace(d.pathname)}),[r,o,c]),Object(s.useEffect)((function(){var e=new URLSearchParams(d.search),t=e.get(O),n=e.get(m);t&&n&&(t!==o||n!==c)&&l({type:"setIds",pinnedTrainingId:t,userId:n})}),[d.search]);return{close:function(){l({type:"close"})},isOpened:r,open:function(){l({type:"open"})},pinnedTrainingId:o,setPinnedTrainingId:function(e){return l({type:"setPinnedTrainingId",pinnedTrainingId:e})},setUserAndPinnedTrainingId:function(e){var t=e.userId,n=e.pinnedTrainingId;return l({type:"setIds",userId:t,pinnedTrainingId:n})},setUserId:function(e){return l({type:"setUserId",userId:e})},userId:c}},v=n(752),x=n(786),g=n(223),y=n(187),S=n(65),k=n(63),w=n(37),I=n(747),C=n(787),E=n(1),T=function(e){var t=e.status,n=e.isOpened,i=e.isLoading,r=e.onClose,c=e.onCancel,l=e.onConfirm,d=e.isReadOnly,b=Object(s.useState)(""),j=Object(a.a)(b,2),f=j[0],p=j[1],O=Object(o.useTranslate)({capitalize:!0});Object(s.useEffect)((function(){n||p("")}),[n]);return Object(E.jsx)(u.StandardModal,{title:O("pin_training_status_update"),isOpened:n,onClose:r,onCancel:c,onConfirm:function(){l(f)},isLoading:i,isDisabledSubmit:d,width:800,children:Object(E.jsxs)(o.Column,{alignItems:"flex-start",children:[Object(E.jsx)(o.Text,{mb:1,children:O("two_points",{phrase:O("pin_training_status_update_confirm_msg")})}),Object(E.jsx)(C.a,{status:t,width:162,my:1}),Object(E.jsx)(o.TextArea,{value:f,onChange:p,placeholder:O("comment"),disabled:d,mt:1})]})})},L=["capabilities","isPinnedTrainingUpdateLoading","onUpdate","pinnedTraining"],_=function(e){var t=e.customFields,n=e.id;if(null===t||void 0===t?void 0:t.find((function(e){return Object.keys(e||{})[0]===n})))return Object.values(t.find((function(e){return Object.keys(e||{})[0]===n}))||[])[0]},A=function(e){var t=e.capabilities,n=e.isPinnedTrainingUpdateLoading,c=e.onUpdate,l=e.pinnedTraining,d=Object(i.a)(e,L),b=Object(s.useState)(l.status),j=Object(a.a)(b,2),f=j[0],p=j[1],O=Object(o.useTranslate)({capitalize:!0}),m=Object(o.useSwitch)(!1),h=m.active,v=m.off,x=m.on,C=Object(S.h)(),A=Object(u.useAppContext)().customFields.pinnedTrainingFields,P=[];if(l.customFields)for(var D=0,M=Object.entries(l.customFields);D<M.length;D++){var R=Object(a.a)(M[D],2),B=R[0],F=R[1];P.push(Object(y.a)({},B,F))}Object(s.useEffect)((function(){f!==l.status?x():v()}),[f]);var U=function(e){return function(t){if("status"===e)p(t);else if("deadline"===e){var n=Object(w.localeMoment)(t).toISOString();c(Object(r.a)(Object(r.a)({},l),{},{deadline:n}))}else c(Object(r.a)(Object(r.a)({},l),{},Object(y.a)({},e,t)))}},N=Object(s.useMemo)((function(){var e,n=[],i=Object(g.a)(I.b);try{var r=function(){var i=e.value;l.status&&!(t.allowedStatuses||[]).includes(l.status)&&i[0]===l.status&&n.push(i),(t.allowedStatuses||[]).forEach((function(e){i[0]===e&&n.push(i)}))};for(i.s();!(e=i.n()).done;)r()}catch(a){i.e(a)}finally{i.f()}return n}),[t]);return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(o.Column,Object(r.a)(Object(r.a)({},d),{},{children:[Object(E.jsx)(u.FormLine,{children:Object(E.jsx)(u.FormLabel,{content:O("targeted_training"),children:Object(E.jsx)(k.ObjectTag,Object(r.a)({},l.trainingTag))})}),Object(E.jsx)(u.FormLine,{children:Object(E.jsx)(u.FormLabel,{name:"status",content:O("status"),children:Object(E.jsx)(o.SelectField,{value:l.status,onChange:U("status"),zIndex:C.zIndexes.MODAL_POPOVER,readOnly:1===N.length||!t.canUpdate,placeholder:"",source:N.map((function(e){return{label:O(e[1]),value:e[0]}})),width:"100%"})})}),Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(u.FormLine,{children:Object(E.jsx)(u.FormLabel,{name:"budgetYear",content:O("budget_year"),mr:1,children:Object(E.jsx)(o.TextEditable,{value:l.budgetYear,onSubmit:U("budgetYear"),readOnly:!t.canUpdate,placeholder:O("add_a_value")})})}),Object(E.jsx)(u.FormLine,{children:Object(E.jsx)(o.PeriodPicker,{startDate:l.startDate,endDate:l.endDate,readOnly:!t.canUpdate,onChange:function(e){var t=e.startDate,n=e.endDate;if("undefined"!==typeof t&&t!==l.startDate||"undefined"!==typeof n&&n!==l.endDate){if("undefined"!==typeof n&&"string"===typeof l.startDate&&Object(w.localeMoment)(n).isBefore(l.startDate))return;"undefined"===typeof t||"undefined"!==typeof n&&!Object(w.localeMoment)(t).isAfter(Object(w.localeMoment)(l.endDate))?c(Object(r.a)(Object(r.a)({},l),{},{startDate:t||l.startDate,endDate:n||l.endDate})):c(Object(r.a)(Object(r.a)({},l),{},{startDate:t,endDate:t}))}},isOneDayMinimumGap:!1})}),A.map((function(e){return Object(E.jsx)(u.FormLine,{children:Object(E.jsx)(k.CustomField,Object(r.a)({mr:1,field:e,withLabel:!0,readOnly:!t.canUpdate,value:_({customFields:P,id:e._key}),onSubmit:function(t){return function(e){var t=Object(y.a)({},e.id,e.value),n={};P?P.forEach((function(e){var i=Object(a.a)(Object.entries(e||[])[0],2),s=i[0],o=i[1];n=Object(r.a)(Object(r.a)({},n),{},Object(y.a)({},s,o),t)})):n=t,U("customFields")(n)}({id:e._key,value:t,comparator:"DATE"===e.field_type?"BETWEEN":"IN_VALUES",fieldType:e.field_type})}},e),e._key)},e._key)}))]})]})),Object(E.jsx)(T,{isLoading:n,isOpened:h,isReadOnly:!t.canUpdate,onCancel:v,onClosingComplete:function(){p(l.status)},onClose:v,onConfirm:function(e){c(Object(r.a)(Object(r.a)({},l),{},{status:f,comment:e})),v()},status:f})]})},P=n(23),D=n(758),M=["data","isOpened"],R={MAP:{},statusToDisplay:[],usersIds:[]},B=["suggested","approved","accepted","pending","validated","noshow","canceled"],F=function(e){var t=e.data,n=e.isOpened,l=Object(i.a)(e,M),u=Object(o.useTranslate)(),d=Object(o.useSwitch)(!1),b=d.active,j=d.off,f=d.on,p=Object(s.useState)(R),O=Object(a.a)(p,2),m=O[0],h=m.MAP,v=m.statusToDisplay,x=m.usersIds,y=O[1],S=Object(c.useGetUsersLazyQuery)({variables:{ids:x}}),k=Object(a.a)(S,2),w=k[0],I=k[1],C=I.data,T=I.loading;Object(s.useEffect)((function(){var e={},n=[],i=new Set;if(t)for(var r=0,s=Object.entries(t);r<s.length;r++){var o,c=Object(a.a)(s[r],2),l=c[0],u=c[1],d=Object(g.a)(B);try{for(d.s();!(o=d.n()).done;){var b=o.value;l===b&&"undefined"!==typeof u&&(e[l]={data:u,wording:"training_status_".concat(l)},i.add(l),l===b&&n.push(u.by.id))}}catch(f){d.e(f)}finally{d.f()}}var j={MAP:e,usersIds:n,statusToDisplay:Array.from(i)};y(j)}),[t]),Object(s.useEffect)((function(){!0===n&&(x||[]).length>0&&w()}),[n,x]);var L=Object(s.useMemo)((function(){var e;return(null===C||void 0===C||null===(e=C.users)||void 0===e?void 0:e.nodes)?C.users.nodes.map((function(e){return Object(c.getFormatedUserBasicFragment)(e)})):[]}),[C]),_=function(e){return Object.entries(e).length>0},A=function(){for(var e=[],t=0,n=Object.values(h);t<n.length;t++){var i=n[t],r=i.data,a=i.wording;_(r)&&e.push({data:r,wording:a})}return e.sort((function(e,t){return new Date(t.data.at).getTime()-new Date(e.data.at).getTime()}))},F=Object(s.useMemo)((function(){return A()&&!b?A().slice(0,3):A()}),[A(),b]),U=function(){b?j():f()};return v.length>0?Object(E.jsxs)(D.a,Object(r.a)(Object(r.a)({isExpanded:b,isShowMoreDisplayed:A().length>3&&!b,onClickShowLess:U,onClickShowMore:U,title:Object(P.maj)(u("history_title"))},l),{},{children:[T&&Object(E.jsx)(E.Fragment,{children:v.map((function(e,t){return Object(E.jsxs)(o.Box,{children:[Object(E.jsxs)(o.Line,{width:"100%",height:"100%",children:[Object(E.jsx)(o.LoaderSkeleton.Point,{}),Object(E.jsx)(o.LoaderSkeleton.Line,{width:"150px"})]}),Object(E.jsx)(o.Line,{width:"100%",height:"100%",mt:1,children:Object(E.jsx)(o.LoaderSkeleton.Line,{width:"100px"})})]},"".concat(e," - ").concat(t))}))}),!T&&L.length>0&&F.map((function(e){var t=e.data,n=e.wording;if(t.by.id){var i=L.find((function(e){return e.id===t.by.id}));return _(t)&&i?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(D.b,{user:i,date:t.at,children:Object(E.jsx)(o.Text,{fontSize:"small",as:"span",children:"".concat(u("pinned_training_updated_status_to"),' "').concat(u(n),'"')})}),t.comment&&Object(E.jsx)(o.TextWithAutoTooltipOnEllipsis,{rows:5,tooltipTitle:t.comment,pl:30,fontSize:"small",color:"grey.6",mb:1,children:t.comment})]}):null}return null}))]})):null},U=function(e){var t=e.isOpened,n=e.onClose,i=e.onUpdate,r=e.pinnedTrainingId,a=Object(o.useTranslate)({capitalize:!0}),s=Object(o.useResponsive)().isMobile,c=Object(u.useAppContext)().topBarHeight,l=b({pinnedTrainingId:r}),d=l.isPinnedTrainingUpdateLoading,j=l.isPinnedTrainingDataLoading,f=l.pinnedTraining,p=l.pinnedTrainingHistory;return Object(E.jsx)(o.RightPane.Container,{contentTop:s?0:c,isOpened:t,isOverlayTransparent:!0,fixed:!0,onClose:n,children:Object(E.jsx)(o.RightPane.Content,{bg:"white",height:s?"100%":"calc(100% - ".concat(c,"px)"),width:620,maxWidth:"100%",children:"undefined"!==typeof r&&"undefined"===typeof f&&j?Object(E.jsx)(x.c,{}):Object(E.jsx)(x.e,{renderHeader:function(){return Object(E.jsxs)(o.Line,{width:"100%",p:2,children:[s&&Object(E.jsx)(o.ClickableIcon,{icon:v.a,onClick:n,mr:2}),Object(E.jsx)(o.Text,{fontWeight:"bold",fontSize:"huge",children:a("training_application")})]})},children:"undefined"!==typeof f&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(A,{capabilities:f.capabilities,isPinnedTrainingUpdateLoading:d,onUpdate:i,pinnedTraining:{status:f.status,trainingTag:f.trainingTag,budgetYear:f.budgetYear,comment:f.comment,customFields:f.customFields,deadline:f.deadline,startDate:f.startDate,endDate:f.endDate}},f.id),Object(E.jsx)(F,{data:p,isOpened:t})]})})})})}},765:function(e,t,n){"use strict";n.d(t,"a",(function(){return _})),n.d(t,"b",(function(){return B}));var i=n(17),r=n(139),a=n.n(r),s=n(286),o=n(285),c=n(0),l=n(14),u=n(10),d=n(187),b=n(53),j=n(751),f=n(32),p=n(23),O=n(61),m=n(1),h=["label","isActive"],v=Object(O.default)(l.Text)((function(){return{fontWeight:"bold",borderRadius:0,textTransform:"uppercase"}}),(function(e){var t=e.isActive,n=e.theme;return t?{backgroundColor:n.colors.grey[2]}:{color:n.colors.grey[6]}})),x=function(e){var t=e.label,n=e.isActive,r=Object(o.a)(e,h);return Object(m.jsx)(v,Object(i.a)(Object(i.a)({isActive:n,p:1},r),{},{children:t}))},g=["value","onChange"],y=function(e){return{type:(null===e||void 0===e?void 0:e.type)||f.ScheduledPeriodType.ABSENCE,description:(null===e||void 0===e?void 0:e.description)||"",name:(null===e||void 0===e?void 0:e.name)||"",startDate:(null===e||void 0===e?void 0:e.startDate)||(new Date).toISOString(),endDate:(null===e||void 0===e?void 0:e.endDate)||(new Date).toISOString(),rate:(null===e||void 0===e?void 0:e.rate)||100}},S=function(e){var t=e.value,n=e.onChange,r=Object(o.a)(e,g),a=Object(c.useState)(y(t)),s=Object(b.a)(a,2),u=s[0],O=s[1],h=Object(l.useTranslate)({capitalize:!0}),v=Object(c.useCallback)(Object(j.debounce)((function(e){return n(e)}),500),[n]);Object(c.useEffect)((function(){O(y(t))}),[t]);var S=function(e){return function(){k("type")(e)}},k=function(e){return function(t){var n=Object(i.a)(Object(i.a)({},u),{},Object(d.a)({},e,t));O(n),v(n)}};return Object(m.jsxs)(l.Box,Object(i.a)(Object(i.a)({},r),{},{children:[Object(m.jsx)(l.Label,{content:h("name"),mb:2,required:!0,children:Object(m.jsx)(l.Input,{placeholder:h("unavailability_name"),value:u.name,onChange:k("name")})}),Object(m.jsxs)(l.Line,{justifyContent:"space-around",my:2,children:[Object(m.jsx)(x,{label:Object(p.maj)(h("absence")),onClick:S(f.ScheduledPeriodType.ABSENCE),isActive:u.type===f.ScheduledPeriodType.ABSENCE}),Object(m.jsx)(x,{label:Object(p.maj)(h("training",1)),onClick:S(f.ScheduledPeriodType.TRAINING),isActive:u.type===f.ScheduledPeriodType.TRAINING})]}),Object(m.jsx)(l.TextArea,{mb:2,value:u.description,onChange:k("description"),placeholder:h("details")}),Object(m.jsx)(l.PeriodPicker,{startDate:u.startDate,endDate:u.endDate,startDateLabel:h("from"),endDateLabel:h("to"),isFlex:!1,onChange:function(e){var t=Object(i.a)(Object(i.a)({},u),e);O(t),v(t)},mb:2,width:"100%"}),Object(m.jsx)(l.Label,{mb:2,content:"".concat(h("rate")," (%)"),children:Object(m.jsxs)(l.Line,{children:[Object(m.jsx)(l.Input,{mr:2,width:100,min:0,max:100,type:"number",rightElement:Object(m.jsx)(l.Text,{as:"span",children:"%"}),value:u.rate,onChange:function(e){return k("rate")(Number(e))}}),Object(m.jsx)(l.Slider,{flex:1,graduations:null,value:u.rate,max:100,onChange:function(e){return k("rate")(Number(e))}})]})})]}))},k=n(841),w=n(19),I=n(749),C=["onDelete"],E=function(e){var t=e.onDelete,n=Object(o.a)(e,C),r=Object(l.useSwitch)(!1),a=r.active,s=r.on,c=r.off,u=Object(l.useTranslate)({capitalize:!0});return Object(m.jsxs)(l.Column,Object(i.a)(Object(i.a)({alignItems:"flex-start"},n),{},{children:[Object(m.jsxs)(l.Line,{width:"100%",justifyContent:"space-between",mb:2,children:[Object(m.jsx)(l.Box,{children:Object(m.jsx)(l.Text,{fontWeight:"semiBold",children:u("unavailability")})}),Object(m.jsxs)(l.MenuSelect.Target,{px:1,children:[Object(m.jsx)(l.IconButton,{iconAs:I.a,onClick:s,isActive:a}),Object(m.jsx)(l.MenuSelect,{onClose:c,isOpened:a,children:Object(m.jsx)(l.MenuOption,{onClick:function(){t&&t(),c()},children:u("delete")})})]})]}),Object(m.jsx)(l.Line,{children:Object(m.jsx)(l.Text,{fontWeight:"bold",fontSize:"big",children:u("unavailability_details")})})]}))},T=["scheduledPeriodId","onUpdatedScheduledPeriod","onDeletedScheduledPeriod","isOpened","onClose"],L=["value","onChange","isLoading"],_=function(e){var t=e.scheduledPeriodId,n=e.onUpdatedScheduledPeriod,r=e.onDeletedScheduledPeriod,d=e.isOpened,j=e.onClose,f=Object(o.a)(e,T),p=Object(l.useTranslate)({capitalize:!0}),O=Object(u.useAppContext)().getErrorMessage,h=Object(l.useSwitch)(!1),v=Object(l.useAlert)(),x=function(e){var t=e.scheduledPeriodId,n=Object(w.useGetScheduledPeriodLazyQuery)({fetchPolicy:"cache-first",nextFetchPolicy:"network-only"}),i=Object(b.a)(n,2),r=i[0],o=i[1],l=o.data,u=o.loading,d=o.refetch,j=Object(w.useUpdatePeriodMutation)({awaitRefetchQueries:!0,refetchQueries:w.refetchQueries.onMutateScheduledPeriod,update:function(e,t){d&&d()}}),f=Object(b.a)(j,1)[0],p=Object(w.useDeleteScheduledPeriodMutation)({awaitRefetchQueries:!0,refetchQueries:w.refetchQueries.onMutateScheduledPeriod}),O=Object(b.a)(p,2),m=O[0],h=O[1].loading,v=function(){var e=Object(s.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return",f({variables:{input:{id:t,name:n.name,description:n.description,startDate:n.startDate,endDate:n.endDate,type:n.type,rate:n.rate}}}).then((function(){})).catch((function(e){throw new Error(e)})));case 2:return e.abrupt("return");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return",m({variables:{input:{id:t}}}).then((function(){})).catch((function(e){throw new Error(e)})));case 2:return e.abrupt("return");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=Object(c.useMemo)((function(){if(null===l||void 0===l?void 0:l.scheduledPeriod)return{id:l.scheduledPeriod.id,name:Object(w.maybeToOptional)(l.scheduledPeriod.name),description:Object(w.maybeToOptional)(l.scheduledPeriod.description),startDate:l.scheduledPeriod.startDate,endDate:l.scheduledPeriod.endDate,rate:l.scheduledPeriod.rate,type:l.scheduledPeriod.type}}),[l]);return Object(c.useEffect)((function(){t&&r({variables:{id:t}})}),[t]),{scheduledPeriod:g,isLoadingScheduledPeriod:u,isDeletingScheduledPeriod:h,updateScheduledPeriod:v,deleteScheduledPeriod:x}}({scheduledPeriodId:t}),g=x.scheduledPeriod,y=x.isLoadingScheduledPeriod,S=x.isDeletingScheduledPeriod,I=x.updateScheduledPeriod,C=x.deleteScheduledPeriod,L=function(){var e=Object(s.a)(a.a.mark((function e(i){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I(i).then((function(){v.success(p("your_availability_has_been_updated")),n&&n()})).catch((function(e){v.error(O(e)),console.error("Error updating scheduledPeriod ".concat(t),e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(k.a,Object(i.a)(Object(i.a)({isOpened:d,onClose:j,renderHeader:function(){return Object(m.jsx)(E,{onDelete:h.on})}},f),{},{children:"undefined"!==typeof g&&Object(m.jsx)(A,{isLoading:y,value:g,onChange:L,mt:1})})),Object(m.jsx)(l.ConfirmModal,{isOpened:h.active,onConfirm:function(){C().then((function(){v.success(p("success")),r&&r(),h.off()})).catch((function(e){v.error(O(e)),console.error("Error deleting scheduledPeriod ".concat(t),e)}))},onCancel:h.off,isLoading:S,children:Object(m.jsx)(l.Box,{display:"flex",flexDirection:"column",children:Object(m.jsx)(l.Text,{fontSize:"big",fontWeight:"bold",children:p("confirm_delete_unavailability")})})})]})},A=function(e){var t=e.value,n=e.onChange,r=e.isLoading,a=Object(o.a)(e,L);return r?Object(m.jsx)(l.Loader,{}):Object(m.jsx)(S,Object(i.a)({value:t,onChange:n},a))},P=n(15),D="scheduledPeriodId",M=function(e){return"undefined"!==typeof e.scheduledPeriodId},R=function(e,t){switch(t.type){case"setScheduledPeriodId":return Object(i.a)(Object(i.a)({},e),{},{scheduledPeriodId:t.scheduledPeriodId,isOpened:M({scheduledPeriodId:t.scheduledPeriodId})});case"open":return Object(i.a)(Object(i.a)({},e),{},{isOpened:M({scheduledPeriodId:e.scheduledPeriodId})});case"close":return Object(i.a)(Object(i.a)({},e),{},{isOpened:!1});default:return e}},B=function(e){var t=Object(c.useReducer)(R,{scheduledPeriodId:e.scheduledPeriodId,isOpened:M({scheduledPeriodId:e.scheduledPeriodId})}),n=Object(b.a)(t,2),i=n[0],r=i.isOpened,a=i.scheduledPeriodId,s=n[1],o=Object(P.useLocation)(),l=Object(P.useHistory)();Object(c.useEffect)((function(){r&&a?l.push("?".concat(D,"=").concat(a)):l.push(o.pathname)}),[r,a]),Object(c.useEffect)((function(){var e=new URLSearchParams(o.search).get(D);e&&e!==a?s({type:"setScheduledPeriodId",scheduledPeriodId:e}):e||s({type:"close"})}),[o.search]);return{isOpened:r,scheduledPeriodId:a,setScheduledPeriodId:function(e){s({type:"setScheduledPeriodId",scheduledPeriodId:e})},open:function(){s({type:"open"})},close:function(){s({type:"close"})}}}},767:function(e,t,n){"use strict";n(762);var i=n(785);n.d(t,"a",(function(){return i.a})),n.d(t,"d",(function(){return i.b}));var r=n(765);n.d(t,"b",(function(){return r.a})),n.d(t,"e",(function(){return r.b}));var a=n(790);n.d(t,"c",(function(){return a.a})),n.d(t,"f",(function(){return a.b}))},768:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(17),r=n(285),a=(n(0),n(14)),s=n(1),o=["height","image","action","maxHeight","maxWidth","text","width"],c=function(e){var t=e.height,n=e.image,c=e.action,l=e.maxHeight,u=e.maxWidth,d=e.text,b=e.width,j=Object(r.a)(e,o),f=Object(a.useResponsive)().isTabletOrMobile,p=function(e){return e||(f?"50%":"60%")};return Object(s.jsxs)(a.Box,Object(i.a)(Object(i.a)({display:"flex",flexDirection:"column",alignItems:"center",width:"100%",height:"100%"},j),{},{children:[Object(s.jsx)(a.Image,{as:n,width:p(b),maxWidth:u,height:p(t),maxHeight:l,mb:3}),Object(s.jsx)(a.Text,{fontWeight:"semiBold",fontSize:"large",color:"grey.6",children:d}),"undefined"!==typeof c&&Object(s.jsx)(a.Button,{mt:2,onClick:c.onClick,children:c.buttonLabel})]}))}},770:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i,r=n(0),a=["title","titleId"];function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function c(e,t){var n=e.title,c=e.titleId,l=o(e,a);return r.createElement("svg",s({viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":c},l),n?r.createElement("title",{id:c},n):null,i||(i=r.createElement("path",{d:"M5.38073 12.3959C5.36306 12.1786 5.39045 11.96 5.4612 11.7538C5.53195 11.5475 5.64453 11.3581 5.79188 11.1974C5.95504 11.0512 6.14608 10.9393 6.35352 10.8687C6.56096 10.798 6.78054 10.77 6.99908 10.7863C7.2128 10.7724 7.42709 10.8025 7.62872 10.8747C7.83034 10.9469 8.015 11.0598 8.17129 11.2062C8.31865 11.3654 8.4319 11.5531 8.50411 11.7577C8.57632 11.9623 8.60595 12.1795 8.59119 12.3959C8.60206 12.6093 8.57055 12.8228 8.49849 13.024C8.42642 13.2252 8.31521 13.4101 8.17129 13.5681C8.01485 13.7148 7.83037 13.8284 7.62894 13.9021C7.42751 13.9757 7.21327 14.0079 6.99908 13.9968C6.78267 14.011 6.56563 13.9811 6.36112 13.9089C6.15661 13.8368 5.96889 13.7238 5.80937 13.5769C5.66198 13.4191 5.54802 13.2331 5.47436 13.0302C5.4007 12.8272 5.36885 12.6115 5.38073 12.3959ZM8.23252 8.82678H5.76563L5.24951 0.000213623H8.74865L8.23252 8.82678Z"})))}var l=r.forwardRef(c);n.p},772:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(17),r=n(285),a=(n(0),n(14)),s=n(1),o=["children"],c=function(e){var t=e.children,n=Object(r.a)(e,o);return Object(s.jsx)(a.Box,Object(i.a)(Object(i.a)({height:"100%",width:"100%",pt:60,boxSizing:"border-box",overflow:"hidden",display:"flex",justifyContent:"center"},n),{},{children:t}))}},774:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i,r=n(0),a=["title","titleId"];function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function c(e,t){var n=e.title,c=e.titleId,l=o(e,a);return r.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 384.53 385.54",ref:t,"aria-labelledby":c},l),n?r.createElement("title",{id:c},n):null,i||(i=r.createElement("defs",null,r.createElement("linearGradient",{id:"a",x1:6.06,y1:151.66,x2:306.21,y2:151.66,gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:.22,stopColor:"#d4bfff"}),r.createElement("stop",{offset:.33,stopColor:"#ceb6ff"}),r.createElement("stop",{offset:.5,stopColor:"#bd9fff"}),r.createElement("stop",{offset:.72,stopColor:"#a179ff"}),r.createElement("stop",{offset:.92,stopColor:"#8552ff"})),r.createElement("linearGradient",{id:"b",x1:262.01,y1:266.41,x2:374.13,y2:460.6,gradientTransform:"matrix(-1, 0, 0, 1, 511.94, 0)",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:0,stopColor:"#3f3fd8",stopOpacity:0}),r.createElement("stop",{offset:1,stopColor:"#8b8bd8"})),r.createElement("linearGradient",{id:"c",x1:289.09,y1:143.09,x2:289.09,y2:385.54,gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:.22,stopColor:"#d2d5ff"}),r.createElement("stop",{offset:.31,stopColor:"#cdccff"}),r.createElement("stop",{offset:.47,stopColor:"#bfb5ff"}),r.createElement("stop",{offset:.66,stopColor:"#a98fff"}),r.createElement("stop",{offset:.89,stopColor:"#8a5aff"}),r.createElement("stop",{offset:.92,stopColor:"#8552ff"})),r.createElement("linearGradient",{id:"d",x1:235.32,y1:199.08,x2:235.32,y2:431.37,gradientTransform:"matrix(1, 0, 0, -1, -99.85, 541.09)",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:0,stopColor:"#ffeef8"}),r.createElement("stop",{offset:1,stopColor:"#f8a1ff"})),r.createElement("linearGradient",{id:"e",x1:168.78,x2:168.78,y2:152.62,gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:.22,stopColor:"#b8b3ff"}),r.createElement("stop",{offset:.31,stopColor:"#b1aaff"}),r.createElement("stop",{offset:.45,stopColor:"#9d93ff"}),r.createElement("stop",{offset:.64,stopColor:"#7d6dff"}),r.createElement("stop",{offset:.84,stopColor:"#5238ff"}),r.createElement("stop",{offset:.92,stopColor:"#4124ff"})),r.createElement("linearGradient",{id:"f",x1:147.34,y1:152.62,x2:147.34,gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:.08,stopColor:"#91b7ff"}),r.createElement("stop",{offset:.22,stopColor:"#aac7ff"}),r.createElement("stop",{offset:.47,stopColor:"#d0deff"}),r.createElement("stop",{offset:.66,stopColor:"#e7edff"}),r.createElement("stop",{offset:.78,stopColor:"#f0f2ff"})),r.createElement("linearGradient",{id:"g",x1:346.82,y1:-3659.2,x2:402.07,y2:-3762.56,gradientTransform:"translate(511.94 -3455.36) rotate(180)",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:0,stopColor:"#a3002f"}),r.createElement("stop",{offset:0,stopColor:"#bb0035"}),r.createElement("stop",{offset:1,stopColor:"#380013"})))),r.createElement("path",{d:"M6.06,156.45l255.15,4.15,43.5-13.71a2.13,2.13,0,0,0-.64-4.17l-251,.34Z",style:{fill:"url(#a)"}}),r.createElement("path",{d:"M269,380.54l113.85-32.82a2.32,2.32,0,0,0-.58-4.55l-271.94-6.65-108,45.85Z",style:{fill:"url(#b)"}}),r.createElement("path",{d:"M260.17,385.54l48.31-14.07A13.21,13.21,0,0,0,318,358.79V156.32a13.21,13.21,0,0,0-16.91-12.69l-40.92,11.91Z",style:{fill:"url(#c)"}}),r.createElement("rect",{y:155.54,width:270.94,height:230,rx:10,transform:"translate(270.94 541.09) rotate(-180)",style:{fill:"url(#d)"}}),r.createElement("path",{d:"M86.38,146.5c.07-29.58,8.25-51.81,22.75-72.74s34.31-32.83,54.92-32.88V41c15.36,0,30.38,6.56,43.15,18.87s22.73,29.79,28.61,50.25c3.89,13.55,16.62,28,16.65,42.53l16.67-6.08c0-9.87.32-13.67-1-23.44-4.09-29.67-14.2-56.92-29-78.31S205.32,8.84,184.74,2.94s-41.91-2.87-61.29,8.7S87.49,42.82,75.83,68s-6.11,54.51-6.15,84.65Z",style:{fill:"url(#e)"}}),r.createElement("path",{d:"M69.68,152.62c.07-29.58,8.25-57.93,22.75-78.86s34.31-32.83,54.92-32.88V41c15.36,0,30.38,6.56,43.15,18.87s22.73,29.79,28.61,50.25a156,156,0,0,1,5.9,42.53h28.42a219.07,219.07,0,0,0-2-29.52c-4.09-29.67-14.2-56.92-29-78.31S188.62,8.84,168,2.94s-41.91-2.87-61.29,8.7S70.79,42.82,59.13,68,41.3,122.48,41.26,152.62Z",style:{fill:"url(#f)"}}),r.createElement("path",{d:"M105.28,251.35a26.3,26.3,0,0,1,4.08-14,27.7,27.7,0,0,1,11-10,29.16,29.16,0,0,1,29.18,1.74,27.42,27.42,0,0,1,9.68,11.23,26.26,26.26,0,0,1,2.24,14.42,26.57,26.57,0,0,1-5.87,13.46,28.15,28.15,0,0,1-12.26,8.59V313a10,10,0,0,1-3.1,7.19,10.88,10.88,0,0,1-15,0,10,10,0,0,1-3.11-7.19V276.2a28,28,0,0,1-12.32-10A26.44,26.44,0,0,1,105.28,251.35Z",style:{fill:"url(#g)"}}))}var l=r.forwardRef(c);n.p},777:function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return T}));var i=n(53),r=n(285),a=n(17),s=n(0),o=n(751),c=n(14),l=n(63),u=n(19),d=n(10),b=n(791),j=n(61),f=n(770),p=n(1),O=["skills","onClickSkill"],m=Object(j.default)(c.Box)((function(e){return{width:20,height:20,borderRadius:20,backgroundColor:e.theme.colors.alert[2],display:"flex",justifyContent:"center",alignItems:"center"}})),h=function(e){var t=e.skills,n=e.onClickSkill,i=Object(r.a)(e,O),s=Object(c.useTranslate)({capitalize:!0});return Object(p.jsxs)(c.Column,Object(a.a)(Object(a.a)({alignItems:"flex-start"},i),{},{children:[Object(p.jsxs)(c.Line,{mb:1,children:[Object(p.jsx)(m,{mr:0,children:Object(p.jsx)(c.Icon,{as:f.a,size:12})}),Object(p.jsx)(c.Text,{fontSize:"small",children:s("already_existing_close_skills")})]}),Object(p.jsx)(c.Box,{display:"flex",flexWrap:"wrap",width:"100%",children:t.map((function(e){return Object(p.jsx)(l.ObjectTag,{kind:"skillTag",id:e.id,name:e.name,logo:e.logo,color:e.color,onClick:(t=e.id,function(){n(t)}),mr:0,mb:0},e.id);var t}))})]}))},v=["parentId","initialName","isAddableToMyProfile","onCreateSkill","onClickSuggestedSkill"],x=function(e){return{skillName:e.initialName,isAddToMyProfile:!0,isSubmitting:!1}},g=function(e,t){switch(t.type){case"setSkillName":return Object(a.a)(Object(a.a)({},e),{},{skillName:t.skillName});case"setIsAddToMyProfile":return Object(a.a)(Object(a.a)({},e),{},{isAddToMyProfile:t.isAddToMyProfile});case"setIsSubmitting":return Object(a.a)(Object(a.a)({},e),{},{isSubmitting:t.isSubmitting});case"reset":return x({initialName:t.initialName});default:return e}},y=function(e){var t=e.parentId,n=e.initialName,j=e.isAddableToMyProfile,f=void 0===j||j,O=e.onCreateSkill,m=e.onClickSuggestedSkill,y=Object(r.a)(e,v),S=Object(s.useReducer)(g,x({initialName:n})),k=Object(i.a)(S,2),w=k[0],I=w.skillName,C=w.isAddToMyProfile,E=w.isSubmitting,T=k[1],L=Object(c.useTranslate)({capitalize:!0}),_=Object(u.useSearchSkillsSuggestionsLazyQuery)(),A=Object(i.a)(_,2),P=A[0],D=A[1],M=D.data,R=D.loading,B=Object(b.a)({skillOrLibraryId:t,isGetSubSkillsCount:!1}),F=B.isLoading,U=B.skillOrLibrary;Object(s.useEffect)((function(){y.isOpened&&T({type:"reset",initialName:n})}),[y.isOpened]),Object(s.useEffect)((function(){"undefined"!==typeof I&&I.length>0&&N(I)}),[I]);var N=Object(s.useCallback)(Object(o.debounce)((function(e){P({variables:{searchQuery:e}})}),500),[]),z=Object(s.useMemo)((function(){var e=null===M||void 0===M?void 0:M.search.nodes;if(e){var t=[];return e.forEach((function(e){"Skill"===e.node.__typename&&t.push({id:e.node.id,name:e.node.name,logo:e.node.logo,color:e.node.color})})),t}}),[M]),W=Object(s.useMemo)((function(){return"undefined"===typeof I||0===I.length}),[I]);return Object(p.jsx)(d.StandardModal,Object(a.a)(Object(a.a)({title:L("create_an_object",{object:L("a_new_skill",1)}),confirmButtonLabel:L("create"),height:653,onConfirm:function(){"undefined"!==typeof I&&(T({type:"setIsSubmitting",isSubmitting:!0}),O({name:I,isAddToProfile:C}).then((function(){T({type:"setIsSubmitting",isSubmitting:!1})})).catch((function(){T({type:"setIsSubmitting",isSubmitting:!1})})))},onCancel:y.onClose,isDisabledSubmit:W,isLoading:E},y),{},{children:Object(p.jsxs)(c.Box,{height:"100%",children:[Object(p.jsx)(c.Text,{mb:20,children:L("fill_skill_form_desc")}),F?Object(p.jsx)(c.Loader,{}):"undefined"!==typeof U&&Object(p.jsxs)(c.Column,{alignItems:"flex-start",mb:20,children:[Object(p.jsx)(c.Text,{fontWeight:"bold",mb:0,children:L("you_will_create_a_skill_in")}),Object(p.jsx)(l.ObjectTag,{kind:"skillTag",id:U.id,name:U.name,color:U.color,logo:U.logo})]}),Object(p.jsx)(c.Label,{content:L("skill_name"),name:"skillName",mb:20,children:Object(p.jsx)(c.Input,{value:I,onChange:function(e){T({type:"setSkillName",skillName:e})},width:"100%"})}),f&&Object(p.jsxs)(c.Text,{as:"label",py:0,mb:20,children:[Object(p.jsx)(c.Checkbox,{checked:C,onChange:function(e){T({type:"setIsAddToMyProfile",isAddToMyProfile:!0===e})},mr:0}),L("add_to_my_profile")]}),R?Object(p.jsx)(c.Loader,{}):"undefined"!==typeof z&&z.length>0&&Object(p.jsx)(h,{skills:z,onClickSkill:m})]})}))},S=n(139),k=n.n(S),w=n(286),I=n(115),C=n(15),E=n(3),T=function(e){var t=e.parentId,n=Object(c.useSwitch)(!1),i=n.active,r=n.on,a=n.off,s=Object(C.useHistory)(),o=Object(d.useAppContext)().user,l=Object(I.a)();return{isOpened:i,close:a,open:r,createSkill:function(){var e=Object(w.a)(k.a.mark((function e(n){var i,r,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.name,r=n.isAddToProfile,e.next=3,l.mutate({mutation:u.CreateSkillDocument,variables:{name:i,parents:"undefined"!==typeof t?[t]:void 0}}).then((function(e){var t,n;if(null===(t=e.data)||void 0===t||null===(n=t.createSkill)||void 0===n?void 0:n.skill)return{id:e.data.createSkill.skill.id}}));case 3:if(a=e.sent,!r||"undefined"===typeof a){e.next=7;break}return e.next=7,l.mutate({mutation:u.CreateSkillReviewDocument,variables:{skillId:a.id,userId:o.id},refetchQueries:u.refetchQueries.onMutatePower,awaitRefetchQueries:!0});case 7:return e.abrupt("return");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),navigateToSuggestedSkill:function(e){a(),s.push(E.b.USER_ORGANIZATION_SKILL_DETAILS.getRoute({skillId:e}))}}}},778:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i=n(17),r=n(139),a=n.n(r),s=n(286),o=n(53),c=n(285),l=n(0),u=n(61),d=n(14),b=n(63),j=n(764),f=n(782),p=n(746),O=n(19),m=n(10),h=n(777),v=n(1),x=["icon","isExpandedInitialValue","title","skillsToIgnore","searchQuery","onAddSkill"],g=Object(u.default)(d.Box)((function(){return{transition:"height 0.2s ease-out"}})),y=Object(u.default)(d.Icon)((function(e){return{display:"flex",transform:e.isExpanded?"rotate(90deg)":"rotate(-90deg)",transition:"0.2s ease all"}})),S=function(e){var t=e.icon,n=e.isExpandedInitialValue,r=e.title,u=e.skillsToIgnore,S=void 0===u?[]:u,k=e.searchQuery,w=e.onAddSkill,I=Object(c.a)(e,x),C=Object(d.useTranslate)({capitalize:!0}),E=Object(m.useAppContext)().userCapabilities,T=Object(l.useState)(""),L=Object(o.a)(T,2),_=L[0],A=L[1],P=Object(l.useState)(n),D=Object(o.a)(P,2),M=D[0],R=D[1],B=Object(O.useGetSmartSearchSkillsSuggestionsQuery)({variables:{searchQuery:k}}),F=B.data,U=B.loading,N=Object(O.useCreateSkillMutation)(),z=Object(o.a)(N,1)[0],W=Object(h.b)({}),q=W.isOpened,H=W.open,V=W.close,G=W.navigateToSuggestedSkill,J=function(){var e=Object(s.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,z({variables:{name:n},onCompleted:function(e){var t,n;V();var i=null===e||void 0===e||null===(t=e.createSkill)||void 0===t||null===(n=t.skill)||void 0===n?void 0:n.id;"undefined"!==typeof i&&w(i)}}),e.abrupt("return");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=Object(l.useMemo)((function(){var e=null===F||void 0===F?void 0:F.extractSkills.nodes;return e?e.filter((function(e){return!S.includes(e.id)})).map((function(e){return Object(O.getFormatedSkillBasicFragment)(e)})):[]}),[F,S]);return Object(v.jsxs)(g,Object(i.a)(Object(i.a)({p:2,borderRadius:2,bg:"primary.0"},I),{},{children:[Object(v.jsxs)(d.Line,{mb:M?2:void 0,onClick:function(){R((function(e){return!e}))},display:"flex",justifyContent:"space-between",children:[Object(v.jsxs)(d.Line,{children:[Object(v.jsx)(d.Box,{borderRadius:34,bg:"white",p:0,mr:1,children:Object(v.jsx)(d.Icon,{as:t||p.a,size:20})}),Object(v.jsx)(d.Text,{fontSize:"large",fontWeight:"bold",children:r})]}),Object(v.jsx)(y,{as:f.a,size:16,isExpanded:M})]}),M?Object(v.jsx)(d.Box,{children:U?Object(v.jsxs)(d.Line,{width:"100%",children:[Object(v.jsx)(d.LoaderSkeleton.Line,{width:"80px",ml:1}),Object(v.jsx)(d.LoaderSkeleton.Line,{width:"80px",ml:1}),Object(v.jsx)(d.LoaderSkeleton.Line,{width:"80px",ml:1})]}):Object(v.jsxs)(d.Box,{children:[Object(v.jsx)(d.Line,{flexWrap:"wrap",children:Q.map((function(e){return Object(v.jsx)(b.SkillBrick,{skill:Object(i.a)({_key:e.id},e),rightElement:Object(v.jsx)(d.IconButton,{iconAs:j.a,accent:"primary",onClick:(t=e.id,Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t);case 2:case"end":return e.stop()}}),e)}))))}),mr:1,mb:1},e.id);var t}))}),Object(v.jsx)(b.SkillsSelector,{width:"50%",minWidth:"300px",onSubmit:function(e){w(e.id)},placeholder:C("search_a_skill"),isCreateNewSkillButtonEnabled:E.canCreateSkillNoLibrary,onCreateNewSkill:function(e){A(e),H()}}),Object(v.jsx)(h.a,{isAddableToMyProfile:!1,isOpened:q,onClose:V,onCreateSkill:J,onClickSuggestedSkill:G,initialName:_})]})}):null]}))}},782:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i,r=n(0),a=["title","titleId"];function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function c(e,t){var n=e.title,c=e.titleId,l=o(e,a);return r.createElement("svg",s({viewBox:"0 0 10 16",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":c},l),n?r.createElement("title",{id:c},n):null,i||(i=r.createElement("path",{d:"M7.83333 16L10 13.7263L4.33333 8L10 2.27368L7.83333 -1.89416e-07L6.99382e-07 8L7.83333 16Z"})))}var l=r.forwardRef(c);n.p},787:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var i,r=n(17),a=n(285),s=n(187),o=(n(0),n(14)),c=n(32),l=n(747),u=n(1),d=["status"],b=(i={},Object(s.a)(i,c.PinTrainingStatus.Validated,{color:"success.0",label:l.b.get(c.PinTrainingStatus.Validated)}),Object(s.a)(i,c.PinTrainingStatus.Suggested,{color:"grey.0",label:l.b.get(c.PinTrainingStatus.Suggested)}),Object(s.a)(i,c.PinTrainingStatus.Approved,{color:"secondary.0",label:l.b.get(c.PinTrainingStatus.Approved)}),Object(s.a)(i,c.PinTrainingStatus.Accepted,{color:"secondary.0",label:l.b.get(c.PinTrainingStatus.Accepted)}),Object(s.a)(i,c.PinTrainingStatus.Pending,{color:"secondary.0",label:l.b.get(c.PinTrainingStatus.Pending)}),Object(s.a)(i,c.PinTrainingStatus.Refused,{color:"error.0",label:l.b.get(c.PinTrainingStatus.Refused)}),Object(s.a)(i,c.PinTrainingStatus.Noshow,{color:"error.0",label:l.b.get(c.PinTrainingStatus.Noshow)}),Object(s.a)(i,c.PinTrainingStatus.Canceled,{color:"error.0",label:l.b.get(c.PinTrainingStatus.Canceled)}),i),j=function(e){var t=e.status,n=Object(a.a)(e,d),i=Object(o.useTranslate)({capitalize:!0}),s=b[t];return Object(u.jsx)(o.Box,Object(r.a)(Object(r.a)({p:0,bg:s.color,display:"flex",justifyContent:"center"},n),{},{children:Object(u.jsx)(o.Text,{fontWeight:"semiBold",children:i(s.label)})}))}},788:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i,r,a,s=n(0),o=["title","titleId"];function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function u(e,t){var n=e.title,u=e.titleId,d=l(e,o);return s.createElement("svg",c({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",ref:t,"aria-labelledby":u},d),n?s.createElement("title",{id:u},n):null,i||(i=s.createElement("g",{transform:"translate(25 50)"},s.createElement("circle",{cx:0,cy:0,r:10,transform:"scale(0.429509 0.429509)"},s.createElement("animateTransform",{attributeName:"transform",type:"scale",begin:"-0.3333333333333333s",calcMode:"spline",keySplines:"0.3 0 0.7 1;0.3 0 0.7 1",values:"0;1;0",keyTimes:"0;0.5;1",dur:"1s",repeatCount:"indefinite"})))),r||(r=s.createElement("g",{transform:"translate(50 50)"},s.createElement("circle",{cx:0,cy:0,r:10,transform:"scale(0.0432413 0.0432413)"},s.createElement("animateTransform",{attributeName:"transform",type:"scale",begin:"-0.16666666666666666s",calcMode:"spline",keySplines:"0.3 0 0.7 1;0.3 0 0.7 1",values:"0;1;0",keyTimes:"0;0.5;1",dur:"1s",repeatCount:"indefinite"})))),a||(a=s.createElement("g",{transform:"translate(75 50)"},s.createElement("circle",{cx:0,cy:0,r:10,transform:"scale(0.129851 0.129851)"},s.createElement("animateTransform",{attributeName:"transform",type:"scale",begin:"0s",calcMode:"spline",keySplines:"0.3 0 0.7 1;0.3 0 0.7 1",values:"0;1;0",keyTimes:"0;0.5;1",dur:"1s",repeatCount:"indefinite"})))))}var d=s.forwardRef(u);n.p},791:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(17),r=n(53),a=n(0),s=n(287),o=n(19),c=n(121),l=n(743),u=function(e){var t=e.isGetSubSkillsCount,n=e.skillOrLibraryId,u=Object(l.a)().redirectToEntity404,d=Object(o.useGetSkillWithSubSkillsCountLazyQuery)({fetchPolicy:"cache-and-network",nextFetchPolicy:"network-only",onError:function(e){return u({entity:c.d.Skill,error:e})}}),b=Object(r.a)(d,2),j=b[0],f=b[1],p=f.data,O=f.loading,m=Object(o.useGetLibraryWithSubSkillsCountLazyQuery)({fetchPolicy:"cache-and-network",nextFetchPolicy:"network-only",onError:function(e){return u({entity:c.d.Library,error:e})}}),h=Object(r.a)(m,2),v=h[0],x=h[1],g=x.data,y=x.loading,S=Object(a.useMemo)((function(){if("undefined"!==typeof n)return Object(s.getIsLibraryId)(n)}),[n]),k=Object(a.useCallback)((function(){"undefined"!==typeof n&&(S?v({variables:{libraryId:n,isGetSubSkillsCount:t}}):j({variables:{skillId:n,isGetSubSkillsCount:t}}))}),[S,n,t]);Object(a.useEffect)((function(){k()}),[k]);var w=Object(a.useMemo)((function(){if(null===p||void 0===p?void 0:p.skill)return Object(i.a)(Object(i.a)({},Object(o.getFormatedSkillBasicFragment)(p.skill)),{},{description:Object(o.maybeToOptional)(p.skill.description)})}),[p]),I=Object(a.useMemo)((function(){if(null===g||void 0===g?void 0:g.library)return Object(i.a)(Object(i.a)({},Object(o.getFormatedLibraryBasicFragment)(g.library)),{},{description:Object(o.maybeToOptional)(g.library.description)})}),[g]),C=Object(a.useMemo)((function(){var e,t;return S&&(null===g||void 0===g||null===(e=g.library)||void 0===e?void 0:e.subSkills)?g.library.subSkills.totalCount:!S&&(null===p||void 0===p||null===(t=p.skill)||void 0===t?void 0:t.subSkills)?p.skill.subSkills.totalCount:void 0}),[p,g,S]);return{skillOrLibrary:S?I:w,subSkillsCount:C,isLoading:y||O,isLibrary:S,refetch:k}}},793:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i,r=n(0),a=["title","titleId"];function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function c(e,t){var n=e.title,c=e.titleId,l=o(e,a);return r.createElement("svg",s({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":c},l),n?r.createElement("title",{id:c},n):null,i||(i=r.createElement("path",{d:"M20.2855 2.3999L9 14.0874L3.71446 9.02439L0 12.7797L9 21.5999L24 6.15334L20.2855 2.3999Z"})))}var l=r.forwardRef(c);n.p},795:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i,r=n(0),a=["title","titleId"];function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function c(e,t){var n=e.title,c=e.titleId,l=o(e,a);return r.createElement("svg",s({viewBox:"0 0 10 16",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":c},l),n?r.createElement("title",{id:c},n):null,i||(i=r.createElement("path",{d:"M2.16667 0L0 2.27368L5.66667 8L0 13.7263L2.16667 16L10 8L2.16667 0Z"})))}var l=r.forwardRef(c);n.p},799:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(0);var i=n(14),r=n(1),a=function(e){var t=e.renderHeader,n=e.children;return Object(r.jsxs)(i.Box,{width:"100%",height:"100%",bg:"white",display:"flex",flexDirection:"column",backgroundColor:"white",children:[Object(r.jsx)(i.Box,{flexGrow:0,p:2,children:t()}),Object(r.jsx)(i.Box,{px:2,children:Object(r.jsx)(i.Separator,{width:"100%"})}),Object(r.jsx)(i.Box,{flexGrow:1,overflow:"auto",p:2,width:"100%",children:n})]})}},802:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));n(0);var i=n(774),r=n(14),a=n(768),s=n(772),o=n(1),c=function(){var e=Object(r.useTranslate)({capitalize:!0});return Object(o.jsx)(s.a,{children:Object(o.jsx)(a.a,{image:i.a,maxHeight:500,maxWidth:500,mb:3,text:e("you_have_no_access_to_this_page")})})}},804:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i,r,a=n(0),s=["title","titleId"];function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function l(e,t){var n=e.title,l=e.titleId,u=c(e,s);return a.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 1000",ref:t,"aria-labelledby":l},u),n?a.createElement("title",{id:l},n):null,i||(i=a.createElement("path",{d:"M500 105.5c128.7 0 241.6 105.4 241.6 225.6 0 121.9-96.2 280.4-232.8 495.9-4.1 6.5-13.6 6.5-17.7 0-136.6-215.5-232.8-374-232.8-495.9.1-120.1 113-225.6 241.7-225.6m0-80.5c-169.1 0-322.2 137-322.2 306.1 0 164.1 131.6 359.1 306.2 635.1 7.4 11.7 24.5 11.7 31.9 0 174.6-276 306.2-471 306.2-635.1C822.2 162 669.1 25 500 25z"})),r||(r=a.createElement("path",{d:"M500 480.2c-77.4 0-140.3-62.9-140.3-140.3S422.6 199.6 500 199.6s140.3 62.9 140.3 140.3S577.4 480.2 500 480.2zm0-225.6c-47 0-85.3 38.3-85.3 85.3s38.3 85.3 85.3 85.3 85.3-38.3 85.3-85.3-38.3-85.3-85.3-85.3z"})))}var u=a.forwardRef(l);n.p},820:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i,r=n(0),a=["title","titleId"];function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function c(e,t){var n=e.title,c=e.titleId,l=o(e,a);return r.createElement("svg",s({viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":c},l),n?r.createElement("title",{id:c},n):null,i||(i=r.createElement("path",{d:"M2.96979 17.0274H4.34865L12.8434 8.52055L11.4645 7.13973L2.96979 15.6466V17.0274ZM17.0538 7.09041L12.868 2.94795L14.2469 1.56712C14.6244 1.18904 15.0883 1 15.6385 1C16.1881 1 16.6516 1.18904 17.0292 1.56712L18.408 2.94795C18.7856 3.32603 18.9826 3.78236 18.999 4.31693C19.0154 4.85085 18.8348 5.30685 18.4573 5.68493L17.0538 7.09041ZM15.6257 8.54521L5.18581 19H1V14.8082L11.4399 4.35342L15.6257 8.54521Z"})))}var l=r.forwardRef(c);n.p},826:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i,r=n(0),a=["title","titleId"];function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function c(e,t){var n=e.title,c=e.titleId,l=o(e,a);return r.createElement("svg",s({viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":c},l),n?r.createElement("title",{id:c},n):null,i||(i=r.createElement("path",{d:"M15.4771 9.54043C15.387 11.0741 14.7563 12.5176 13.5849 13.6904C10.9719 16.1263 6.91721 16.036 4.48441 13.51C2.0516 10.9839 2.0516 6.83393 4.57451 4.30786C7.09742 1.96222 10.8818 1.872 13.4047 4.21764L11.6026 6.02198L17.9099 7.01436L17.1891 0.699181L15.387 2.50352C11.7828 -0.834506 6.19638 -0.834506 2.77243 2.50352C-0.831729 5.93176 -0.921833 11.7056 2.50212 15.2241C5.92607 18.8328 11.6026 18.923 15.2969 15.4947C16.9188 13.9611 17.7297 11.9763 18 9.99152L15.4771 9.54043Z"})))}var l=r.forwardRef(c);n.p},836:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var i=n(17),r=n(19),a=n(32),s=function(e,t){switch(t){case a.AssessmentSkillsScopeType.SKILLS_LIST:return{sourceType:r.AssessmentSourceType.SkillsList,skills:e};case a.AssessmentSkillsScopeType.EVALUATED_USER_JOBS:return{sourceType:r.AssessmentSourceType.EvaluatedUserJobs,jobs:e};case a.AssessmentSkillsScopeType.LIBRARIES_AND_JOBS:return{sourceType:r.AssessmentSourceType.LibrariesAndJobs,libraries:[],jobs:[]};default:return{sourceType:r.AssessmentSourceType.SkillsList,skills:[]}}},o=function(e){return"unknown_skillProfile"!==e.id||!!e.name},c=function(e){var t,n,r,s=e.skillsList,c=e.evaluatedUserJobs,l=e.librariesAndJobs;if(s)t=a.AssessmentSkillsScopeType.SKILLS_LIST,n=s,r=s;else if(c){t=a.AssessmentSkillsScopeType.EVALUATED_USER_JOBS;var u=null===c||void 0===c?void 0:c.filter(o);n=u,r=function(e){var t=e.reduce((function(e,t){var n,r;return Object(i.a)(Object(i.a)({},e),Object.fromEntries(((null===(n=t.pattern)||void 0===n?void 0:n.must)||[]).concat((null===(r=t.pattern)||void 0===r?void 0:r.should)||[]).filter((function(e){return!!e.skill})).map((function(e){var t=e.skill;return[t.id,t]}))))}),{});return Object.values(t)}(u)}else l?(t=a.AssessmentSkillsScopeType.LIBRARIES_AND_JOBS,n=l,r=[]):(t=a.AssessmentSkillsScopeType.SKILLS_LIST,n=[]);return{evaluationObjectsType:t,evaluationObjects:n,skillsToEvaluate:r}}},850:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i,r=n(0),a=["title","titleId"];function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function c(e,t){var n=e.title,c=e.titleId,l=o(e,a);return r.createElement("svg",s({viewBox:"0 0 23 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":c},l),n?r.createElement("title",{id:c},n):null,i||(i=r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 7V0H18V10H23V24H0V7H5ZM5 23V18H4V23H5ZM13 19H10V23H13V19ZM19 18H18V23H19V18ZM21 12H18V17H20V22H21V12ZM16 2H7V22H8V17H15V22H16V2ZM3 22V17H5V9H2V22H3ZM11 15H9V13H11V15ZM14 15H12V13H14V15ZM11 12H9V10H11V12ZM14 12H12V10H14V12ZM11 9H9V7H11V9ZM14 9H12V7H14V9ZM11 6H9V4H11V6ZM14 6H12V4H14V6Z"})))}var l=r.forwardRef(c);n.p},852:function(e,t,n){"use strict";n.d(t,"a",(function(){return E})),n.d(t,"b",(function(){return _}));var i=n(187),r=n(139),a=n.n(r),s=n(286),o=n(188),c=n(285),l=n(17),u=n(53),d=n(0),b=n(115),j=n(287),f=n(19),p=n(63),O=n(14),m=n(826),h=n(788),v=n(10),x=n(777),g=n(189),y=n(1),S=function(e){var t=Object.assign({},e);return Object(y.jsx)(g.AnimatePresence,{initial:!0,children:t.children.map((function(e){return Object(y.jsx)(O.Box,Object(l.a)(Object(l.a)({initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8,position:"absolute"},transition:{type:"tween",duration:.2},as:g.motion.div},t),{},{children:e}),"".concat(e.key))}))})},k=["onCreateSkillReview","selectedSkillId","onChangeSelectedSkillId","onNavigateToSkill","parentSkillId"],w=function(e,t){return Object.fromEntries(Object.entries(e).filter((function(e){var n=Object(u.a)(e,2),i=n[0];n[1];return i!==t})))},I={skills:{},manuallyAddedSkills:{},isRefetching:!1,skillToCreate:void 0},C=function(e,t){switch(t.type){case"setSkills":return Object(l.a)(Object(l.a)({},e),{},{skills:t.skills});case"setManuallyAddedSkills":return Object(l.a)(Object(l.a)({},e),{},{manuallyAddedSkills:Object(l.a)(Object(l.a)({},e.manuallyAddedSkills),t.manuallyAddedSkills)});case"removeSkill":return Object(l.a)(Object(l.a)({},e),{},{skills:w(e.skills,t.skillId),manuallyAddedSkills:w(e.manuallyAddedSkills,t.skillId)});case"setIsRefetching":return Object(l.a)(Object(l.a)({},e),{},{isRefetching:t.isRefetching});case"setSkillToCreate":return Object(l.a)(Object(l.a)({},e),{},{skillToCreate:t.skillToCreate})}},E=function(e){var t=e.onCreateSkillReview,n=e.selectedSkillId,r=e.onChangeSelectedSkillId,g=e.onNavigateToSkill,w=e.parentSkillId,E=Object(c.a)(e,k),T=Object(O.useTranslate)({capitalize:!0}),L=Object(O.useAlert)(),_=Object(d.useReducer)(C,I),A=Object(u.a)(_,2),P=A[0],D=P.skills,M=P.manuallyAddedSkills,R=P.isRefetching,B=P.skillToCreate,F=A[1],U=Object(v.useAppContext)(),N=U.checkLayout,z=U.getErrorMessage,W=U.user,q=U.userCapabilities,H=Object(b.a)(),V=Object(f.useGetSuggestedSkillsLazyQuery)({variables:{skillContext:w,size:10,minDepth:"undefined"!==typeof w?2:void 0},fetchPolicy:"no-cache"}),G=Object(u.a)(V,2),J=G[0],Q=G[1],Z=Q.data,Y=Q.loading,K=Object(x.b)({parentId:void 0}),X=K.isOpened,$=K.open,ee=K.close,te=K.createSkill,ne=K.navigateToSuggestedSkill;Object(d.useEffect)((function(){N("disableSkillsSuggestions")||J()}),[]),Object(d.useEffect)((function(){X||F({type:"setSkillToCreate",skillToCreate:void 0})}),[X]),Object(d.useEffect)((function(){"undefined"!==typeof B&&$()}),[B]),Object(d.useEffect)((function(){if(null===Z||void 0===Z?void 0:Z.skillsSuggestions.nodes){var e=Z.skillsSuggestions.nodes.map((function(e){return Object(l.a)(Object(l.a)({},Object(f.getFormatedSkillBasicFragment)(e)),{},{subSkillsCount:e.subSkills.totalCount,isPowerable:e.isPowerable})}));F({type:"setSkills",skills:Object(l.a)({},Object.fromEntries(e.map((function(e){return[e.id,e]}))))})}}),[Z]);var ie=Object(d.useMemo)((function(){var e=Object.values(D).slice(0,10).sort(j.getSortedSkillsByName);return e.concat.apply(e,Object(o.a)(Object.values(M)))}),[D,M]),re=function(){var e=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H.query({query:f.GetSkillWithSubSkillsCountDocument,variables:{skillId:t,isGetSubSkillsCount:!0}}).then((function(e){var t,n,i=null===(t=e.data)||void 0===t?void 0:t.skill;if(i)return Object(l.a)(Object(l.a)({},Object(f.getFormatedSkillBasicFragment)(i)),{},{isPowerable:i.isPowerable,subSkillsCount:(null===(n=i.subSkills)||void 0===n?void 0:n.totalCount)||0})})).catch((function(){})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(e){F({type:"removeSkill",skillId:e})},se=function(e){return function(){r&&r(e)}},oe=function(e){return function(){g&&g(e)}},ce=function(){var e=Object(s.a)(a.a.mark((function e(t){var n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,i=t.isAddToProfile,e.abrupt("return",te({name:n,isAddToProfile:i}).then((function(){L.success(T("skill_created_msg")),ee()})).catch((function(e){L.error(z(e))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Y||0===ie.length&&!N("disableSkillsSuggestions")?null:Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(O.AssistantLayout,Object(l.a)(Object(l.a)({title:T(N("disableSkillsSuggestions")?"add_skills_to_your_profile":"suggested_skills"),rightElement:N("disableSkillsSuggestions")?void 0:Object(y.jsx)(O.IconButton,{iconAs:Y||R?h.a:m.a,accent:"primary",onClick:function(){F({type:"setIsRefetching",isRefetching:!0}),J().then((function(){F({type:"setIsRefetching",isRefetching:!1})}))},iconSize:18,disabled:Y||R})},E),{},{children:Object(y.jsxs)(O.Column,{width:"100%",alignItems:"flex-start",overflow:"hidden",children:[Object(y.jsx)(O.Box,{display:"flex",flexWrap:"wrap",width:"100%",mb:20,children:Object(y.jsx)(S,{maxWidth:"100%",children:ie.map((function(e){return Object(y.jsx)(p.SkillPowerBrick,{onCreatePower:(i=e.id,function(){var e=Object(s.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t({skillId:i,qualifiers:n}).then((function(){ae(i)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),canAddPower:e.isPowerable,isSelected:n===e.id,onSelect:se(e.id),skill:e,userId:W.id,subSkillsCount:e.subSkillsCount,onClickSubSkillsCount:oe(e.id),mr:1,mb:1},e.id);var i}))})}),Object(y.jsx)(p.SkillsSelector,{onSubmit:function(e){"undefined"!==typeof e&&(Object.keys(D).includes(e.id)||Object.keys(M).includes(e.id)||re(e.id).then((function(e){"undefined"!==typeof e&&F({type:"setManuallyAddedSkills",manuallyAddedSkills:Object(i.a)({},e.id,e)})})))},placeholder:T("search_a_skill"),isCreateNewSkillButtonEnabled:q.canCreateSkillNoLibrary,onCreateNewSkill:function(e){F({type:"setSkillToCreate",skillToCreate:e})}}),E.children&&Object(y.jsx)(O.Box,{mt:20,children:E.children})]})})),Object(y.jsx)(x.a,{isOpened:X,onClose:ee,onCreateSkill:ce,onClickSuggestedSkill:ne,initialName:B})]})},T=n(15),L=n(3),_=function(){var e=Object(d.useState)(),t=Object(u.a)(e,2),n=t[0],i=t[1],r=Object(T.useHistory)(),a=Object(v.useAppContext)().user,s=Object(f.useCreateSkillReviewMutation)(),o=Object(u.a)(s,2),c=o[0];return{createSkillReview:function(e){var t=e.skillId,n=e.qualifiers,i=e.onCompleted;return c({variables:{userId:a.id,skillId:t,qualifiers:n},onCompleted:function(){i&&i()}}).then((function(){}))},navigateToSkill:function(e){r.push(L.b.USER_ORGANIZATION_SKILL_DETAILS.getRoute({skillId:e}))},selectedSuggestedSkillId:n,setSelectedSuggestedSkillId:i,isCreatingSkillReview:o[1].loading}}},857:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return u}));n(0);var i=n(14),r=n(10),a=n(1),s=function(){return Object(a.jsxs)(i.Line,{width:"100%",display:"flex",flexWrap:"wrap",alignItems:"flex-start",justifyContent:"space-between",children:[Object(a.jsxs)(i.Line,{display:"flex",flexWrap:"wrap",children:[Object(a.jsx)(i.Box,{backgroundColor:"grey.1",borderRadius:"50%",width:"120px",height:"120px"}),Object(a.jsxs)(i.Box,{ml:2,width:"230px",pb:3,children:[Object(a.jsx)(i.LoaderSkeleton.Line,{width:"100%",mb:1}),Object(a.jsx)(i.LoaderSkeleton.Line,{width:"50%"})]})]}),Object(a.jsxs)(i.Box,{ml:2,py:2,width:"200px",children:[Object(a.jsxs)(i.Line,{children:[Object(a.jsx)(i.LoaderSkeleton.Point,{}),Object(a.jsx)(i.LoaderSkeleton.Line,{width:"100%"})]}),Object(a.jsxs)(i.Line,{mt:2,children:[Object(a.jsx)(i.LoaderSkeleton.Point,{}),Object(a.jsx)(i.LoaderSkeleton.Line,{width:"100%"})]})]}),Object(a.jsx)(i.Box,{height:"50px",width:"150px"})]})},o=function(){return Object(a.jsx)(i.Card,{as:i.Line,justifyContent:"space-between",boxShadow:"medium",py:25,px:35,alignItems:"flex-start",children:Object(a.jsx)(s,{})})},c=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(i.Line,{mb:2,children:[Object(a.jsx)(i.LoaderSkeleton.Point,{}),Object(a.jsx)(i.LoaderSkeleton.Line,{width:"50%"})]}),Object(a.jsx)(i.LoaderSkeleton.Line,{width:"75%"})]})},l=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(i.LoaderSkeleton.Line,{width:"80%",mb:3}),Object(a.jsx)(i.LoaderSkeleton.Line,{width:"66%",mb:1}),Object(a.jsx)(i.LoaderSkeleton.Line,{width:"33%",mb:1}),Object(a.jsx)(i.LoaderSkeleton.Line,{width:"50%",mb:1})]})},u=function(){var e=Object(r.useAppContext)().topBarHeight;return Object(a.jsx)(r.PageLayout,{p:"0px",children:Object(a.jsx)(i.Box,{overflow:"auto",display:"flex",alignItems:"top",flexWrap:"wrap",height:"calc(100vh - ".concat(e,"px)"),children:Object(a.jsxs)(i.Box,{p:1,flex:1,overflow:"auto",children:[Object(a.jsx)(o,{}),Object(a.jsx)(i.Desktop,{children:Object(a.jsxs)(i.Line,{flex:1,mt:3,alignItems:"flex-start",children:[Object(a.jsx)(i.Column,{width:"33%",mr:4,alignItems:"flex-start",children:Object(a.jsx)(l,{})}),Object(a.jsxs)(i.Box,{flex:1,overflow:"auto",width:"66%",children:[Object(a.jsx)(i.LoaderSkeleton.Line,{width:"66%",mb:1}),Object(a.jsx)(i.LoaderSkeleton.Line,{width:"33%",mb:1}),Object(a.jsx)(i.LoaderSkeleton.Line,{width:"50%",mb:1})]})]})}),Object(a.jsx)(i.TabletOrMobile,{children:Object(a.jsxs)(i.Box,{children:[Object(a.jsxs)(i.Box,{p:3,flex:1,overflow:"auto",width:"100%",children:[Object(a.jsx)(i.LoaderSkeleton.Line,{width:"66%",mb:1}),Object(a.jsx)(i.LoaderSkeleton.Line,{width:"33%",mb:1}),Object(a.jsx)(i.LoaderSkeleton.Line,{width:"50%",mb:1})]}),Object(a.jsx)(o,{})]})})]})})})}},861:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var i,r,a,s,o,c,l,u,d,b,j,f,p,O,m,h,v=n(0),x=["title","titleId"];function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function y(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function S(e,t){var n=e.title,S=e.titleId,k=y(e,x);return v.createElement("svg",g({id:"Capa_1",style:{transform:"rotate(-90deg)"},xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 255 255",ref:t,"aria-labelledby":S},k),n?v.createElement("title",{id:S},n):null,i||(i=v.createElement("g",null,v.createElement("g",{id:"arrow-drop-down"},v.createElement("polygon",{points:"0,63.75 127.5,191.25 255,63.75  "})))),r||(r=v.createElement("g",null)),a||(a=v.createElement("g",null)),s||(s=v.createElement("g",null)),o||(o=v.createElement("g",null)),c||(c=v.createElement("g",null)),l||(l=v.createElement("g",null)),u||(u=v.createElement("g",null)),d||(d=v.createElement("g",null)),b||(b=v.createElement("g",null)),j||(j=v.createElement("g",null)),f||(f=v.createElement("g",null)),p||(p=v.createElement("g",null)),O||(O=v.createElement("g",null)),m||(m=v.createElement("g",null)),h||(h=v.createElement("g",null)))}var k=v.forwardRef(S);n.p},873:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return S})),n.d(t,"d",(function(){return A}));var i=n(17),r=n(0),a=n(14),s=n(45),o=n(10),c=n(188);function l(e,t,n){var i,r,a;return null===(i=e.find((function(e){return e.skill===t.id})))||void 0===i||null===(r=i.qualifiers)||void 0===r||null===(a=r.find((function(e){return e.id===n})))||void 0===a?void 0:a.value}function u(e,t){if("undefined"!==typeof e){var n=e.find((function(e){return e.skill===t}));return(null===n||void 0===n?void 0:n.comment)||""}return""}var d=n(53),b=n(1),j=function(e){var t=e.placeholder,n=void 0===t?"":t,i=e.value,s=e.onChange,o=Object(r.useState)(i||""),c=Object(d.a)(o,2),l=c[0],u=c[1];Object(r.useEffect)((function(){u(i||"")}),[i]);return Object(b.jsx)(a.Line,{width:"100%",height:"100%",justifyContent:"center",children:Object(b.jsx)(a.TextArea,{placeholder:n,value:l,onChange:u,rows:1,onBlur:function(){s(l)}})})},f=function(e){var t=e.actualPowers,n=e.skills,d=e.onCommentChange,f=e.onQualifierChange,p=e.onRemove,O=Object(a.useTranslate)({capitalize:!0}),m=Object(r.useRef)(null),h=function(e){var t=new Set;return e&&e.forEach((function(e){return e.qualifiers.forEach((function(e){return t.add(e.id)}))})),Array.from(t)}(n),v=Object(r.useMemo)((function(){return x(h,n,t||[]).length}),[h,n,t]);function x(e,t,n){var r=new Map;t.forEach((function(e){r.set(e.id,e)}));var m=[{dataKey:"skill",headerTitle:O("skill",1),isSortable:!1,columnWidth:Object(s.b)("large"),cellRenderer:function(e){var t=e.node;return Object(b.jsx)(o.SkillNameWithIconAndDescriptionCell,{skill:{name:t.name,description:t.description,libraryContext:{logo:t.libraryContext.logo,color:t.libraryContext.color}},size:"large"})}}];return e.forEach((function(e){var u=function(e,t){if(e)return e.reduce((function(e,t){return[].concat(Object(c.a)(e),Object(c.a)(t.qualifiers))}),[]).find((function(e){return e.id===t})).name}(t,e),d=Object(s.d)(t,e);m.push({dataKey:"".concat(u),headerTitle:"".concat(u),headerDescription:"".concat(d),isSortable:!1,columnWidth:Object(s.a)(Object(s.e)(t,e))||Object(s.b)("large"),cellRenderer:function(t){var c=t.node,u=r.get(c.id),d=c.qualifiers.find((function(t){return t.id===e}));return d&&"undefined"!==typeof u?Object(b.jsx)(o.QualifierValueEditableCell,{size:Object(s.a)(d.fieldType),qualifier:d,skill:Object(i.a)(Object(i.a)({},u),{},{logo:u.libraryContext.logo,color:u.libraryContext.color}),value:l(n,c,e),onChange:function(t){return f(u.id,e,t)}}):Object(b.jsx)(a.Line,{width:"100%",height:"100%",bg:"grey.0"})}})})),m.push({dataKey:"comment",headerTitle:O("comment",1),isSortable:!1,columnWidth:Object(s.b)("large"),cellRenderer:function(e){var t=e.node;return Object(b.jsx)(j,{placeholder:O("add_comment"),value:u(n,t.id),onChange:function(e){return d(e,t.id)}})}}),p&&m.push({dataKey:"remove",headerTitle:O("remove",1),isSortable:!1,columnWidth:Object(s.b)("large"),cellRenderer:function(e){var t=e.node;return Object(b.jsx)(o.DeleteCell,{isClickable:!0,onClick:function(){return p(t.id)}})}}),m}Object(r.useEffect)((function(){var e;m&&(null===(e=m.current)||void 0===e||e.recomputeGridSize())}),[v]);var g=(null===n||void 0===n?void 0:n.length)||0;return Object(b.jsx)(a.Box,{pl:1,height:"100%",display:"flex",flexDirection:"column",overflow:"hidden",children:Object(b.jsx)(o.TableContent,{refFromParent:m,rows:(null===n||void 0===n?void 0:n.map((function(e){return e})))||[],fixedColumnCount:1,columns:x(h,n,t||[]),isLoading:"undefined"===typeof t,noRowsRenderer:function(){return Object(b.jsx)(o.NoDataToDisplay,{title:O("no_skills_to_validate"),isText:!1})},totalRowCount:g,rowHeight:50})})},p=n(187),O=n(285),m=n(63),h=n(122),v=n(905),x=["skills","onCommentChange","onQualifierChange","onRemove","actualPowers","onSkipSkill"],g=function(e){var t=e.skills,n=e.onCommentChange,s=e.onQualifierChange,o=(e.onRemove,e.actualPowers),c=e.onSkipSkill,l=Object(O.a)(e,x),u=Object(a.useTranslate)({capitalize:!0}),d=a.Accordion.useAccordion(),j=d.openedItems,f=d.openItem,g=d.closeItem,y=d.closeAll,S=Object(r.useMemo)((function(){return t.reduce((function(e,t){return Object(i.a)(Object(i.a)({},e),{},Object(p.a)({},t.id,t.qualifiers.length))}),{})}),[t]),k=Object(r.useMemo)((function(){return"undefined"!==typeof o?o.reduce((function(e,t){var n,r=t.qualifiers.reduce((function(e,t){return Object(i.a)(Object(i.a)({},e),{},Object(p.a)({},t.id,t.value))}),{});"number"!==typeof S[t.skill]||0===S[t.skill]?n=0:n=t.qualifiers.filter((function(e){return Object(h.getIsQualifierValueDefined)(e.value)})).length/S[t.skill];return Object(i.a)(Object(i.a)({},e),{},Object(p.a)({},t.skill,Object(i.a)(Object(i.a)({},r),{},{comment:t.comment,qualifiersEvaluationRate:n})))}),{}):{}}),[o,S]),w=function(e){var t=e.qualifierId,n=e.skillId;return function(e){s(n,t,e)}},I=function(e){return function(){y(),"undefined"!==typeof c&&c(e)}};return Object(b.jsx)(a.Accordion,Object(i.a)(Object(i.a)({openedItems:j,openItem:f,closeItem:g,closeAll:y},l),{},{children:t.map((function(e){var t,i;return Object(b.jsxs)(a.Accordion.Item,{header:Object(b.jsxs)(a.Line,{alignItems:"center",children:[Object(b.jsx)(a.Box,{mr:2,children:Object(b.jsx)(a.CircleProgressBar,{color:k[e.id].qualifiersEvaluationRate<=.5?"error":"success",size:24,strokeWidth:6,format:"none",value:k[e.id].qualifiersEvaluationRate})}),Object(b.jsx)(v.a,{color:e.libraryContext.color,name:e.name,logo:e.libraryContext.logo,iconMarginRight:2})]}),children:[e.qualifiers.map((function(t){var n;return Object(b.jsx)(a.Box,{mb:1,children:Object(b.jsx)(m.QualifierEditable,{qualifier:t,value:null===(n=k[e.id])||void 0===n?void 0:n[t.id],onChange:w({skillId:e.id,qualifierId:t.id})})},"qualifiersTableAccordionItemQualifier_".concat(t.id))})),Object(b.jsx)(a.Label,{content:u("comment"),name:"description",width:"100%",children:Object(b.jsx)(a.TextArea,{placeholder:u("leave_a_comment"),value:null===(t=k[e.id])||void 0===t?void 0:t.comment,onChange:(i=e.id,function(e){n(e,i)}),width:"100%"})}),Object(b.jsx)(a.Line,{width:"100%",justifyContent:"flex-end",mt:1,children:Object(b.jsx)(a.Button,{appearance:"clean",accent:"grey",onClick:I(e.id),children:u("no_evaluation_option")})})]},"qualifiersTableAccordionItem_".concat(e.id))}))}))},y=["skills","actualPowers","onCommentChange","onQualifierChange","onRemove","isLoading"],S=function(e){var t=e.skills,n=e.actualPowers,r=e.onCommentChange,s=e.onQualifierChange,c=e.onRemove,l=e.isLoading,u=Object(O.a)(e,y),d=Object(a.useTranslate)({capitalize:!0});return Object(b.jsx)(o.StandardModal,Object(i.a)(Object(i.a)({title:d("validate_skills_title"),confirmButtonLabel:d("save"),isLoading:l,width:1200,height:731,onCancel:u.onClose,isContentSpacing:!1},u),{},{children:l||"undefined"===typeof t||"undefined"===typeof n?Object(b.jsx)(a.Loader,{}):Object(b.jsx)(f,{skills:t,actualPowers:n,onCommentChange:r,onQualifierChange:s,onRemove:c})}))},k=n(139),w=n.n(k),I=n(286),C=n(115),E=n(19),T=n(287),L={skillsIds:void 0,isLoadingPowers:!1,skills:void 0,powers:void 0,reviews:{}},_=function(e,t){var n,r;switch(t.type){case"setSkillsIds":return Object(i.a)(Object(i.a)({},e.skillsIds===t.skillsIds?e:L),{},{skillsIds:t.skillsIds});case"loadSkillsAndPowers":return Object(i.a)(Object(i.a)({},e),{},{isLoadingSkills:!0,isLoadingPowers:!0});case"setSkills":return Object(i.a)(Object(i.a)({},e),{},{skills:t.skills,isLoadingSkills:!1});case"setPowers":return Object(i.a)(Object(i.a)({},e),{},{powers:t.powers,reviews:t.isInitReviews&&"undefined"!==typeof t.powers?(r=t.powers,Object.entries(r).reduce((function(e,t){var n=Object(d.a)(t,2),r=n[0],a=n[1],s=Object.fromEntries(Object.entries(a.qualifiers).filter((function(e){var t=Object(d.a)(e,2);return t[0],"undefined"!==typeof t[1]})));return Object.keys(s).length>0?Object(i.a)(Object(i.a)({},e),{},Object(p.a)({},r,Object(i.a)(Object(i.a)({},a),{},{qualifiers:s}))):e}),{})):e.reviews,isLoadingPowers:!1});case"setSkillsAndReviews":return Object(i.a)(Object(i.a)({},e),{},{skills:t.skills,reviews:t.reviews});case"updateComment":return Object(i.a)(Object(i.a)({},e),{},{reviews:Object(i.a)(Object(i.a)({},e.reviews),{},Object(p.a)({},t.skillId,Object(i.a)(Object(i.a)({},e.reviews[t.skillId]||{id:"",qualifiers:{}}),{},{comment:t.comment})))});case"updateQualifier":return Object(i.a)(Object(i.a)({},e),{},{reviews:Object(i.a)(Object(i.a)({},e.reviews),{},Object(p.a)({},t.skillId,Object(i.a)(Object(i.a)({},e.reviews[t.skillId]||{id:""}),{},{qualifiers:Object(i.a)(Object(i.a)({},(null===(n=e.reviews[t.skillId])||void 0===n?void 0:n.qualifiers)||{}),{},Object(p.a)({},t.qualifierId,t.value))})))});case"resetNewReviews":return Object(i.a)(Object(i.a)({},e),{},{reviews:L.reviews});default:return e}},A=function(e){var t=e.userId,n=e.isCreateAllReviews,a=void 0!==n&&n,s=e.isIgnoreSkillsWithAtLeastOneValuedQualifier,o=void 0!==s&&s,c=Object(r.useReducer)(_,L),l=Object(d.a)(c,2),u=l[0],b=u.skillsIds,j=u.skills,f=u.powers,O=u.reviews,m=u.isLoadingPowers,h=l[1],v=Object(C.a)(),x=Object(E.useGetSkillsForQualifiersTableLazyQuery)({fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first"}),g=Object(d.a)(x,2),y=g[0],S=g[1],k=S.data,A=S.loading,P=Object(E.useCreateBulkSkillReviewMutation)({refetchQueries:E.refetchQueries.onMutatePower}),D=Object(d.a)(P,2),M=D[0],R=D[1],B=R.loading,F=R.reset;Object(r.useEffect)((function(){var e=null===k||void 0===k?void 0:k.skills.nodes;if(e){var t=e.map((function(e){return Object(i.a)(Object(i.a)({},Object(E.getFormatedSkillBasicFragment)(e)),{},{description:Object(E.maybeToOptional)(e.description),qualifiers:e.qualifiers.nodes.map((function(e){return Object(E.getFormatedQualifierBasicFragment)(e)})),libraryContext:Object(E.getFormatedLibraryBasicFragment)(e.libraryContext)})})),n=Object(T.getSortedSkills)(t);h({type:"setSkills",skills:n.reduce((function(e,t){return Object(i.a)(Object(i.a)({},e),{},Object(p.a)({},t.id,t))}),{})})}}),[k]),Object(r.useEffect)((function(){"undefined"!==typeof b&&y({variables:{ids:b}})}),[b]);var U=function(){var e=Object(I.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.query({query:E.GetActualPowersDocument,variables:{id:t}}).then((function(e){var t,n,r=null===(t=e.data)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.poweredSkills.edges;if(r&&"undefined"!==typeof j){var a=r.reduce((function(e,t){return Object(i.a)(Object(i.a)({},e),{},Object(p.a)({},t.skill.id,{id:t.id,comment:void 0,qualifiers:t.qualifiers.edges.reduce((function(e,t){return Object(i.a)(Object(i.a)({},e),{},Object(p.a)({},t.node.id,t.value))}),{})}))}),{});return Object.entries(j).reduce((function(e,t){var n,r,s=Object(d.a)(t,2),o=s[0],c=s[1];return Object(i.a)(Object(i.a)({},e),{},Object(p.a)({},o,{id:(null===(n=a[o])||void 0===n?void 0:n.id)||"",comment:null===(r=a[o])||void 0===r?void 0:r.comment,qualifiers:c.qualifiers.reduce((function(e,t){var n;return Object(i.a)(Object(i.a)({},e),{},Object(p.a)({},t.id,null===(n=a[o])||void 0===n?void 0:n.qualifiers[t.id]))}),{})}))}),{})}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){U(t).then((function(e){h({type:"setPowers",powers:e,isInitReviews:a&&0===Object.keys(O).length})}))}),[j,t]);var N=function(){var e=Object(I.a)(w.a.mark((function e(){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object.entries(O).map((function(e){var n=Object(d.a)(e,2),i=n[0],r=n[1];return{skillId:i,userId:t,comment:r.comment,qualifiers:Object.entries(r.qualifiers).map((function(e){var t=Object(d.a)(e,2);return{id:t[0],value:t[1]}}))}})),e.abrupt("return",M({variables:{input:{skillReviews:n}}}).then((function(){})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{skills:Object(r.useMemo)((function(){if("undefined"!==typeof j){if(o&&"undefined"!==typeof f)return Object.values(j).filter((function(e){var t;return!Object.values((null===(t=f[e.id])||void 0===t?void 0:t.qualifiers)||{}).some((function(e){return"undefined"!==typeof e}))}));if(!o)return Object.values(j)}}),[j,o,f]),actualPowers:function(){if("undefined"!==typeof f)return Object.entries(f).map((function(e){var t,n=Object(d.a)(e,2),i=n[0],r=n[1];return{id:r.id,comment:(null===(t=O[i])||void 0===t?void 0:t.comment)||r.comment,skill:i,qualifiers:Object.entries(r.qualifiers).map((function(e){var t,n,r=Object(d.a)(e,2),a=r[0],s=r[1],o=null===(t=O[i])||void 0===t||null===(n=t.qualifiers)||void 0===n?void 0:n[a];return{id:a,value:"undefined"!==typeof o?o:s}}))}}))}(),setSkillsIds:function(e){h({type:"setSkillsIds",skillsIds:e})},changeComment:function(e,t){h({type:"updateComment",skillId:t,comment:e})},updateQualifier:function(e,t,n){h({type:"updateQualifier",skillId:e,qualifierId:t,value:n})},removeSkill:function(e){var t=Object(i.a)({},j);delete t[e];var n=Object(i.a)({},O);delete n[e],h({type:"setSkillsAndReviews",skills:t,reviews:n})},isLoading:m||A,createReviews:N,isCreatingReviews:B,reset:function(){h({type:"resetNewReviews"}),F()}}}},889:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i,r,a,s=n(0),o=["title","titleId"];function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function u(e,t){var n=e.title,u=e.titleId,d=l(e,o);return s.createElement("svg",c({id:"Capa_1",enableBackground:"new 0 0 515.555 515.555",viewBox:"0 0 515.555 515.555",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(90)",ref:t,"aria-labelledby":u},d),n?s.createElement("title",{id:u},n):null,i||(i=s.createElement("path",{d:"m303.347 18.875c25.167 25.167 25.167 65.971 0 91.138s-65.971 25.167-91.138 0-25.167-65.971 0-91.138c25.166-25.167 65.97-25.167 91.138 0"})),r||(r=s.createElement("path",{d:"m303.347 212.209c25.167 25.167 25.167 65.971 0 91.138s-65.971 25.167-91.138 0-25.167-65.971 0-91.138c25.166-25.167 65.97-25.167 91.138 0"})),a||(a=s.createElement("path",{d:"m303.347 405.541c25.167 25.167 25.167 65.971 0 91.138s-65.971 25.167-91.138 0-25.167-65.971 0-91.138c25.166-25.167 65.97-25.167 91.138 0"})))}var d=s.forwardRef(u);n.p},890:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i,r,a,s,o,c,l=n(0),u=["title","titleId"];function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function b(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function j(e,t){var n=e.title,j=e.titleId,f=b(e,u);return l.createElement("svg",d({viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":j},f),n?l.createElement("title",{id:j},n):null,i||(i=l.createElement("path",{d:"M8.33789 9.72412L9.3682 11.2541H10.5119L11.4906 9.72412H8.33789Z"})),r||(r=l.createElement("path",{d:"M11.4808 14.3228L10.7596 11.8828H9.08015L8.34863 14.3228H11.4808Z"})),a||(a=l.createElement("path",{d:"M12.0263 7.85442C16.0961 6.00509 14.3136 -0.24262 9.91419 0.00728833C5.53536 -0.192638 3.82504 6.00509 7.78144 7.82443C4.18565 8.10432 2.3826 11.0033 2.59896 14.3121H4.20625C3.63958 7.49455 16.1682 7.58451 15.6118 14.3121H17.2294C17.4252 11.0033 15.6015 8.13431 12.0263 7.85442ZM9.91419 1.57671C13.6233 1.43676 13.5615 7.0847 9.91419 6.90476C6.09173 7.10469 6.16385 1.26683 9.91419 1.57671Z"})),s||(s=l.createElement("path",{d:"M1.5 20H5.44953V16.0015H1.5V20ZM4.28442 17.181V18.8104H2.67499V17.181H4.28442Z"})),o||(o=l.createElement("path",{d:"M7.854 20H11.9753V16.0015H7.854V20ZM10.7595 17.181V18.8104H9.08008V17.181H10.7595Z"})),c||(c=l.createElement("path",{d:"M14.207 20H18.5V16.0015H14.207V20ZM17.2336 17.181V18.8104H15.4842V17.181H17.2336Z"})))}var f=l.forwardRef(j);n.p},893:function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return S})),n.d(t,"c",(function(){return L})),n.d(t,"d",(function(){return _}));var i=n(139),r=n.n(i),a=n(286),s=n(0),o=n(751),c=n(936),l=n(14),u=n(63),d=n(10),b=n(858),j=n(859),f=n(937),p=n(1011),O=n(792),m=(n(938),function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"generateDocument",value:function(e){var t=this.buildHeaders(),n="".concat(Object(u.getDomainUrl)(),"/resume");return fetch(n+"/api/templates/generate",this.buildFetchOptions({method:"POST",headers:t,body:Object(o.get)(e,"docData",{})})).then((function(e){return e.blob()})).then((function(t){Object(O.saveAs)(t,Object(o.get)(e,"filename","generated_document."+Object(o.get)(e,"docData.format","pdf")))}))}}]),n}(function(){function e(){Object(b.a)(this,e),this.API_URL=document.getElementById("url-root").getAttribute("data")+"/api/",this.API_URL_V2=document.getElementById("url-root").getAttribute("data")+"/api/v2/",this.ROOT_URL=document.getElementById("url-server").getAttribute("data")+"/api/"}return Object(j.a)(e,[{key:"buildHeaders",value:function(e){var t={"Content-Type":"application/json"};return(e=e||{})["Content-Type"]&&(t["Content-Type"]=e["Content-Type"]),t}},{key:"buildFetchOptions",value:function(e){var t;return t=e.body&&!1!==e.parseBody?JSON.stringify(e.body):e.body,{method:e.method||"GET",headers:e.headers||{},body:t||void 0,credentials:"same-origin"}}},{key:"checkResponseStatus",value:function(e){if(e.status>=200&&e.status<310)return e;var t;switch(e.status){case 401:"localhost"!==window.location.hostname?window.location="".concat(window.location.origin,"/login?next=").concat(window.location):console.log("atk expired, needs to be updated"),t=new u.NotAuthedError(e.statusText);break;case 403:t=new u.PermissionDeniedError(e.statusText);break;case 404:t=new u.ResourceNotFoundError(e.statusText);break;case 500:default:t=new u.UnknownError(e.statusText)}throw t.response=e,t}},{key:"defaultErrorHandler",value:function(e,t,n){n.error(t(e.label))}},{key:"parseJSON",value:function(e){return e.json()}},{key:"addAntiCacheTimestamp",value:function(e){return e?e+(-1!==e.indexOf("?")?"&":"?")+"_="+Date.now():e}}],[{key:"objects",value:function(){if("BaseModel"===this.class)throw new Error("cannot instantiate BaseModel");return new this}}]),e}())),h=n(1),v=new m,x=function(e){var t=e.aoData,n=e.requestsHandlers,i=e.userKey,b=Object(s.useRef)(null),j=Object(d.useAppContext)().user;Object(s.useEffect)((function(){return window.addEventListener("message",f),function(){return window.removeEventListener("message",f)}}),[]);var f=function(){var e=Object(a.a)(r.a.mark((function e(t){var i,a,s,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.data.action,e.next="get_context_request"===e.t0?3:"get_infos_request"===e.t0?5:"generate_document"===e.t0?24:"update_assessment"===e.t0?27:29;break;case 3:return(null===(i=b.current)||void 0===i?void 0:i.contentWindow)&&b.current.contentWindow.postMessage({action:"get_context",reqId:t.data.reqId,body:p()},"*"),e.abrupt("break",30);case 5:e.t1=t.data.data_type,e.next="user_infos"===e.t1?8:"user_jobs"===e.t1?10:"app_qualifiers"===e.t1?12:"skills"===e.t1?14:"assessment"===e.t1?16:"skill_validations"===e.t1?18:"user_powers"===e.t1?20:22;break;case 8:return a=n.user_infos.get,e.abrupt("break",22);case 10:return a=n.user_jobs.get,e.abrupt("break",22);case 12:return a=n.app_qualifiers.get,e.abrupt("break",22);case 14:return a=n.skills.get,e.abrupt("break",22);case 16:return a=n.assessment.get,e.abrupt("break",22);case 18:return a=n.skill_validations.get,e.abrupt("break",22);case 20:return a=n.user_powers.get,e.abrupt("break",22);case 22:return a&&a(t.data||{}).then((function(e){var n;(null===(n=b.current)||void 0===n?void 0:n.contentWindow)&&b.current.contentWindow.postMessage({action:"get_infos",reqId:t.data.reqId,body:e},"*")}),(function(e){var n;(null===(n=b.current)||void 0===n?void 0:n.contentWindow)&&b.current.contentWindow.postMessage({action:"get_infos",reqId:t.data.reqId,error:"error"},"*")})),e.abrupt("break",30);case 24:return(s=Object(o.get)(t.data,"data"))?v.generateDocument(s).then((function(){var e;(null===(e=b.current)||void 0===e?void 0:e.contentWindow)&&b.current.contentWindow.postMessage({action:"generate_document_done",reqId:Object(o.get)(t.data,"reqId"),body:{success:!0}},"*")})).catch((function(e){var t;(null===(t=b.current)||void 0===t?void 0:t.contentWindow)&&b.current.contentWindow.postMessage({action:"generate_document_done",reqId:Object(o.get)(e.data,"reqId"),body:{success:!1}},"*")})):(null===(c=b.current)||void 0===c?void 0:c.contentWindow)&&b.current.contentWindow.postMessage({action:"generate_document_done",reqId:Object(o.get)(t.data,"reqId"),body:{success:!1}},"*"),e.abrupt("break",30);case 27:return n.update_assessment(t.data).then((function(e){var n,i=e.success;(null===(n=b.current)||void 0===n?void 0:n.contentWindow)&&b.current.contentWindow.postMessage({action:"update_assessment",reqId:t.data.reqId,body:{success:i}},"*")})),e.abrupt("break",30);case 29:return e.abrupt("break",30);case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){return{active_user:j.id||null,user:i,client:Object(u.getAppConfiguration)(),addOnData:t}},O=Object(h.jsx)("iframe",{ref:b,src:t.src,height:"100%",width:"100%",style:{borderWidth:0},title:"assessmentIframe"}),m=c.isMobileSafari?" webkit-scroll":"",x=Object(h.jsx)(l.Box,{width:"100%",height:"100%",className:m,children:O});return Object(h.jsx)(l.Box,{width:"100%",height:"100%",className:"fullh fullw",children:x})},g=n(285),y=["aoData","userKey","requestsHandlers","isOpened","onClose"],S=function(e){var t=e.aoData,n=e.userKey,i=e.requestsHandlers,r=e.isOpened,a=e.onClose;Object(g.a)(e,y);return Object(h.jsx)(d.StandardModal,{isOpened:r,onClose:a,width:"90vw",height:"90vw",children:"undefined"!==typeof t&&Object(h.jsx)(x,{aoData:t,requestsHandlers:i,userKey:n})})},k=n(187),w=n(53),I=n(17),C=n(115),E=n(19),T=["__typename"],L=function(e){var t=e.userLocale,n=Object(s.useState)(),i=Object(w.a)(n,2),r=i[0],a=i[1],o=Object(l.useSwitch)(!1),c=o.active,u=o.on,d=o.off,b=function(e){var t=e.userLocale,n=Object(E.useGetAddonsQuery)(),i=n.data,r=n.loading;return{addons:Object(s.useMemo)((function(){var e=null===i||void 0===i?void 0:i.me.organization.addons;if(e)return e.filter((function(e){return"resource-button"===e.capability})).map((function(e){e.__typename;var n=Object(g.a)(e,T);return Object(I.a)(Object(I.a)({},n),{},{title:n.title[t||""]||n.title.default})}))}),[i]),isLoading:r}}({userLocale:t}),j=b.addons,f=b.isLoading,p=_();Object(s.useEffect)((function(){c||a(void 0)}),[c]),Object(s.useEffect)((function(){"undefined"!==typeof r&&u()}),[r]);return{addons:j,isLoading:f,isOpened:c,close:d,selectAddon:function(e){if("undefined"!==typeof j){var t=j.find((function(t){return t.id===e}));"undefined"!==typeof t&&a(t)}},addonData:r,requestsHandlers:p}},_=function(){var e=Object(C.a)(),t=function(){var t=Object(a.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.query({query:E.AssessmentAddonGetUserInfosDocument,variables:{userId:n}}).then((function(e){var t,n,i,r,a,s,o=null===(t=e.data)||void 0===t?void 0:t.user;if(o)return Object(I.a)(Object(I.a)({},Object(E.getFormatedUserBasicFragment)(o)),{},{email:Object(E.maybeToOptional)(o.email),title:Object(E.maybeToOptional)(o.email),place:{label:(null===(n=o.place)||void 0===n?void 0:n.label)||"",location:{longitude:(null===(i=o.place)||void 0===i||null===(r=i.location)||void 0===r?void 0:r.longitude)||0,latitude:(null===(a=o.place)||void 0===a||null===(s=a.location)||void 0===s?void 0:s.latitude)||0}},externalId:Object(E.maybeToOptional)(o.externalId),birthday:Object(E.maybeToOptional)(o.birthday),startDate:Object(E.maybeToOptional)(o.startDate),endDate:Object(E.maybeToOptional)(o.endDate),headline:Object(E.maybeToOptional)(o.headline),customFields:Object(E.maybeToOptional)(o.customFields),locale:Object(E.maybeToOptional)(null===o||void 0===o?void 0:o.locale),groups:null===o||void 0===o?void 0:o.groups.nodes.map((function(e){return{id:e.id,name:e.name}}))})})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n=function(){var t=Object(a.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.query({query:E.AssessmentAddonGetUserPowersDocument,variables:{userId:n}}).then((function(e){var t,n,i=null===(t=e.data)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.poweredSkills.edges;if("undefined"!==typeof i)return i.map((function(e){var t=e.qualifiers.edges.reduce((function(e,t){return Object(I.a)(Object(I.a)({},e),{},Object(k.a)({},t.node.id,{value:t.value,validated:t.validated,updated:t.updatedAt}))}),{});return{id:e.id,description:Object(E.maybeToOptional)(e.description),skill:Object(I.a)(Object(I.a)({},Object(E.getFormatedSkillBasicFragment)(e.skill)),{},{externalId:e.skill.externalId||"",customFields:Object(E.maybeToOptional)(e.skill.customFields),libraryContext:Object(E.getFormatedLibraryBasicFragment)(e.skill.libraryContext)}),qualifiers:e.skill.qualifiers.nodes.map((function(e){var n=t[e.id];return Object(I.a)(Object(I.a)({},Object(E.getFormatedQualifierBasicFragment)(e)),n||{})}))}}))})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i=function(){var t=Object(a.a)(r.a.mark((function t(n){var i,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.userId,a=n.skillId,t.abrupt("return",e.query({query:E.AssessmentAddonGetSkillReviewsDocument,variables:{userId:i,skillId:a}}).then((function(e){var t,n,i;return((null===(t=e.data)||void 0===t||null===(n=t.user)||void 0===n||null===(i=n.power)||void 0===i?void 0:i.skillReviews.nodes)||[]).map((function(e){var t={id:e.assessor.id,displayName:e.assessor.displayName,avatarURL:Object(E.maybeToOptional)(e.assessor.avatarURL)};return"User"===e.assessor.__typename&&(t.familyName=Object(E.maybeToOptional)(e.assessor.familyName),t.givenName=Object(E.maybeToOptional)(e.assessor.givenName)),{id:e.id,actionType:e.actionType,assessor:Object(E.getFormatedUserBasicFragment)(t),comment:Object(E.maybeToOptional)(e.comment),created:e.createdAt,qualifiers:e.qualifiers.edges.map((function(e){return{id:e.node.id,value:e.value,validated:e.validated}}))}}))})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=function(){var t=Object(a.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.query({query:E.AssessmentAddonGetUserPinnedJobsDocument,variables:{id:n}}).then((function(e){var t,n,i=null===(t=e.data)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.pinnedJobs.nodes;if(i)return i.map((function(e){return{id:e.id,name:e.name}}))})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o=function(){var t=Object(a.a)(r.a.mark((function t(n){var i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.map((function(t){return e.query({query:E.AssessmentAddonGetSkillDocument,variables:{skillId:t}})})),t.abrupt("return",Promise.all(i).then((function(e){var t=[];return e.forEach((function(e){var n,i=null===(n=e.data)||void 0===n?void 0:n.skill;i&&t.push(Object(I.a)(Object(I.a)({},Object(E.getFormatedSkillBasicFragment)(i)),{},{libraryContext:Object(E.getFormatedLibraryBasicFragment)(i.libraryContext),qualifiers:i.qualifiers.nodes.map((function(e){return Object(E.getFormatedQualifierBasicFragment)(e)}))}))})),t})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c=function(){var t=Object(a.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.query({query:E.AssessmentAddonGetQualifiersDocument}).then((function(e){var t,n=null===(t=e.data)||void 0===t?void 0:t.qualifiers.nodes;if(n)return n.map((function(e){return Object(E.getFormatedQualifierBasicFragment)(e)}))})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{user_infos:{get:function(){var e=Object(a.a)(r.a.mark((function e(n){var i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n._key,e.abrupt("return",t(i));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},user_powers:{get:function(){var e=Object(a.a)(r.a.mark((function e(t){var i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t._key,e.abrupt("return",n(i));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},skill_validations:{get:function(){var e=Object(a.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.reqParams.userId,a=t.reqParams.skillId,e.abrupt("return",i({userId:n,skillId:a}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},user_jobs:{get:function(){var e=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key,e.abrupt("return",s(n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},skills:{get:function(){var e=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.keys,e.abrupt("return",o(n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},app_qualifiers:{get:function(){var e=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},assessment:{get:function(){var e=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},update_assessment:function(){var e=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{success:!1});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}},933:function(e,t,n){"use strict";n.d(t,"b",(function(){return he})),n.d(t,"a",(function(){return ve})),n.d(t,"c",(function(){return ge}));var i=n(139),r=n.n(i),a=n(17),s=n(286),o=n(53),c=n(285),l=n(0),u=n.n(l),d=n(15),b=n(14),j=n(19),f=n(10),p=n(3),O=n(836),m=n(188),h=n(63),v=n(288),x=n(1),g=["userId","onRemove"],y=function(e){var t=e.userId,n=e.onRemove,i=Object(c.a)(e,g),r=Object(j.useGetUserBasicInfosQuery)({variables:{id:t}}),s=r.data,o=(r.loading,u.a.useMemo((function(){if(null===s||void 0===s?void 0:s.user)return{id:s.user.id,displayName:s.user.displayName,avatarURL:Object(j.maybeToOptional)(s.user.avatarURL),familyName:Object(j.maybeToOptional)(s.user.familyName),givenName:Object(j.maybeToOptional)(s.user.givenName)}}),[s]));return o?Object(x.jsxs)(b.Line,Object(a.a)(Object(a.a)({width:"100%",justifyContent:"space-between"},i),{},{children:[Object(x.jsx)(h.UserBasicInfo,{user:o,size:"small"}),Object(x.jsx)(b.IconButton,{iconAs:v.a,onClick:n,accent:"grey"})]})):null},S=["initialSelectedUsers","description","selectedUsersText","onSubmit","renderFooter","isAllowEmptySelection"],k=["selectedUsers","onChange"],w=function(e){var t=e.initialSelectedUsers,n=void 0===t?[]:t,i=e.description,r=e.selectedUsersText,s=e.onSubmit,u=e.renderFooter,d=e.isAllowEmptySelection,j=void 0!==d&&d,f=Object(c.a)(e,S),p=Object(l.useState)(n),O=Object(o.a)(p,2),m=O[0],h=O[1];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(b.Box,Object(a.a)(Object(a.a)({flexGrow:1,overflow:"auto",width:"100%"},f),{},{children:[Object(x.jsx)(b.Text,{fontWeight:"bold",mb:1,children:i}),Object(x.jsx)(I,{selectedUsers:m,onChange:h,width:"75%"})]})),u({text:r(m.length),isSubmitButtonEnabled:j||m.length>0,onSubmit:function(){s(m)}})]})},I=function(e){var t=e.selectedUsers,n=void 0===t?[]:t,i=e.onChange,r=Object(c.a)(e,k),s=Object(b.useTranslate)(),o=function(e){return function(){i(n.filter((function(t){return t!==e})))}};return Object(x.jsxs)(b.Box,Object(a.a)(Object(a.a)({},r),{},{children:[n.map((function(e){return Object(x.jsx)(y,{userId:e,onRemove:o(e),my:0},e)})),Object(x.jsx)(h.UsersSelector,{ignoredUsersIds:n,onSubmit:function(e){i([].concat(Object(m.a)(n),[e.id]))},placeholder:s("add"),mt:2})]}))},C=["initialSelectedApprovers","onSubmit","renderFooter"],E=function(e){var t=e.initialSelectedApprovers,n=e.onSubmit,i=e.renderFooter,r=Object(c.a)(e,C),s=Object(b.useTranslate)();return Object(x.jsx)(w,Object(a.a)({initialSelectedUsers:t,description:s("assessment_add_approvers_description"),selectedUsersText:function(e){return s("num_approvers",e)},onSubmit:n,renderFooter:i},r))},T=["initialSelectedAssessors","onSubmit","renderFooter"],L=function(e){var t=e.initialSelectedAssessors,n=e.onSubmit,i=e.renderFooter,r=Object(c.a)(e,T),s=Object(b.useTranslate)();return Object(x.jsx)(w,Object(a.a)({initialSelectedUsers:t,description:s("assessment_add_assessors_description"),selectedUsersText:function(e){return s("num_assessors",e)},onSubmit:n,renderFooter:i,isAllowEmptySelection:!0},r))},_=n(32),A=n(115),P=n(746),D=n(422),M=n(164);var R=function(e){var t=e.onOpenPopover,n=e.isOpened,i=e.onClose,r=e.buttonLabel,a=e.content;return Object(x.jsx)(b.Popover,{isOpened:n,onClose:i,content:a,children:Object(x.jsx)(b.Button,{onClick:t,appearance:"clean",mr:1,children:r})})},B=["name","value","isRequired","isDisabled","isUniqueChoice"],F=function(e){var t=e.name,n=e.value,i=e.isRequired,r=e.isDisabled,s=e.isUniqueChoice,o=void 0!==s&&s,l=Object(c.a)(e,B);return Object(x.jsx)(b.Box,Object(a.a)(Object(a.a)({},l),{},{children:Object(x.jsxs)(b.Text,{as:"label",fontWeight:"bold",children:[o?Object(x.jsx)(b.RadioButton,{name:t,value:n,disabled:r||i}):Object(x.jsx)(b.Checkbox,{name:t,value:n,disabled:r||i}),Object(x.jsx)(U,{name:t,isRequired:i,isDisabled:r})]})}))},U=function(e){var t=e.name,n=e.isRequired,i=e.isDisabled,r=Object(b.useTranslate)();return n?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(b.Text,{color:"grey.6",children:t}),Object(x.jsxs)(b.Text,{textTransform:"lowerCase",ml:0,children:["(",r("mandatory"),")"]})]}):i?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(b.Text,{color:"grey.3",children:t}),Object(x.jsx)(b.Text,{textTransform:"lowerCase",color:"grey.6",ml:2,children:r("unfulfilled_access_conditions")})]}):Object(x.jsx)(b.Text,{children:t})},N=["skillsFromList","initialSelectedSkills","isUniqueChoice","onSubmit","renderFooter","onAddSkills"],z=["libraryContext"],W=["name","logo","color"],q=function(e){var t=e.skillsFromList,n=void 0===t?[]:t,i=e.initialSelectedSkills,r=void 0===i?[]:i,s={};(null===n||void 0===n?void 0:n.length)>0&&(s=function(e){var t=new D.schema.Entity("libraries",{},{processStrategy:function(t,n,i){return Object(a.a)(Object(a.a)({},t),{},{skills:e.filter((function(e){return e.skill.libraryContext.id===n[i].id})).sort((function(e,t){return Object(M.compareWith)(e,t,(function(e){var t;return null===e||void 0===e||null===(t=e.skill)||void 0===t?void 0:t.name}))})).map((function(e){return e.skill.id}))})}}),n=new D.schema.Entity("skills",{libraryContext:t},{processStrategy:function(e,t,n){return Object(a.a)(Object(a.a)({},e),{},{isDisabled:!t.isAccessConditionFullfilled,isRequired:t.isRequired||!1})}}),i=new D.schema.Entity("assessmentSkills",{skill:n},{idAttribute:function(t,n,i){return e.indexOf(t)}});return Object(D.normalize)(e,[i])}(n));var c=s.entities||{},l=c.libraries,u=void 0===l?{}:l,d=c.skills,b=void 0===d?{}:d,j=Object.entries(b).reduce((function(e,t){var n=Object(o.a)(t,2),i=n[0],r=n[1],a=e.requiredSkillsIds,s=e.selectableSkillsIds;return r.isRequired&&a.push(i),r.isRequired||r.isDisabled||s.push(i),{requiredSkillsIds:a,selectableSkillsIds:s}}),{requiredSkillsIds:[],selectableSkillsIds:[]}),f=j.requiredSkillsIds;return{normalizedLibraries:u,normalizedSkills:b,requiredSkillsIds:f,selectableSkillsIds:j.selectableSkillsIds,selectedSkills:Array.from(new Set([].concat(Object(m.a)(f),Object(m.a)(r))))}},H=function(e,t){switch(t.type){case"setSelectedSkills":return Object(a.a)(Object(a.a)({},e),{},{selectedSkills:t.selectedSkills});case"selectAll":return Object(a.a)(Object(a.a)({},e),{},{selectedSkills:[].concat(Object(m.a)(e.selectableSkillsIds),Object(m.a)(e.requiredSkillsIds))});case"unselectAll":return Object(a.a)(Object(a.a)({},e),{},{selectedSkills:e.requiredSkillsIds});case"updateSkillsList":return Object(a.a)(Object(a.a)({},e),q({skillsFromList:t.skillsFromList,initialSelectedSkills:t.selectedSkills}));default:return e}},V=function(e){var t,n=e.skillsFromList,i=e.initialSelectedSkills,u=e.isUniqueChoice,d=e.onSubmit,f=e.renderFooter,p=e.onAddSkills,O=Object(c.a)(e,N),m=Object(l.useReducer)(H,q({skillsFromList:n,initialSelectedSkills:i})),v=Object(o.a)(m,2),g=v[0],y=g.normalizedLibraries,S=g.normalizedSkills,k=g.selectedSkills,w=v[1],I=Object(b.useTranslate)({capitalize:!0}),C=Object(b.useSwitch)(!1),E=C.active,T=C.on,L=C.off,_=Object(A.a)(),P=Object(l.useMemo)((function(){return Object.keys(S).every((function(e){return k.includes(e)}))}),[S,k]);Object(l.useEffect)((function(){w({type:"updateSkillsList",skillsFromList:n,selectedSkills:k})}),[n]);var D=function(){var e=Object(s.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){return _.query({query:j.GetSkillBasicInfosWithLibraryBasicInfosDocument,variables:{id:e.id},fetchPolicy:"cache-first"})})),e.abrupt("return",Promise.all(n).then((function(e){return e.map((function(e){var t;if(null===(t=e.data)||void 0===t?void 0:t.skill){var n=e.data.skill,i=n.libraryContext,r=Object(c.a)(n,z);return Object(a.a)(Object(a.a)({},Object(j.getFormatedSkillBasicFragment)(r)),{},{libraryContext:Object(j.getFormatedLibraryBasicFragment)(i)})}}))})).then((function(e){return e.filter((function(e){return"undefined"!==typeof e}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=u?b.RadioGroup:b.CheckboxGroup;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(b.Box,Object(a.a)(Object(a.a)({mx:3,pt:3,overflow:"auto",flexGrow:1},O),{},{children:["undefined"!==typeof y&&Object.keys(y).length>0?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(b.Box,{mb:2,children:[Object(x.jsx)(b.Text,{textTransform:"uppercase",fontWeight:"bold",mb:2,children:I("two_points",{phrase:I("assessment_select_skills_description")})}),!u&&Object(x.jsxs)(b.Text,{as:"label",name:"selectAll",fontWeight:"bold",ml:3,children:[Object(x.jsx)(b.Checkbox,{checked:P,onChange:function(e){w(e?{type:"selectAll"}:{type:"unselectAll"})},name:"selectAll",ml:1}),I("select_all")]})]}),Object(x.jsx)(b.Separator,{width:"100%"}),Object(x.jsx)(b.Box,{mb:20,children:Object(x.jsx)(M,{value:k,onChange:function(e){w({type:"setSelectedSkills",selectedSkills:e})},children:null===(t=Object.values(y))||void 0===t?void 0:t.map((function(e){return Object(x.jsxs)(b.Box,{display:"flex",flexDirection:"column",mt:3,mb:1,children:[Object(x.jsx)(G,{name:e.name,logo:e.logo,color:e.color,width:"100%",mb:1}),Object(x.jsx)(b.Box,{ml:3,children:e.skills.map((function(e){return Object(x.jsx)(F,{value:e,name:S[e].name,isRequired:S[e].isRequired,isDisabled:S[e].isDisabled,isUniqueChoice:u,mb:0,p:1,bg:k.includes(e)?"grey.1":"none"},e)}))})]},e.id)}))})})]}):Object(x.jsx)(b.Text,{mb:2,children:I("no_skill_in_scope")}),Object(x.jsx)(R,{onOpenPopover:T,isOpened:E,onClose:L,buttonLabel:I("add_a_something",{object:I("a_skill",1)}),content:Object(x.jsx)(h.SkillsNavigator,{blockLibrarySelection:!0,isSkillWithChildrenSelectionBlocked:!0,buttonLabel:I("add"),onSubmit:function(e){var t=n.map((function(e){return e.skill.id})),i=e.filter((function(e){return!t.includes(e.id)}));return D(i).then((function(e){p(e),L()}))},multiple:!0})})]})),f({text:I("num_selected_skills",k.length),isSubmitButtonEnabled:!0,onSubmit:function(){d(k)}})]})},G=function(e){var t=e.name,n=e.logo,i=e.color,r=Object(c.a)(e,W),s=Object(h.getIconComponent)(n)||P.a;return Object(x.jsxs)(b.Line,Object(a.a)(Object(a.a)({width:"100%",mb:1},r),{},{children:[Object(x.jsx)(b.Icon,{as:s,color:i,size:24,mr:2}),Object(x.jsx)(b.Text,{textTransform:"uppercase",fontWeight:"bold",children:t})]}))},J=n(745),Q=["userJobs","onSubmit","renderFooter","onAddJobs"],Z=function(e){var t=e.userJobs,n=void 0===t?[]:t,i=e.onSubmit,r=e.renderFooter,s=e.onAddJobs,u=Object(c.a)(e,Q),d=Object(b.useTranslate)(),j=Object(b.useSwitch)(!1),f=j.active,p=j.on,O=j.off,m=Object(l.useState)(n.map((function(e){return e.id}))),v=Object(o.a)(m,2),g=v[0],y=v[1];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(b.Box,Object(a.a)(Object(a.a)({mx:3,overflow:"auto",flexGrow:1},u),{},{children:[Object(x.jsx)(b.Box,{mt:3,mb:2,children:Object(x.jsx)(b.Text,{textTransform:"uppercase",fontWeight:"bold",mb:2,children:d("two_points",{phrase:d("assessment_select_skills_description")})})}),Object(x.jsx)(b.Separator,{width:"100%"}),Object(x.jsx)(b.Box,{mb:20,children:Object(x.jsx)(b.CheckboxGroup,{value:g,onChange:function(e){y(e)},children:n.map((function(e){return Object(x.jsx)(Y,Object(a.a)({},e),e.id)}))})}),Object(x.jsx)(R,{onOpenPopover:p,isOpened:f,onClose:O,buttonLabel:d("add_a_something",{object:d("a_job",1)}),content:Object(x.jsx)(h.JobsNavigator,{buttonLabel:d("add"),onSubmit:function(e){var t=n.map((function(e){return e.id})),i=e.filter((function(e){return!t.includes(e.id)})).map((function(e){return{id:e.id,name:e.name}}));s(i),O()},multiple:!0})})]})),r({text:d("num_selected_jobs",g.length),isSubmitButtonEnabled:g.length>0,onSubmit:function(){i(g)}})]})},Y=function(e){var t=e.id,n=e.name;return Object(x.jsx)(b.Line,{mt:2,children:Object(x.jsxs)(b.Text,{fontWeight:"semiBold",as:"label",children:[Object(x.jsx)(b.Checkbox,{accent:"secondary",mr:1,name:n,value:t}),Object(x.jsx)(b.Icon,{mr:1,as:J.a,size:28}),n]})})},K=function(e){var t=e.evaluationObjects,n=e.evaluationObjectsType,i=e.selectedEvaluationObjects,r=e.isUniqueChoice,a=void 0!==r&&r,s=e.onSubmit,o=e.renderFooter,c=e.onAddEvaluationObjects;return n!==_.AssessmentSkillsScopeType.SKILLS_LIST&&n?n===_.AssessmentSkillsScopeType.EVALUATED_USER_JOBS?Object(x.jsx)(Z,{userJobs:t,onSubmit:s,renderFooter:o,onAddJobs:function(e){c(e)}}):null:Object(x.jsx)(V,{skillsFromList:t||[],initialSelectedSkills:i,isUniqueChoice:a,onSubmit:s,onAddSkills:function(e){var t=e.map((function(e){return{isAccessConditionFullfilled:!0,isRequired:!1,skill:e}}));c(t)},renderFooter:o})},X=["initialSelectedValidators","onSubmit","renderFooter"],$=function(e){var t=e.initialSelectedValidators,n=e.onSubmit,i=e.renderFooter,r=Object(c.a)(e,X),s=Object(b.useTranslate)();return Object(x.jsx)(w,Object(a.a)({initialSelectedUsers:t,description:s("assessment_add_validators_description"),selectedUsersText:function(e){return s("num_validators",e)},onSubmit:n,renderFooter:i},r))},ee=["onClickStepBack","onClickSubmit","isSubmitButtonEnabled","isBackButtonEnabled","counterText","isLoading"],te=function(e){var t=e.onClickStepBack,n=e.onClickSubmit,i=e.isSubmitButtonEnabled,r=void 0===i||i,s=e.isBackButtonEnabled,o=void 0===s||s,l=e.counterText,u=e.isLoading,d=void 0!==u&&u,j=Object(c.a)(e,ee),f=Object(b.useTranslate)();return Object(x.jsxs)(b.Line,Object(a.a)(Object(a.a)({display:"flex",justifyContent:"flex-end",p:3,alignItems:"center",height:100},j),{},{children:[Object(x.jsx)(b.Line,{width:"50%",display:"flex",justifyContent:"flex-end",mr:3,children:Object(x.jsx)(b.Text,{color:"grey.6",fontWeight:"bold",textTransform:"uppercase",children:l})}),Object(x.jsxs)(b.Line,{children:[Object(x.jsx)(b.Button,{onClick:t,disabled:!o,appearance:"outline",mr:2,children:f("back")}),Object(x.jsx)(b.Button,{onClick:n,disabled:!r,isLoading:d,ml:2,children:f("continue")})]})]}))},ne=["assessmentName","userId"],ie=function(e){var t=e.assessmentName,n=e.userId,i=Object(b.useTranslate)();return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(b.Text,{fontSize:"huge",fontWeight:"bold",mx:3,children:i("parameterize_assessment")}),Object(x.jsx)(re,{assessmentName:t,userId:n,mx:3,mb:2})]})},re=function(e){var t=e.assessmentName,n=e.userId,i=Object(c.a)(e,ne),r=Object(b.useTranslate)(),s=Object(j.useGetUserBasicInfosQuery)({variables:{id:n},fetchPolicy:"cache-first"}),o=s.data,u=s.loading,d=Object(l.useMemo)((function(){if(null===o||void 0===o?void 0:o.user)return{id:o.user.id,displayName:o.user.displayName,avatarURL:Object(j.maybeToOptional)(o.user.avatarURL),familyName:Object(j.maybeToOptional)(o.user.familyName),givenName:Object(j.maybeToOptional)(o.user.givenName)}}),[o]);return Object(x.jsxs)(b.Line,Object(a.a)(Object(a.a)({},i),{},{children:[Object(x.jsxs)(b.Text,{children:[r("new_assessment_description_1")," ",Object(x.jsx)(b.Text,{as:"span",fontWeight:"bold",children:t})," ",Object(x.jsx)(b.Text,{as:"span",children:r("two_points",{phrase:r("new_assessment_description_2")})})]}),!u&&d?Object(x.jsx)(h.UserBasicInfo,{user:d,size:"small",pl:0}):Object(x.jsx)(b.Loader,{})]}))},ae=["isOpened","onClose"],se=function(e){var t=e.isOpened,n=e.onClose,i=Object(c.a)(e,ae);return Object(x.jsx)(b.Modal,{isOpened:t,onClose:n,width:"80vw",maxWidth:1480,height:"80vh",maxHeight:780,showCloseButton:!0,children:Object(x.jsx)(b.Box,{display:"flex",flexDirection:"column",overflow:"hidden",height:"100%",children:i.children})})},oe=n(187),ce={evaluationObjects:[],evaluationObjectsType:_.AssessmentSkillsScopeType.SKILLS_LIST,selectedEvaluationObjects:[],isUniqueChoice:!1,selectedAssessors:[],selectedValidators:[],selectedApprovers:[],assessment:{},isLoading:!0},le=function(e){var t,n=Object(O.b)(e),i=n.evaluationObjectsType,r=n.evaluationObjects;switch(i){case _.AssessmentSkillsScopeType.SKILLS_LIST:t=e.selectAllByDefault?r.map((function(e){return e.skill.id})):e.selectedSkillsList||[];break;case _.AssessmentSkillsScopeType.EVALUATED_USER_JOBS:t=e.selectAllByDefault?r.map((function(e){return e.id})):e.selectedEvaluatedUserJobs||[];break;case _.AssessmentSkillsScopeType.LIBRARIES_AND_JOBS:t=e.selectAllByDefault?r.map((function(e){return e.id})):e.selectedLibrariesAndJobs||[]}return{evaluationObjectsType:i,evaluationObjects:r,selectedEvaluationObjects:t,isLoading:!1}},ue=function(e,t){return{selectedAssessors:t.selectedAssessors||e.selectedAssessors,selectedValidators:t.selectedValidators||e.selectedValidators,selectedApprovers:t.selectedApprovers||e.selectedApprovers}},de=function(e){return{isUniqueChoice:e.isUniqueChoice}},be=function(e){return{assessment:e.assessment}},je=function(e,t){return{evaluationObjects:[].concat(Object(m.a)(e.evaluationObjects||[]),Object(m.a)(t.evaluationObjects))}},fe=function(e,t){switch(t.type){case"initEvaluationObjects":return Object(a.a)(Object(a.a)({},e),le(t));case"setSelectedUsers":return Object(a.a)(Object(a.a)({},e),ue(e,t));case"setSelectedEvaluationObjects":return Object(a.a)(Object(a.a)({},e),function(e){return{selectedEvaluationObjects:e.selectedEvaluationObjects}}(t));case"addEvaluationObjects":return Object(a.a)(Object(a.a)({},e),je(e,t));case"setIsUniqueChoice":return Object(a.a)(Object(a.a)({},e),de(t));case"setInitState":return Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)({},e),le(t)),ue(e,t)),de(t)),be(t)),{},{isLoading:!1});default:return e}},pe={evaluationObjects:[],selectedEvaluationObjects:[],evaluationObjectsType:_.AssessmentSkillsScopeType.SKILLS_LIST,assessment:{},isLoading:!0},Oe=function(e,t){switch(t.type){case"setInitState":return Object(a.a)(Object(a.a)(Object(a.a)({},e),le(t)),be(t));case"setSelectedEvaluationObjects":return Object(a.a)(Object(a.a)({},e),{},{selectedEvaluationObjects:t.selectedEvaluationObjects});case"addEvaluationObjects":return Object(a.a)(Object(a.a)({},e),je(e,t));default:return e}},me=["isOpened","onClose","userId","assessmentFormId"],he=["step1","step2","step3","step4"],ve=function(e){var t=e.isOpened,n=e.onClose,i=e.userId,u=e.assessmentFormId,m=Object(c.a)(e,me),h=Object(f.useAppContext)().getErrorMessage,v=Object(d.useHistory)(),g=Object(d.useParams)().step,y=Object(l.useMemo)((function(){return he.indexOf(g)}),[g]),S=Object(b.useAlert)(),k=Object(b.useTranslate)({capitalize:!0}),w=function(e){var t=e.userId,n=e.assessmentFormId,i=Object(l.useReducer)(fe,ce),r=Object(o.a)(i,2),a=r[0],s=r[1],c=Object(j.useGenerateAssessmentMutation)(),u=Object(o.a)(c,1)[0];return Object(l.useEffect)((function(){u({variables:{input:{evaluatedUserId:t,assessmentFormId:n}}}).then((function(e){var t,n,i,r,a,o,c,l,u,d,b,j=e.data,f=null===j||void 0===j?void 0:j.generateAssessment.assessment,p=null===f||void 0===f||null===(t=f.assessmentForm)||void 0===t?void 0:t.skillsScopeConfiguration;f&&("AssessmentFormSkillsFromList"===(null===p||void 0===p?void 0:p.__typename)&&(l=p.skills,d=p.checkAllAsDefault,b=1===p.minimumSelectedSkills&&1===p.maximumSelectedSkills),"AssessmentSkillsFromEvaluatedUserJobs"===f.skillsScope.__typename&&(u=f.skillsScope.userJobs),s({type:"setInitState",skillsList:l,evaluatedUserJobs:u,librariesAndJobs:void 0,selectAllByDefault:d,isUniqueChoice:b,selectedAssessors:null===(n=f.assessors)||void 0===n||null===(i=n.nodes)||void 0===i?void 0:i.map((function(e){return e.id})),selectedValidators:null===(r=f.validators)||void 0===r||null===(a=r.nodes)||void 0===a?void 0:a.map((function(e){return e.id})),selectedApprovers:null===(o=f.approvers)||void 0===o||null===(c=o.nodes)||void 0===c?void 0:c.map((function(e){return e.id})),assessment:{name:f.name}}))}))}),[]),[a,{setSelectedAssessors:function(e){s({type:"setSelectedUsers",selectedAssessors:e})},setSelectedValidators:function(e){s({type:"setSelectedUsers",selectedValidators:e})},setSelectedApprovers:function(e){s({type:"setSelectedUsers",selectedApprovers:e})},setSelectedEvaluationObjects:function(e){s({type:"setSelectedEvaluationObjects",selectedEvaluationObjects:e})},addEvaluationObjects:function(e){s({type:"addEvaluationObjects",evaluationObjects:e})}}]}({userId:i,assessmentFormId:u}),I=Object(o.a)(w,2),C=I[0],T=C.evaluationObjects,_=C.selectedEvaluationObjects,A=C.evaluationObjectsType,P=C.selectedAssessors,D=C.selectedValidators,M=C.selectedApprovers,R=C.isUniqueChoice,B=C.assessment,F=C.isLoading,U=I[1],N=U.setSelectedAssessors,z=U.setSelectedValidators,W=U.setSelectedApprovers,q=U.setSelectedEvaluationObjects,H=U.addEvaluationObjects,V=Object(j.useCreateAssessmentMutation)(),G=Object(o.a)(V,2),J=G[0],Q=G[1].loading,Z=Object(l.useMemo)((function(){return[{title:k("skill",1e3),stepNumber:1},{title:k("assessor",1e3),stepNumber:2},{title:k("validator",1e3),stepNumber:3},{title:k("approver",1e3),stepNumber:4}]}),[]);function Y(){return(Y=Object(s.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W(t),e.next=3,J({variables:{input:{startDate:new Date,evaluatedUserId:i,assessmentFormId:u,assessors:P,validators:D,approvers:t,skillsScope:Object(O.a)(_,A)}}}).then((function(e){var t,n,r=null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.createAssessment.assessment)||void 0===n?void 0:n.id;r&&(S.success(k("success")),v.push(p.b.USER_PROFILE_ASSESSMENT.getRoute({userId:i,assessmentId:r})))})).catch((function(e){S.error(h(e))}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var X=function(){var e=y-1;e<0||!(null===T||void 0===T?void 0:T.length)&&0===e?n():ee(e)},ee=function(e){v.push(p.b.USER_PROFILE_ASSESSMENT_CREATION_STEPS.getRoute({userId:i,formId:u,step:he[e]}))},ne=Object(l.useCallback)((function(e){var t=e.text,n=e.isSubmitButtonEnabled,i=e.onSubmit;return Object(x.jsx)(te,{onClickStepBack:X,onClickSubmit:function(){i&&i(),function(){var e=y+1;e<he.length&&ee(e)}()},isSubmitButtonEnabled:n,counterText:t,isLoading:Q})}),[y,Q]);return Object(x.jsx)(se,{isOpened:t,onClose:n,children:F?Object(x.jsx)(b.Line,{display:"flex",justifyContent:"center",children:Object(x.jsx)(b.Loader,{})}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(b.Box,Object(a.a)(Object(a.a)({width:"100%",display:"flex",flexDirection:"column"},m),{},{children:[Object(x.jsx)(ie,{assessmentName:B.name,userId:i}),Object(x.jsx)(b.Card,{boxShadow:"small",px:3,py:2,width:"100%",children:Object(x.jsx)(b.StepComponent,{currentStepNumber:y+1,stepElements:Z,width:"50%"})})]})),g===he[0]&&null!==A&&Object(x.jsx)(K,{evaluationObjects:T,evaluationObjectsType:A,selectedEvaluationObjects:_,isUniqueChoice:R,onSubmit:q,onAddEvaluationObjects:function(e){H(e)},renderFooter:ne}),g===he[1]&&Object(x.jsx)(L,{initialSelectedAssessors:P,onSubmit:N,renderFooter:ne,py:3,px:4}),g===he[2]&&Object(x.jsx)($,{initialSelectedValidators:D,onSubmit:z,renderFooter:ne,py:3,px:4}),g===he[3]&&Object(x.jsx)(E,{initialSelectedApprovers:M,onSubmit:function(e){return Y.apply(this,arguments)},renderFooter:ne,py:3,px:4})]})})},xe=["assessmentId","userId","isOpened","onClose","onUpdatedSkillsScope"],ge=function(e){var t=e.assessmentId,n=e.userId,i=e.isOpened,u=e.onClose,d=e.onUpdatedSkillsScope,p=Object(c.a)(e,xe),h=Object(f.useAppContext)().getErrorMessage,v=function(e){var t=e.assessmentId,n=Object(l.useReducer)(Oe,pe),i=Object(o.a)(n,2),r=i[0],s=i[1],c=Object(j.useGetAssessmentSkillsScopeQuery)({variables:{id:t},fetchPolicy:"no-cache"}),u=c.data,d=c.refetch;return Object(l.useEffect)((function(){if(u){var e,t,n,i,r,o,c,l,d,b,j,f,p,O,h;if("AssessmentSkillsFromList"===(null===(e=u.assessment)||void 0===e?void 0:e.skillsScope.__typename)&&(c=null===(l=u.assessment.skillsScope.selectedSkills)||void 0===l?void 0:l.reduce((function(e,t){return Object(a.a)(Object(a.a)({},e),{},Object(oe.a)({},t.id,t))}),{})),"AssessmentFormSkillsFromList"===(null===(t=u.assessment)||void 0===t||null===(n=t.assessmentForm)||void 0===n||null===(i=n.skillsScopeConfiguration)||void 0===i?void 0:i.__typename)){var v,x=(d=u.assessment.assessmentForm.skillsScopeConfiguration.skills).map((function(e){var t;return null===e||void 0===e||null===(t=e.skill)||void 0===t?void 0:t.id})),g=Object.values(c||{}).filter((function(e){return!x.includes(e.id)}))||[];d=(v=d||[]).concat.apply(v,Object(m.a)(g.map((function(e){return{isAccessConditionFullfilled:!0,isRequired:!1,skill:e}}))))}"AssessmentSkillsFromEvaluatedUserJobs"===(null===(r=u.assessment)||void 0===r?void 0:r.skillsScope.__typename)&&(b=null===(f=u.assessment)||void 0===f||null===(p=f.skillsScope)||void 0===p?void 0:p.userJobs,j=null===(O=u.assessment)||void 0===O||null===(h=O.skillsScope)||void 0===h?void 0:h.userJobs),s({type:"setInitState",skillsList:d,selectedSkillsList:"undefined"!==typeof c?Object.keys(c):void 0,evaluatedUserJobs:b,selectedEvaluatedUserJobs:j,librariesAndJobs:[],selectedLibrariesAndJobs:[],assessment:{name:null===(o=u.assessment)||void 0===o?void 0:o.name}})}}),[u]),[r,{setSelectedEvaluationObjects:function(e){s({type:"setSelectedEvaluationObjects",selectedEvaluationObjects:e})},addEvaluationObjects:function(e){s({type:"addEvaluationObjects",evaluationObjects:e})},refetchAssessmentSkillsScope:function(){d()}}]}({assessmentId:t}),g=Object(o.a)(v,2),y=g[0],S=y.selectedEvaluationObjects,k=y.evaluationObjects,w=y.evaluationObjectsType,I=y.assessment,C=y.isLoading,E=g[1],T=(E.setSelectedEvaluationObjects,E.addEvaluationObjects),L=E.refetchAssessmentSkillsScope,_=Object(b.useAlert)(),A=Object(b.useTranslate)(),P=Object(j.useUpdateAssessmentSkillsScopeMutation)(),D=Object(o.a)(P,2),M=D[0],R=D[1].loading;function B(){return(B=Object(s.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"undefined"!==typeof w&&M({refetchQueries:["GetAssessment","getAssessment"],variables:{id:t,skillsScope:Object(O.a)(n,w)}}).then((function(){_.success(A("success")),L(),d()})).catch((function(e){_.error(h(e))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(x.jsx)(se,{isOpened:i,onClose:u,children:C||"undefined"===typeof I||"undefined"===typeof w||"undefined"===typeof S?Object(x.jsx)(b.Loader,{}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(b.Box,Object(a.a)(Object(a.a)({width:"100%",display:"flex",flexDirection:"column"},p),{},{children:Object(x.jsx)(ie,{assessmentName:I.name||"",userId:n})})),null!==w&&Object(x.jsx)(K,{evaluationObjects:k,evaluationObjectsType:w,selectedEvaluationObjects:S,onAddEvaluationObjects:function(e){T(e)},onSubmit:function(e){return B.apply(this,arguments)},renderFooter:function(e){var t=e.isSubmitButtonEnabled,n=e.onSubmit,i=e.text;return Object(x.jsx)(te,{onClickStepBack:u,onClickSubmit:n,isSubmitButtonEnabled:t,isBackButtonEnabled:!1,counterText:i,isLoading:R})}})]})})}}}]);